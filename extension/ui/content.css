/* Enhanced Video Downloader - Content Script Styles */

/* Import shared styles */
@import url("./variables.css");
@import url("./components.css");
@import url("./base.css");
@import url("./themes.css");

/* Draggable Enhanced Video Downloader button */
#evd-button {
  /* Apply component classes explicitly since 'composes' is not standard CSS */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background-color: var(--primary);
  color: var(--text-inverse);
  border: none;
  border-radius: var(--radius-md);
  padding: var(--space-md) var(--space-lg);
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-bold);
  cursor: move !important;
  transition: var(--transition-normal);
  text-decoration: none;
  user-select: none !important;
  position: absolute !important;
  top: var(--space-sm) !important;
  right: var(--space-sm) !important;
  z-index: var(--z-max) !important;
  box-shadow: var(--shadow-lg) !important;
}

/* New unified styles for injected floating download button */
.download-button {
  /* Apply component classes explicitly since 'composes' is not standard CSS */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background-color: var(--primary);
  color: var(--text-inverse);
  border: none;
  border-radius: var(--radius-xl);
  position: fixed;
  z-index: var(--z-max);
  user-select: none;
  cursor: pointer;
  padding: 5px;
  font-weight: 500;
  font-size: 1.5rem;
  box-shadow: var(--shadow-xl);
  border: 2px solid transparent;
  transition: transform var(--transition-spring), box-shadow var(--transition-normal), background-color var(--transition-normal), color var(--transition-normal), opacity var(--transition-normal), border-color var(--transition-normal);
}

/* Strong scoping to resist site overrides and other extensions */
button.evd-drag-handle.download-button,
button[id^="evd-download-button-"],
#evd-download-button-main {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  position: fixed !important;
  z-index: var(--z-max) !important;
  padding: 5px !important;
  font-size: 1.5rem !important;
  font-weight: 500 !important;
  border-radius: var(--radius-xl) !important;
  border: 2px solid transparent !important;
  box-shadow: var(--shadow-xl) !important;
  cursor: pointer !important;
  pointer-events: auto !important;
  line-height: 1 !important;
}

/* Hover/active feedback for better reactivity */
.download-button:hover {
  transform: translateY(-1px) scale(1.02);
}

.download-button:active {
  transform: translateY(0) scale(0.98);
  box-shadow: var(--shadow-md);
}

/* Cursor feedback during drag */
.download-button.dragging {
  cursor: grabbing !important;
}

/* JS-toggled micro-bounce on click */
.download-button.clicked {
  animation: evd-click-bounce var(--transition-bounce);
}

@keyframes evd-click-bounce {
  0% { transform: scale(1); }
  50% { transform: scale(0.95); }
  100% { transform: scale(1); }
}

/* Visibility helpers for the floating button */
.evd-visible {
  display: block !important;
  opacity: 1 !important;
}

/* Contrast-aware variants applied dynamically based on page background */
.evd-on-dark {
  background-color: #fff !important;
  color: #000 !important;
  border-color: #000 !important;
}

.evd-on-light {
  background-color: #000 !important;
  color: #fff !important;
  border-color: #fff !important;
}

/* Download feedback states */
.download-sending {
  background-color: var(--success) !important;
  opacity: 0.7;
}

.download-success {
  background-color: var(--success) !important;
  opacity: 0.7;
}

.download-error {
  background-color: var(--error) !important;
  opacity: 0.7;
}

/* Hidden state should fully remove the button from layout and interactions */
button.evd-drag-handle.download-button.hidden,
button[id^="evd-download-button-"].hidden,
#evd-download-button-main.hidden {
  display: none !important;
  opacity: 0 !important;
  pointer-events: none !important;
}
