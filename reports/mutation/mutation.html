<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <script>
      var MutationTestElements = (function (re) {
        "use strict";
        /**
         * @license
         * Copyright 2019 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ const Zt = globalThis,
          Ar =
            Zt.ShadowRoot &&
            (Zt.ShadyCSS === void 0 || Zt.ShadyCSS.nativeShadow) &&
            "adoptedStyleSheets" in Document.prototype &&
            "replace" in CSSStyleSheet.prototype,
          Ln = Symbol(),
          Nn = new WeakMap();
        let ys = class {
          constructor(t, r, n) {
            if (((this._$cssResult$ = !0), n !== Ln))
              throw Error(
                "CSSResult is not constructable. Use `unsafeCSS` or `css` instead."
              );
            (this.cssText = t), (this.t = r);
          }
          get styleSheet() {
            let t = this.o;
            const r = this.t;
            if (Ar && t === void 0) {
              const n = r !== void 0 && r.length === 1;
              n && (t = Nn.get(r)),
                t === void 0 &&
                  ((this.o = t = new CSSStyleSheet()).replaceSync(this.cssText),
                  n && Nn.set(r, t));
            }
            return t;
          }
          toString() {
            return this.cssText;
          }
        };
        const Te = (e) => new ys(typeof e == "string" ? e : e + "", void 0, Ln),
          ws = (e, t) => {
            if (Ar)
              e.adoptedStyleSheets = t.map((r) =>
                r instanceof CSSStyleSheet ? r : r.styleSheet
              );
            else
              for (const r of t) {
                const n = document.createElement("style"),
                  i = Zt.litNonce;
                i !== void 0 && n.setAttribute("nonce", i),
                  (n.textContent = r.cssText),
                  e.appendChild(n);
              }
          },
          Un = Ar
            ? (e) => e
            : (e) =>
                e instanceof CSSStyleSheet
                  ? ((t) => {
                      let r = "";
                      for (const n of t.cssRules) r += n.cssText;
                      return Te(r);
                    })(e)
                  : e;
        /**
         * @license
         * Copyright 2017 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ const {
            is: ks,
            defineProperty: xs,
            getOwnPropertyDescriptor: $s,
            getOwnPropertyNames: _s,
            getOwnPropertySymbols: Ss,
            getPrototypeOf: As,
          } = Object,
          Gt = globalThis,
          Hn = Gt.trustedTypes,
          Cs = Hn ? Hn.emptyScript : "",
          Ms = Gt.reactiveElementPolyfillSupport,
          Ct = (e, t) => e,
          Yt = {
            toAttribute(e, t) {
              switch (t) {
                case Boolean:
                  e = e ? Cs : null;
                  break;
                case Object:
                case Array:
                  e = e == null ? e : JSON.stringify(e);
              }
              return e;
            },
            fromAttribute(e, t) {
              let r = e;
              switch (t) {
                case Boolean:
                  r = e !== null;
                  break;
                case Number:
                  r = e === null ? null : Number(e);
                  break;
                case Object:
                case Array:
                  try {
                    r = JSON.parse(e);
                  } catch {
                    r = null;
                  }
              }
              return r;
            },
          },
          Cr = (e, t) => !ks(e, t),
          qn = {
            attribute: !0,
            type: String,
            converter: Yt,
            reflect: !1,
            useDefault: !1,
            hasChanged: Cr,
          };
        (Symbol.metadata ??= Symbol("metadata")),
          (Gt.litPropertyMetadata ??= new WeakMap());
        let ct = class extends HTMLElement {
          static addInitializer(t) {
            this._$Ei(), (this.l ??= []).push(t);
          }
          static get observedAttributes() {
            return this.finalize(), this._$Eh && [...this._$Eh.keys()];
          }
          static createProperty(t, r = qn) {
            if (
              (r.state && (r.attribute = !1),
              this._$Ei(),
              this.prototype.hasOwnProperty(t) &&
                ((r = Object.create(r)).wrapped = !0),
              this.elementProperties.set(t, r),
              !r.noAccessor)
            ) {
              const n = Symbol(),
                i = this.getPropertyDescriptor(t, n, r);
              i !== void 0 && xs(this.prototype, t, i);
            }
          }
          static getPropertyDescriptor(t, r, n) {
            const { get: i, set: a } = $s(this.prototype, t) ?? {
              get() {
                return this[r];
              },
              set(s) {
                this[r] = s;
              },
            };
            return {
              get: i,
              set(s) {
                const o = i?.call(this);
                a?.call(this, s), this.requestUpdate(t, o, n);
              },
              configurable: !0,
              enumerable: !0,
            };
          }
          static getPropertyOptions(t) {
            return this.elementProperties.get(t) ?? qn;
          }
          static _$Ei() {
            if (this.hasOwnProperty(Ct("elementProperties"))) return;
            const t = As(this);
            t.finalize(),
              t.l !== void 0 && (this.l = [...t.l]),
              (this.elementProperties = new Map(t.elementProperties));
          }
          static finalize() {
            if (this.hasOwnProperty(Ct("finalized"))) return;
            if (
              ((this.finalized = !0),
              this._$Ei(),
              this.hasOwnProperty(Ct("properties")))
            ) {
              const r = this.properties,
                n = [..._s(r), ...Ss(r)];
              for (const i of n) this.createProperty(i, r[i]);
            }
            const t = this[Symbol.metadata];
            if (t !== null) {
              const r = litPropertyMetadata.get(t);
              if (r !== void 0)
                for (const [n, i] of r) this.elementProperties.set(n, i);
            }
            this._$Eh = new Map();
            for (const [r, n] of this.elementProperties) {
              const i = this._$Eu(r, n);
              i !== void 0 && this._$Eh.set(i, r);
            }
            this.elementStyles = this.finalizeStyles(this.styles);
          }
          static finalizeStyles(t) {
            const r = [];
            if (Array.isArray(t)) {
              const n = new Set(t.flat(1 / 0).reverse());
              for (const i of n) r.unshift(Un(i));
            } else t !== void 0 && r.push(Un(t));
            return r;
          }
          static _$Eu(t, r) {
            const n = r.attribute;
            return n === !1
              ? void 0
              : typeof n == "string"
              ? n
              : typeof t == "string"
              ? t.toLowerCase()
              : void 0;
          }
          constructor() {
            super(),
              (this._$Ep = void 0),
              (this.isUpdatePending = !1),
              (this.hasUpdated = !1),
              (this._$Em = null),
              this._$Ev();
          }
          _$Ev() {
            (this._$ES = new Promise((t) => (this.enableUpdating = t))),
              (this._$AL = new Map()),
              this._$E_(),
              this.requestUpdate(),
              this.constructor.l?.forEach((t) => t(this));
          }
          addController(t) {
            (this._$EO ??= new Set()).add(t),
              this.renderRoot !== void 0 &&
                this.isConnected &&
                t.hostConnected?.();
          }
          removeController(t) {
            this._$EO?.delete(t);
          }
          _$E_() {
            const t = new Map(),
              r = this.constructor.elementProperties;
            for (const n of r.keys())
              this.hasOwnProperty(n) && (t.set(n, this[n]), delete this[n]);
            t.size > 0 && (this._$Ep = t);
          }
          createRenderRoot() {
            const t =
              this.shadowRoot ??
              this.attachShadow(this.constructor.shadowRootOptions);
            return ws(t, this.constructor.elementStyles), t;
          }
          connectedCallback() {
            (this.renderRoot ??= this.createRenderRoot()),
              this.enableUpdating(!0),
              this._$EO?.forEach((t) => t.hostConnected?.());
          }
          enableUpdating(t) {}
          disconnectedCallback() {
            this._$EO?.forEach((t) => t.hostDisconnected?.());
          }
          attributeChangedCallback(t, r, n) {
            this._$AK(t, n);
          }
          _$ET(t, r) {
            const n = this.constructor.elementProperties.get(t),
              i = this.constructor._$Eu(t, n);
            if (i !== void 0 && n.reflect === !0) {
              const a = (
                n.converter?.toAttribute !== void 0 ? n.converter : Yt
              ).toAttribute(r, n.type);
              (this._$Em = t),
                a == null ? this.removeAttribute(i) : this.setAttribute(i, a),
                (this._$Em = null);
            }
          }
          _$AK(t, r) {
            const n = this.constructor,
              i = n._$Eh.get(t);
            if (i !== void 0 && this._$Em !== i) {
              const a = n.getPropertyOptions(i),
                s =
                  typeof a.converter == "function"
                    ? { fromAttribute: a.converter }
                    : a.converter?.fromAttribute !== void 0
                    ? a.converter
                    : Yt;
              (this._$Em = i),
                (this[i] =
                  s.fromAttribute(r, a.type) ?? this._$Ej?.get(i) ?? null),
                (this._$Em = null);
            }
          }
          requestUpdate(t, r, n) {
            if (t !== void 0) {
              const i = this.constructor,
                a = this[t];
              if (
                ((n ??= i.getPropertyOptions(t)),
                !(
                  (n.hasChanged ?? Cr)(a, r) ||
                  (n.useDefault &&
                    n.reflect &&
                    a === this._$Ej?.get(t) &&
                    !this.hasAttribute(i._$Eu(t, n)))
                ))
              )
                return;
              this.C(t, r, n);
            }
            this.isUpdatePending === !1 && (this._$ES = this._$EP());
          }
          C(t, r, { useDefault: n, reflect: i, wrapped: a }, s) {
            (n &&
              !(this._$Ej ??= new Map()).has(t) &&
              (this._$Ej.set(t, s ?? r ?? this[t]),
              a !== !0 || s !== void 0)) ||
              (this._$AL.has(t) ||
                (this.hasUpdated || n || (r = void 0), this._$AL.set(t, r)),
              i === !0 && this._$Em !== t && (this._$Eq ??= new Set()).add(t));
          }
          async _$EP() {
            this.isUpdatePending = !0;
            try {
              await this._$ES;
            } catch (r) {
              Promise.reject(r);
            }
            const t = this.scheduleUpdate();
            return t != null && (await t), !this.isUpdatePending;
          }
          scheduleUpdate() {
            return this.performUpdate();
          }
          performUpdate() {
            if (!this.isUpdatePending) return;
            if (!this.hasUpdated) {
              if (((this.renderRoot ??= this.createRenderRoot()), this._$Ep)) {
                for (const [i, a] of this._$Ep) this[i] = a;
                this._$Ep = void 0;
              }
              const n = this.constructor.elementProperties;
              if (n.size > 0)
                for (const [i, a] of n) {
                  const { wrapped: s } = a,
                    o = this[i];
                  s !== !0 ||
                    this._$AL.has(i) ||
                    o === void 0 ||
                    this.C(i, void 0, a, o);
                }
            }
            let t = !1;
            const r = this._$AL;
            try {
              (t = this.shouldUpdate(r)),
                t
                  ? (this.willUpdate(r),
                    this._$EO?.forEach((n) => n.hostUpdate?.()),
                    this.update(r))
                  : this._$EM();
            } catch (n) {
              throw ((t = !1), this._$EM(), n);
            }
            t && this._$AE(r);
          }
          willUpdate(t) {}
          _$AE(t) {
            this._$EO?.forEach((r) => r.hostUpdated?.()),
              this.hasUpdated || ((this.hasUpdated = !0), this.firstUpdated(t)),
              this.updated(t);
          }
          _$EM() {
            (this._$AL = new Map()), (this.isUpdatePending = !1);
          }
          get updateComplete() {
            return this.getUpdateComplete();
          }
          getUpdateComplete() {
            return this._$ES;
          }
          shouldUpdate(t) {
            return !0;
          }
          update(t) {
            (this._$Eq &&= this._$Eq.forEach((r) => this._$ET(r, this[r]))),
              this._$EM();
          }
          updated(t) {}
          firstUpdated(t) {}
        };
        (ct.elementStyles = []),
          (ct.shadowRootOptions = { mode: "open" }),
          (ct[Ct("elementProperties")] = new Map()),
          (ct[Ct("finalized")] = new Map()),
          Ms?.({ ReactiveElement: ct }),
          (Gt.reactiveElementVersions ??= []).push("2.1.0");
        /**
         * @license
         * Copyright 2017 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ const Mr = globalThis,
          Jt = Mr.trustedTypes,
          Vn = Jt
            ? Jt.createPolicy("lit-html", { createHTML: (e) => e })
            : void 0,
          Wn = "$lit$",
          Ne = `lit$${Math.random().toFixed(9).slice(2)}$`,
          Kn = "?" + Ne,
          Es = `<${Kn}>`,
          Ye = document,
          Mt = () => Ye.createComment(""),
          Et = (e) =>
            e === null || (typeof e != "object" && typeof e != "function"),
          Er = Array.isArray,
          Ts = (e) => Er(e) || typeof e?.[Symbol.iterator] == "function",
          Tr = `[ 	
\f\r]`,
          Tt = /<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,
          Zn = /-->/g,
          Gn = />/g,
          Je = RegExp(
            `>|${Tr}(?:([^\\s"'>=/]+)(${Tr}*=${Tr}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,
            "g"
          ),
          Yn = /'/g,
          Jn = /"/g,
          Qn = /^(?:script|style|textarea|title)$/i,
          Xn =
            (e) =>
            (t, ...r) => ({ _$litType$: e, strings: t, values: r }),
          b = Xn(1),
          ee = Xn(2),
          Pe = Symbol.for("lit-noChange"),
          P = Symbol.for("lit-nothing"),
          ei = new WeakMap(),
          Qe = Ye.createTreeWalker(Ye, 129);
        function ti(e, t) {
          if (!Er(e) || !e.hasOwnProperty("raw"))
            throw Error("invalid template strings array");
          return Vn !== void 0 ? Vn.createHTML(t) : t;
        }
        const Ps = (e, t) => {
          const r = e.length - 1,
            n = [];
          let i,
            a = t === 2 ? "<svg>" : t === 3 ? "<math>" : "",
            s = Tt;
          for (let o = 0; o < r; o++) {
            const l = e[o];
            let u,
              x,
              v = -1,
              $ = 0;
            for (
              ;
              $ < l.length && ((s.lastIndex = $), (x = s.exec(l)), x !== null);

            )
              ($ = s.lastIndex),
                s === Tt
                  ? x[1] === "!--"
                    ? (s = Zn)
                    : x[1] !== void 0
                    ? (s = Gn)
                    : x[2] !== void 0
                    ? (Qn.test(x[2]) && (i = RegExp("</" + x[2], "g")),
                      (s = Je))
                    : x[3] !== void 0 && (s = Je)
                  : s === Je
                  ? x[0] === ">"
                    ? ((s = i ?? Tt), (v = -1))
                    : x[1] === void 0
                    ? (v = -2)
                    : ((v = s.lastIndex - x[2].length),
                      (u = x[1]),
                      (s = x[3] === void 0 ? Je : x[3] === '"' ? Jn : Yn))
                  : s === Jn || s === Yn
                  ? (s = Je)
                  : s === Zn || s === Gn
                  ? (s = Tt)
                  : ((s = Je), (i = void 0));
            const y = s === Je && e[o + 1].startsWith("/>") ? " " : "";
            a +=
              s === Tt
                ? l + Es
                : v >= 0
                ? (n.push(u), l.slice(0, v) + Wn + l.slice(v) + Ne + y)
                : l + Ne + (v === -2 ? o : y);
          }
          return [
            ti(
              e,
              a +
                (e[r] || "<?>") +
                (t === 2 ? "</svg>" : t === 3 ? "</math>" : "")
            ),
            n,
          ];
        };
        class Pt {
          constructor({ strings: t, _$litType$: r }, n) {
            let i;
            this.parts = [];
            let a = 0,
              s = 0;
            const o = t.length - 1,
              l = this.parts,
              [u, x] = Ps(t, r);
            if (
              ((this.el = Pt.createElement(u, n)),
              (Qe.currentNode = this.el.content),
              r === 2 || r === 3)
            ) {
              const v = this.el.content.firstChild;
              v.replaceWith(...v.childNodes);
            }
            for (; (i = Qe.nextNode()) !== null && l.length < o; ) {
              if (i.nodeType === 1) {
                if (i.hasAttributes())
                  for (const v of i.getAttributeNames())
                    if (v.endsWith(Wn)) {
                      const $ = x[s++],
                        y = i.getAttribute(v).split(Ne),
                        C = /([.?@])?(.*)/.exec($);
                      l.push({
                        type: 1,
                        index: a,
                        name: C[2],
                        strings: y,
                        ctor:
                          C[1] === "."
                            ? Fs
                            : C[1] === "?"
                            ? Os
                            : C[1] === "@"
                            ? Is
                            : Qt,
                      }),
                        i.removeAttribute(v);
                    } else
                      v.startsWith(Ne) &&
                        (l.push({ type: 6, index: a }), i.removeAttribute(v));
                if (Qn.test(i.tagName)) {
                  const v = i.textContent.split(Ne),
                    $ = v.length - 1;
                  if ($ > 0) {
                    i.textContent = Jt ? Jt.emptyScript : "";
                    for (let y = 0; y < $; y++)
                      i.append(v[y], Mt()),
                        Qe.nextNode(),
                        l.push({ type: 2, index: ++a });
                    i.append(v[$], Mt());
                  }
                }
              } else if (i.nodeType === 8)
                if (i.data === Kn) l.push({ type: 2, index: a });
                else {
                  let v = -1;
                  for (; (v = i.data.indexOf(Ne, v + 1)) !== -1; )
                    l.push({ type: 7, index: a }), (v += Ne.length - 1);
                }
              a++;
            }
          }
          static createElement(t, r) {
            const n = Ye.createElement("template");
            return (n.innerHTML = t), n;
          }
        }
        function ut(e, t, r = e, n) {
          if (t === Pe) return t;
          let i = n !== void 0 ? r._$Co?.[n] : r._$Cl;
          const a = Et(t) ? void 0 : t._$litDirective$;
          return (
            i?.constructor !== a &&
              (i?._$AO?.(!1),
              a === void 0 ? (i = void 0) : ((i = new a(e)), i._$AT(e, r, n)),
              n !== void 0 ? ((r._$Co ??= [])[n] = i) : (r._$Cl = i)),
            i !== void 0 && (t = ut(e, i._$AS(e, t.values), i, n)),
            t
          );
        }
        let zs = class {
          constructor(t, r) {
            (this._$AV = []),
              (this._$AN = void 0),
              (this._$AD = t),
              (this._$AM = r);
          }
          get parentNode() {
            return this._$AM.parentNode;
          }
          get _$AU() {
            return this._$AM._$AU;
          }
          u(t) {
            const {
                el: { content: r },
                parts: n,
              } = this._$AD,
              i = (t?.creationScope ?? Ye).importNode(r, !0);
            Qe.currentNode = i;
            let a = Qe.nextNode(),
              s = 0,
              o = 0,
              l = n[0];
            for (; l !== void 0; ) {
              if (s === l.index) {
                let u;
                l.type === 2
                  ? (u = new dt(a, a.nextSibling, this, t))
                  : l.type === 1
                  ? (u = new l.ctor(a, l.name, l.strings, this, t))
                  : l.type === 6 && (u = new Rs(a, this, t)),
                  this._$AV.push(u),
                  (l = n[++o]);
              }
              s !== l?.index && ((a = Qe.nextNode()), s++);
            }
            return (Qe.currentNode = Ye), i;
          }
          p(t) {
            let r = 0;
            for (const n of this._$AV)
              n !== void 0 &&
                (n.strings !== void 0
                  ? (n._$AI(t, n, r), (r += n.strings.length - 2))
                  : n._$AI(t[r])),
                r++;
          }
        };
        class dt {
          get _$AU() {
            return this._$AM?._$AU ?? this._$Cv;
          }
          constructor(t, r, n, i) {
            (this.type = 2),
              (this._$AH = P),
              (this._$AN = void 0),
              (this._$AA = t),
              (this._$AB = r),
              (this._$AM = n),
              (this.options = i),
              (this._$Cv = i?.isConnected ?? !0);
          }
          get parentNode() {
            let t = this._$AA.parentNode;
            const r = this._$AM;
            return r !== void 0 && t?.nodeType === 11 && (t = r.parentNode), t;
          }
          get startNode() {
            return this._$AA;
          }
          get endNode() {
            return this._$AB;
          }
          _$AI(t, r = this) {
            (t = ut(this, t, r)),
              Et(t)
                ? t === P || t == null || t === ""
                  ? (this._$AH !== P && this._$AR(), (this._$AH = P))
                  : t !== this._$AH && t !== Pe && this._(t)
                : t._$litType$ !== void 0
                ? this.$(t)
                : t.nodeType !== void 0
                ? this.T(t)
                : Ts(t)
                ? this.k(t)
                : this._(t);
          }
          O(t) {
            return this._$AA.parentNode.insertBefore(t, this._$AB);
          }
          T(t) {
            this._$AH !== t && (this._$AR(), (this._$AH = this.O(t)));
          }
          _(t) {
            this._$AH !== P && Et(this._$AH)
              ? (this._$AA.nextSibling.data = t)
              : this.T(Ye.createTextNode(t)),
              (this._$AH = t);
          }
          $(t) {
            const { values: r, _$litType$: n } = t,
              i =
                typeof n == "number"
                  ? this._$AC(t)
                  : (n.el === void 0 &&
                      (n.el = Pt.createElement(ti(n.h, n.h[0]), this.options)),
                    n);
            if (this._$AH?._$AD === i) this._$AH.p(r);
            else {
              const a = new zs(i, this),
                s = a.u(this.options);
              a.p(r), this.T(s), (this._$AH = a);
            }
          }
          _$AC(t) {
            let r = ei.get(t.strings);
            return r === void 0 && ei.set(t.strings, (r = new Pt(t))), r;
          }
          k(t) {
            Er(this._$AH) || ((this._$AH = []), this._$AR());
            const r = this._$AH;
            let n,
              i = 0;
            for (const a of t)
              i === r.length
                ? r.push(
                    (n = new dt(this.O(Mt()), this.O(Mt()), this, this.options))
                  )
                : (n = r[i]),
                n._$AI(a),
                i++;
            i < r.length &&
              (this._$AR(n && n._$AB.nextSibling, i), (r.length = i));
          }
          _$AR(t = this._$AA.nextSibling, r) {
            for (this._$AP?.(!1, !0, r); t && t !== this._$AB; ) {
              const n = t.nextSibling;
              t.remove(), (t = n);
            }
          }
          setConnected(t) {
            this._$AM === void 0 && ((this._$Cv = t), this._$AP?.(t));
          }
        }
        class Qt {
          get tagName() {
            return this.element.tagName;
          }
          get _$AU() {
            return this._$AM._$AU;
          }
          constructor(t, r, n, i, a) {
            (this.type = 1),
              (this._$AH = P),
              (this._$AN = void 0),
              (this.element = t),
              (this.name = r),
              (this._$AM = i),
              (this.options = a),
              n.length > 2 || n[0] !== "" || n[1] !== ""
                ? ((this._$AH = Array(n.length - 1).fill(new String())),
                  (this.strings = n))
                : (this._$AH = P);
          }
          _$AI(t, r = this, n, i) {
            const a = this.strings;
            let s = !1;
            if (a === void 0)
              (t = ut(this, t, r, 0)),
                (s = !Et(t) || (t !== this._$AH && t !== Pe)),
                s && (this._$AH = t);
            else {
              const o = t;
              let l, u;
              for (t = a[0], l = 0; l < a.length - 1; l++)
                (u = ut(this, o[n + l], r, l)),
                  u === Pe && (u = this._$AH[l]),
                  (s ||= !Et(u) || u !== this._$AH[l]),
                  u === P ? (t = P) : t !== P && (t += (u ?? "") + a[l + 1]),
                  (this._$AH[l] = u);
            }
            s && !i && this.j(t);
          }
          j(t) {
            t === P
              ? this.element.removeAttribute(this.name)
              : this.element.setAttribute(this.name, t ?? "");
          }
        }
        class Fs extends Qt {
          constructor() {
            super(...arguments), (this.type = 3);
          }
          j(t) {
            this.element[this.name] = t === P ? void 0 : t;
          }
        }
        class Os extends Qt {
          constructor() {
            super(...arguments), (this.type = 4);
          }
          j(t) {
            this.element.toggleAttribute(this.name, !!t && t !== P);
          }
        }
        class Is extends Qt {
          constructor(t, r, n, i, a) {
            super(t, r, n, i, a), (this.type = 5);
          }
          _$AI(t, r = this) {
            if ((t = ut(this, t, r, 0) ?? P) === Pe) return;
            const n = this._$AH,
              i =
                (t === P && n !== P) ||
                t.capture !== n.capture ||
                t.once !== n.once ||
                t.passive !== n.passive,
              a = t !== P && (n === P || i);
            i && this.element.removeEventListener(this.name, this, n),
              a && this.element.addEventListener(this.name, this, t),
              (this._$AH = t);
          }
          handleEvent(t) {
            typeof this._$AH == "function"
              ? this._$AH.call(this.options?.host ?? this.element, t)
              : this._$AH.handleEvent(t);
          }
        }
        class Rs {
          constructor(t, r, n) {
            (this.element = t),
              (this.type = 6),
              (this._$AN = void 0),
              (this._$AM = r),
              (this.options = n);
          }
          get _$AU() {
            return this._$AM._$AU;
          }
          _$AI(t) {
            ut(this, t);
          }
        }
        const Ds = { I: dt },
          Bs = Mr.litHtmlPolyfillSupport;
        Bs?.(Pt, dt), (Mr.litHtmlVersions ??= []).push("3.3.0");
        const js = (e, t, r) => {
          const n = r?.renderBefore ?? t;
          let i = n._$litPart$;
          if (i === void 0) {
            const a = r?.renderBefore ?? null;
            n._$litPart$ = i = new dt(
              t.insertBefore(Mt(), a),
              a,
              void 0,
              r ?? {}
            );
          }
          return i._$AI(e), i;
        };
        /**
         * @license
         * Copyright 2017 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ const Pr = globalThis;
        let zt = class extends ct {
          constructor() {
            super(...arguments),
              (this.renderOptions = { host: this }),
              (this._$Do = void 0);
          }
          createRenderRoot() {
            const t = super.createRenderRoot();
            return (this.renderOptions.renderBefore ??= t.firstChild), t;
          }
          update(t) {
            const r = this.render();
            this.hasUpdated ||
              (this.renderOptions.isConnected = this.isConnected),
              super.update(t),
              (this._$Do = js(r, this.renderRoot, this.renderOptions));
          }
          connectedCallback() {
            super.connectedCallback(), this._$Do?.setConnected(!0);
          }
          disconnectedCallback() {
            super.disconnectedCallback(), this._$Do?.setConnected(!1);
          }
          render() {
            return Pe;
          }
        };
        (zt._$litElement$ = !0),
          (zt.finalized = !0),
          Pr.litElementHydrateSupport?.({ LitElement: zt });
        const Ls = Pr.litElementPolyfillSupport;
        Ls?.({ LitElement: zt }), (Pr.litElementVersions ??= []).push("4.2.0");
        /**
         * @license
         * Copyright 2017 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ const se = (e) => (t, r) => {
          r !== void 0
            ? r.addInitializer(() => {
                customElements.define(e, t);
              })
            : customElements.define(e, t);
        };
        /**
         * @license
         * Copyright 2017 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ const Ns = {
            attribute: !0,
            type: String,
            converter: Yt,
            reflect: !1,
            hasChanged: Cr,
          },
          Us = (e = Ns, t, r) => {
            const { kind: n, metadata: i } = r;
            let a = globalThis.litPropertyMetadata.get(i);
            if (
              (a === void 0 &&
                globalThis.litPropertyMetadata.set(i, (a = new Map())),
              n === "setter" && ((e = Object.create(e)).wrapped = !0),
              a.set(r.name, e),
              n === "accessor")
            ) {
              const { name: s } = r;
              return {
                set(o) {
                  const l = t.get.call(this);
                  t.set.call(this, o), this.requestUpdate(s, l, e);
                },
                init(o) {
                  return o !== void 0 && this.C(s, void 0, e, o), o;
                },
              };
            }
            if (n === "setter") {
              const { name: s } = r;
              return function (o) {
                const l = this[s];
                t.call(this, o), this.requestUpdate(s, l, e);
              };
            }
            throw Error("Unsupported decorator location: " + n);
          };
        function I(e) {
          return (t, r) =>
            typeof r == "object"
              ? Us(e, t, r)
              : ((n, i, a) => {
                  const s = i.hasOwnProperty(a);
                  return (
                    i.constructor.createProperty(a, n),
                    s ? Object.getOwnPropertyDescriptor(i, a) : void 0
                  );
                })(e, t, r);
        }
        /**
         * @license
         * Copyright 2017 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ function he(e) {
          return I({ ...e, state: !0, attribute: !1 });
        }
        /**
         * @license
         * Copyright 2017 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ const Hs = (e, t, r) => (
          (r.configurable = !0),
          (r.enumerable = !0),
          Reflect.decorate &&
            typeof t != "object" &&
            Object.defineProperty(e, t, r),
          r
        );
        /**
         * @license
         * Copyright 2017 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ function Xt(e, t) {
          return (r, n, i) => {
            const a = (s) => s.renderRoot?.querySelector(e) ?? null;
            return Hs(r, n, {
              get() {
                return a(this);
              },
            });
          };
        }
        /**
         * @license
         * Copyright 2018 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ const Ft = (e) => e ?? P,
          qs = "/";
        function ri(e, t, r) {
          const n = Object.keys(e),
            i = Vs(n),
            a = Object.create(null);
          return (
            n.forEach((s) => {
              const o = ni(s.startsWith(t) ? s.substr(t.length) : s);
              a[ni(s.substr(i.length))] = r(e[s], o);
            }),
            a
          );
        }
        function ni(e) {
          return e.split(/\/|\\/).filter(Boolean).join("/");
        }
        function Vs(e) {
          const t = e.map((n) => n.split(/\/|\\/).slice(0, -1));
          if (e.length) return t.reduce(r).join(qs);
          return "";
          function r(n, i) {
            for (let a = 0; a < n.length; a++)
              if (n[a] !== i[a]) return n.splice(0, a);
            return n;
          }
        }
        function Ws(e, t) {
          const r = (n) => (n.file ? `1${n.name}` : `0${n.name}`);
          return r(e).localeCompare(r(t));
        }
        function Ks(e, t) {
          return e.reduce((r, n) => {
            const i = t(n);
            return (
              Object.prototype.hasOwnProperty.call(r, i) || (r[i] = []),
              r[i].push(n),
              r
            );
          }, {});
        }
        var Se;
        (function (e) {
          (e[(e.maxAsciiCharacter = 127)] = "maxAsciiCharacter"),
            (e[(e.lineFeed = 10)] = "lineFeed"),
            (e[(e.carriageReturn = 13)] = "carriageReturn"),
            (e[(e.lineSeparator = 8232)] = "lineSeparator"),
            (e[(e.paragraphSeparator = 8233)] = "paragraphSeparator");
        })(Se || (Se = {}));
        function Zs(e) {
          return (
            e === Se.lineFeed ||
            e === Se.carriageReturn ||
            e === Se.lineSeparator ||
            e === Se.paragraphSeparator
          );
        }
        function Gs(e) {
          const t = [];
          let r = 0,
            n = 0;
          function i(a) {
            t.push(n), (n = a);
          }
          for (i(0); r < e.length; ) {
            const a = e.charCodeAt(r);
            switch ((r++, a)) {
              case Se.carriageReturn:
                e.charCodeAt(r) === Se.lineFeed && r++, i(r);
                break;
              case Se.lineFeed:
                i(r);
                break;
              default:
                a > Se.maxAsciiCharacter && Zs(a) && i(r);
                break;
            }
          }
          return t.push(n), t;
        }
        function zr(e) {
          if (e === void 0)
            throw new Error("mutant.sourceFile was not defined");
        }
        class Ys {
          coveredBy;
          description;
          duration;
          id;
          killedBy;
          location;
          mutatorName;
          replacement;
          static;
          status;
          statusReason;
          testsCompleted;
          get coveredByTests() {
            if (this.#e.size) return Array.from(this.#e.values());
          }
          set coveredByTests(t) {
            this.#e = new Map(t.map((r) => [r.id, r]));
          }
          get killedByTests() {
            if (this.#t.size) return Array.from(this.#t.values());
          }
          set killedByTests(t) {
            this.#t = new Map(t.map((r) => [r.id, r]));
          }
          #e = new Map();
          #t = new Map();
          constructor(t) {
            (this.coveredBy = t.coveredBy),
              (this.description = t.description),
              (this.duration = t.duration),
              (this.id = t.id),
              (this.killedBy = t.killedBy),
              (this.location = t.location),
              (this.mutatorName = t.mutatorName),
              (this.replacement = t.replacement),
              (this.static = t.static),
              (this.status = t.status),
              (this.statusReason = t.statusReason),
              (this.testsCompleted = t.testsCompleted);
          }
          addCoveredBy(t) {
            this.#e.set(t.id, t);
          }
          addKilledBy(t) {
            this.#t.set(t.id, t);
          }
          getMutatedLines() {
            return zr(this.sourceFile), this.sourceFile.getMutationLines(this);
          }
          getOriginalLines() {
            return zr(this.sourceFile), this.sourceFile.getLines(this.location);
          }
          get fileName() {
            return zr(this.sourceFile), this.sourceFile.name;
          }
          update() {
            this.sourceFile?.result?.file &&
              this.sourceFile.result.updateAllMetrics();
          }
        }
        function ii(e) {
          if (e === void 0) throw new Error("sourceFile.source is undefined");
        }
        class ai {
          lineMap;
          getLineMap() {
            return (
              ii(this.source), this.lineMap ?? (this.lineMap = Gs(this.source))
            );
          }
          getLines(t) {
            ii(this.source);
            const r = this.getLineMap();
            return this.source.substring(
              r[t.start.line],
              r[(t.end ?? t.start).line + 1]
            );
          }
        }
        class Js extends ai {
          name;
          language;
          source;
          mutants;
          result;
          constructor(t, r) {
            super(),
              (this.name = r),
              (this.language = t.language),
              (this.source = t.source),
              (this.mutants = t.mutants.map((n) => {
                const i = new Ys(n);
                return (i.sourceFile = this), i;
              }));
          }
          getMutationLines(t) {
            const r = this.getLineMap(),
              n = r[t.location.start.line],
              i = r[t.location.end.line],
              a = r[t.location.end.line + 1];
            return `${this.source.substr(n, t.location.start.column - 1)}${
              t.replacement ?? t.description ?? t.mutatorName
            }${this.source.substring(i + t.location.end.column - 1, a)}`;
          }
        }
        class si {
          parent;
          name;
          file;
          childResults;
          metrics;
          constructor(t, r, n, i) {
            (this.name = t),
              (this.childResults = r),
              (this.metrics = n),
              (this.file = i);
          }
          updateParent(t) {
            (this.parent = t),
              this.childResults.forEach((r) => r.updateParent(this));
          }
          updateAllMetrics() {
            if (this.parent !== void 0) {
              this.parent.updateAllMetrics();
              return;
            }
            this.updateMetrics();
          }
          updateMetrics() {
            if (this.file === void 0) {
              this.childResults.forEach((r) => {
                r.updateMetrics();
              });
              const t = this.#e(this.childResults);
              if (t.length === 0) return;
              t[0].tests ? (this.metrics = Or(t)) : (this.metrics = er(t));
              return;
            }
            this.file.tests
              ? (this.metrics = Or([this.file]))
              : (this.metrics = er([this.file]));
          }
          #e(t) {
            const r = [];
            return (
              t.length === 0 ||
                t.forEach((n) => {
                  if (n.file) {
                    r.push(n.file);
                    return;
                  }
                  r.push(...this.#e(n.childResults));
                }),
              r
            );
          }
        }
        function oi(e) {
          if (e === void 0) throw new Error("test.sourceFile was not defined");
        }
        function Qs(e) {
          if (e === void 0) throw new Error("test.location was not defined");
        }
        var ne;
        (function (e) {
          (e.Killing = "Killing"),
            (e.Covering = "Covering"),
            (e.NotCovering = "NotCovering");
        })(ne || (ne = {}));
        class Xs {
          id;
          name;
          location;
          get killedMutants() {
            if (this.#e.size) return Array.from(this.#e.values());
          }
          get coveredMutants() {
            if (this.#t.size) return Array.from(this.#t.values());
          }
          #e = new Map();
          #t = new Map();
          addCovered(t) {
            this.#t.set(t.id, t);
          }
          addKilled(t) {
            this.#e.set(t.id, t);
          }
          constructor(t) {
            Object.entries(t).forEach(([r, n]) => {
              this[r] = n;
            });
          }
          getLines() {
            return (
              oi(this.sourceFile),
              Qs(this.location),
              this.sourceFile.getLines(this.location)
            );
          }
          get fileName() {
            return oi(this.sourceFile), this.sourceFile.name;
          }
          get status() {
            return this.#e.size
              ? ne.Killing
              : this.#t.size
              ? ne.Covering
              : ne.NotCovering;
          }
          update() {
            this.sourceFile?.result?.file &&
              this.sourceFile.result.updateAllMetrics();
          }
        }
        class li extends ai {
          name;
          tests;
          source;
          result;
          constructor(t, r) {
            super(),
              (this.name = r),
              (this.source = t.source),
              (this.tests = t.tests.map((n) => {
                const i = new Xs(n);
                return (i.sourceFile = this), i;
              }));
          }
        }
        const ci = NaN,
          ui = "All files",
          eo = "All tests";
        function to(e) {
          const { files: t, testFiles: r, projectRoot: n = "" } = e,
            i = ri(t, n, (a, s) => new Js(a, s));
          if (r && Object.keys(r).length) {
            const a = ri(r, n, (s, o) => new li(s, o));
            return (
              no(
                Object.values(i).flatMap((s) => s.mutants),
                Object.values(a).flatMap((s) => s.tests)
              ),
              {
                systemUnderTestMetrics: Fr(ui, i, er),
                testMetrics: Fr(eo, a, Or),
              }
            );
          }
          return { systemUnderTestMetrics: Fr(ui, i, er), testMetrics: void 0 };
        }
        function Fr(e, t, r) {
          const n = Object.keys(t);
          return n.length === 1 && n[0] === ""
            ? hi(e, t[n[0]], r)
            : di(e, t, r);
        }
        function di(e, t, r) {
          const n = r(Object.values(t)),
            i = ro(t, r);
          return new si(e, i, n);
        }
        function hi(e, t, r) {
          return new si(e, [], r([t]), t);
        }
        function ro(e, t) {
          const r = Ks(Object.entries(e), (n) => n[0].split("/")[0]);
          return Object.keys(r)
            .map((n) => {
              if (r[n].length > 1 || r[n][0][0] !== n) {
                const i = {};
                return (
                  r[n].forEach((a) => (i[a[0].substr(n.length + 1)] = a[1])),
                  di(n, i, t)
                );
              } else {
                const [i, a] = r[n][0];
                return hi(i, a, t);
              }
            })
            .sort(Ws);
        }
        function no(e, t) {
          const r = new Map(t.map((n) => [n.id, n]));
          for (const n of e) {
            const i = n.coveredBy ?? [];
            for (const s of i) {
              const o = r.get(s);
              o && (n.addCoveredBy(o), o.addCovered(n));
            }
            const a = n.killedBy ?? [];
            for (const s of a) {
              const o = r.get(s);
              o && (n.addKilledBy(o), o.addKilled(n));
            }
          }
        }
        function Or(e) {
          const t = e.flatMap((n) => n.tests),
            r = (n) => t.filter((i) => i.status === n).length;
          return {
            total: t.length,
            killing: r(ne.Killing),
            covering: r(ne.Covering),
            notCovering: r(ne.NotCovering),
          };
        }
        function er(e) {
          const t = e.flatMap((H) => H.mutants),
            r = (H) => t.filter((X) => X.status === H).length,
            n = r("Pending"),
            i = r("Killed"),
            a = r("Timeout"),
            s = r("Survived"),
            o = r("NoCoverage"),
            l = r("RuntimeError"),
            u = r("CompileError"),
            x = r("Ignored"),
            v = a + i,
            $ = s + o,
            y = v + s,
            C = $ + v,
            z = l + u;
          return {
            pending: n,
            killed: i,
            timeout: a,
            survived: s,
            noCoverage: o,
            runtimeErrors: l,
            compileErrors: u,
            ignored: x,
            totalDetected: v,
            totalUndetected: $,
            totalCovered: y,
            totalValid: C,
            totalInvalid: z,
            mutationScore: C > 0 ? (v / C) * 100 : ci,
            totalMutants: C + z + x + n,
            mutationScoreBasedOnCoveredCode: C > 0 ? (v / y) * 100 || 0 : ci,
          };
        }
        var Ir = function (e, t) {
          return (
            (Ir =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (r, n) {
                  r.__proto__ = n;
                }) ||
              function (r, n) {
                for (var i in n)
                  Object.prototype.hasOwnProperty.call(n, i) && (r[i] = n[i]);
              }),
            Ir(e, t)
          );
        };
        function Ue(e, t) {
          if (typeof t != "function" && t !== null)
            throw new TypeError(
              "Class extends value " +
                String(t) +
                " is not a constructor or null"
            );
          Ir(e, t);
          function r() {
            this.constructor = e;
          }
          e.prototype =
            t === null
              ? Object.create(t)
              : ((r.prototype = t.prototype), new r());
        }
        function io(e, t, r, n) {
          function i(a) {
            return a instanceof r
              ? a
              : new r(function (s) {
                  s(a);
                });
          }
          return new (r || (r = Promise))(function (a, s) {
            function o(x) {
              try {
                u(n.next(x));
              } catch (v) {
                s(v);
              }
            }
            function l(x) {
              try {
                u(n.throw(x));
              } catch (v) {
                s(v);
              }
            }
            function u(x) {
              x.done ? a(x.value) : i(x.value).then(o, l);
            }
            u((n = n.apply(e, t || [])).next());
          });
        }
        function pi(e, t) {
          var r = {
              label: 0,
              sent: function () {
                if (a[0] & 1) throw a[1];
                return a[1];
              },
              trys: [],
              ops: [],
            },
            n,
            i,
            a,
            s = Object.create(
              (typeof Iterator == "function" ? Iterator : Object).prototype
            );
          return (
            (s.next = o(0)),
            (s.throw = o(1)),
            (s.return = o(2)),
            typeof Symbol == "function" &&
              (s[Symbol.iterator] = function () {
                return this;
              }),
            s
          );
          function o(u) {
            return function (x) {
              return l([u, x]);
            };
          }
          function l(u) {
            if (n) throw new TypeError("Generator is already executing.");
            for (; s && ((s = 0), u[0] && (r = 0)), r; )
              try {
                if (
                  ((n = 1),
                  i &&
                    (a =
                      u[0] & 2
                        ? i.return
                        : u[0]
                        ? i.throw || ((a = i.return) && a.call(i), 0)
                        : i.next) &&
                    !(a = a.call(i, u[1])).done)
                )
                  return a;
                switch (((i = 0), a && (u = [u[0] & 2, a.value]), u[0])) {
                  case 0:
                  case 1:
                    a = u;
                    break;
                  case 4:
                    return r.label++, { value: u[1], done: !1 };
                  case 5:
                    r.label++, (i = u[1]), (u = [0]);
                    continue;
                  case 7:
                    (u = r.ops.pop()), r.trys.pop();
                    continue;
                  default:
                    if (
                      ((a = r.trys),
                      !(a = a.length > 0 && a[a.length - 1]) &&
                        (u[0] === 6 || u[0] === 2))
                    ) {
                      r = 0;
                      continue;
                    }
                    if (u[0] === 3 && (!a || (u[1] > a[0] && u[1] < a[3]))) {
                      r.label = u[1];
                      break;
                    }
                    if (u[0] === 6 && r.label < a[1]) {
                      (r.label = a[1]), (a = u);
                      break;
                    }
                    if (a && r.label < a[2]) {
                      (r.label = a[2]), r.ops.push(u);
                      break;
                    }
                    a[2] && r.ops.pop(), r.trys.pop();
                    continue;
                }
                u = t.call(e, r);
              } catch (x) {
                (u = [6, x]), (i = 0);
              } finally {
                n = a = 0;
              }
            if (u[0] & 5) throw u[1];
            return { value: u[0] ? u[1] : void 0, done: !0 };
          }
        }
        function ht(e) {
          var t = typeof Symbol == "function" && Symbol.iterator,
            r = t && e[t],
            n = 0;
          if (r) return r.call(e);
          if (e && typeof e.length == "number")
            return {
              next: function () {
                return (
                  e && n >= e.length && (e = void 0),
                  { value: e && e[n++], done: !e }
                );
              },
            };
          throw new TypeError(
            t ? "Object is not iterable." : "Symbol.iterator is not defined."
          );
        }
        function pt(e, t) {
          var r = typeof Symbol == "function" && e[Symbol.iterator];
          if (!r) return e;
          var n = r.call(e),
            i,
            a = [],
            s;
          try {
            for (; (t === void 0 || t-- > 0) && !(i = n.next()).done; )
              a.push(i.value);
          } catch (o) {
            s = { error: o };
          } finally {
            try {
              i && !i.done && (r = n.return) && r.call(n);
            } finally {
              if (s) throw s.error;
            }
          }
          return a;
        }
        function Ot(e, t, r) {
          if (r || arguments.length === 2)
            for (var n = 0, i = t.length, a; n < i; n++)
              (a || !(n in t)) &&
                (a || (a = Array.prototype.slice.call(t, 0, n)), (a[n] = t[n]));
          return e.concat(a || Array.prototype.slice.call(t));
        }
        function ft(e) {
          return this instanceof ft ? ((this.v = e), this) : new ft(e);
        }
        function ao(e, t, r) {
          if (!Symbol.asyncIterator)
            throw new TypeError("Symbol.asyncIterator is not defined.");
          var n = r.apply(e, t || []),
            i,
            a = [];
          return (
            (i = Object.create(
              (typeof AsyncIterator == "function" ? AsyncIterator : Object)
                .prototype
            )),
            o("next"),
            o("throw"),
            o("return", s),
            (i[Symbol.asyncIterator] = function () {
              return this;
            }),
            i
          );
          function s(y) {
            return function (C) {
              return Promise.resolve(C).then(y, v);
            };
          }
          function o(y, C) {
            n[y] &&
              ((i[y] = function (z) {
                return new Promise(function (H, X) {
                  a.push([y, z, H, X]) > 1 || l(y, z);
                });
              }),
              C && (i[y] = C(i[y])));
          }
          function l(y, C) {
            try {
              u(n[y](C));
            } catch (z) {
              $(a[0][3], z);
            }
          }
          function u(y) {
            y.value instanceof ft
              ? Promise.resolve(y.value.v).then(x, v)
              : $(a[0][2], y);
          }
          function x(y) {
            l("next", y);
          }
          function v(y) {
            l("throw", y);
          }
          function $(y, C) {
            y(C), a.shift(), a.length && l(a[0][0], a[0][1]);
          }
        }
        function so(e) {
          if (!Symbol.asyncIterator)
            throw new TypeError("Symbol.asyncIterator is not defined.");
          var t = e[Symbol.asyncIterator],
            r;
          return t
            ? t.call(e)
            : ((e = typeof ht == "function" ? ht(e) : e[Symbol.iterator]()),
              (r = {}),
              n("next"),
              n("throw"),
              n("return"),
              (r[Symbol.asyncIterator] = function () {
                return this;
              }),
              r);
          function n(a) {
            r[a] =
              e[a] &&
              function (s) {
                return new Promise(function (o, l) {
                  (s = e[a](s)), i(o, l, s.done, s.value);
                });
              };
          }
          function i(a, s, o, l) {
            Promise.resolve(l).then(function (u) {
              a({ value: u, done: o });
            }, s);
          }
        }
        typeof SuppressedError == "function" && SuppressedError;
        function K(e) {
          return typeof e == "function";
        }
        function fi(e) {
          var t = function (n) {
              Error.call(n), (n.stack = new Error().stack);
            },
            r = e(t);
          return (
            (r.prototype = Object.create(Error.prototype)),
            (r.prototype.constructor = r),
            r
          );
        }
        var Rr = fi(function (e) {
          return function (r) {
            e(this),
              (this.message = r
                ? r.length +
                  ` errors occurred during unsubscription:
` +
                  r.map(function (n, i) {
                    return i + 1 + ") " + n.toString();
                  }).join(`
  `)
                : ""),
              (this.name = "UnsubscriptionError"),
              (this.errors = r);
          };
        });
        function tr(e, t) {
          if (e) {
            var r = e.indexOf(t);
            0 <= r && e.splice(r, 1);
          }
        }
        var gt = (function () {
            function e(t) {
              (this.initialTeardown = t),
                (this.closed = !1),
                (this._parentage = null),
                (this._finalizers = null);
            }
            return (
              (e.prototype.unsubscribe = function () {
                var t, r, n, i, a;
                if (!this.closed) {
                  this.closed = !0;
                  var s = this._parentage;
                  if (s)
                    if (((this._parentage = null), Array.isArray(s)))
                      try {
                        for (
                          var o = ht(s), l = o.next();
                          !l.done;
                          l = o.next()
                        ) {
                          var u = l.value;
                          u.remove(this);
                        }
                      } catch (z) {
                        t = { error: z };
                      } finally {
                        try {
                          l && !l.done && (r = o.return) && r.call(o);
                        } finally {
                          if (t) throw t.error;
                        }
                      }
                    else s.remove(this);
                  var x = this.initialTeardown;
                  if (K(x))
                    try {
                      x();
                    } catch (z) {
                      a = z instanceof Rr ? z.errors : [z];
                    }
                  var v = this._finalizers;
                  if (v) {
                    this._finalizers = null;
                    try {
                      for (var $ = ht(v), y = $.next(); !y.done; y = $.next()) {
                        var C = y.value;
                        try {
                          vi(C);
                        } catch (z) {
                          (a = a ?? []),
                            z instanceof Rr
                              ? (a = Ot(Ot([], pt(a)), pt(z.errors)))
                              : a.push(z);
                        }
                      }
                    } catch (z) {
                      n = { error: z };
                    } finally {
                      try {
                        y && !y.done && (i = $.return) && i.call($);
                      } finally {
                        if (n) throw n.error;
                      }
                    }
                  }
                  if (a) throw new Rr(a);
                }
              }),
              (e.prototype.add = function (t) {
                var r;
                if (t && t !== this)
                  if (this.closed) vi(t);
                  else {
                    if (t instanceof e) {
                      if (t.closed || t._hasParent(this)) return;
                      t._addParent(this);
                    }
                    (this._finalizers =
                      (r = this._finalizers) !== null && r !== void 0
                        ? r
                        : []).push(t);
                  }
              }),
              (e.prototype._hasParent = function (t) {
                var r = this._parentage;
                return r === t || (Array.isArray(r) && r.includes(t));
              }),
              (e.prototype._addParent = function (t) {
                var r = this._parentage;
                this._parentage = Array.isArray(r)
                  ? (r.push(t), r)
                  : r
                  ? [r, t]
                  : t;
              }),
              (e.prototype._removeParent = function (t) {
                var r = this._parentage;
                r === t
                  ? (this._parentage = null)
                  : Array.isArray(r) && tr(r, t);
              }),
              (e.prototype.remove = function (t) {
                var r = this._finalizers;
                r && tr(r, t), t instanceof e && t._removeParent(this);
              }),
              (e.EMPTY = (function () {
                var t = new e();
                return (t.closed = !0), t;
              })()),
              e
            );
          })(),
          gi = gt.EMPTY;
        function mi(e) {
          return (
            e instanceof gt ||
            (e && "closed" in e && K(e.remove) && K(e.add) && K(e.unsubscribe))
          );
        }
        function vi(e) {
          K(e) ? e() : e.unsubscribe();
        }
        var oo = { Promise: void 0 },
          lo = {
            setTimeout: function (e, t) {
              for (var r = [], n = 2; n < arguments.length; n++)
                r[n - 2] = arguments[n];
              return setTimeout.apply(void 0, Ot([e, t], pt(r)));
            },
            clearTimeout: function (e) {
              return clearTimeout(e);
            },
            delegate: void 0,
          };
        function bi(e) {
          lo.setTimeout(function () {
            throw e;
          });
        }
        function Dr() {}
        function rr(e) {
          e();
        }
        var Br = (function (e) {
            Ue(t, e);
            function t(r) {
              var n = e.call(this) || this;
              return (
                (n.isStopped = !1),
                r
                  ? ((n.destination = r), mi(r) && r.add(n))
                  : (n.destination = ho),
                n
              );
            }
            return (
              (t.create = function (r, n, i) {
                return new jr(r, n, i);
              }),
              (t.prototype.next = function (r) {
                this.isStopped || this._next(r);
              }),
              (t.prototype.error = function (r) {
                this.isStopped || ((this.isStopped = !0), this._error(r));
              }),
              (t.prototype.complete = function () {
                this.isStopped || ((this.isStopped = !0), this._complete());
              }),
              (t.prototype.unsubscribe = function () {
                this.closed ||
                  ((this.isStopped = !0),
                  e.prototype.unsubscribe.call(this),
                  (this.destination = null));
              }),
              (t.prototype._next = function (r) {
                this.destination.next(r);
              }),
              (t.prototype._error = function (r) {
                try {
                  this.destination.error(r);
                } finally {
                  this.unsubscribe();
                }
              }),
              (t.prototype._complete = function () {
                try {
                  this.destination.complete();
                } finally {
                  this.unsubscribe();
                }
              }),
              t
            );
          })(gt),
          co = (function () {
            function e(t) {
              this.partialObserver = t;
            }
            return (
              (e.prototype.next = function (t) {
                var r = this.partialObserver;
                if (r.next)
                  try {
                    r.next(t);
                  } catch (n) {
                    nr(n);
                  }
              }),
              (e.prototype.error = function (t) {
                var r = this.partialObserver;
                if (r.error)
                  try {
                    r.error(t);
                  } catch (n) {
                    nr(n);
                  }
                else nr(t);
              }),
              (e.prototype.complete = function () {
                var t = this.partialObserver;
                if (t.complete)
                  try {
                    t.complete();
                  } catch (r) {
                    nr(r);
                  }
              }),
              e
            );
          })(),
          jr = (function (e) {
            Ue(t, e);
            function t(r, n, i) {
              var a = e.call(this) || this,
                s;
              return (
                K(r) || !r
                  ? (s = {
                      next: r ?? void 0,
                      error: n ?? void 0,
                      complete: i ?? void 0,
                    })
                  : (s = r),
                (a.destination = new co(s)),
                a
              );
            }
            return t;
          })(Br);
        function nr(e) {
          bi(e);
        }
        function uo(e) {
          throw e;
        }
        var ho = { closed: !0, next: Dr, error: uo, complete: Dr },
          Lr = (function () {
            return (
              (typeof Symbol == "function" && Symbol.observable) ||
              "@@observable"
            );
          })();
        function Nr(e) {
          return e;
        }
        function po(e) {
          return e.length === 0
            ? Nr
            : e.length === 1
            ? e[0]
            : function (r) {
                return e.reduce(function (n, i) {
                  return i(n);
                }, r);
              };
        }
        var pe = (function () {
          function e(t) {
            t && (this._subscribe = t);
          }
          return (
            (e.prototype.lift = function (t) {
              var r = new e();
              return (r.source = this), (r.operator = t), r;
            }),
            (e.prototype.subscribe = function (t, r, n) {
              var i = this,
                a = go(t) ? t : new jr(t, r, n);
              return (
                rr(function () {
                  var s = i,
                    o = s.operator,
                    l = s.source;
                  a.add(
                    o ? o.call(a, l) : l ? i._subscribe(a) : i._trySubscribe(a)
                  );
                }),
                a
              );
            }),
            (e.prototype._trySubscribe = function (t) {
              try {
                return this._subscribe(t);
              } catch (r) {
                t.error(r);
              }
            }),
            (e.prototype.forEach = function (t, r) {
              var n = this;
              return (
                (r = yi(r)),
                new r(function (i, a) {
                  var s = new jr({
                    next: function (o) {
                      try {
                        t(o);
                      } catch (l) {
                        a(l), s.unsubscribe();
                      }
                    },
                    error: a,
                    complete: i,
                  });
                  n.subscribe(s);
                })
              );
            }),
            (e.prototype._subscribe = function (t) {
              var r;
              return (r = this.source) === null || r === void 0
                ? void 0
                : r.subscribe(t);
            }),
            (e.prototype[Lr] = function () {
              return this;
            }),
            (e.prototype.pipe = function () {
              for (var t = [], r = 0; r < arguments.length; r++)
                t[r] = arguments[r];
              return po(t)(this);
            }),
            (e.prototype.toPromise = function (t) {
              var r = this;
              return (
                (t = yi(t)),
                new t(function (n, i) {
                  var a;
                  r.subscribe(
                    function (s) {
                      return (a = s);
                    },
                    function (s) {
                      return i(s);
                    },
                    function () {
                      return n(a);
                    }
                  );
                })
              );
            }),
            (e.create = function (t) {
              return new e(t);
            }),
            e
          );
        })();
        function yi(e) {
          var t;
          return (t = e ?? oo.Promise) !== null && t !== void 0 ? t : Promise;
        }
        function fo(e) {
          return e && K(e.next) && K(e.error) && K(e.complete);
        }
        function go(e) {
          return (e && e instanceof Br) || (fo(e) && mi(e));
        }
        function mo(e) {
          return K(e?.lift);
        }
        function mt(e) {
          return function (t) {
            if (mo(t))
              return t.lift(function (r) {
                try {
                  return e(r, this);
                } catch (n) {
                  this.error(n);
                }
              });
            throw new TypeError("Unable to lift unknown Observable type");
          };
        }
        function Xe(e, t, r, n, i) {
          return new vo(e, t, r, n, i);
        }
        var vo = (function (e) {
            Ue(t, e);
            function t(r, n, i, a, s, o) {
              var l = e.call(this, r) || this;
              return (
                (l.onFinalize = s),
                (l.shouldUnsubscribe = o),
                (l._next = n
                  ? function (u) {
                      try {
                        n(u);
                      } catch (x) {
                        r.error(x);
                      }
                    }
                  : e.prototype._next),
                (l._error = a
                  ? function (u) {
                      try {
                        a(u);
                      } catch (x) {
                        r.error(x);
                      } finally {
                        this.unsubscribe();
                      }
                    }
                  : e.prototype._error),
                (l._complete = i
                  ? function () {
                      try {
                        i();
                      } catch (u) {
                        r.error(u);
                      } finally {
                        this.unsubscribe();
                      }
                    }
                  : e.prototype._complete),
                l
              );
            }
            return (
              (t.prototype.unsubscribe = function () {
                var r;
                if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {
                  var n = this.closed;
                  e.prototype.unsubscribe.call(this),
                    !n &&
                      ((r = this.onFinalize) === null ||
                        r === void 0 ||
                        r.call(this));
                }
              }),
              t
            );
          })(Br),
          bo = fi(function (e) {
            return function () {
              e(this),
                (this.name = "ObjectUnsubscribedError"),
                (this.message = "object unsubscribed");
            };
          }),
          wi = (function (e) {
            Ue(t, e);
            function t() {
              var r = e.call(this) || this;
              return (
                (r.closed = !1),
                (r.currentObservers = null),
                (r.observers = []),
                (r.isStopped = !1),
                (r.hasError = !1),
                (r.thrownError = null),
                r
              );
            }
            return (
              (t.prototype.lift = function (r) {
                var n = new ki(this, this);
                return (n.operator = r), n;
              }),
              (t.prototype._throwIfClosed = function () {
                if (this.closed) throw new bo();
              }),
              (t.prototype.next = function (r) {
                var n = this;
                rr(function () {
                  var i, a;
                  if ((n._throwIfClosed(), !n.isStopped)) {
                    n.currentObservers ||
                      (n.currentObservers = Array.from(n.observers));
                    try {
                      for (
                        var s = ht(n.currentObservers), o = s.next();
                        !o.done;
                        o = s.next()
                      ) {
                        var l = o.value;
                        l.next(r);
                      }
                    } catch (u) {
                      i = { error: u };
                    } finally {
                      try {
                        o && !o.done && (a = s.return) && a.call(s);
                      } finally {
                        if (i) throw i.error;
                      }
                    }
                  }
                });
              }),
              (t.prototype.error = function (r) {
                var n = this;
                rr(function () {
                  if ((n._throwIfClosed(), !n.isStopped)) {
                    (n.hasError = n.isStopped = !0), (n.thrownError = r);
                    for (var i = n.observers; i.length; ) i.shift().error(r);
                  }
                });
              }),
              (t.prototype.complete = function () {
                var r = this;
                rr(function () {
                  if ((r._throwIfClosed(), !r.isStopped)) {
                    r.isStopped = !0;
                    for (var n = r.observers; n.length; ) n.shift().complete();
                  }
                });
              }),
              (t.prototype.unsubscribe = function () {
                (this.isStopped = this.closed = !0),
                  (this.observers = this.currentObservers = null);
              }),
              Object.defineProperty(t.prototype, "observed", {
                get: function () {
                  var r;
                  return (
                    ((r = this.observers) === null || r === void 0
                      ? void 0
                      : r.length) > 0
                  );
                },
                enumerable: !1,
                configurable: !0,
              }),
              (t.prototype._trySubscribe = function (r) {
                return (
                  this._throwIfClosed(), e.prototype._trySubscribe.call(this, r)
                );
              }),
              (t.prototype._subscribe = function (r) {
                return (
                  this._throwIfClosed(),
                  this._checkFinalizedStatuses(r),
                  this._innerSubscribe(r)
                );
              }),
              (t.prototype._innerSubscribe = function (r) {
                var n = this,
                  i = this,
                  a = i.hasError,
                  s = i.isStopped,
                  o = i.observers;
                return a || s
                  ? gi
                  : ((this.currentObservers = null),
                    o.push(r),
                    new gt(function () {
                      (n.currentObservers = null), tr(o, r);
                    }));
              }),
              (t.prototype._checkFinalizedStatuses = function (r) {
                var n = this,
                  i = n.hasError,
                  a = n.thrownError,
                  s = n.isStopped;
                i ? r.error(a) : s && r.complete();
              }),
              (t.prototype.asObservable = function () {
                var r = new pe();
                return (r.source = this), r;
              }),
              (t.create = function (r, n) {
                return new ki(r, n);
              }),
              t
            );
          })(pe),
          ki = (function (e) {
            Ue(t, e);
            function t(r, n) {
              var i = e.call(this) || this;
              return (i.destination = r), (i.source = n), i;
            }
            return (
              (t.prototype.next = function (r) {
                var n, i;
                (i =
                  (n = this.destination) === null || n === void 0
                    ? void 0
                    : n.next) === null ||
                  i === void 0 ||
                  i.call(n, r);
              }),
              (t.prototype.error = function (r) {
                var n, i;
                (i =
                  (n = this.destination) === null || n === void 0
                    ? void 0
                    : n.error) === null ||
                  i === void 0 ||
                  i.call(n, r);
              }),
              (t.prototype.complete = function () {
                var r, n;
                (n =
                  (r = this.destination) === null || r === void 0
                    ? void 0
                    : r.complete) === null ||
                  n === void 0 ||
                  n.call(r);
              }),
              (t.prototype._subscribe = function (r) {
                var n, i;
                return (i =
                  (n = this.source) === null || n === void 0
                    ? void 0
                    : n.subscribe(r)) !== null && i !== void 0
                  ? i
                  : gi;
              }),
              t
            );
          })(wi),
          yo = {
            now: function () {
              return Date.now();
            },
          },
          wo = (function (e) {
            Ue(t, e);
            function t(r, n) {
              return e.call(this) || this;
            }
            return (
              (t.prototype.schedule = function (r, n) {
                return this;
              }),
              t
            );
          })(gt),
          xi = {
            setInterval: function (e, t) {
              for (var r = [], n = 2; n < arguments.length; n++)
                r[n - 2] = arguments[n];
              return setInterval.apply(void 0, Ot([e, t], pt(r)));
            },
            clearInterval: function (e) {
              return clearInterval(e);
            },
            delegate: void 0,
          },
          ko = (function (e) {
            Ue(t, e);
            function t(r, n) {
              var i = e.call(this, r, n) || this;
              return (i.scheduler = r), (i.work = n), (i.pending = !1), i;
            }
            return (
              (t.prototype.schedule = function (r, n) {
                var i;
                if ((n === void 0 && (n = 0), this.closed)) return this;
                this.state = r;
                var a = this.id,
                  s = this.scheduler;
                return (
                  a != null && (this.id = this.recycleAsyncId(s, a, n)),
                  (this.pending = !0),
                  (this.delay = n),
                  (this.id =
                    (i = this.id) !== null && i !== void 0
                      ? i
                      : this.requestAsyncId(s, this.id, n)),
                  this
                );
              }),
              (t.prototype.requestAsyncId = function (r, n, i) {
                return (
                  i === void 0 && (i = 0),
                  xi.setInterval(r.flush.bind(r, this), i)
                );
              }),
              (t.prototype.recycleAsyncId = function (r, n, i) {
                if (
                  (i === void 0 && (i = 0),
                  i != null && this.delay === i && this.pending === !1)
                )
                  return n;
                n != null && xi.clearInterval(n);
              }),
              (t.prototype.execute = function (r, n) {
                if (this.closed)
                  return new Error("executing a cancelled action");
                this.pending = !1;
                var i = this._execute(r, n);
                if (i) return i;
                this.pending === !1 &&
                  this.id != null &&
                  (this.id = this.recycleAsyncId(
                    this.scheduler,
                    this.id,
                    null
                  ));
              }),
              (t.prototype._execute = function (r, n) {
                var i = !1,
                  a;
                try {
                  this.work(r);
                } catch (s) {
                  (i = !0),
                    (a = s || new Error("Scheduled action threw falsy error"));
                }
                if (i) return this.unsubscribe(), a;
              }),
              (t.prototype.unsubscribe = function () {
                if (!this.closed) {
                  var r = this,
                    n = r.id,
                    i = r.scheduler,
                    a = i.actions;
                  (this.work = this.state = this.scheduler = null),
                    (this.pending = !1),
                    tr(a, this),
                    n != null && (this.id = this.recycleAsyncId(i, n, null)),
                    (this.delay = null),
                    e.prototype.unsubscribe.call(this);
                }
              }),
              t
            );
          })(wo),
          $i = (function () {
            function e(t, r) {
              r === void 0 && (r = e.now),
                (this.schedulerActionCtor = t),
                (this.now = r);
            }
            return (
              (e.prototype.schedule = function (t, r, n) {
                return (
                  r === void 0 && (r = 0),
                  new this.schedulerActionCtor(this, t).schedule(n, r)
                );
              }),
              (e.now = yo.now),
              e
            );
          })(),
          xo = (function (e) {
            Ue(t, e);
            function t(r, n) {
              n === void 0 && (n = $i.now);
              var i = e.call(this, r, n) || this;
              return (i.actions = []), (i._active = !1), i;
            }
            return (
              (t.prototype.flush = function (r) {
                var n = this.actions;
                if (this._active) {
                  n.push(r);
                  return;
                }
                var i;
                this._active = !0;
                do if ((i = r.execute(r.state, r.delay))) break;
                while ((r = n.shift()));
                if (((this._active = !1), i)) {
                  for (; (r = n.shift()); ) r.unsubscribe();
                  throw i;
                }
              }),
              t
            );
          })($i),
          Ur = new xo(ko),
          $o = Ur,
          _o = new pe(function (e) {
            return e.complete();
          });
        function _i(e) {
          return e && K(e.schedule);
        }
        function Si(e) {
          return e[e.length - 1];
        }
        function Ai(e) {
          return _i(Si(e)) ? e.pop() : void 0;
        }
        function So(e, t) {
          return typeof Si(e) == "number" ? e.pop() : t;
        }
        var Hr = function (e) {
          return e && typeof e.length == "number" && typeof e != "function";
        };
        function Ci(e) {
          return K(e?.then);
        }
        function Mi(e) {
          return K(e[Lr]);
        }
        function Ei(e) {
          return Symbol.asyncIterator && K(e?.[Symbol.asyncIterator]);
        }
        function Ti(e) {
          return new TypeError(
            "You provided " +
              (e !== null && typeof e == "object"
                ? "an invalid object"
                : "'" + e + "'") +
              " where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable."
          );
        }
        function Ao() {
          return typeof Symbol != "function" || !Symbol.iterator
            ? "@@iterator"
            : Symbol.iterator;
        }
        var Pi = Ao();
        function zi(e) {
          return K(e?.[Pi]);
        }
        function Fi(e) {
          return ao(this, arguments, function () {
            var r, n, i, a;
            return pi(this, function (s) {
              switch (s.label) {
                case 0:
                  (r = e.getReader()), (s.label = 1);
                case 1:
                  s.trys.push([1, , 9, 10]), (s.label = 2);
                case 2:
                  return [4, ft(r.read())];
                case 3:
                  return (
                    (n = s.sent()),
                    (i = n.value),
                    (a = n.done),
                    a ? [4, ft(void 0)] : [3, 5]
                  );
                case 4:
                  return [2, s.sent()];
                case 5:
                  return [4, ft(i)];
                case 6:
                  return [4, s.sent()];
                case 7:
                  return s.sent(), [3, 2];
                case 8:
                  return [3, 10];
                case 9:
                  return r.releaseLock(), [7];
                case 10:
                  return [2];
              }
            });
          });
        }
        function Oi(e) {
          return K(e?.getReader);
        }
        function He(e) {
          if (e instanceof pe) return e;
          if (e != null) {
            if (Mi(e)) return Co(e);
            if (Hr(e)) return Mo(e);
            if (Ci(e)) return Eo(e);
            if (Ei(e)) return Ii(e);
            if (zi(e)) return To(e);
            if (Oi(e)) return Po(e);
          }
          throw Ti(e);
        }
        function Co(e) {
          return new pe(function (t) {
            var r = e[Lr]();
            if (K(r.subscribe)) return r.subscribe(t);
            throw new TypeError(
              "Provided object does not correctly implement Symbol.observable"
            );
          });
        }
        function Mo(e) {
          return new pe(function (t) {
            for (var r = 0; r < e.length && !t.closed; r++) t.next(e[r]);
            t.complete();
          });
        }
        function Eo(e) {
          return new pe(function (t) {
            e.then(
              function (r) {
                t.closed || (t.next(r), t.complete());
              },
              function (r) {
                return t.error(r);
              }
            ).then(null, bi);
          });
        }
        function To(e) {
          return new pe(function (t) {
            var r, n;
            try {
              for (var i = ht(e), a = i.next(); !a.done; a = i.next()) {
                var s = a.value;
                if ((t.next(s), t.closed)) return;
              }
            } catch (o) {
              r = { error: o };
            } finally {
              try {
                a && !a.done && (n = i.return) && n.call(i);
              } finally {
                if (r) throw r.error;
              }
            }
            t.complete();
          });
        }
        function Ii(e) {
          return new pe(function (t) {
            zo(e, t).catch(function (r) {
              return t.error(r);
            });
          });
        }
        function Po(e) {
          return Ii(Fi(e));
        }
        function zo(e, t) {
          var r, n, i, a;
          return io(this, void 0, void 0, function () {
            var s, o;
            return pi(this, function (l) {
              switch (l.label) {
                case 0:
                  l.trys.push([0, 5, 6, 11]), (r = so(e)), (l.label = 1);
                case 1:
                  return [4, r.next()];
                case 2:
                  if (((n = l.sent()), !!n.done)) return [3, 4];
                  if (((s = n.value), t.next(s), t.closed)) return [2];
                  l.label = 3;
                case 3:
                  return [3, 1];
                case 4:
                  return [3, 11];
                case 5:
                  return (o = l.sent()), (i = { error: o }), [3, 11];
                case 6:
                  return (
                    l.trys.push([6, , 9, 10]),
                    n && !n.done && (a = r.return) ? [4, a.call(r)] : [3, 8]
                  );
                case 7:
                  l.sent(), (l.label = 8);
                case 8:
                  return [3, 10];
                case 9:
                  if (i) throw i.error;
                  return [7];
                case 10:
                  return [7];
                case 11:
                  return t.complete(), [2];
              }
            });
          });
        }
        function et(e, t, r, n, i) {
          n === void 0 && (n = 0), i === void 0 && (i = !1);
          var a = t.schedule(function () {
            r(), i ? e.add(this.schedule(null, n)) : this.unsubscribe();
          }, n);
          if ((e.add(a), !i)) return a;
        }
        function Ri(e, t) {
          return (
            t === void 0 && (t = 0),
            mt(function (r, n) {
              r.subscribe(
                Xe(
                  n,
                  function (i) {
                    return et(
                      n,
                      e,
                      function () {
                        return n.next(i);
                      },
                      t
                    );
                  },
                  function () {
                    return et(
                      n,
                      e,
                      function () {
                        return n.complete();
                      },
                      t
                    );
                  },
                  function (i) {
                    return et(
                      n,
                      e,
                      function () {
                        return n.error(i);
                      },
                      t
                    );
                  }
                )
              );
            })
          );
        }
        function Di(e, t) {
          return (
            t === void 0 && (t = 0),
            mt(function (r, n) {
              n.add(
                e.schedule(function () {
                  return r.subscribe(n);
                }, t)
              );
            })
          );
        }
        function Fo(e, t) {
          return He(e).pipe(Di(t), Ri(t));
        }
        function Oo(e, t) {
          return He(e).pipe(Di(t), Ri(t));
        }
        function Io(e, t) {
          return new pe(function (r) {
            var n = 0;
            return t.schedule(function () {
              n === e.length
                ? r.complete()
                : (r.next(e[n++]), r.closed || this.schedule());
            });
          });
        }
        function Ro(e, t) {
          return new pe(function (r) {
            var n;
            return (
              et(r, t, function () {
                (n = e[Pi]()),
                  et(
                    r,
                    t,
                    function () {
                      var i, a, s;
                      try {
                        (i = n.next()), (a = i.value), (s = i.done);
                      } catch (o) {
                        r.error(o);
                        return;
                      }
                      s ? r.complete() : r.next(a);
                    },
                    0,
                    !0
                  );
              }),
              function () {
                return K(n?.return) && n.return();
              }
            );
          });
        }
        function Bi(e, t) {
          if (!e) throw new Error("Iterable cannot be null");
          return new pe(function (r) {
            et(r, t, function () {
              var n = e[Symbol.asyncIterator]();
              et(
                r,
                t,
                function () {
                  n.next().then(function (i) {
                    i.done ? r.complete() : r.next(i.value);
                  });
                },
                0,
                !0
              );
            });
          });
        }
        function Do(e, t) {
          return Bi(Fi(e), t);
        }
        function Bo(e, t) {
          if (e != null) {
            if (Mi(e)) return Fo(e, t);
            if (Hr(e)) return Io(e, t);
            if (Ci(e)) return Oo(e, t);
            if (Ei(e)) return Bi(e, t);
            if (zi(e)) return Ro(e, t);
            if (Oi(e)) return Do(e, t);
          }
          throw Ti(e);
        }
        function ji(e, t) {
          return t ? Bo(e, t) : He(e);
        }
        function jo() {
          for (var e = [], t = 0; t < arguments.length; t++)
            e[t] = arguments[t];
          var r = Ai(e);
          return ji(e, r);
        }
        function Lo(e) {
          return e instanceof Date && !isNaN(e);
        }
        function qr(e, t) {
          return mt(function (r, n) {
            var i = 0;
            r.subscribe(
              Xe(n, function (a) {
                n.next(e.call(t, a, i++));
              })
            );
          });
        }
        var No = Array.isArray;
        function Uo(e, t) {
          return No(t) ? e.apply(void 0, Ot([], pt(t))) : e(t);
        }
        function Ho(e) {
          return qr(function (t) {
            return Uo(e, t);
          });
        }
        function qo(e, t, r, n, i, a, s, o) {
          var l = [],
            u = 0,
            x = 0,
            v = !1,
            $ = function () {
              v && !l.length && !u && t.complete();
            },
            y = function (z) {
              return u < n ? C(z) : l.push(z);
            },
            C = function (z) {
              u++;
              var H = !1;
              He(r(z, x++)).subscribe(
                Xe(
                  t,
                  function (X) {
                    t.next(X);
                  },
                  function () {
                    H = !0;
                  },
                  void 0,
                  function () {
                    if (H)
                      try {
                        u--;
                        for (
                          var X = function () {
                            var p = l.shift();
                            s || C(p);
                          };
                          l.length && u < n;

                        )
                          X();
                        $();
                      } catch (p) {
                        t.error(p);
                      }
                  }
                )
              );
            };
          return (
            e.subscribe(
              Xe(t, y, function () {
                (v = !0), $();
              })
            ),
            function () {}
          );
        }
        function Vr(e, t, r) {
          return (
            r === void 0 && (r = 1 / 0),
            K(t)
              ? Vr(function (n, i) {
                  return qr(function (a, s) {
                    return t(n, a, i, s);
                  })(He(e(n, i)));
                }, r)
              : (typeof t == "number" && (r = t),
                mt(function (n, i) {
                  return qo(n, i, e, r);
                }))
          );
        }
        function Vo(e) {
          return e === void 0 && (e = 1 / 0), Vr(Nr, e);
        }
        var Wo = ["addListener", "removeListener"],
          Ko = ["addEventListener", "removeEventListener"],
          Zo = ["on", "off"];
        function It(e, t, r, n) {
          if ((K(r) && ((n = r), (r = void 0)), n))
            return It(e, t, r).pipe(Ho(n));
          var i = pt(
              Jo(e)
                ? Ko.map(function (o) {
                    return function (l) {
                      return e[o](t, l, r);
                    };
                  })
                : Go(e)
                ? Wo.map(Li(e, t))
                : Yo(e)
                ? Zo.map(Li(e, t))
                : [],
              2
            ),
            a = i[0],
            s = i[1];
          if (!a && Hr(e))
            return Vr(function (o) {
              return It(o, t, r);
            })(He(e));
          if (!a) throw new TypeError("Invalid event target");
          return new pe(function (o) {
            var l = function () {
              for (var u = [], x = 0; x < arguments.length; x++)
                u[x] = arguments[x];
              return o.next(1 < u.length ? u : u[0]);
            };
            return (
              a(l),
              function () {
                return s(l);
              }
            );
          });
        }
        function Li(e, t) {
          return function (r) {
            return function (n) {
              return e[r](t, n);
            };
          };
        }
        function Go(e) {
          return K(e.addListener) && K(e.removeListener);
        }
        function Yo(e) {
          return K(e.on) && K(e.off);
        }
        function Jo(e) {
          return K(e.addEventListener) && K(e.removeEventListener);
        }
        function Qo(e, t, r) {
          r === void 0 && (r = $o);
          var n = -1;
          return (
            _i(t) ? (r = t) : (n = t),
            new pe(function (i) {
              var a = Lo(e) ? 100 - r.now() : e;
              a < 0 && (a = 0);
              var s = 0;
              return r.schedule(function () {
                i.closed ||
                  (i.next(s++),
                  0 <= n ? this.schedule(void 0, n) : i.complete());
              }, a);
            })
          );
        }
        function Xo(e, t) {
          return t === void 0 && (t = Ur), Qo(e, e, t);
        }
        function el() {
          for (var e = [], t = 0; t < arguments.length; t++)
            e[t] = arguments[t];
          var r = Ai(e),
            n = So(e, 1 / 0),
            i = e;
          return i.length ? (i.length === 1 ? He(i[0]) : Vo(n)(ji(i, r))) : _o;
        }
        function tl(e) {
          return mt(function (t, r) {
            var n = !1,
              i = null;
            t.subscribe(
              Xe(r, function (a) {
                (n = !0), (i = a);
              })
            ),
              He(e).subscribe(
                Xe(
                  r,
                  function () {
                    if (n) {
                      n = !1;
                      var a = i;
                      (i = null), r.next(a);
                    }
                  },
                  Dr
                )
              );
          });
        }
        function rl(e, t) {
          return t === void 0 && (t = Ur), tl(Xo(e, t));
        }
        function nl(e, t, r) {
          var n = K(e) || t || r ? { next: e, error: t, complete: r } : e;
          return n
            ? mt(function (i, a) {
                var s;
                (s = n.subscribe) === null || s === void 0 || s.call(n);
                var o = !0;
                i.subscribe(
                  Xe(
                    a,
                    function (l) {
                      var u;
                      (u = n.next) === null || u === void 0 || u.call(n, l),
                        a.next(l);
                    },
                    function () {
                      var l;
                      (o = !1),
                        (l = n.complete) === null || l === void 0 || l.call(n),
                        a.complete();
                    },
                    function (l) {
                      var u;
                      (o = !1),
                        (u = n.error) === null || u === void 0 || u.call(n, l),
                        a.error(l);
                    },
                    function () {
                      var l, u;
                      o &&
                        ((l = n.unsubscribe) === null ||
                          l === void 0 ||
                          l.call(n)),
                        (u = n.finalize) === null || u === void 0 || u.call(n);
                    }
                  )
                );
              })
            : Nr;
        }
        function Ni() {
          const e = "test";
          try {
            return localStorage.setItem(e, e), localStorage.removeItem(e), !0;
          } catch {
            return !1;
          }
        }
        function Ae(e, t, r) {
          return new CustomEvent(e, { detail: t, ...r });
        }
        /**
         * @license
         * Copyright 2021 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ let il = class {
          constructor(
            t,
            { target: r, config: n, callback: i, skipInitial: a }
          ) {
            (this.t = new Set()),
              (this.o = !1),
              (this.i = !1),
              (this.h = t),
              r !== null && this.t.add(r ?? t),
              (this.l = n),
              (this.o = a ?? this.o),
              (this.callback = i),
              window.ResizeObserver
                ? ((this.u = new ResizeObserver((s) => {
                    this.handleChanges(s), this.h.requestUpdate();
                  })),
                  t.addController(this))
                : console.warn(
                    "ResizeController error: browser does not support ResizeObserver."
                  );
          }
          handleChanges(t) {
            this.value = this.callback?.(t, this.u);
          }
          hostConnected() {
            for (const t of this.t) this.observe(t);
          }
          hostDisconnected() {
            this.disconnect();
          }
          async hostUpdated() {
            !this.o && this.i && this.handleChanges([]), (this.i = !1);
          }
          observe(t) {
            this.t.add(t),
              this.u.observe(t, this.l),
              (this.i = !0),
              this.h.requestUpdate();
          }
          unobserve(t) {
            this.t.delete(t), this.u.unobserve(t);
          }
          disconnect() {
            this.u.disconnect();
          }
        };
        /**
         * @license
         * Copyright 2017 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ const Wr = { ATTRIBUTE: 1, CHILD: 2 },
          Kr =
            (e) =>
            (...t) => ({ _$litDirective$: e, values: t });
        class Zr {
          constructor(t) {}
          get _$AU() {
            return this._$AM._$AU;
          }
          _$AT(t, r, n) {
            (this._$Ct = t), (this._$AM = r), (this._$Ci = n);
          }
          _$AS(t, r) {
            return this.update(t, r);
          }
          update(t, r) {
            return this.render(...r);
          }
        }
        /**
         * @license
         * Copyright 2018 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ const Gr = Kr(
          class extends Zr {
            constructor(e) {
              if (
                (super(e),
                e.type !== Wr.ATTRIBUTE ||
                  e.name !== "class" ||
                  e.strings?.length > 2)
              )
                throw Error(
                  "`classMap()` can only be used in the `class` attribute and must be the only part in the attribute."
                );
            }
            render(e) {
              return (
                " " +
                Object.keys(e)
                  .filter((t) => e[t])
                  .join(" ") +
                " "
              );
            }
            update(e, [t]) {
              if (this.st === void 0) {
                (this.st = new Set()),
                  e.strings !== void 0 &&
                    (this.nt = new Set(
                      e.strings
                        .join(" ")
                        .split(/\s/)
                        .filter((n) => n !== "")
                    ));
                for (const n in t) t[n] && !this.nt?.has(n) && this.st.add(n);
                return this.render(t);
              }
              const r = e.element.classList;
              for (const n of this.st)
                n in t || (r.remove(n), this.st.delete(n));
              for (const n in t) {
                const i = !!t[n];
                i === this.st.has(n) ||
                  this.nt?.has(n) ||
                  (i
                    ? (r.add(n), this.st.add(n))
                    : (r.remove(n), this.st.delete(n)));
              }
              return Pe;
            }
          }
        );
        var Ui =
          typeof globalThis < "u"
            ? globalThis
            : typeof window < "u"
            ? window
            : typeof global < "u"
            ? global
            : typeof self < "u"
            ? self
            : {};
        function al(e) {
          return e &&
            e.__esModule &&
            Object.prototype.hasOwnProperty.call(e, "default")
            ? e.default
            : e;
        }
        var Yr = { exports: {} },
          Hi;
        function sl() {
          return (
            Hi ||
              ((Hi = 1),
              (function (e) {
                var t =
                  typeof window < "u"
                    ? window
                    : typeof WorkerGlobalScope < "u" &&
                      self instanceof WorkerGlobalScope
                    ? self
                    : {};
                /**
                 * Prism: Lightweight, robust, elegant syntax highlighting
                 *
                 * @license MIT <https://opensource.org/licenses/MIT>
                 * @author Lea Verou <https://lea.verou.me>
                 * @namespace
                 * @public
                 */ var r = (function (n) {
                  var i = /(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,
                    a = 0,
                    s = {},
                    o = {
                      manual: n.Prism && n.Prism.manual,
                      disableWorkerMessageHandler:
                        n.Prism && n.Prism.disableWorkerMessageHandler,
                      util: {
                        encode: function p(h) {
                          return h instanceof l
                            ? new l(h.type, p(h.content), h.alias)
                            : Array.isArray(h)
                            ? h.map(p)
                            : h
                                .replace(/&/g, "&amp;")
                                .replace(/</g, "&lt;")
                                .replace(/\u00a0/g, " ");
                        },
                        type: function (p) {
                          return Object.prototype.toString.call(p).slice(8, -1);
                        },
                        objId: function (p) {
                          return (
                            p.__id ||
                              Object.defineProperty(p, "__id", { value: ++a }),
                            p.__id
                          );
                        },
                        clone: function p(h, m) {
                          m = m || {};
                          var d, g;
                          switch (o.util.type(h)) {
                            case "Object":
                              if (((g = o.util.objId(h)), m[g])) return m[g];
                              (d = {}), (m[g] = d);
                              for (var _ in h)
                                h.hasOwnProperty(_) && (d[_] = p(h[_], m));
                              return d;
                            case "Array":
                              return (
                                (g = o.util.objId(h)),
                                m[g]
                                  ? m[g]
                                  : ((d = []),
                                    (m[g] = d),
                                    h.forEach(function (O, E) {
                                      d[E] = p(O, m);
                                    }),
                                    d)
                              );
                            default:
                              return h;
                          }
                        },
                        getLanguage: function (p) {
                          for (; p; ) {
                            var h = i.exec(p.className);
                            if (h) return h[1].toLowerCase();
                            p = p.parentElement;
                          }
                          return "none";
                        },
                        setLanguage: function (p, h) {
                          (p.className = p.className.replace(
                            RegExp(i, "gi"),
                            ""
                          )),
                            p.classList.add("language-" + h);
                        },
                        currentScript: function () {
                          if (typeof document > "u") return null;
                          if (
                            document.currentScript &&
                            document.currentScript.tagName === "SCRIPT"
                          )
                            return document.currentScript;
                          try {
                            throw new Error();
                          } catch (d) {
                            var p = (/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(
                              d.stack
                            ) || [])[1];
                            if (p) {
                              var h = document.getElementsByTagName("script");
                              for (var m in h) if (h[m].src == p) return h[m];
                            }
                            return null;
                          }
                        },
                        isActive: function (p, h, m) {
                          for (var d = "no-" + h; p; ) {
                            var g = p.classList;
                            if (g.contains(h)) return !0;
                            if (g.contains(d)) return !1;
                            p = p.parentElement;
                          }
                          return !!m;
                        },
                      },
                      languages: {
                        plain: s,
                        plaintext: s,
                        text: s,
                        txt: s,
                        extend: function (p, h) {
                          var m = o.util.clone(o.languages[p]);
                          for (var d in h) m[d] = h[d];
                          return m;
                        },
                        insertBefore: function (p, h, m, d) {
                          d = d || o.languages;
                          var g = d[p],
                            _ = {};
                          for (var O in g)
                            if (g.hasOwnProperty(O)) {
                              if (O == h)
                                for (var E in m)
                                  m.hasOwnProperty(E) && (_[E] = m[E]);
                              m.hasOwnProperty(O) || (_[O] = g[O]);
                            }
                          var Z = d[p];
                          return (
                            (d[p] = _),
                            o.languages.DFS(o.languages, function (q, ie) {
                              ie === Z && q != p && (this[q] = _);
                            }),
                            _
                          );
                        },
                        DFS: function p(h, m, d, g) {
                          g = g || {};
                          var _ = o.util.objId;
                          for (var O in h)
                            if (h.hasOwnProperty(O)) {
                              m.call(h, O, h[O], d || O);
                              var E = h[O],
                                Z = o.util.type(E);
                              Z === "Object" && !g[_(E)]
                                ? ((g[_(E)] = !0), p(E, m, null, g))
                                : Z === "Array" &&
                                  !g[_(E)] &&
                                  ((g[_(E)] = !0), p(E, m, O, g));
                            }
                        },
                      },
                      plugins: {},
                      highlightAll: function (p, h) {
                        o.highlightAllUnder(document, p, h);
                      },
                      highlightAllUnder: function (p, h, m) {
                        var d = {
                          callback: m,
                          container: p,
                          selector:
                            'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code',
                        };
                        o.hooks.run("before-highlightall", d),
                          (d.elements = Array.prototype.slice.apply(
                            d.container.querySelectorAll(d.selector)
                          )),
                          o.hooks.run("before-all-elements-highlight", d);
                        for (var g = 0, _; (_ = d.elements[g++]); )
                          o.highlightElement(_, h === !0, d.callback);
                      },
                      highlightElement: function (p, h, m) {
                        var d = o.util.getLanguage(p),
                          g = o.languages[d];
                        o.util.setLanguage(p, d);
                        var _ = p.parentElement;
                        _ &&
                          _.nodeName.toLowerCase() === "pre" &&
                          o.util.setLanguage(_, d);
                        var O = p.textContent,
                          E = { element: p, language: d, grammar: g, code: O };
                        function Z(ie) {
                          (E.highlightedCode = ie),
                            o.hooks.run("before-insert", E),
                            (E.element.innerHTML = E.highlightedCode),
                            o.hooks.run("after-highlight", E),
                            o.hooks.run("complete", E),
                            m && m.call(E.element);
                        }
                        if (
                          (o.hooks.run("before-sanity-check", E),
                          (_ = E.element.parentElement),
                          _ &&
                            _.nodeName.toLowerCase() === "pre" &&
                            !_.hasAttribute("tabindex") &&
                            _.setAttribute("tabindex", "0"),
                          !E.code)
                        ) {
                          o.hooks.run("complete", E), m && m.call(E.element);
                          return;
                        }
                        if ((o.hooks.run("before-highlight", E), !E.grammar)) {
                          Z(o.util.encode(E.code));
                          return;
                        }
                        if (h && n.Worker) {
                          var q = new Worker(o.filename);
                          (q.onmessage = function (ie) {
                            Z(ie.data);
                          }),
                            q.postMessage(
                              JSON.stringify({
                                language: E.language,
                                code: E.code,
                                immediateClose: !0,
                              })
                            );
                        } else Z(o.highlight(E.code, E.grammar, E.language));
                      },
                      highlight: function (p, h, m) {
                        var d = { code: p, grammar: h, language: m };
                        if ((o.hooks.run("before-tokenize", d), !d.grammar))
                          throw new Error(
                            'The language "' + d.language + '" has no grammar.'
                          );
                        return (
                          (d.tokens = o.tokenize(d.code, d.grammar)),
                          o.hooks.run("after-tokenize", d),
                          l.stringify(o.util.encode(d.tokens), d.language)
                        );
                      },
                      tokenize: function (p, h) {
                        var m = h.rest;
                        if (m) {
                          for (var d in m) h[d] = m[d];
                          delete h.rest;
                        }
                        var g = new v();
                        return $(g, g.head, p), x(p, g, h, g.head, 0), C(g);
                      },
                      hooks: {
                        all: {},
                        add: function (p, h) {
                          var m = o.hooks.all;
                          (m[p] = m[p] || []), m[p].push(h);
                        },
                        run: function (p, h) {
                          var m = o.hooks.all[p];
                          if (!(!m || !m.length))
                            for (var d = 0, g; (g = m[d++]); ) g(h);
                        },
                      },
                      Token: l,
                    };
                  n.Prism = o;
                  function l(p, h, m, d) {
                    (this.type = p),
                      (this.content = h),
                      (this.alias = m),
                      (this.length = (d || "").length | 0);
                  }
                  l.stringify = function p(h, m) {
                    if (typeof h == "string") return h;
                    if (Array.isArray(h)) {
                      var d = "";
                      return (
                        h.forEach(function (Z) {
                          d += p(Z, m);
                        }),
                        d
                      );
                    }
                    var g = {
                        type: h.type,
                        content: p(h.content, m),
                        tag: "span",
                        classes: ["token", h.type],
                        attributes: {},
                        language: m,
                      },
                      _ = h.alias;
                    _ &&
                      (Array.isArray(_)
                        ? Array.prototype.push.apply(g.classes, _)
                        : g.classes.push(_)),
                      o.hooks.run("wrap", g);
                    var O = "";
                    for (var E in g.attributes)
                      O +=
                        " " +
                        E +
                        '="' +
                        (g.attributes[E] || "").replace(/"/g, "&quot;") +
                        '"';
                    return (
                      "<" +
                      g.tag +
                      ' class="' +
                      g.classes.join(" ") +
                      '"' +
                      O +
                      ">" +
                      g.content +
                      "</" +
                      g.tag +
                      ">"
                    );
                  };
                  function u(p, h, m, d) {
                    p.lastIndex = h;
                    var g = p.exec(m);
                    if (g && d && g[1]) {
                      var _ = g[1].length;
                      (g.index += _), (g[0] = g[0].slice(_));
                    }
                    return g;
                  }
                  function x(p, h, m, d, g, _) {
                    for (var O in m)
                      if (!(!m.hasOwnProperty(O) || !m[O])) {
                        var E = m[O];
                        E = Array.isArray(E) ? E : [E];
                        for (var Z = 0; Z < E.length; ++Z) {
                          if (_ && _.cause == O + "," + Z) return;
                          var q = E[Z],
                            ie = q.inside,
                            Ee = !!q.lookbehind,
                            ke = !!q.greedy,
                            Be = q.alias;
                          if (ke && !q.pattern.global) {
                            var xe = q.pattern.toString().match(/[imsuy]*$/)[0];
                            q.pattern = RegExp(q.pattern.source, xe + "g");
                          }
                          for (
                            var je = q.pattern || q, B = d.next, G = g;
                            B !== h.tail && !(_ && G >= _.reach);
                            G += B.value.length, B = B.next
                          ) {
                            var j = B.value;
                            if (h.length > p.length) return;
                            if (!(j instanceof l)) {
                              var ce = 1,
                                ue;
                              if (ke) {
                                if (
                                  ((ue = u(je, G, p, Ee)),
                                  !ue || ue.index >= p.length)
                                )
                                  break;
                                var w = ue.index,
                                  At = ue.index + ue[0].length,
                                  f = G;
                                for (f += B.value.length; w >= f; )
                                  (B = B.next), (f += B.value.length);
                                if (
                                  ((f -= B.value.length),
                                  (G = f),
                                  B.value instanceof l)
                                )
                                  continue;
                                for (
                                  var c = B;
                                  c !== h.tail &&
                                  (f < At || typeof c.value == "string");
                                  c = c.next
                                )
                                  ce++, (f += c.value.length);
                                ce--, (j = p.slice(G, f)), (ue.index -= G);
                              } else if (((ue = u(je, 0, j, Ee)), !ue))
                                continue;
                              var w = ue.index,
                                A = ue[0],
                                M = j.slice(0, w),
                                S = j.slice(w + A.length),
                                k = G + j.length;
                              _ && k > _.reach && (_.reach = k);
                              var F = B.prev;
                              M && ((F = $(h, F, M)), (G += M.length)),
                                y(h, F, ce);
                              var T = new l(
                                O,
                                ie ? o.tokenize(A, ie) : A,
                                Be,
                                A
                              );
                              if (((B = $(h, F, T)), S && $(h, B, S), ce > 1)) {
                                var R = { cause: O + "," + Z, reach: k };
                                x(p, h, m, B.prev, G, R),
                                  _ && R.reach > _.reach && (_.reach = R.reach);
                              }
                            }
                          }
                        }
                      }
                  }
                  function v() {
                    var p = { value: null, prev: null, next: null },
                      h = { value: null, prev: p, next: null };
                    (p.next = h),
                      (this.head = p),
                      (this.tail = h),
                      (this.length = 0);
                  }
                  function $(p, h, m) {
                    var d = h.next,
                      g = { value: m, prev: h, next: d };
                    return (h.next = g), (d.prev = g), p.length++, g;
                  }
                  function y(p, h, m) {
                    for (var d = h.next, g = 0; g < m && d !== p.tail; g++)
                      d = d.next;
                    (h.next = d), (d.prev = h), (p.length -= g);
                  }
                  function C(p) {
                    for (var h = [], m = p.head.next; m !== p.tail; )
                      h.push(m.value), (m = m.next);
                    return h;
                  }
                  if (!n.document)
                    return (
                      n.addEventListener &&
                        (o.disableWorkerMessageHandler ||
                          n.addEventListener(
                            "message",
                            function (p) {
                              var h = JSON.parse(p.data),
                                m = h.language,
                                d = h.code,
                                g = h.immediateClose;
                              n.postMessage(o.highlight(d, o.languages[m], m)),
                                g && n.close();
                            },
                            !1
                          )),
                      o
                    );
                  var z = o.util.currentScript();
                  z &&
                    ((o.filename = z.src),
                    z.hasAttribute("data-manual") && (o.manual = !0));
                  function H() {
                    o.manual || o.highlightAll();
                  }
                  if (!o.manual) {
                    var X = document.readyState;
                    X === "loading" || (X === "interactive" && z && z.defer)
                      ? document.addEventListener("DOMContentLoaded", H)
                      : window.requestAnimationFrame
                      ? window.requestAnimationFrame(H)
                      : window.setTimeout(H, 16);
                  }
                  return o;
                })(t);
                e.exports && (e.exports = r), typeof Ui < "u" && (Ui.Prism = r);
              })(Yr)),
            Yr.exports
          );
        }
        var qi = sl();
        (Prism.languages.clike = {
          comment: [
            {
              pattern: /(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,
              lookbehind: !0,
              greedy: !0,
            },
            { pattern: /(^|[^\\:])\/\/.*/, lookbehind: !0, greedy: !0 },
          ],
          string: {
            pattern: /(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,
            greedy: !0,
          },
          "class-name": {
            pattern:
              /(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,
            lookbehind: !0,
            inside: { punctuation: /[.\\]/ },
          },
          keyword:
            /\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,
          boolean: /\b(?:false|true)\b/,
          function: /\b\w+(?=\()/,
          number: /\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,
          operator: /[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,
          punctuation: /[{}[\];(),.:]/,
        }),
          (Prism.languages.javascript = Prism.languages.extend("clike", {
            "class-name": [
              Prism.languages.clike["class-name"],
              {
                pattern:
                  /(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,
                lookbehind: !0,
              },
            ],
            keyword: [
              { pattern: /((?:^|\})\s*)catch\b/, lookbehind: !0 },
              {
                pattern:
                  /(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,
                lookbehind: !0,
              },
            ],
            function:
              /#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,
            number: {
              pattern: RegExp(
                /(^|[^\w$])/.source +
                  "(?:" +
                  (/NaN|Infinity/.source +
                    "|" +
                    /0[bB][01]+(?:_[01]+)*n?/.source +
                    "|" +
                    /0[oO][0-7]+(?:_[0-7]+)*n?/.source +
                    "|" +
                    /0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source +
                    "|" +
                    /\d+(?:_\d+)*n/.source +
                    "|" +
                    /(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/
                      .source) +
                  ")" +
                  /(?![\w$])/.source
              ),
              lookbehind: !0,
            },
            operator:
              /--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/,
          })),
          (Prism.languages.javascript["class-name"][0].pattern =
            /(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/),
          Prism.languages.insertBefore("javascript", "keyword", {
            regex: {
              pattern: RegExp(
                /((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/
                  .source +
                  /\//.source +
                  "(?:" +
                  /(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/
                    .source +
                  "|" +
                  /(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/
                    .source +
                  ")" +
                  /(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/
                    .source
              ),
              lookbehind: !0,
              greedy: !0,
              inside: {
                "regex-source": {
                  pattern: /^(\/)[\s\S]+(?=\/[a-z]*$)/,
                  lookbehind: !0,
                  alias: "language-regex",
                  inside: Prism.languages.regex,
                },
                "regex-delimiter": /^\/|\/$/,
                "regex-flags": /^[a-z]+$/,
              },
            },
            "function-variable": {
              pattern:
                /#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,
              alias: "function",
            },
            parameter: [
              {
                pattern:
                  /(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,
                lookbehind: !0,
                inside: Prism.languages.javascript,
              },
              {
                pattern:
                  /(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,
                lookbehind: !0,
                inside: Prism.languages.javascript,
              },
              {
                pattern:
                  /(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,
                lookbehind: !0,
                inside: Prism.languages.javascript,
              },
              {
                pattern:
                  /((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,
                lookbehind: !0,
                inside: Prism.languages.javascript,
              },
            ],
            constant: /\b[A-Z](?:[A-Z_]|\dx?)*\b/,
          }),
          Prism.languages.insertBefore("javascript", "string", {
            hashbang: { pattern: /^#!.*/, greedy: !0, alias: "comment" },
            "template-string": {
              pattern:
                /`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,
              greedy: !0,
              inside: {
                "template-punctuation": { pattern: /^`|`$/, alias: "string" },
                interpolation: {
                  pattern:
                    /((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,
                  lookbehind: !0,
                  inside: {
                    "interpolation-punctuation": {
                      pattern: /^\$\{|\}$/,
                      alias: "punctuation",
                    },
                    rest: Prism.languages.javascript,
                  },
                },
                string: /[\s\S]+/,
              },
            },
            "string-property": {
              pattern:
                /((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,
              lookbehind: !0,
              greedy: !0,
              alias: "property",
            },
          }),
          Prism.languages.insertBefore("javascript", "operator", {
            "literal-property": {
              pattern:
                /((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,
              lookbehind: !0,
              alias: "property",
            },
          }),
          Prism.languages.markup &&
            (Prism.languages.markup.tag.addInlined("script", "javascript"),
            Prism.languages.markup.tag.addAttribute(
              /on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/
                .source,
              "javascript"
            )),
          (Prism.languages.js = Prism.languages.javascript);
        var Vi = {},
          Wi;
        function ol() {
          return (
            Wi ||
              ((Wi = 1),
              (function (e) {
                (e.languages.typescript = e.languages.extend("javascript", {
                  "class-name": {
                    pattern:
                      /(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,
                    lookbehind: !0,
                    greedy: !0,
                    inside: null,
                  },
                  builtin:
                    /\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/,
                })),
                  e.languages.typescript.keyword.push(
                    /\b(?:abstract|declare|is|keyof|readonly|require)\b/,
                    /\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,
                    /\btype\b(?=\s*(?:[\{*]|$))/
                  ),
                  delete e.languages.typescript.parameter,
                  delete e.languages.typescript["literal-property"];
                var t = e.languages.extend("typescript", {});
                delete t["class-name"],
                  (e.languages.typescript["class-name"].inside = t),
                  e.languages.insertBefore("typescript", "function", {
                    decorator: {
                      pattern: /@[$\w\xA0-\uFFFF]+/,
                      inside: {
                        at: { pattern: /^@/, alias: "operator" },
                        function: /^[\s\S]+/,
                      },
                    },
                    "generic-function": {
                      pattern:
                        /#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,
                      greedy: !0,
                      inside: {
                        function:
                          /^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,
                        generic: {
                          pattern: /<[\s\S]+/,
                          alias: "class-name",
                          inside: t,
                        },
                      },
                    },
                  }),
                  (e.languages.ts = e.languages.typescript);
              })(Prism)),
            Vi
          );
        }
        ol();
        var Ki = {},
          Zi;
        function ll() {
          return (
            Zi ||
              ((Zi = 1),
              (function (e) {
                function t(G, j) {
                  return G.replace(/<<(\d+)>>/g, function (ce, ue) {
                    return "(?:" + j[+ue] + ")";
                  });
                }
                function r(G, j, ce) {
                  return RegExp(t(G, j), "");
                }
                function n(G, j) {
                  for (var ce = 0; ce < j; ce++)
                    G = G.replace(/<<self>>/g, function () {
                      return "(?:" + G + ")";
                    });
                  return G.replace(/<<self>>/g, "[^\\s\\S]");
                }
                var i = {
                  type: "bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",
                  typeDeclaration: "class enum interface record struct",
                  contextual:
                    "add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",
                  other:
                    "abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield",
                };
                function a(G) {
                  return "\\b(?:" + G.trim().replace(/ /g, "|") + ")\\b";
                }
                var s = a(i.typeDeclaration),
                  o = RegExp(
                    a(
                      i.type +
                        " " +
                        i.typeDeclaration +
                        " " +
                        i.contextual +
                        " " +
                        i.other
                    )
                  ),
                  l = a(i.typeDeclaration + " " + i.contextual + " " + i.other),
                  u = a(i.type + " " + i.typeDeclaration + " " + i.other),
                  x = n(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source, 2),
                  v = n(/\((?:[^()]|<<self>>)*\)/.source, 2),
                  $ = /@?\b[A-Za-z_]\w*\b/.source,
                  y = t(/<<0>>(?:\s*<<1>>)?/.source, [$, x]),
                  C = t(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source, [l, y]),
                  z = /\[\s*(?:,\s*)*\]/.source,
                  H = t(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source, [
                    C,
                    z,
                  ]),
                  X = t(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source, [
                    x,
                    v,
                    z,
                  ]),
                  p = t(/\(<<0>>+(?:,<<0>>+)+\)/.source, [X]),
                  h = t(
                    /(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,
                    [p, C, z]
                  ),
                  m = { keyword: o, punctuation: /[<>()?,.:[\]]/ },
                  d = /'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,
                  g = /"(?:\\.|[^\\"\r\n])*"/.source,
                  _ = /@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;
                (e.languages.csharp = e.languages.extend("clike", {
                  string: [
                    {
                      pattern: r(/(^|[^$\\])<<0>>/.source, [_]),
                      lookbehind: !0,
                      greedy: !0,
                    },
                    {
                      pattern: r(/(^|[^@$\\])<<0>>/.source, [g]),
                      lookbehind: !0,
                      greedy: !0,
                    },
                  ],
                  "class-name": [
                    {
                      pattern: r(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source, [
                        C,
                      ]),
                      lookbehind: !0,
                      inside: m,
                    },
                    {
                      pattern: r(
                        /(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,
                        [$, h]
                      ),
                      lookbehind: !0,
                      inside: m,
                    },
                    {
                      pattern: r(/(\busing\s+)<<0>>(?=\s*=)/.source, [$]),
                      lookbehind: !0,
                    },
                    {
                      pattern: r(/(\b<<0>>\s+)<<1>>/.source, [s, y]),
                      lookbehind: !0,
                      inside: m,
                    },
                    {
                      pattern: r(/(\bcatch\s*\(\s*)<<0>>/.source, [C]),
                      lookbehind: !0,
                      inside: m,
                    },
                    {
                      pattern: r(/(\bwhere\s+)<<0>>/.source, [$]),
                      lookbehind: !0,
                    },
                    {
                      pattern: r(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source, [
                        H,
                      ]),
                      lookbehind: !0,
                      inside: m,
                    },
                    {
                      pattern: r(
                        /\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/
                          .source,
                        [h, u, $]
                      ),
                      inside: m,
                    },
                  ],
                  keyword: o,
                  number:
                    /(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,
                  operator:
                    />>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,
                  punctuation: /\?\.?|::|[{}[\];(),.:]/,
                })),
                  e.languages.insertBefore("csharp", "number", {
                    range: { pattern: /\.\./, alias: "operator" },
                  }),
                  e.languages.insertBefore("csharp", "punctuation", {
                    "named-parameter": {
                      pattern: r(/([(,]\s*)<<0>>(?=\s*:)/.source, [$]),
                      lookbehind: !0,
                      alias: "punctuation",
                    },
                  }),
                  e.languages.insertBefore("csharp", "class-name", {
                    namespace: {
                      pattern: r(
                        /(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/
                          .source,
                        [$]
                      ),
                      lookbehind: !0,
                      inside: { punctuation: /\./ },
                    },
                    "type-expression": {
                      pattern: r(
                        /(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/
                          .source,
                        [v]
                      ),
                      lookbehind: !0,
                      alias: "class-name",
                      inside: m,
                    },
                    "return-type": {
                      pattern: r(
                        /<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/
                          .source,
                        [h, C]
                      ),
                      inside: m,
                      alias: "class-name",
                    },
                    "constructor-invocation": {
                      pattern: r(/(\bnew\s+)<<0>>(?=\s*[[({])/.source, [h]),
                      lookbehind: !0,
                      inside: m,
                      alias: "class-name",
                    },
                    "generic-method": {
                      pattern: r(/<<0>>\s*<<1>>(?=\s*\()/.source, [$, x]),
                      inside: {
                        function: r(/^<<0>>/.source, [$]),
                        generic: {
                          pattern: RegExp(x),
                          alias: "class-name",
                          inside: m,
                        },
                      },
                    },
                    "type-list": {
                      pattern: r(
                        /\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/
                          .source,
                        [s, y, $, h, o.source, v, /\bnew\s*\(\s*\)/.source]
                      ),
                      lookbehind: !0,
                      inside: {
                        "record-arguments": {
                          pattern: r(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source, [
                            y,
                            v,
                          ]),
                          lookbehind: !0,
                          greedy: !0,
                          inside: e.languages.csharp,
                        },
                        keyword: o,
                        "class-name": {
                          pattern: RegExp(h),
                          greedy: !0,
                          inside: m,
                        },
                        punctuation: /[,()]/,
                      },
                    },
                    preprocessor: {
                      pattern: /(^[\t ]*)#.*/m,
                      lookbehind: !0,
                      alias: "property",
                      inside: {
                        directive: {
                          pattern:
                            /(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,
                          lookbehind: !0,
                          alias: "keyword",
                        },
                      },
                    },
                  });
                var O = g + "|" + d,
                  E = t(
                    /\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/
                      .source,
                    [O]
                  ),
                  Z = n(t(/[^"'/()]|<<0>>|\(<<self>>*\)/.source, [E]), 2),
                  q =
                    /\b(?:assembly|event|field|method|module|param|property|return|type)\b/
                      .source,
                  ie = t(/<<0>>(?:\s*\(<<1>>*\))?/.source, [C, Z]);
                e.languages.insertBefore("csharp", "class-name", {
                  attribute: {
                    pattern: r(
                      /((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/
                        .source,
                      [q, ie]
                    ),
                    lookbehind: !0,
                    greedy: !0,
                    inside: {
                      target: {
                        pattern: r(/^<<0>>(?=\s*:)/.source, [q]),
                        alias: "keyword",
                      },
                      "attribute-arguments": {
                        pattern: r(/\(<<0>>*\)/.source, [Z]),
                        inside: e.languages.csharp,
                      },
                      "class-name": {
                        pattern: RegExp(C),
                        inside: { punctuation: /\./ },
                      },
                      punctuation: /[:,]/,
                    },
                  },
                });
                var Ee = /:[^}\r\n]+/.source,
                  ke = n(t(/[^"'/()]|<<0>>|\(<<self>>*\)/.source, [E]), 2),
                  Be = t(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source, [ke, Ee]),
                  xe = n(
                    t(
                      /[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/
                        .source,
                      [O]
                    ),
                    2
                  ),
                  je = t(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source, [xe, Ee]);
                function B(G, j) {
                  return {
                    interpolation: {
                      pattern: r(/((?:^|[^{])(?:\{\{)*)<<0>>/.source, [G]),
                      lookbehind: !0,
                      inside: {
                        "format-string": {
                          pattern: r(
                            /(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,
                            [j, Ee]
                          ),
                          lookbehind: !0,
                          inside: { punctuation: /^:/ },
                        },
                        punctuation: /^\{|\}$/,
                        expression: {
                          pattern: /[\s\S]+/,
                          alias: "language-csharp",
                          inside: e.languages.csharp,
                        },
                      },
                    },
                    string: /[\s\S]+/,
                  };
                }
                e.languages.insertBefore("csharp", "string", {
                  "interpolation-string": [
                    {
                      pattern: r(
                        /(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/
                          .source,
                        [Be]
                      ),
                      lookbehind: !0,
                      greedy: !0,
                      inside: B(Be, ke),
                    },
                    {
                      pattern: r(
                        /(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,
                        [je]
                      ),
                      lookbehind: !0,
                      greedy: !0,
                      inside: B(je, xe),
                    },
                  ],
                  char: { pattern: RegExp(d), greedy: !0 },
                }),
                  (e.languages.dotnet = e.languages.cs = e.languages.csharp);
              })(Prism)),
            Ki
          );
        }
        ll();
        var Gi = {},
          Yi;
        function cl() {
          return (
            Yi ||
              ((Yi = 1),
              (function (e) {
                var t =
                    /\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,
                  r = /(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,
                  n = {
                    pattern: RegExp(
                      /(^|[^\w.])/.source +
                        r +
                        /[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source
                    ),
                    lookbehind: !0,
                    inside: {
                      namespace: {
                        pattern: /^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,
                        inside: { punctuation: /\./ },
                      },
                      punctuation: /\./,
                    },
                  };
                (e.languages.java = e.languages.extend("clike", {
                  string: {
                    pattern: /(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,
                    lookbehind: !0,
                    greedy: !0,
                  },
                  "class-name": [
                    n,
                    {
                      pattern: RegExp(
                        /(^|[^\w.])/.source +
                          r +
                          /[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/
                            .source
                      ),
                      lookbehind: !0,
                      inside: n.inside,
                    },
                    {
                      pattern: RegExp(
                        /(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/
                          .source +
                          r +
                          /[A-Z]\w*\b/.source
                      ),
                      lookbehind: !0,
                      inside: n.inside,
                    },
                  ],
                  keyword: t,
                  function: [
                    e.languages.clike.function,
                    { pattern: /(::\s*)[a-z_]\w*/, lookbehind: !0 },
                  ],
                  number:
                    /\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,
                  operator: {
                    pattern:
                      /(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,
                    lookbehind: !0,
                  },
                  constant: /\b[A-Z][A-Z_\d]+\b/,
                })),
                  e.languages.insertBefore("java", "string", {
                    "triple-quoted-string": {
                      pattern: /"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,
                      greedy: !0,
                      alias: "string",
                    },
                    char: { pattern: /'(?:\\.|[^'\\\r\n]){1,6}'/, greedy: !0 },
                  }),
                  e.languages.insertBefore("java", "class-name", {
                    annotation: {
                      pattern: /(^|[^.])@\w+(?:\s*\.\s*\w+)*/,
                      lookbehind: !0,
                      alias: "punctuation",
                    },
                    generics: {
                      pattern:
                        /<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,
                      inside: {
                        "class-name": n,
                        keyword: t,
                        punctuation: /[<>(),.:]/,
                        operator: /[?&|]/,
                      },
                    },
                    import: [
                      {
                        pattern: RegExp(
                          /(\bimport\s+)/.source +
                            r +
                            /(?:[A-Z]\w*|\*)(?=\s*;)/.source
                        ),
                        lookbehind: !0,
                        inside: {
                          namespace: n.inside.namespace,
                          punctuation: /\./,
                          operator: /\*/,
                          "class-name": /\w+/,
                        },
                      },
                      {
                        pattern: RegExp(
                          /(\bimport\s+static\s+)/.source +
                            r +
                            /(?:\w+|\*)(?=\s*;)/.source
                        ),
                        lookbehind: !0,
                        alias: "static",
                        inside: {
                          namespace: n.inside.namespace,
                          static: /\b\w+$/,
                          punctuation: /\./,
                          operator: /\*/,
                          "class-name": /\w+/,
                        },
                      },
                    ],
                    namespace: {
                      pattern: RegExp(
                        /(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(
                          /<keyword>/g,
                          function () {
                            return t.source;
                          }
                        )
                      ),
                      lookbehind: !0,
                      inside: { punctuation: /\./ },
                    },
                  });
              })(Prism)),
            Gi
          );
        }
        cl(),
          (Prism.languages.scala = Prism.languages.extend("java", {
            "triple-quoted-string": {
              pattern: /"""[\s\S]*?"""/,
              greedy: !0,
              alias: "string",
            },
            string: { pattern: /("|')(?:\\.|(?!\1)[^\\\r\n])*\1/, greedy: !0 },
            keyword:
              /<-|=>|\b(?:abstract|case|catch|class|def|derives|do|else|enum|extends|extension|final|finally|for|forSome|given|if|implicit|import|infix|inline|lazy|match|new|null|object|opaque|open|override|package|private|protected|return|sealed|self|super|this|throw|trait|transparent|try|type|using|val|var|while|with|yield)\b/,
            number:
              /\b0x(?:[\da-f]*\.)?[\da-f]+|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e\d+)?[dfl]?/i,
            builtin:
              /\b(?:Any|AnyRef|AnyVal|Boolean|Byte|Char|Double|Float|Int|Long|Nothing|Short|String|Unit)\b/,
            symbol: /'[^\d\s\\]\w*/,
          })),
          Prism.languages.insertBefore("scala", "triple-quoted-string", {
            "string-interpolation": {
              pattern:
                /\b[a-z]\w*(?:"""(?:[^$]|\$(?:[^{]|\{(?:[^{}]|\{[^{}]*\})*\}))*?"""|"(?:[^$"\r\n]|\$(?:[^{]|\{(?:[^{}]|\{[^{}]*\})*\}))*")/i,
              greedy: !0,
              inside: {
                id: { pattern: /^\w+/, greedy: !0, alias: "function" },
                escape: {
                  pattern: /\\\$"|\$[$"]/,
                  greedy: !0,
                  alias: "symbol",
                },
                interpolation: {
                  pattern: /\$(?:\w+|\{(?:[^{}]|\{[^{}]*\})*\})/,
                  greedy: !0,
                  inside: {
                    punctuation: /^\$\{?|\}$/,
                    expression: {
                      pattern: /[\s\S]+/,
                      inside: Prism.languages.scala,
                    },
                  },
                },
                string: /[\s\S]+/,
              },
            },
          }),
          delete Prism.languages.scala["class-name"],
          delete Prism.languages.scala.function,
          delete Prism.languages.scala.constant,
          (function (e) {
            var t = /(?:\r?\n|\r)[ \t]*\|.+\|(?:(?!\|).)*/.source;
            e.languages.gherkin = {
              pystring: { pattern: /("""|''')[\s\S]+?\1/, alias: "string" },
              comment: { pattern: /(^[ \t]*)#.*/m, lookbehind: !0 },
              tag: { pattern: /(^[ \t]*)@\S*/m, lookbehind: !0 },
              feature: {
                pattern:
                  /((?:^|\r?\n|\r)[ \t]*)(?:Ability|Ahoy matey!|Arwedd|Aspekt|Besigheid Behoefte|Business Need|Caracteristica|Característica|Egenskab|Egenskap|Eiginleiki|Feature|Fīča|Fitur|Fonctionnalité|Fonksyonalite|Funcionalidade|Funcionalitat|Functionalitate|Funcţionalitate|Funcționalitate|Functionaliteit|Fungsi|Funkcia|Funkcija|Funkcionalitāte|Funkcionalnost|Funkcja|Funksie|Funktionalität|Funktionalitéit|Funzionalità|Hwaet|Hwæt|Jellemző|Karakteristik|Lastnost|Mak|Mogucnost|laH|Mogućnost|Moznosti|Možnosti|OH HAI|Omadus|Ominaisuus|Osobina|Özellik|Potrzeba biznesowa|perbogh|poQbogh malja'|Požadavek|Požiadavka|Pretty much|Qap|Qu'meH 'ut|Savybė|Tính năng|Trajto|Vermoë|Vlastnosť|Właściwość|Značilnost|Δυνατότητα|Λειτουργία|Могућност|Мөмкинлек|Особина|Свойство|Үзенчәлеклелек|Функционал|Функционалност|Функция|Функціонал|תכונה|خاصية|خصوصیت|صلاحیت|کاروبار کی ضرورت|وِیژگی|रूप लेख|ਖਾਸੀਅਤ|ਨਕਸ਼ ਨੁਹਾਰ|ਮੁਹਾਂਦਰਾ|గుణము|ಹೆಚ್ಚಳ|ความต้องการทางธุรกิจ|ความสามารถ|โครงหลัก|기능|フィーチャ|功能|機能):(?:[^:\r\n]+(?:\r?\n|\r|$))*/,
                lookbehind: !0,
                inside: {
                  important: { pattern: /(:)[^\r\n]+/, lookbehind: !0 },
                  keyword: /[^:\r\n]+:/,
                },
              },
              scenario: {
                pattern:
                  /(^[ \t]*)(?:Abstract Scenario|Abstrakt Scenario|Achtergrond|Aer|Ær|Agtergrond|All y'all|Antecedentes|Antecedents|Atburðarás|Atburðarásir|Awww, look mate|B4|Background|Baggrund|Bakgrund|Bakgrunn|Bakgrunnur|Beispiele|Beispiller|Bối cảnh|Cefndir|Cenario|Cenário|Cenario de Fundo|Cenário de Fundo|Cenarios|Cenários|Contesto|Context|Contexte|Contexto|Conto|Contoh|Contone|Dæmi|Dasar|Dead men tell no tales|Delineacao do Cenario|Delineação do Cenário|Dis is what went down|Dữ liệu|Dyagram Senaryo|Dyagram senaryo|Egzanp|Ejemplos|Eksempler|Ekzemploj|Enghreifftiau|Esbozo do escenario|Escenari|Escenario|Esempi|Esquema de l'escenari|Esquema del escenario|Esquema do Cenario|Esquema do Cenário|EXAMPLZ|Examples|Exempel|Exemple|Exemples|Exemplos|First off|Fono|Forgatókönyv|Forgatókönyv vázlat|Fundo|Geçmiş|Grundlage|Hannergrond|ghantoH|Háttér|Heave to|Istorik|Juhtumid|Keadaan|Khung kịch bản|Khung tình huống|Kịch bản|Koncept|Konsep skenario|Kontèks|Kontekst|Kontekstas|Konteksts|Kontext|Konturo de la scenaro|Latar Belakang|lut chovnatlh|lut|lutmey|Lýsing Atburðarásar|Lýsing Dæma|MISHUN SRSLY|MISHUN|Menggariskan Senario|mo'|Náčrt Scenára|Náčrt Scénáře|Náčrt Scenáru|Oris scenarija|Örnekler|Osnova|Osnova Scenára|Osnova scénáře|Osnutek|Ozadje|Paraugs|Pavyzdžiai|Példák|Piemēri|Plan du scénario|Plan du Scénario|Plan Senaryo|Plan senaryo|Plang vum Szenario|Pozadí|Pozadie|Pozadina|Príklady|Příklady|Primer|Primeri|Primjeri|Przykłady|Raamstsenaarium|Reckon it's like|Rerefons|Scenár|Scénář|Scenarie|Scenarij|Scenarijai|Scenarijaus šablonas|Scenariji|Scenārijs|Scenārijs pēc parauga|Scenarijus|Scenario|Scénario|Scenario Amlinellol|Scenario Outline|Scenario Template|Scenariomal|Scenariomall|Scenarios|Scenariu|Scenariusz|Scenaro|Schema dello scenario|Se ðe|Se the|Se þe|Senario|Senaryo Deskripsyon|Senaryo deskripsyon|Senaryo|Senaryo taslağı|Shiver me timbers|Situācija|Situai|Situasie Uiteensetting|Situasie|Skenario konsep|Skenario|Skica|Structura scenariu|Structură scenariu|Struktura scenarija|Stsenaarium|Swa hwaer swa|Swa|Swa hwær swa|Szablon scenariusza|Szenario|Szenariogrundriss|Tapaukset|Tapaus|Tapausaihio|Taust|Tausta|Template Keadaan|Template Senario|Template Situai|The thing of it is|Tình huống|Variantai|Voorbeelde|Voorbeelden|Wharrimean is|Yo-ho-ho|You'll wanna|Założenia|Παραδείγματα|Περιγραφή Σεναρίου|Σενάρια|Σενάριο|Υπόβαθρο|Кереш|Контекст|Концепт|Мисаллар|Мисоллар|Основа|Передумова|Позадина|Предистория|Предыстория|Приклади|Пример|Примери|Примеры|Рамка на сценарий|Скица|Структура сценарија|Структура сценария|Структура сценарію|Сценарий|Сценарий структураси|Сценарийның төзелеше|Сценарији|Сценарио|Сценарій|Тарих|Үрнәкләр|דוגמאות|רקע|תבנית תרחיש|תרחיש|الخلفية|الگوی سناریو|امثلة|پس منظر|زمینه|سناریو|سيناريو|سيناريو مخطط|مثالیں|منظر نامے کا خاکہ|منظرنامہ|نمونه ها|उदाहरण|परिदृश्य|परिदृश्य रूपरेखा|पृष्ठभूमि|ਉਦਾਹਰਨਾਂ|ਪਟਕਥਾ|ਪਟਕਥਾ ਢਾਂਚਾ|ਪਟਕਥਾ ਰੂਪ ਰੇਖਾ|ਪਿਛੋਕੜ|ఉదాహరణలు|కథనం|నేపథ్యం|సన్నివేశం|ಉದಾಹರಣೆಗಳು|ಕಥಾಸಾರಾಂಶ|ವಿವರಣೆ|ಹಿನ್ನೆಲೆ|โครงสร้างของเหตุการณ์|ชุดของตัวอย่าง|ชุดของเหตุการณ์|แนวคิด|สรุปเหตุการณ์|เหตุการณ์|배경|시나리오|시나리오 개요|예|サンプル|シナリオ|シナリオアウトライン|シナリオテンプレ|シナリオテンプレート|テンプレ|例|例子|剧本|剧本大纲|劇本|劇本大綱|场景|场景大纲|場景|場景大綱|背景):[^:\r\n]*/m,
                lookbehind: !0,
                inside: {
                  important: { pattern: /(:)[^\r\n]*/, lookbehind: !0 },
                  keyword: /[^:\r\n]+:/,
                },
              },
              "table-body": {
                pattern: RegExp("(" + t + ")(?:" + t + ")+"),
                lookbehind: !0,
                inside: {
                  outline: { pattern: /<[^>]+>/, alias: "variable" },
                  td: { pattern: /\s*[^\s|][^|]*/, alias: "string" },
                  punctuation: /\|/,
                },
              },
              "table-head": {
                pattern: RegExp(t),
                inside: {
                  th: { pattern: /\s*[^\s|][^|]*/, alias: "variable" },
                  punctuation: /\|/,
                },
              },
              atrule: {
                pattern:
                  /(^[ \t]+)(?:'a|'ach|'ej|7|a|A také|A taktiež|A tiež|A zároveň|Aber|Ac|Adott|Akkor|Ak|Aleshores|Ale|Ali|Allora|Alors|Als|Ama|Amennyiben|Amikor|Ampak|an|AN|Ananging|And y'all|And|Angenommen|Anrhegedig a|An|Apabila|Atès|Atesa|Atunci|Avast!|Aye|A|awer|Bagi|Banjur|Bet|Biết|Blimey!|Buh|But at the end of the day I reckon|But y'all|But|BUT|Cal|Când|Cand|Cando|Ce|Cuando|Če|Ða ðe|Ða|Dadas|Dada|Dados|Dado|DaH ghu' bejlu'|dann|Dann|Dano|Dan|Dar|Dat fiind|Data|Date fiind|Date|Dati fiind|Dati|Daţi fiind|Dați fiind|DEN|Dato|De|Den youse gotta|Dengan|Diberi|Diyelim ki|Donada|Donat|Donitaĵo|Do|Dun|Duota|Ðurh|Eeldades|Ef|Eğer ki|Entao|Então|Entón|E|En|Entonces|Epi|És|Etant donnée|Etant donné|Et|Étant données|Étant donnée|Étant donné|Etant données|Etant donnés|Étant donnés|Fakat|Gangway!|Gdy|Gegeben seien|Gegeben sei|Gegeven|Gegewe|ghu' noblu'|Gitt|Given y'all|Given|Givet|Givun|Ha|Cho|I CAN HAZ|In|Ir|It's just unbelievable|I|Ja|Jeśli|Jeżeli|Kad|Kada|Kadar|Kai|Kaj|Když|Keď|Kemudian|Ketika|Khi|Kiedy|Ko|Kuid|Kui|Kun|Lan|latlh|Le sa a|Let go and haul|Le|Lè sa a|Lè|Logo|Lorsqu'<|Lorsque|mä|Maar|Mais|Mając|Ma|Majd|Maka|Manawa|Mas|Men|Menawa|Mutta|Nalika|Nalikaning|Nanging|Når|När|Nato|Nhưng|Niin|Njuk|O zaman|Och|Og|Oletetaan|Ond|Onda|Oraz|Pak|Pero|Però|Podano|Pokiaľ|Pokud|Potem|Potom|Privzeto|Pryd|Quan|Quand|Quando|qaSDI'|Så|Sed|Se|Siis|Sipoze ke|Sipoze Ke|Sipoze|Si|Şi|Și|Soit|Stel|Tada|Tad|Takrat|Tak|Tapi|Ter|Tetapi|Tha the|Tha|Then y'all|Then|Thì|Thurh|Toda|Too right|Un|Und|ugeholl|Và|vaj|Vendar|Ve|wann|Wanneer|WEN|Wenn|When y'all|When|Wtedy|Wun|Y'know|Yeah nah|Yna|Youse know like when|Youse know when youse got|Y|Za predpokladu|Za předpokladu|Zadan|Zadani|Zadano|Zadate|Zadato|Zakładając|Zaradi|Zatati|Þa þe|Þa|Þá|Þegar|Þurh|Αλλά|Δεδομένου|Και|Όταν|Τότε|А також|Агар|Але|Али|Аммо|А|Әгәр|Әйтик|Әмма|Бирок|Ва|Вә|Дадено|Дано|Допустим|Если|Задате|Задати|Задато|И|І|К тому же|Када|Кад|Когато|Когда|Коли|Ләкин|Лекин|Нәтиҗәдә|Нехай|Но|Онда|Припустимо, що|Припустимо|Пусть|Также|Та|Тогда|Тоді|То|Унда|Һәм|Якщо|אבל|אזי|אז|בהינתן|וגם|כאשר|آنگاه|اذاً|اگر|اما|اور|با فرض|بالفرض|بفرض|پھر|تب|ثم|جب|عندما|فرض کیا|لكن|لیکن|متى|هنگامی|و|अगर|और|कदा|किन्तु|चूंकि|जब|तथा|तदा|तब|परन्तु|पर|यदि|ਅਤੇ|ਜਦੋਂ|ਜਿਵੇਂ ਕਿ|ਜੇਕਰ|ਤਦ|ਪਰ|అప్పుడు|ఈ పరిస్థితిలో|కాని|చెప్పబడినది|మరియు|ಆದರೆ|ನಂತರ|ನೀಡಿದ|ಮತ್ತು|ಸ್ಥಿತಿಯನ್ನು|กำหนดให้|ดังนั้น|แต่|เมื่อ|และ|그러면<|그리고<|단<|만약<|만일<|먼저<|조건<|하지만<|かつ<|しかし<|ただし<|ならば<|もし<|並且<|但し<|但是<|假如<|假定<|假設<|假设<|前提<|同时<|同時<|并且<|当<|當<|而且<|那么<|那麼<)(?=[ \t])/m,
                lookbehind: !0,
              },
              string: {
                pattern: /"(?:\\.|[^"\\\r\n])*"|'(?:\\.|[^'\\\r\n])*'/,
                inside: { outline: { pattern: /<[^>]+>/, alias: "variable" } },
              },
              outline: { pattern: /<[^>]+>/, alias: "variable" },
            };
          })(Prism);
        var Ji = {},
          Qi;
        function ul() {
          return (
            Qi ||
              ((Qi = 1),
              (function (e) {
                for (
                  var t = /\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,
                    r = 0;
                  r < 2;
                  r++
                )
                  t = t.replace(/<self>/g, function () {
                    return t;
                  });
                (t = t.replace(/<self>/g, function () {
                  return /[^\s\S]/.source;
                })),
                  (e.languages.rust = {
                    comment: [
                      {
                        pattern: RegExp(/(^|[^\\])/.source + t),
                        lookbehind: !0,
                        greedy: !0,
                      },
                      {
                        pattern: /(^|[^\\:])\/\/.*/,
                        lookbehind: !0,
                        greedy: !0,
                      },
                    ],
                    string: {
                      pattern:
                        /b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,
                      greedy: !0,
                    },
                    char: {
                      pattern:
                        /b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,
                      greedy: !0,
                    },
                    attribute: {
                      pattern: /#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,
                      greedy: !0,
                      alias: "attr-name",
                      inside: { string: null },
                    },
                    "closure-params": {
                      pattern:
                        /([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,
                      lookbehind: !0,
                      greedy: !0,
                      inside: {
                        "closure-punctuation": {
                          pattern: /^\||\|$/,
                          alias: "punctuation",
                        },
                        rest: null,
                      },
                    },
                    "lifetime-annotation": { pattern: /'\w+/, alias: "symbol" },
                    "fragment-specifier": {
                      pattern: /(\$\w+:)[a-z]+/,
                      lookbehind: !0,
                      alias: "punctuation",
                    },
                    variable: /\$\w+/,
                    "function-definition": {
                      pattern: /(\bfn\s+)\w+/,
                      lookbehind: !0,
                      alias: "function",
                    },
                    "type-definition": {
                      pattern: /(\b(?:enum|struct|trait|type|union)\s+)\w+/,
                      lookbehind: !0,
                      alias: "class-name",
                    },
                    "module-declaration": [
                      {
                        pattern: /(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,
                        lookbehind: !0,
                        alias: "namespace",
                      },
                      {
                        pattern:
                          /(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,
                        lookbehind: !0,
                        alias: "namespace",
                        inside: { punctuation: /::/ },
                      },
                    ],
                    keyword: [
                      /\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,
                      /\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/,
                    ],
                    function: /\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,
                    macro: { pattern: /\b\w+!/, alias: "property" },
                    constant: /\b[A-Z_][A-Z_\d]+\b/,
                    "class-name": /\b[A-Z]\w*\b/,
                    namespace: {
                      pattern:
                        /(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,
                      inside: { punctuation: /::/ },
                    },
                    number:
                      /\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,
                    boolean: /\b(?:false|true)\b/,
                    punctuation: /->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,
                    operator:
                      /[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/,
                  }),
                  (e.languages.rust["closure-params"].inside.rest =
                    e.languages.rust),
                  (e.languages.rust.attribute.inside.string =
                    e.languages.rust.string);
              })(Prism)),
            Ji
          );
        }
        ul(),
          (Prism.languages.markup = {
            comment: { pattern: /<!--(?:(?!<!--)[\s\S])*?-->/, greedy: !0 },
            prolog: { pattern: /<\?[\s\S]+?\?>/, greedy: !0 },
            doctype: {
              pattern:
                /<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,
              greedy: !0,
              inside: {
                "internal-subset": {
                  pattern: /(^[^\[]*\[)[\s\S]+(?=\]>$)/,
                  lookbehind: !0,
                  greedy: !0,
                  inside: null,
                },
                string: { pattern: /"[^"]*"|'[^']*'/, greedy: !0 },
                punctuation: /^<!|>$|[[\]]/,
                "doctype-tag": /^DOCTYPE/i,
                name: /[^\s<>'"]+/,
              },
            },
            cdata: { pattern: /<!\[CDATA\[[\s\S]*?\]\]>/i, greedy: !0 },
            tag: {
              pattern:
                /<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,
              greedy: !0,
              inside: {
                tag: {
                  pattern: /^<\/?[^\s>\/]+/,
                  inside: { punctuation: /^<\/?/, namespace: /^[^\s>\/:]+:/ },
                },
                "special-attr": [],
                "attr-value": {
                  pattern: /=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,
                  inside: {
                    punctuation: [
                      { pattern: /^=/, alias: "attr-equals" },
                      { pattern: /^(\s*)["']|["']$/, lookbehind: !0 },
                    ],
                  },
                },
                punctuation: /\/?>/,
                "attr-name": {
                  pattern: /[^\s>\/]+/,
                  inside: { namespace: /^[^\s>\/:]+:/ },
                },
              },
            },
            entity: [
              { pattern: /&[\da-z]{1,8};/i, alias: "named-entity" },
              /&#x?[\da-f]{1,8};/i,
            ],
          }),
          (Prism.languages.markup.tag.inside["attr-value"].inside.entity =
            Prism.languages.markup.entity),
          (Prism.languages.markup.doctype.inside["internal-subset"].inside =
            Prism.languages.markup),
          Prism.hooks.add("wrap", function (e) {
            e.type === "entity" &&
              (e.attributes.title = e.content.replace(/&amp;/, "&"));
          }),
          Object.defineProperty(Prism.languages.markup.tag, "addInlined", {
            value: function (t, r) {
              var n = {};
              (n["language-" + r] = {
                pattern: /(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,
                lookbehind: !0,
                inside: Prism.languages[r],
              }),
                (n.cdata = /^<!\[CDATA\[|\]\]>$/i);
              var i = {
                "included-cdata": {
                  pattern: /<!\[CDATA\[[\s\S]*?\]\]>/i,
                  inside: n,
                },
              };
              i["language-" + r] = {
                pattern: /[\s\S]+/,
                inside: Prism.languages[r],
              };
              var a = {};
              (a[t] = {
                pattern: RegExp(
                  /(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(
                    /__/g,
                    function () {
                      return t;
                    }
                  ),
                  "i"
                ),
                lookbehind: !0,
                greedy: !0,
                inside: i,
              }),
                Prism.languages.insertBefore("markup", "cdata", a);
            },
          }),
          Object.defineProperty(Prism.languages.markup.tag, "addAttribute", {
            value: function (e, t) {
              Prism.languages.markup.tag.inside["special-attr"].push({
                pattern: RegExp(
                  /(^|["'\s])/.source +
                    "(?:" +
                    e +
                    ")" +
                    /\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,
                  "i"
                ),
                lookbehind: !0,
                inside: {
                  "attr-name": /^[^\s=]+/,
                  "attr-value": {
                    pattern: /=[\s\S]+/,
                    inside: {
                      value: {
                        pattern: /(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,
                        lookbehind: !0,
                        alias: [t, "language-" + t],
                        inside: Prism.languages[t],
                      },
                      punctuation: [
                        { pattern: /^=/, alias: "attr-equals" },
                        /"|'/,
                      ],
                    },
                  },
                },
              });
            },
          }),
          (Prism.languages.html = Prism.languages.markup),
          (Prism.languages.mathml = Prism.languages.markup),
          (Prism.languages.svg = Prism.languages.markup),
          (Prism.languages.xml = Prism.languages.extend("markup", {})),
          (Prism.languages.ssml = Prism.languages.xml),
          (Prism.languages.atom = Prism.languages.xml),
          (Prism.languages.rss = Prism.languages.xml),
          (function (e) {
            function t(r, n) {
              return "___" + r.toUpperCase() + n + "___";
            }
            Object.defineProperties((e.languages["markup-templating"] = {}), {
              buildPlaceholders: {
                value: function (r, n, i, a) {
                  if (r.language === n) {
                    var s = (r.tokenStack = []);
                    (r.code = r.code.replace(i, function (o) {
                      if (typeof a == "function" && !a(o)) return o;
                      for (
                        var l = s.length, u;
                        r.code.indexOf((u = t(n, l))) !== -1;

                      )
                        ++l;
                      return (s[l] = o), u;
                    })),
                      (r.grammar = e.languages.markup);
                  }
                },
              },
              tokenizePlaceholders: {
                value: function (r, n) {
                  if (r.language !== n || !r.tokenStack) return;
                  r.grammar = e.languages[n];
                  var i = 0,
                    a = Object.keys(r.tokenStack);
                  function s(o) {
                    for (var l = 0; l < o.length && !(i >= a.length); l++) {
                      var u = o[l];
                      if (
                        typeof u == "string" ||
                        (u.content && typeof u.content == "string")
                      ) {
                        var x = a[i],
                          v = r.tokenStack[x],
                          $ = typeof u == "string" ? u : u.content,
                          y = t(n, x),
                          C = $.indexOf(y);
                        if (C > -1) {
                          ++i;
                          var z = $.substring(0, C),
                            H = new e.Token(
                              n,
                              e.tokenize(v, r.grammar),
                              "language-" + n,
                              v
                            ),
                            X = $.substring(C + y.length),
                            p = [];
                          z && p.push.apply(p, s([z])),
                            p.push(H),
                            X && p.push.apply(p, s([X])),
                            typeof u == "string"
                              ? o.splice.apply(o, [l, 1].concat(p))
                              : (u.content = p);
                        }
                      } else u.content && s(u.content);
                    }
                    return o;
                  }
                  s(r.tokens);
                },
              },
            });
          })(Prism);
        var Xi = {},
          ea;
        function dl() {
          return (
            ea ||
              ((ea = 1),
              (function (e) {
                var t = /\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,
                  r = [
                    { pattern: /\b(?:false|true)\b/i, alias: "boolean" },
                    {
                      pattern: /(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,
                      greedy: !0,
                      lookbehind: !0,
                    },
                    {
                      pattern: /(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,
                      greedy: !0,
                      lookbehind: !0,
                    },
                    /\b(?:null)\b/i,
                    /\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/,
                  ],
                  n =
                    /\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,
                  i =
                    /<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,
                  a = /[{}\[\](),:;]/;
                e.languages.php = {
                  delimiter: {
                    pattern: /\?>$|^<\?(?:php(?=\s)|=)?/i,
                    alias: "important",
                  },
                  comment: t,
                  variable: /\$+(?:\w+\b|(?=\{))/,
                  package: {
                    pattern:
                      /(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,
                    lookbehind: !0,
                    inside: { punctuation: /\\/ },
                  },
                  "class-name-definition": {
                    pattern:
                      /(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,
                    lookbehind: !0,
                    alias: "class-name",
                  },
                  "function-definition": {
                    pattern: /(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,
                    lookbehind: !0,
                    alias: "function",
                  },
                  keyword: [
                    {
                      pattern:
                        /(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,
                      alias: "type-casting",
                      greedy: !0,
                      lookbehind: !0,
                    },
                    {
                      pattern:
                        /([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,
                      alias: "type-hint",
                      greedy: !0,
                      lookbehind: !0,
                    },
                    {
                      pattern:
                        /(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,
                      alias: "return-type",
                      greedy: !0,
                      lookbehind: !0,
                    },
                    {
                      pattern:
                        /\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,
                      alias: "type-declaration",
                      greedy: !0,
                    },
                    {
                      pattern:
                        /(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,
                      alias: "type-declaration",
                      greedy: !0,
                      lookbehind: !0,
                    },
                    {
                      pattern: /\b(?:parent|self|static)(?=\s*::)/i,
                      alias: "static-context",
                      greedy: !0,
                    },
                    { pattern: /(\byield\s+)from\b/i, lookbehind: !0 },
                    /\bclass\b/i,
                    {
                      pattern:
                        /((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,
                      lookbehind: !0,
                    },
                  ],
                  "argument-name": {
                    pattern: /([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,
                    lookbehind: !0,
                  },
                  "class-name": [
                    {
                      pattern:
                        /(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,
                      greedy: !0,
                      lookbehind: !0,
                    },
                    {
                      pattern: /(\|\s*)\b[a-z_]\w*(?!\\)\b/i,
                      greedy: !0,
                      lookbehind: !0,
                    },
                    { pattern: /\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i, greedy: !0 },
                    {
                      pattern: /(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,
                      alias: "class-name-fully-qualified",
                      greedy: !0,
                      lookbehind: !0,
                      inside: { punctuation: /\\/ },
                    },
                    {
                      pattern: /(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,
                      alias: "class-name-fully-qualified",
                      greedy: !0,
                      inside: { punctuation: /\\/ },
                    },
                    {
                      pattern:
                        /(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,
                      alias: "class-name-fully-qualified",
                      greedy: !0,
                      lookbehind: !0,
                      inside: { punctuation: /\\/ },
                    },
                    {
                      pattern: /\b[a-z_]\w*(?=\s*\$)/i,
                      alias: "type-declaration",
                      greedy: !0,
                    },
                    {
                      pattern: /(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,
                      alias: ["class-name-fully-qualified", "type-declaration"],
                      greedy: !0,
                      inside: { punctuation: /\\/ },
                    },
                    {
                      pattern: /\b[a-z_]\w*(?=\s*::)/i,
                      alias: "static-context",
                      greedy: !0,
                    },
                    {
                      pattern: /(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,
                      alias: ["class-name-fully-qualified", "static-context"],
                      greedy: !0,
                      inside: { punctuation: /\\/ },
                    },
                    {
                      pattern: /([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,
                      alias: "type-hint",
                      greedy: !0,
                      lookbehind: !0,
                    },
                    {
                      pattern: /([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,
                      alias: ["class-name-fully-qualified", "type-hint"],
                      greedy: !0,
                      lookbehind: !0,
                      inside: { punctuation: /\\/ },
                    },
                    {
                      pattern: /(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,
                      alias: "return-type",
                      greedy: !0,
                      lookbehind: !0,
                    },
                    {
                      pattern:
                        /(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,
                      alias: ["class-name-fully-qualified", "return-type"],
                      greedy: !0,
                      lookbehind: !0,
                      inside: { punctuation: /\\/ },
                    },
                  ],
                  constant: r,
                  function: {
                    pattern: /(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,
                    lookbehind: !0,
                    inside: { punctuation: /\\/ },
                  },
                  property: { pattern: /(->\s*)\w+/, lookbehind: !0 },
                  number: n,
                  operator: i,
                  punctuation: a,
                };
                var s = {
                    pattern:
                      /\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,
                    lookbehind: !0,
                    inside: e.languages.php,
                  },
                  o = [
                    {
                      pattern: /<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,
                      alias: "nowdoc-string",
                      greedy: !0,
                      inside: {
                        delimiter: {
                          pattern: /^<<<'[^']+'|[a-z_]\w*;$/i,
                          alias: "symbol",
                          inside: { punctuation: /^<<<'?|[';]$/ },
                        },
                      },
                    },
                    {
                      pattern:
                        /<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,
                      alias: "heredoc-string",
                      greedy: !0,
                      inside: {
                        delimiter: {
                          pattern: /^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,
                          alias: "symbol",
                          inside: { punctuation: /^<<<"?|[";]$/ },
                        },
                        interpolation: s,
                      },
                    },
                    {
                      pattern: /`(?:\\[\s\S]|[^\\`])*`/,
                      alias: "backtick-quoted-string",
                      greedy: !0,
                    },
                    {
                      pattern: /'(?:\\[\s\S]|[^\\'])*'/,
                      alias: "single-quoted-string",
                      greedy: !0,
                    },
                    {
                      pattern: /"(?:\\[\s\S]|[^\\"])*"/,
                      alias: "double-quoted-string",
                      greedy: !0,
                      inside: { interpolation: s },
                    },
                  ];
                e.languages.insertBefore("php", "variable", {
                  string: o,
                  attribute: {
                    pattern:
                      /#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,
                    greedy: !0,
                    inside: {
                      "attribute-content": {
                        pattern: /^(#\[)[\s\S]+(?=\]$)/,
                        lookbehind: !0,
                        inside: {
                          comment: t,
                          string: o,
                          "attribute-class-name": [
                            {
                              pattern: /([^:]|^)\b[a-z_]\w*(?!\\)\b/i,
                              alias: "class-name",
                              greedy: !0,
                              lookbehind: !0,
                            },
                            {
                              pattern: /([^:]|^)(?:\\?\b[a-z_]\w*)+/i,
                              alias: [
                                "class-name",
                                "class-name-fully-qualified",
                              ],
                              greedy: !0,
                              lookbehind: !0,
                              inside: { punctuation: /\\/ },
                            },
                          ],
                          constant: r,
                          number: n,
                          operator: i,
                          punctuation: a,
                        },
                      },
                      delimiter: { pattern: /^#\[|\]$/, alias: "punctuation" },
                    },
                  },
                }),
                  e.hooks.add("before-tokenize", function (l) {
                    if (/<\?/.test(l.code)) {
                      var u =
                        /<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g;
                      e.languages["markup-templating"].buildPlaceholders(
                        l,
                        "php",
                        u
                      );
                    }
                  }),
                  e.hooks.add("after-tokenize", function (l) {
                    e.languages["markup-templating"].tokenizePlaceholders(
                      l,
                      "php"
                    );
                  });
              })(Prism)),
            Xi
          );
        }
        dl();
        const ta = "(if|else if|await|then|catch|each|html|debug)";
        (Prism.languages.svelte = Prism.languages.extend("markup", {
          each: {
            pattern: new RegExp(
              "{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"
            ),
            inside: {
              "language-javascript": [
                {
                  pattern: /(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,
                  lookbehind: !0,
                  inside: Prism.languages.javascript,
                },
                {
                  pattern: /(as[\s]*)[\s\S]*(?=\s*)/,
                  lookbehind: !0,
                  inside: Prism.languages.javascript,
                },
                {
                  pattern: /(#each[\s]*)[\s\S]*(?=as)/,
                  lookbehind: !0,
                  inside: Prism.languages.javascript,
                },
              ],
              keyword: /[#/]each|as/,
              punctuation: /{|}/,
            },
          },
          block: {
            pattern: new RegExp(
              "{[#:/@]/s" +
                ta +
                "(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"
            ),
            inside: {
              punctuation: /^{|}$/,
              keyword: [new RegExp("[#:/@]" + ta + "( )*"), /as/, /then/],
              "language-javascript": {
                pattern: /[\s\S]*/,
                inside: Prism.languages.javascript,
              },
            },
          },
          tag: {
            pattern:
              /<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,
            greedy: !0,
            inside: {
              tag: {
                pattern: /^<\/?[^\s>\/]+/i,
                inside: { punctuation: /^<\/?/, namespace: /^[^\s>\/:]+:/ },
              },
              "language-javascript": {
                pattern:
                  /\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,
                inside: Prism.languages.javascript,
              },
              "attr-value": {
                pattern: /=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,
                inside: {
                  punctuation: [
                    /^=/,
                    { pattern: /^(\s*)["']|["']$/, lookbehind: !0 },
                  ],
                  "language-javascript": {
                    pattern: /{[\s\S]+}/,
                    inside: Prism.languages.javascript,
                  },
                },
              },
              punctuation: /\/?>/,
              "attr-name": {
                pattern: /[^\s>\/]+/,
                inside: { namespace: /^[^\s>\/:]+:/ },
              },
            },
          },
          "language-javascript": {
            pattern:
              /\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,
            lookbehind: !0,
            inside: Prism.languages.javascript,
          },
        })),
          (Prism.languages.svelte.tag.inside["attr-value"].inside.entity =
            Prism.languages.svelte.entity),
          Prism.hooks.add("wrap", (e) => {
            e.type === "entity" &&
              (e.attributes.title = e.content.replace(/&amp;/, "&"));
          }),
          Object.defineProperty(Prism.languages.svelte.tag, "addInlined", {
            value: function (t, r) {
              const n = {};
              (n["language-" + r] = {
                pattern: /(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,
                lookbehind: !0,
                inside: Prism.languages[r],
              }),
                (n.cdata = /^<!\[CDATA\[|\]\]>$/i);
              const i = {
                "included-cdata": {
                  pattern: /<!\[CDATA\[[\s\S]*?\]\]>/i,
                  inside: n,
                },
              };
              i["language-" + r] = {
                pattern: /[\s\S]+/,
                inside: Prism.languages[r],
              };
              const a = {};
              (a[t] = {
                pattern: RegExp(
                  /(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(
                    /__/g,
                    t
                  ),
                  "i"
                ),
                lookbehind: !0,
                greedy: !0,
                inside: i,
              }),
                Prism.languages.insertBefore("svelte", "cdata", a);
            },
          }),
          Prism.languages.svelte.tag.addInlined("style", "css"),
          Prism.languages.svelte.tag.addInlined("script", "javascript"),
          (function () {
            typeof Prism > "u" ||
              typeof document > "u" ||
              !document.createRange ||
              ((Prism.plugins.KeepMarkup = !0),
              Prism.hooks.add("before-highlight", function (e) {
                if (
                  !e.element.children.length ||
                  !Prism.util.isActive(e.element, "keep-markup", !0)
                )
                  return;
                var t = Prism.util.isActive(e.element, "drop-tokens", !1);
                function r(o) {
                  return !(
                    t &&
                    o.nodeName.toLowerCase() === "span" &&
                    o.classList.contains("token")
                  );
                }
                var n = 0,
                  i = [];
                function a(o) {
                  if (!r(o)) {
                    s(o);
                    return;
                  }
                  var l = { element: o, posOpen: n };
                  i.push(l), s(o), (l.posClose = n);
                }
                function s(o) {
                  for (var l = 0, u = o.childNodes.length; l < u; l++) {
                    var x = o.childNodes[l];
                    x.nodeType === 1
                      ? a(x)
                      : x.nodeType === 3 && (n += x.data.length);
                  }
                }
                s(e.element), i.length && (e.keepMarkup = i);
              }),
              Prism.hooks.add("after-highlight", function (e) {
                if (e.keepMarkup && e.keepMarkup.length) {
                  var t = function (r, n) {
                    for (var i = 0, a = r.childNodes.length; i < a; i++) {
                      var s = r.childNodes[i];
                      if (s.nodeType === 1) {
                        if (!t(s, n)) return !1;
                      } else
                        s.nodeType === 3 &&
                          (!n.nodeStart &&
                            n.pos + s.data.length > n.node.posOpen &&
                            ((n.nodeStart = s),
                            (n.nodeStartPos = n.node.posOpen - n.pos)),
                          n.nodeStart &&
                            n.pos + s.data.length >= n.node.posClose &&
                            ((n.nodeEnd = s),
                            (n.nodeEndPos = n.node.posClose - n.pos)),
                          (n.pos += s.data.length));
                      if (n.nodeStart && n.nodeEnd) {
                        var o = document.createRange();
                        return (
                          o.setStart(n.nodeStart, n.nodeStartPos),
                          o.setEnd(n.nodeEnd, n.nodeEndPos),
                          (n.node.element.innerHTML = ""),
                          n.node.element.appendChild(o.extractContents()),
                          o.insertNode(n.node.element),
                          o.detach(),
                          !1
                        );
                      }
                    }
                    return !0;
                  };
                  e.keepMarkup.forEach(function (r) {
                    t(e.element, { node: r, pos: 0 });
                  }),
                    (e.highlightedCode = e.element.innerHTML);
                }
              }));
          })();
        const hl =
            "code[class*=language-],pre[class*=language-]{color:var(--prism-maintext);text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:4;-webkit-hyphens:none;hyphens:none;direction:ltr;font-size:1em;line-height:1.5}pre>code[class*=language-]{font-size:1em}pre[class*=language-]{border:1px solid var(--prism-border);border-radius:.25rem;margin:.5em 0;padding:1em;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:var(--prism-background)}.token.comment,.token.prolog,.token.doctype,.token.italic,.token.cdata{font-style:italic}.token.important,.token.function,.token.bold{font-weight:700}.token.namespace{opacity:.7}.token.atrule{color:var(--prism-atrule)}.token.attr{color:var(--prism-attr)}.token.attr-name{color:var(--prism-attr-name)}.token.boolean{color:var(--prism-boolean)}.token.builtin{color:var(--prism-builtin)}.token.cdata{color:var(--prism-cdata)}.token.changed{color:var(--prism-changed)}.token.char{color:var(--prism-char)}.token.comment{color:var(--prism-comment)}.token.constant{color:var(--prism-constant)}.token.deleted{color:var(--prism-deleted)}.token.doctype{color:var(--prism-doctype)}.token.entity{color:var(--prism-entity);cursor:help}.token.function{color:var(--prism-function)}.token.function-variable{color:var(--prism-function-variable,var(--prism-function))}.token.inserted{color:var(--prism-inserted)}.token.keyword{color:var(--prism-keyword)}.token.number{color:var(--prism-number)}.token.operator{color:var(--prism-operator)}.token.prolog{color:var(--prism-prolog)}.token.property{color:var(--prism-property)}.token.punctuation{color:var(--prism-punctuation)}.token.regex{color:var(--prism-regex)}.token.selector{color:var(--prism-selector)}.token.string{color:var(--prism-string)}.token.symbol{color:var(--prism-symbol)}.token.tag{color:var(--prism-tag)}.token.url{color:var(--prism-url)}.token.variable{color:var(--prism-variable)}.token.placeholder{color:var(--prism-placeholder)}.token.statement{color:var(--prism-statement)}.token.attr-value{color:var(--prism-attr-value)}.token.control{color:var(--prism-control)}.token.directive{color:var(--prism-directive)}.token.unit{color:var(--prism-unit)}.token.important{color:var(--prism-important)}.token.class-name{color:var(--prism-class-name)}",
          ze =
            Te(`/*! tailwindcss v4.1.6 | MIT License | https://tailwindcss.com */
@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-scroll-snap-strictness:proximity;--tw-space-y-reverse:0;--tw-divide-y-reverse:0;--tw-border-style:solid;--tw-font-weight:initial;--tw-tracking:initial;--tw-ordinal:initial;--tw-slashed-zero:initial;--tw-numeric-figure:initial;--tw-numeric-spacing:initial;--tw-numeric-fraction:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-backdrop-blur:initial;--tw-backdrop-brightness:initial;--tw-backdrop-contrast:initial;--tw-backdrop-grayscale:initial;--tw-backdrop-hue-rotate:initial;--tw-backdrop-invert:initial;--tw-backdrop-opacity:initial;--tw-backdrop-saturate:initial;--tw-backdrop-sepia:initial;--tw-content:"";--tw-duration:initial}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-100:#ffe2e2;--color-red-500:#fb2c36;--color-red-600:#e40014;--color-red-700:#bf000f;--color-red-800:#9f0712;--color-orange-100:#ffedd5;--color-orange-500:#fe6e00;--color-orange-800:#9f2d00;--color-amber-400:#fcbb00;--color-yellow-100:#fef9c2;--color-yellow-400:#fac800;--color-yellow-600:#cd8900;--color-yellow-800:#874b00;--color-green-100:#dcfce7;--color-green-600:#00a544;--color-green-700:#008138;--color-green-800:#016630;--color-sky-50:#f0f9ff;--color-sky-100:#dff2fe;--color-sky-200:#b8e6fe;--color-sky-300:#77d4ff;--color-sky-400:#00bcfe;--color-sky-500:#00a5ef;--color-sky-600:#0084cc;--color-sky-700:#0069a4;--color-sky-800:#005986;--color-sky-900:#024a70;--color-sky-950:#052f4a;--color-blue-600:#155dfc;--color-zinc-50:#fafafa;--color-zinc-100:#f4f4f5;--color-zinc-200:#e4e4e7;--color-zinc-300:#d4d4d8;--color-zinc-400:#9f9fa9;--color-zinc-500:#71717b;--color-zinc-600:#52525c;--color-zinc-700:#3f3f46;--color-zinc-800:#27272a;--color-zinc-900:#18181b;--color-zinc-950:#09090b;--color-neutral-400:#a1a1a1;--color-white:var(--mut-white,#fff);--spacing:.25rem;--container-6xl:72rem;--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-5xl:3rem;--text-5xl--line-height:1;--font-weight-light:300;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--tracking-tight:-.025em;--radius-sm:.25rem;--radius-md:.375rem;--radius-lg:.5rem;--radius-3xl:1.5rem;--blur-lg:16px;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono);--transition-property-max-width:max-width;--transition-property-stroke-opacity:stroke-opacity;--spacing-drawer-half-open:var(--mte-drawer-height-half-open,120px)}@supports (color:lab(0% 0 0)){:root,:host{--color-red-100:#ffe2e2;--color-red-500:#fb2c36;--color-red-600:#e40014;--color-red-700:#bf000f;--color-red-800:#9f0712;--color-orange-100:#ffedd5;--color-orange-500:#fe6e00;--color-orange-800:#9f2d00;--color-amber-400:#fcbb00;--color-yellow-100:#fef9c2;--color-yellow-400:#fac800;--color-yellow-600:#cd8900;--color-yellow-800:#874b00;--color-green-100:#dcfce7;--color-green-600:#00a544;--color-green-700:#008138;--color-green-800:#016630;--color-sky-50:#f0f9ff;--color-sky-100:#dff2fe;--color-sky-200:#b8e6fe;--color-sky-300:#77d4ff;--color-sky-400:#00bcfe;--color-sky-500:#00a5ef;--color-sky-600:#0084cc;--color-sky-700:#0069a4;--color-sky-800:#005986;--color-sky-900:#024a70;--color-sky-950:#052f4a;--color-blue-600:#155dfc;--color-zinc-50:#fafafa;--color-zinc-100:#f4f4f5;--color-zinc-200:#e4e4e7;--color-zinc-300:#d4d4d8;--color-zinc-400:#9f9fa9;--color-zinc-500:#71717b;--color-zinc-600:#52525c;--color-zinc-700:#3f3f46;--color-zinc-800:#27272a;--color-zinc-900:#18181b;--color-zinc-950:#09090b;--color-neutral-400:#a1a1a1}@supports (color:lab(0% 0 0)){:root,:host{--color-red-100:lab(92.243% 10.2865 3.83865);--color-red-500:lab(55.4814% 75.0732 48.8528);--color-red-600:lab(48.4493% 77.4328 61.5452);--color-red-700:lab(40.4273% 67.2623 53.7441);--color-red-800:lab(33.7174% 55.8993 41.0293);--color-orange-100:lab(94.7127% 3.58394 14.3151);--color-orange-500:lab(64.272% 57.1788 90.3583);--color-orange-800:lab(37.1566% 46.6433 50.5562);--color-amber-400:lab(80.1641% 16.6016 99.2089);--color-yellow-100:lab(97.3564% -4.51407 27.344);--color-yellow-400:lab(83.2664% 8.65132 106.895);--color-yellow-600:lab(62.7799% 22.4198 86.1544);--color-yellow-800:lab(38.7484% 23.5833 51.4916);--color-green-100:lab(96.1861% -13.8464 6.52365);--color-green-600:lab(59.0978% -58.6621 41.2579);--color-green-700:lab(47.0329% -47.0239 31.4788);--color-green-800:lab(37.4616% -36.7971 22.9692);--color-sky-50:lab(97.3623% -2.33802 -4.13098);--color-sky-100:lab(94.3709% -4.56053 -8.23453);--color-sky-200:lab(88.6983% -11.3978 -16.8488);--color-sky-300:lab(80.3307% -20.2945 -31.385);--color-sky-400:lab(70.687% -23.6078 -45.9483);--color-sky-500:lab(63.3038% -18.433 -51.0407);--color-sky-600:lab(51.7754% -11.4712 -49.8349);--color-sky-700:lab(41.6013% -9.10805 -42.5647);--color-sky-800:lab(35.164% -9.57692 -34.4068);--color-sky-900:lab(29.1959% -8.34689 -28.2453);--color-sky-950:lab(17.8299% -5.31271 -21.1584);--color-blue-600:lab(44.0605% 29.0279 -86.0352);--color-zinc-50:lab(98.26% -.0000298023 0);--color-zinc-100:lab(96.1634% .0993311 -.364041);--color-zinc-200:lab(90.6853% .399232 -1.45452);--color-zinc-300:lab(84.9837% .601292 -2.17987);--color-zinc-400:lab(65.6464% 1.53497 -5.42429);--color-zinc-500:lab(47.8878% 1.65477 -5.77283);--color-zinc-600:lab(35.1166% 1.78212 -6.1173);--color-zinc-700:lab(26.8019% 1.35387 -4.68303);--color-zinc-800:lab(15.7305% .613764 -2.16959);--color-zinc-900:lab(8.30603% .618212 -2.16573);--color-zinc-950:lab(2.51107% .242703 -.886115);--color-neutral-400:lab(66.128% 0 0)}}}:host{--mte-drawer-height-half-open:120px}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;-webkit-text-decoration:inherit;-webkit-text-decoration:inherit;-webkit-text-decoration:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab, red, red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::file-selector-button{appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}[type=text],input:where(:not([type])),[type=email],[type=url],[type=password],[type=number],[type=date],[type=datetime-local],[type=month],[type=search],[type=tel],[type=time],[type=week],[multiple],textarea,select{appearance:none;border-color:var(--mut-gray-500,var(--color-zinc-500));--tw-shadow:0 0 #0000;background-color:#fff;border-width:1px;border-radius:0;padding:.5rem .75rem;font-size:1rem;line-height:1.5rem}:is([type=text],input:where(:not([type])),[type=email],[type=url],[type=password],[type=number],[type=date],[type=datetime-local],[type=month],[type=search],[type=tel],[type=time],[type=week],[multiple],textarea,select):focus{outline-offset:2px;--tw-ring-inset:var(--tw-empty, );--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#155dfc;--tw-ring-offset-shadow:var(--tw-ring-inset)0 0 0 var(--tw-ring-offset-width)var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow);border-color:#155dfc;border-color:lab(44.0605% 29.0279 -86.0352);outline:2px solid #0000}@supports (color:lab(0% 0 0)){:is([type=text],input:where(:not([type])),[type=email],[type=url],[type=password],[type=number],[type=date],[type=datetime-local],[type=month],[type=search],[type=tel],[type=time],[type=week],[multiple],textarea,select):focus{--tw-ring-color:#155dfc}@supports (color:lab(0% 0 0)){:is([type=text],input:where(:not([type])),[type=email],[type=url],[type=password],[type=number],[type=date],[type=datetime-local],[type=month],[type=search],[type=tel],[type=time],[type=week],[multiple],textarea,select):focus{--tw-ring-color:lab(44.0605% 29.0279 -86.0352)}}}input::placeholder,textarea::placeholder{color:var(--mut-gray-500,var(--color-zinc-500));opacity:1}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-date-and-time-value{min-height:1.5em}::-webkit-date-and-time-value{text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit{padding-top:0;padding-bottom:0}::-webkit-datetime-edit-year-field{padding-top:0;padding-bottom:0}::-webkit-datetime-edit-month-field{padding-top:0;padding-bottom:0}::-webkit-datetime-edit-day-field{padding-top:0;padding-bottom:0}::-webkit-datetime-edit-hour-field{padding-top:0;padding-bottom:0}::-webkit-datetime-edit-minute-field{padding-top:0;padding-bottom:0}::-webkit-datetime-edit-second-field{padding-top:0;padding-bottom:0}::-webkit-datetime-edit-millisecond-field{padding-top:0;padding-bottom:0}::-webkit-datetime-edit-meridiem-field{padding-top:0;padding-bottom:0}select{print-color-adjust:exact;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='oklch(55.1%25 0.027 264.364)' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right .5rem center;background-repeat:no-repeat;background-size:1.5em 1.5em;padding-right:2.5rem}[multiple],[size]:where(select:not([size="1"])){background-image:initial;background-position:initial;background-repeat:unset;background-size:initial;print-color-adjust:unset;padding-right:.75rem}[type=checkbox],[type=radio]{appearance:none;print-color-adjust:exact;vertical-align:middle;-webkit-user-select:none;user-select:none;color:#155dfc;color:lab(44.0605% 29.0279 -86.0352);border-color:var(--mut-gray-500,var(--color-zinc-500));--tw-shadow:0 0 #0000;background-color:#fff;background-origin:border-box;border-width:1px;flex-shrink:0;width:1rem;height:1rem;padding:0;display:inline-block}[type=checkbox]{border-radius:0}[type=radio]{border-radius:100%}[type=checkbox]:focus,[type=radio]:focus{outline-offset:2px;--tw-ring-inset:var(--tw-empty, );--tw-ring-offset-width:2px;--tw-ring-offset-color:#fff;--tw-ring-color:#155dfc;--tw-ring-offset-shadow:var(--tw-ring-inset)0 0 0 var(--tw-ring-offset-width)var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow);outline:2px solid #0000}@supports (color:lab(0% 0 0)){[type=checkbox]:focus,[type=radio]:focus{--tw-ring-color:#155dfc}@supports (color:lab(0% 0 0)){[type=checkbox]:focus,[type=radio]:focus{--tw-ring-color:lab(44.0605% 29.0279 -86.0352)}}}[type=checkbox]:checked,[type=radio]:checked{background-color:currentColor;background-position:50%;background-repeat:no-repeat;background-size:100% 100%;border-color:#0000}[type=checkbox]:checked{background-image:url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e")}@media (forced-colors:active){[type=checkbox]:checked{appearance:auto}}[type=radio]:checked{background-image:url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e")}@media (forced-colors:active){[type=radio]:checked{appearance:auto}}[type=checkbox]:checked:hover,[type=checkbox]:checked:focus,[type=radio]:checked:hover,[type=radio]:checked:focus{background-color:currentColor;border-color:#0000}[type=checkbox]:indeterminate{background-color:currentColor;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 16 16'%3e%3cpath stroke='white' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M4 8h8'/%3e%3c/svg%3e");background-position:50%;background-repeat:no-repeat;background-size:100% 100%;border-color:#0000}@media (forced-colors:active){[type=checkbox]:indeterminate{appearance:auto}}[type=checkbox]:indeterminate:hover,[type=checkbox]:indeterminate:focus{background-color:currentColor;border-color:#0000}[type=file]{background:unset;border-color:inherit;font-size:unset;line-height:inherit;border-width:0;border-radius:0;padding:0}[type=file]:focus{outline:1px solid buttontext;outline:1px auto -webkit-focus-ring-color}}@layer components;@layer utilities{.pointer-events-none{pointer-events:none}.invisible{visibility:hidden}.visible{visibility:visible}.sr-only{clip:rect(0,0,0,0);white-space:nowrap;border-width:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.sticky{position:sticky}.top-offset{top:var(--top-offset,0)}.bottom-0{bottom:calc(var(--spacing)*0)}.left-0{left:calc(var(--spacing)*0)}.z-10{z-index:10}.z-20{z-index:20}.float-right{float:right}.container{width:100%}@media (min-width:2000px){.container{max-width:2000px}}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.container{margin-inline:auto}.mx-0\\.5{margin-inline:calc(var(--spacing)*.5)}.mx-1{margin-inline:calc(var(--spacing)*1)}.mx-2{margin-inline:calc(var(--spacing)*2)}.mx-auto{margin-inline:auto}.my-3{margin-block:calc(var(--spacing)*3)}.my-4{margin-block:calc(var(--spacing)*4)}.ms-1{margin-inline-start:calc(var(--spacing)*1)}.ms-3{margin-inline-start:calc(var(--spacing)*3)}.me-1{margin-inline-end:calc(var(--spacing)*1)}.me-2{margin-inline-end:calc(var(--spacing)*2)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-4{margin-top:calc(var(--spacing)*4)}.mr-2{margin-right:calc(var(--spacing)*2)}.mr-4{margin-right:calc(var(--spacing)*4)}.mr-6{margin-right:calc(var(--spacing)*6)}.mr-auto{margin-right:auto}.-mb-px{margin-bottom:-1px}.mb-0{margin-bottom:calc(var(--spacing)*0)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.ml-1{margin-left:calc(var(--spacing)*1)}.ml-2{margin-left:calc(var(--spacing)*2)}.ml-4{margin-left:calc(var(--spacing)*4)}.ml-6{margin-left:calc(var(--spacing)*6)}.ml-auto{margin-left:auto}.block{display:block}.contents{display:contents}.flex{display:flex}.hidden{display:none}.inline{display:inline}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.table{display:table}.size-4{width:calc(var(--spacing)*4);height:calc(var(--spacing)*4)}.size-6{width:calc(var(--spacing)*6);height:calc(var(--spacing)*6)}.h-2{height:calc(var(--spacing)*2)}.h-3{height:calc(var(--spacing)*3)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-8{height:calc(var(--spacing)*8)}.h-100{height:calc(var(--spacing)*100)}.h-fit{height:fit-content}.h-full{height:100%}.max-h-\\[33rem\\]{max-height:33rem}.w-4{width:calc(var(--spacing)*4)}.w-5{width:calc(var(--spacing)*5)}.w-12{width:calc(var(--spacing)*12)}.w-24{width:calc(var(--spacing)*24)}.w-full{width:100%}.max-w-6xl{max-width:var(--container-6xl)}.max-w-\\[40rem\\]{max-width:40rem}.min-w-\\[24px\\]{min-width:24px}.shrink-0{flex-shrink:0}.grow{flex-grow:1}.table-auto{table-layout:auto}.rotate-180{rotate:180deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.cursor-help{cursor:help}.cursor-pointer{cursor:pointer}.resize{resize:both}.snap-y{scroll-snap-type:y var(--tw-scroll-snap-strictness)}.snap-start{scroll-snap-align:start}.flex-col{flex-direction:column}.flex-row{flex-direction:row}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-around{justify-content:space-around}.justify-center{justify-content:center}.justify-start{justify-content:flex-start}.gap-2{gap:calc(var(--spacing)*2)}.gap-4{gap:calc(var(--spacing)*4)}.gap-5{gap:calc(var(--spacing)*5)}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.divide-y>:not(:last-child)){--tw-divide-y-reverse:0;border-bottom-style:var(--tw-border-style);border-top-style:var(--tw-border-style);border-top-width:calc(1px*var(--tw-divide-y-reverse));border-bottom-width:calc(1px*calc(1 - var(--tw-divide-y-reverse)))}:where(.divide-gray-200>:not(:last-child)){border-color:var(--mut-gray-200,var(--color-zinc-200))}.truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.rounded-sm{border-radius:var(--radius-sm)}.rounded-t-3xl{border-top-left-radius:var(--radius-3xl);border-top-right-radius:var(--radius-3xl)}.rounded-t-lg{border-top-left-radius:var(--radius-lg);border-top-right-radius:var(--radius-lg)}.border{border-style:var(--tw-border-style);border-width:1px}.border-0{border-style:var(--tw-border-style);border-width:0}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-b-2{border-bottom-style:var(--tw-border-style);border-bottom-width:2px}.border-none{--tw-border-style:none;border-style:none}.border-gray-200{border-color:var(--mut-gray-200,var(--color-zinc-200))}.border-primary-600{border-color:var(--mut-primary-600,var(--color-sky-600))}.border-transparent{border-color:#0000}.bg-blue-600{background-color:var(--color-blue-600)}.bg-gray-100{background-color:var(--mut-gray-100,var(--color-zinc-100))}.bg-gray-200{background-color:var(--mut-gray-200,var(--color-zinc-200))}.bg-gray-200\\/60{background-color:var(--mut-gray-200,#e4e4e7)}@supports (color:lab(0% 0 0)){.bg-gray-200\\/60{background-color:var(--mut-gray-200,#e4e4e7)}@supports (color:lab(0% 0 0)){.bg-gray-200\\/60{background-color:var(--mut-gray-200,lab(90.6853% .399232 -1.45452))}}}@supports (color:color-mix(in lab, red, red)){.bg-gray-200\\/60{background-color:color-mix(in oklab,var(--mut-gray-200,var(--color-zinc-200))60%,transparent)}}.bg-gray-300{background-color:var(--mut-gray-300,var(--color-zinc-300))}.bg-green-100{background-color:var(--color-green-100)}.bg-green-600{background-color:var(--color-green-600)}.bg-inherit{background-color:inherit}.bg-orange-100{background-color:var(--color-orange-100)}.bg-primary-100{background-color:var(--mut-primary-100,var(--color-sky-100))}.bg-primary-600{background-color:var(--mut-primary-600,var(--color-sky-600))}.bg-red-100{background-color:var(--color-red-100)}.bg-red-600{background-color:var(--color-red-600)}.bg-transparent{background-color:#0000}.bg-white{background-color:var(--mut-white,#fff)}.bg-yellow-100{background-color:var(--color-yellow-100)}.bg-yellow-400{background-color:var(--color-yellow-400)}.bg-yellow-600{background-color:var(--color-yellow-600)}.stroke-gray-800{stroke:var(--mut-gray-800,var(--color-zinc-800))}.p-1{padding:calc(var(--spacing)*1)}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-2\\.5{padding-inline:calc(var(--spacing)*2.5)}.px-4{padding-inline:calc(var(--spacing)*4)}.py-0\\.5{padding-block:calc(var(--spacing)*.5)}.py-2{padding-block:calc(var(--spacing)*2)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-6{padding-block:calc(var(--spacing)*6)}.pe-4{padding-inline-end:calc(var(--spacing)*4)}.pt-7{padding-top:calc(var(--spacing)*7)}.pr-2{padding-right:calc(var(--spacing)*2)}.pb-4{padding-bottom:calc(var(--spacing)*4)}.pb-drawer-half-open{padding-bottom:var(--mte-drawer-height-half-open,120px)}.pl-1{padding-left:calc(var(--spacing)*1)}.text-center{text-align:center}.text-left{text-align:left}.align-middle{vertical-align:middle}.font-sans{font-family:var(--font-sans)}.text-5xl{font-size:var(--text-5xl);line-height:var(--tw-leading,var(--text-5xl--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-light{--tw-font-weight:var(--font-weight-light);font-weight:var(--font-weight-light)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-tight{--tw-tracking:var(--tracking-tight);letter-spacing:var(--tracking-tight)}.whitespace-pre-wrap{white-space:pre-wrap}.text-gray-200{color:var(--mut-gray-200,var(--color-zinc-200))}.text-gray-400{color:var(--mut-gray-400,var(--color-zinc-400))}.text-gray-600{color:var(--mut-gray-600,var(--color-zinc-600))}.text-gray-700{color:var(--mut-gray-700,var(--color-zinc-700))}.text-gray-800{color:var(--mut-gray-800,var(--color-zinc-800))}.text-gray-900{color:var(--mut-gray-900,var(--color-zinc-900))}.text-green-700{color:var(--color-green-700)}.text-green-800{color:var(--color-green-800)}.text-orange-800{color:var(--color-orange-800)}.text-primary-500{color:var(--mut-primary-500,var(--color-sky-500))}.text-primary-800{color:var(--mut-primary-800,var(--color-sky-800))}.text-red-700{color:var(--color-red-700)}.text-red-800{color:var(--color-red-800)}.text-white{color:var(--mut-white,#fff)}.text-yellow-600{color:var(--color-yellow-600)}.text-yellow-800{color:var(--color-yellow-800)}.capitalize{text-transform:capitalize}.lowercase{text-transform:lowercase}.ordinal{--tw-ordinal:ordinal;font-variant-numeric:var(--tw-ordinal,)var(--tw-slashed-zero,)var(--tw-numeric-figure,)var(--tw-numeric-spacing,)var(--tw-numeric-fraction,)}.underline{text-decoration-line:underline}.decoration-dotted{text-decoration-style:dotted}.opacity-0{opacity:0}.opacity-100{opacity:1}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,#0000001a),0 8px 10px -6px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-offset-gray-200\\!{--tw-ring-offset-color:var(--mut-gray-200,var(--color-zinc-200))!important}.outline-hidden{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.outline-hidden{outline-offset:2px;outline:2px solid #0000}}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.backdrop-blur-lg{--tw-backdrop-blur:blur(var(--blur-lg));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,visibility,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-shadow{transition-property:box-shadow;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-stroke-opacity{transition-property:var(--transition-property-stroke-opacity);transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.\\[httparchive\\:summary_pages\\.2018_12_15_desktop\\]{httparchive:summary pages.2018 12 15 desktop}@media (hover:hover){.group-hover\\:bg-gray-200\\!:is(:where(.group):hover *){background-color:var(--mut-gray-200,var(--color-zinc-200))!important}}.group-aria-selected\\:text-gray-200:is(:where(.group)[aria-selected=true] *){color:var(--mut-gray-200,var(--color-zinc-200))}.group-aria-selected\\:text-primary-50:is(:where(.group)[aria-selected=true] *){color:var(--mut-primary-50,var(--color-sky-50))}.group-aria-selected\\:underline:is(:where(.group)[aria-selected=true] *){text-decoration-line:underline}.backdrop\\:bg-gray-950\\/50::backdrop{background-color:var(--mut-gray-950,#09090b)}@supports (color:lab(0% 0 0)){.backdrop\\:bg-gray-950\\/50::backdrop{background-color:var(--mut-gray-950,#09090b)}@supports (color:lab(0% 0 0)){.backdrop\\:bg-gray-950\\/50::backdrop{background-color:var(--mut-gray-950,lab(2.51107% .242703 -.886115))}}}@supports (color:color-mix(in lab, red, red)){.backdrop\\:bg-gray-950\\/50::backdrop{background-color:color-mix(in oklab,var(--mut-gray-950,var(--color-zinc-950))50%,transparent)}}.backdrop\\:backdrop-blur-lg::backdrop{--tw-backdrop-blur:blur(var(--blur-lg));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.after\\:text-gray-800:after{content:var(--tw-content);color:var(--mut-gray-800,var(--color-zinc-800))}.after\\:content-\\[\\'\\/\\'\\]:after{content:var(--tw-content);--tw-content:"/";content:var(--tw-content)}.last\\:mr-12:last-child{margin-right:calc(var(--spacing)*12)}.odd\\:bg-gray-100:nth-child(odd),.even\\:bg-gray-100:nth-child(2n){background-color:var(--mut-gray-100,var(--color-zinc-100))}.checked\\:bg-primary-600:checked{background-color:var(--mut-primary-600,var(--color-sky-600))}@media (hover:hover){.hover\\:cursor-pointer:hover{cursor:pointer}.hover\\:border-gray-300:hover{border-color:var(--mut-gray-300,var(--color-zinc-300))}.hover\\:bg-gray-100:hover{background-color:var(--mut-gray-100,var(--color-zinc-100))}.hover\\:bg-gray-200:hover{background-color:var(--mut-gray-200,var(--color-zinc-200))}.hover\\:bg-primary-700:hover{background-color:var(--mut-primary-700,var(--color-sky-700))}.hover\\:text-gray-700:hover{color:var(--mut-gray-700,var(--color-zinc-700))}.hover\\:text-gray-900:hover{color:var(--mut-gray-900,var(--color-zinc-900))}.hover\\:text-primary-on:hover{color:var(--mut-primary-on,var(--color-sky-700))}.hover\\:underline:hover{text-decoration-line:underline}}.focus\\:shadow-none:focus{--tw-shadow:0 0 #0000;box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-2:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-primary-500:focus{--tw-ring-color:var(--mut-primary-500,var(--color-sky-500))}.focus\\:outline-hidden:focus{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.focus\\:outline-hidden:focus{outline-offset:2px;outline:2px solid #0000}}.active\\:bg-gray-200:active{background-color:var(--mut-gray-200,var(--color-zinc-200))}.aria-selected\\:border-b-\\[3px\\][aria-selected=true]{border-bottom-style:var(--tw-border-style);border-bottom-width:3px}.aria-selected\\:border-solid[aria-selected=true]{--tw-border-style:solid;border-style:solid}.aria-selected\\:border-primary-700[aria-selected=true]{border-color:var(--mut-primary-700,var(--color-sky-700))}.aria-selected\\:bg-primary-500[aria-selected=true]{background-color:var(--mut-primary-500,var(--color-sky-500))}.aria-selected\\:text-gray-50[aria-selected=true]{color:var(--mut-gray-50,var(--color-zinc-50))}.aria-selected\\:text-primary-on[aria-selected=true]{color:var(--mut-primary-on,var(--color-sky-700))}.aria-selected\\:shadow-lg[aria-selected=true]{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}@media (prefers-reduced-motion:no-preference){.motion-safe\\:transition-\\[height\\,max-width\\]{transition-property:height,max-width;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.motion-safe\\:transition-max-width{transition-property:var(--transition-property-max-width);transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.motion-safe\\:duration-200{--tw-duration:.2s;transition-duration:.2s}}@media (min-width:48rem){.md\\:ml-2{margin-left:calc(var(--spacing)*2)}.md\\:w-1\\/2{width:50%}.md\\:after\\:pl-1:after{content:var(--tw-content);padding-left:calc(var(--spacing)*1)}}@media (min-width:96rem){.\\32 xl\\:w-28{width:calc(var(--spacing)*28)}}}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-scroll-snap-strictness{syntax:"*";inherits:false;initial-value:proximity}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-divide-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-ordinal{syntax:"*";inherits:false}@property --tw-slashed-zero{syntax:"*";inherits:false}@property --tw-numeric-figure{syntax:"*";inherits:false}@property --tw-numeric-spacing{syntax:"*";inherits:false}@property --tw-numeric-fraction{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-backdrop-blur{syntax:"*";inherits:false}@property --tw-backdrop-brightness{syntax:"*";inherits:false}@property --tw-backdrop-contrast{syntax:"*";inherits:false}@property --tw-backdrop-grayscale{syntax:"*";inherits:false}@property --tw-backdrop-hue-rotate{syntax:"*";inherits:false}@property --tw-backdrop-invert{syntax:"*";inherits:false}@property --tw-backdrop-opacity{syntax:"*";inherits:false}@property --tw-backdrop-saturate{syntax:"*";inherits:false}@property --tw-backdrop-sepia{syntax:"*";inherits:false}@property --tw-content{syntax:"*";inherits:false;initial-value:""}@property --tw-duration{syntax:"*";inherits:false}`),
          ra = Te(hl);
        if (
          ze.styleSheet &&
          document?.adoptedStyleSheets &&
          !document.adoptedStyleSheets.some(
            (e) => e.cssRules[0]?.cssText === ze.styleSheet.cssRules[0].cssText
          )
        ) {
          const e = new CSSStyleSheet();
          let t = ze.cssText;
          (t = t
            .replaceAll("inherits: false", "inherits: true")
            .substring(t.indexOf("@property"))),
            e.replaceSync(t),
            document.adoptedStyleSheets.push(e);
        }
        class qe extends zt {
          static styles = [ze];
        }
        const ir = (e, t) =>
            b`<li title=${
              e || P
            } class="my-3 rounded-sm bg-white px-2 py-3 shadow-sm">${t}</li>`,
          tt = (e, t) => b`<p title=${t || P}>${e}</p>`,
          na = (e) =>
            b`<div class="mt-2 mr-6 mb-6 flex flex-col gap-4">${e}</div>`,
          Q = (e, t) => b`<span role="img" aria-label="${t}">${e}</span>`,
          pl =
            ":host([mode=closed]){height:0}:host([mode=half]){height:var(--spacing-drawer-half-open)}:host([mode=open]){height:50%}";
        var ia = Object.defineProperty,
          fl = Object.getOwnPropertyDescriptor,
          aa = (e) => {
            throw TypeError(e);
          },
          gl = (e, t, r) =>
            t in e
              ? ia(e, t, {
                  enumerable: !0,
                  configurable: !0,
                  writable: !0,
                  value: r,
                })
              : (e[t] = r),
          Rt = (e, t, r, n) => {
            for (
              var i = n > 1 ? void 0 : n ? fl(t, r) : t, a = e.length - 1, s;
              a >= 0;
              a--
            )
              (s = e[a]) && (i = (n ? s(t, r, i) : s(i)) || i);
            return n && i && ia(t, r, i), i;
          },
          sa = (e, t, r) => gl(e, typeof t != "symbol" ? t + "" : t, r),
          oa = (e, t, r) => t.has(e) || aa("Cannot " + r),
          ar = (e, t, r) => (oa(e, t, "read from private field"), t.get(e)),
          Jr = (e, t, r) =>
            t.has(e)
              ? aa("Cannot add the same private member more than once")
              : t instanceof WeakSet
              ? t.add(e)
              : t.set(e, r),
          la = (e, t, r, n) => (
            oa(e, t, "write to private field"), t.set(e, r), r
          ),
          sr,
          Dt,
          Qr;
        const ml = 120;
        let rt = class extends qe {
          constructor() {
            super(),
              Jr(this, sr),
              Jr(this, Dt),
              sa(this, "toggleReadMore", (e) => {
                this.mode === "open"
                  ? (this.mode = "half")
                  : (this.mode = "open"),
                  e.preventDefault(),
                  e.stopImmediatePropagation();
              }),
              Jr(this, Qr, (e) => {
                e.key === "Escape" && (this.mode = "closed");
              }),
              (this.mode = "closed"),
              (this.hasDetail = !1),
              la(this, Dt, new AbortController()),
              la(
                this,
                sr,
                new il(this, {
                  callback: (e) => {
                    const t = e[0]?.contentRect.height ?? 0,
                      r = this.header?.clientHeight ?? 0;
                    return t - r;
                  },
                })
              );
          }
          get toggleMoreLabel() {
            switch (this.mode) {
              case "half":
                return b`${Q("🔼", "up arrow")} More`;
              case "open":
                return b`${Q("🔽", "down arrow")} Less`;
              case "closed":
                return P;
            }
          }
          connectedCallback() {
            super.connectedCallback(),
              window.addEventListener("keydown", ar(this, Qr), {
                signal: ar(this, Dt).signal,
              });
          }
          disconnectedCallback() {
            ar(this, Dt).abort(), super.disconnectedCallback();
          }
          render() {
            const e = this.mode === "open",
              t = ar(this, sr).value;
            return b`<aside @click="${(r) =>
              r.stopPropagation()}" class="mr-4 ml-6">
      <header class="w-full py-4">
        <h2>
          <slot name="header"></slot>
          ${vt(
            this.hasDetail,
            b`<button data-testId="btnReadMoreToggle" class="ml-2 cursor-pointer align-middle" @click="${this.toggleReadMore}">
              ${this.toggleMoreLabel}
            </button>`
          )}
        </h2>
      </header>
      <div
        style="${t && e ? `height: ${t}px;` : P}"
        class="${Gr({
          "mb-4 motion-safe:transition-max-width": !0,
          "overflow-y-auto": e,
        })}"
      >
        <slot name="summary"></slot>
        ${vt(
          this.hasDetail && this.mode === "open",
          b`<slot name="detail"></slot>`
        )}
      </div>
    </aside>`;
          }
        };
        (sr = new WeakMap()),
          (Dt = new WeakMap()),
          (Qr = new WeakMap()),
          sa(rt, "styles", [Te(pl), ze]),
          Rt([I({ reflect: !0 })], rt.prototype, "mode", 2),
          Rt(
            [I({ reflect: !0, type: Boolean, attribute: "has-detail" })],
            rt.prototype,
            "hasDetail",
            2
          ),
          Rt([I({ attribute: !1 })], rt.prototype, "toggleMoreLabel", 1),
          Rt([Xt("header")], rt.prototype, "header", 2),
          (rt = Rt([se("mte-drawer")], rt));
        function vt(e, t) {
          return e ? (typeof t == "function" ? t() : t) : P;
        }
        function Bt(e, t) {
          return e == null ? P : t(e);
        }
        function vl(e) {
          switch (e) {
            case "Killed":
              return "success";
            case "NoCoverage":
              return "caution";
            case "Survived":
              return "danger";
            case "Timeout":
              return "warning";
            case "Ignored":
            case "RuntimeError":
            case "Pending":
            case "CompileError":
              return "secondary";
          }
        }
        function bl(e) {
          switch (e) {
            case ne.Killing:
              return "success";
            case ne.Covering:
              return "warning";
            case ne.NotCovering:
              return "caution";
          }
        }
        function Xr(e) {
          switch (e) {
            case ne.Killing:
              return Q("✅", e);
            case ne.Covering:
              return Q("☂", e);
            case ne.NotCovering:
              return Q("🌧", e);
          }
        }
        function ca(e) {
          switch (e) {
            case "Killed":
              return Q("✅", e);
            case "NoCoverage":
              return Q("🙈", e);
            case "Ignored":
              return Q("🤥", e);
            case "Survived":
              return Q("👽", e);
            case "Timeout":
              return Q("⏰", e);
            case "Pending":
              return Q("⌛", e);
            case "RuntimeError":
            case "CompileError":
              return Q("💥", e);
          }
        }
        function en(e) {
          return e
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;")
            .replace(/'/g, "&#039;");
        }
        function bt(...e) {
          const t = e.filter(Boolean).join("/");
          {
            const r = new URL(window.location.href);
            return new URL(`#${t}`, r).href;
          }
        }
        function ua(e) {
          return e.length > 1 ? "s" : "";
        }
        function da({ fileName: e, location: t }) {
          return e
            ? `${e}${t ? `:${t.start.line}:${t.start.column}` : ""}`
            : "";
        }
        function ha(e) {
          e &&
            !yl(e) &&
            e.scrollIntoView({ block: "center", behavior: "smooth" });
        }
        function yl(e) {
          const { top: t, bottom: r } = e.getBoundingClientRect();
          return (
            t >= 0 &&
            r <=
              (window.innerHeight || document.documentElement.clientHeight) - ml
          );
        }
        const pa = new wi(),
          wl = el(
            jo(1),
            It(window, "hashchange").pipe(nl((e) => e.preventDefault()))
          ).pipe(
            qr(() =>
              window.location.hash
                .substr(1)
                .split("/")
                .filter(Boolean)
                .map(decodeURIComponent)
            )
          );
        var me = ((e) => ((e.mutant = "mutant"), (e.test = "test"), e))(
          me || {}
        );
        class Fe extends qe {
          shouldReactivate() {
            return !0;
          }
          reactivate() {
            this.requestUpdate();
          }
          #e = new gt();
          connectedCallback() {
            super.connectedCallback(),
              this.#e.add(
                pa.subscribe(() => this.shouldReactivate() && this.reactivate())
              );
          }
          disconnectedCallback() {
            super.disconnectedCallback(), this.#e.unsubscribe();
          }
        }
        const kl = `:host(:not([theme=dark])){--prism-maintext:#393a34;--prism-background:#f6f8fa;--prism-border:#ddd;--prism-cdata:#998;--prism-comment:var(--prism-cdata);--prism-doctype:var(--prism-cdata);--prism-prolog:var(--prism-cdata);--prism-attr-value:#e3116c;--prism-string:var(--prism-attr-value);--prism-boolean:#36acaa;--prism-entity:var(--prism-boolean);--prism-url:var(--prism-boolean);--prism-constant:var(--prism-boolean);--prism-inserted:var(--prism-boolean);--prism-number:var(--prism-boolean);--prism-property:var(--prism-boolean);--prism-regex:var(--prism-boolean);--prism-symbol:var(--prism-boolean);--prism-variable:var(--prism-boolean);--prism-atrule:#00a4db;--prism-attr-name:var(--prism-atrule);--prism-attr:var(--prism-atrule);--prism-operator:var(--prism-maintext);--prism-punctuation:var(--prism-maintext);--prism-deleted:#9a050f;--prism-function:var(--prism-deleted);--prism-function-variable:#6f42c1;--prism-selector:#00009f;--prism-tag:var(--prism-selector);--prism-keyword:var(--prism-selector)}:host([theme=dark]){--prism-maintext:#d3d0c8;--prism-background:#1d1f21;--prism-border:var(--mut-gray-200);--prism-cdata:#7c7c7c;--prism-comment:var(--prism-cdata);--prism-doctype:var(--prism-cdata);--prism-prolog:var(--prism-cdata);--prism-punctuation:#c5c8c6;--prism-tag:#96cbfe;--prism-property:var(--prism-tag);--prism-keyword:var(--prism-tag);--prism-class-name:#ffffb6;--prism-boolean:#9c9;--prism-constant:var(--prism-boolean);--prism-symbol:#f92672;--prism-deleted:var(--prism-symbol);--prism-number:#ff73fd;--prism-inserted:#a8ff60;--prism-selector:var(--prism-inserted);--prism-attr-name:var(--prism-inserted);--prism-string:var(--prism-inserted);--prism-char:var(--prism-inserted);--prism-builtin:var(--prism-inserted);--prism-variable:#c6c5fe;--prism-operator:#ededed;--prism-entity:#ffffb6;--prism-url:#96cbfe;--prism-attr-value:#f9ee98;--prism-atrule:var(--prism-attr-value);--prism-function:#dad085;--prism-regex:#e9c062;--prism-important:#fd971f}:host(:not([theme=dark])){--mut-file-ts-color:#498ba7;--mut-file-ts-test-color:#b7b73b;--mut-file-scala-color:#b8383d;--mut-file-java-color:#b8383d;--mut-file-js-color:#b7b73b;--mut-file-js-test-color:#cc6d2e;--mut-file-php-color:#9068b0;--mut-file-html-color:#498ba7;--mut-file-csharp-color:#498ba7;--mut-file-vue-color:#7fae42;--mut-file-gherkin-color:#00a818;--mut-file-svelte-color:#b8383d;--mut-file-rust-color:#627379}:host([theme=dark]){--mut-file-ts-color:#519aba;--mut-file-ts-test-color:#cbcb41;--mut-file-scala-color:#cc3e44;--mut-file-java-color:#cc3e44;--mut-file-js-color:#cbcb41;--mut-file-js-test-color:#e37933;--mut-file-php-color:#a074c4;--mut-file-html-color:#519aba;--mut-file-csharp-color:#519aba;--mut-file-vue-color:#8dc149;--mut-file-gherkin-color:#10b828;--mut-file-svelte-color:#cc3e44;--mut-file-rust-color:#6d8086}:host{--mut-squiggly-Survived:url("data:image/svg+xml;charset=UTF8,<svg xmlns='http://www.w3.org/2000/svg' height='3' width='6'><g fill='oklch(0.637 0.237 25.331)'><path d='m5.5 0-3 3H1.1l3-3z'/><path d='m4 0 2 2V.6L5.4 0zM0 2l1 1h1.4L0 .6z'/></g></svg>");--mut-squiggly-NoCoverage:url("data:image/svg+xml;charset=UTF8,<svg xmlns='http://www.w3.org/2000/svg' height='3' width='6'><g fill='oklch(0.75 0.183 55.934)'><path d='m5.5 0-3 3H1.1l3-3z'/><path d='m4 0 2 2V.6L5.4 0zM0 2l1 1h1.4L0 .6z'/></g></svg>");color:var(--c)}:host(:not([theme=dark])){--mut-octicon-icon-color:#498ba7;--mut-line-number:#6e7781;--mut-diff-add-bg:#e6ffec;--mut-diff-add-bg-line-number:#ccffd8;--mut-diff-add-line-number:#24292f;--mut-diff-del-bg:#ffebe9;--mut-diff-del-bg-line-number:#ffd7d5;--mut-diff-del-line-number:var(--mut-diff-add-line-number);--mut-badge-info-bg:#54c6ec;--mut-badge-info:#212529;--mut-code-lense:#919191}:host([theme=dark]){--lightningcss-light: ;--lightningcss-dark:initial;--lightningcss-light: ;--lightningcss-dark:initial;color-scheme:dark;--mut-octicon-icon-color:#519aba;--mut-line-number:#484f58;--mut-diff-add-bg:#2ea04326;--mut-diff-add-bg-line-number:#3fb9504d;--mut-diff-add-line-number:#c9d1d9;--mut-diff-del-bg:#f8514926;--mut-diff-del-bg-line-number:#f851494d;--mut-diff-del-line-number:#c9d1d9;--mut-badge-info-bg:#17a3b8;--mut-badge-info:#fff;--mut-code-lense:#999;--mut-white:var(--color-zinc-900);--mut-gray-50:var(--color-zinc-900);--mut-gray-100:var(--color-zinc-800);--mut-gray-200:var(--color-zinc-700);--mut-gray-300:var(--color-zinc-600);--mut-gray-400:var(--color-zinc-500);--mut-gray-500:var(--color-zinc-400);--mut-gray-600:var(--color-zinc-300);--mut-gray-700:var(--color-zinc-200);--mut-gray-800:var(--color-zinc-100);--mut-gray-900:var(--color-zinc-50);--mut-primary-100:var(--color-sky-800);--mut-primary-800:var(--color-sky-100);--mut-primary-900:var(--color-sky-50);--mut-primary-on:var(--color-sky-500)}`;
        var fa = Object.defineProperty,
          xl = Object.getOwnPropertyDescriptor,
          ga = (e) => {
            throw TypeError(e);
          },
          $l = (e, t, r) =>
            t in e
              ? fa(e, t, {
                  enumerable: !0,
                  configurable: !0,
                  writable: !0,
                  value: r,
                })
              : (e[t] = r),
          ve = (e, t, r, n) => {
            for (
              var i = n > 1 ? void 0 : n ? xl(t, r) : t, a = e.length - 1, s;
              a >= 0;
              a--
            )
              (s = e[a]) && (i = (n ? s(t, r, i) : s(i)) || i);
            return n && i && fa(t, r, i), i;
          },
          Oe = (e, t, r) => $l(e, typeof t != "symbol" ? t + "" : t, r),
          _l = (e, t, r) => t.has(e) || ga("Cannot " + r),
          tn = (e, t, r) => (
            _l(e, t, "read from private field"), r ? r.call(e) : t.get(e)
          ),
          ma = (e, t, r) =>
            t.has(e)
              ? ga("Cannot add the same private member more than once")
              : t instanceof WeakSet
              ? t.add(e)
              : t.set(e, r),
          or,
          rn;
        const Sl = 100;
        (re.MutationTestReportAppComponent = class extends Fe {
          constructor() {
            super(),
              ma(this, or, new AbortController()),
              Oe(this, "mutants", new Map()),
              Oe(this, "tests", new Map()),
              ma(this, rn, () => {
                this.theme = this.getTheme();
              }),
              Oe(this, "themeSwitch", (t) => {
                (this.theme = t.detail),
                  Ni() &&
                    localStorage.setItem(
                      "mutation-testing-elements-theme",
                      this.theme
                    );
              }),
              Oe(this, "subscriptions", []),
              Oe(this, "source"),
              Oe(this, "sseSubscriptions", new Set()),
              Oe(this, "theMutant"),
              Oe(this, "theTest"),
              (this.context = { view: me.mutant, path: [] }),
              (this.path = []);
          }
          get themeBackgroundColor() {
            return getComputedStyle(this).getPropertyValue("--color-white");
          }
          get title() {
            return this.context.result
              ? this.titlePostfix
                ? `${this.context.result.name} - ${this.titlePostfix}`
                : this.context.result.name
              : "";
          }
          firstUpdated() {
            (this.path.length === 0 ||
              (this.path[0] !== me.mutant && this.path[0] !== me.test)) &&
              window.location.replace(bt(`${me.mutant}`));
          }
          async loadData() {
            if (this.src)
              try {
                const t = await fetch(this.src);
                this.report = await t.json();
              } catch (t) {
                const r = String(t);
                this.errorMessage = r;
              }
          }
          willUpdate(t) {
            this.report &&
              ((this.theme ??= this.getTheme()),
              t.has("report") && this.updateModel(this.report),
              (t.has("path") || t.has("report")) &&
                (this.updateContext(), this.updateTitle())),
              t.has("src") && this.loadData();
          }
          updated(t) {
            t.has("theme") &&
              this.theme &&
              this.dispatchEvent(
                Ae("theme-changed", {
                  theme: this.theme,
                  themeBackgroundColor: this.themeBackgroundColor,
                })
              );
          }
          getTheme() {
            const t =
              Ni() && localStorage.getItem("mutation-testing-elements-theme");
            return (
              t ||
              (window.matchMedia?.("(prefers-color-scheme: dark)")?.matches
                ? "dark"
                : "light")
            );
          }
          updateModel(t) {
            (this.rootModel = to(t)),
              r((n, i) => {
                (n.result = i),
                  n.mutants.forEach((a) => this.mutants.set(a.id, a));
              })(this.rootModel?.systemUnderTestMetrics),
              r((n, i) => {
                (n.result = i), n.tests.forEach((a) => this.tests.set(a.id, a));
              })(this.rootModel?.testMetrics),
              this.rootModel.systemUnderTestMetrics.updateParent(),
              this.rootModel.testMetrics?.updateParent();
            function r(n) {
              return function i(a) {
                a?.file && n(a.file, a),
                  a?.childResults.forEach((s) => {
                    i(s);
                  });
              };
            }
          }
          updateContext() {
            if (this.rootModel) {
              const t = (n, i) =>
                  i.reduce(
                    (a, s) => a?.childResults.find((o) => o.name === s),
                    n
                  ),
                r = this.path.slice(1);
              this.path[0] === me.test && this.rootModel.testMetrics
                ? (this.context = {
                    view: me.test,
                    path: r,
                    result: t(this.rootModel.testMetrics, this.path.slice(1)),
                  })
                : (this.context = {
                    view: me.mutant,
                    path: r,
                    result: t(
                      this.rootModel.systemUnderTestMetrics,
                      this.path.slice(1)
                    ),
                  });
            }
          }
          updateTitle() {
            document.title = this.title;
          }
          connectedCallback() {
            super.connectedCallback(),
              window
                .matchMedia("(prefers-color-scheme: dark)")
                .addEventListener?.("change", tn(this, rn), {
                  signal: tn(this, or).signal,
                }),
              this.subscriptions.push(wl.subscribe((t) => (this.path = t))),
              this.initializeSse();
          }
          initializeSse() {
            if (!this.sse) return;
            this.source = new EventSource(this.sse);
            const t = It(this.source, "mutant-tested").subscribe((n) => {
                const i = JSON.parse(n.data);
                if (!this.report) return;
                const a = this.mutants.get(i.id);
                if (a !== void 0) {
                  this.theMutant = a;
                  for (const [s, o] of Object.entries(i)) this.theMutant[s] = o;
                  i.killedBy &&
                    i.killedBy.forEach((s) => {
                      const o = this.tests.get(s);
                      o !== void 0 &&
                        ((this.theTest = o),
                        o.addKilled(this.theMutant),
                        this.theMutant.addKilledBy(o));
                    }),
                    i.coveredBy &&
                      i.coveredBy.forEach((s) => {
                        const o = this.tests.get(s);
                        o !== void 0 &&
                          ((this.theTest = o),
                          o.addCovered(this.theMutant),
                          this.theMutant.addCoveredBy(o));
                      });
                }
              }),
              r = It(this.source, "mutant-tested")
                .pipe(rl(Sl))
                .subscribe(() => {
                  this.applyChanges();
                });
            this.sseSubscriptions.add(t),
              this.sseSubscriptions.add(r),
              this.source.addEventListener("finished", () => {
                this.source?.close(),
                  this.applyChanges(),
                  this.sseSubscriptions.forEach((n) => n.unsubscribe());
              });
          }
          applyChanges() {
            this.theMutant?.update(), this.theTest?.update(), pa.next();
          }
          disconnectedCallback() {
            super.disconnectedCallback(),
              tn(this, or).abort(),
              this.subscriptions.forEach((t) => t.unsubscribe());
          }
          renderTitle() {
            return this.context.result
              ? b`
        <h1 class="mt-4 text-5xl font-bold tracking-tight">
          ${this.context.result.name}${
                  this.titlePostfix
                    ? b`<small class="text-light-muted ml-4 font-light">${this.titlePostfix}</small>`
                    : P
                }
        </h1>
      `
              : P;
          }
          render() {
            return this.context.result ?? this.errorMessage
              ? b`
        <mte-file-picker .rootModel="${this.rootModel}"></mte-file-picker>
        <div class="container space-y-4 bg-white pb-4 font-sans text-gray-800 transition-colors motion-safe:transition-max-width">
          ${this.renderErrorMessage()}
          <mte-theme-switch @theme-switch="${
            this.themeSwitch
          }" class="sticky top-offset z-20 float-right mb-0 pt-7" .theme="${
                  this.theme
                }">
          </mte-theme-switch>
          ${this.renderTitle()} ${this.renderTabs()}
          <mte-breadcrumb
            @mte-file-picker-open="${() => this.filePicker.open()}"
            .view="${this.context.view}"
            .path="${this.context.path}"
          ></mte-breadcrumb>
          <mte-result-status-bar
            detected="${Ft(
              this.rootModel?.systemUnderTestMetrics.metrics.totalDetected
            )}"
            no-coverage="${Ft(
              this.rootModel?.systemUnderTestMetrics.metrics.noCoverage
            )}"
            pending="${Ft(
              this.rootModel?.systemUnderTestMetrics.metrics.pending
            )}"
            survived="${Ft(
              this.rootModel?.systemUnderTestMetrics.metrics.survived
            )}"
            total="${Ft(
              this.rootModel?.systemUnderTestMetrics.metrics.totalValid
            )}"
          ></mte-result-status-bar>
          ${
            this.context.view === "mutant" && this.context.result
              ? b`<mte-mutant-view
                id="mte-mutant-view"
                .result="${this.context.result}"
                .thresholds="${this.report.thresholds}"
                .path="${this.path}"
              ></mte-mutant-view>`
              : P
          }
          ${
            this.context.view === "test" && this.context.result
              ? b`<mte-test-view id="mte-test-view" .result="${this.context.result}" .path="${this.path}"></mte-test-view>`
              : P
          }
        </div>
      `
              : P;
          }
          renderErrorMessage() {
            return this.errorMessage
              ? b`<div class="my-4 rounded-lg bg-red-100 p-4 text-sm text-red-700" role="alert">${this.errorMessage}</div>`
              : P;
          }
          renderTabs() {
            if (this.rootModel?.testMetrics) {
              const t = this.context.view === "mutant",
                r = this.context.view === "test";
              return b`
        <nav class="border-b border-gray-200 text-center text-sm font-medium text-gray-600">
          <ul class="-mb-px flex flex-wrap" role="tablist">
            ${[
              { type: "mutant", isActive: t, text: "👽 Mutants" },
              { type: "test", isActive: r, text: "🧪 Tests" },
            ].map(
              ({
                type: n,
                isActive: i,
                text: a,
              }) => b`<li class="mr-2" role="presentation">
                  <a
                    class="inline-block rounded-t-lg border-b-2 border-transparent p-4 transition-colors hover:border-gray-300 hover:bg-gray-200 hover:text-gray-700 aria-selected:border-b-[3px] aria-selected:border-solid aria-selected:border-primary-700 aria-selected:text-primary-on"
                    role="tab"
                    href="${bt(n)}"
                    aria-selected="${i}"
                    aria-controls="mte-${n}-view"
                    >${a}</a
                  >
                </li>`
            )}
          </ul>
        </nav>
      `;
            } else return P;
          }
        }),
          (or = new WeakMap()),
          (rn = new WeakMap()),
          Oe(re.MutationTestReportAppComponent, "styles", [Te(kl), ze]),
          ve(
            [I({ attribute: !1 })],
            re.MutationTestReportAppComponent.prototype,
            "report",
            2
          ),
          ve(
            [I({ attribute: !1 })],
            re.MutationTestReportAppComponent.prototype,
            "rootModel",
            2
          ),
          ve([I()], re.MutationTestReportAppComponent.prototype, "src", 2),
          ve([I()], re.MutationTestReportAppComponent.prototype, "sse", 2),
          ve(
            [I({ attribute: !1 })],
            re.MutationTestReportAppComponent.prototype,
            "errorMessage",
            2
          ),
          ve(
            [I({ attribute: !1 })],
            re.MutationTestReportAppComponent.prototype,
            "context",
            2
          ),
          ve(
            [I({ type: Array })],
            re.MutationTestReportAppComponent.prototype,
            "path",
            2
          ),
          ve(
            [I({ attribute: "title-postfix" })],
            re.MutationTestReportAppComponent.prototype,
            "titlePostfix",
            2
          ),
          ve(
            [I({ reflect: !0 })],
            re.MutationTestReportAppComponent.prototype,
            "theme",
            2
          ),
          ve(
            [I({ attribute: !1 })],
            re.MutationTestReportAppComponent.prototype,
            "themeBackgroundColor",
            1
          ),
          ve(
            [Xt("mte-file-picker")],
            re.MutationTestReportAppComponent.prototype,
            "filePicker",
            2
          ),
          ve([I()], re.MutationTestReportAppComponent.prototype, "title", 1),
          (re.MutationTestReportAppComponent = ve(
            [se("mutation-test-report-app")],
            re.MutationTestReportAppComponent
          ));
        /**
         * @license
         * Copyright 2021 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ function* Ve(e, t) {
          if (e !== void 0) {
            let r = 0;
            for (const n of e) yield t(n, r++);
          }
        }
        var ye = ((e) => (
          (e.csharp = "cs"),
          (e.java = "java"),
          (e.javascript = "javascript"),
          (e.html = "html"),
          (e.php = "php"),
          (e.scala = "scala"),
          (e.typescript = "typescript"),
          (e.vue = "vue"),
          (e.gherkin = "gherkin"),
          (e.svelte = "svelte"),
          (e.rust = "rust"),
          e
        ))(ye || {});
        function Al(e) {
          return e.substr(e.lastIndexOf(".") + 1).toLocaleLowerCase();
        }
        function nn(e) {
          switch (Al(e)) {
            case "cs":
              return "cs";
            case "html":
              return "html";
            case "java":
              return "java";
            case "js":
            case "cjs":
            case "mjs":
              return "javascript";
            case "ts":
            case "tsx":
            case "cts":
            case "mts":
              return "typescript";
            case "sc":
            case "sbt":
            case "scala":
              return "scala";
            case "php":
              return "php";
            case "vue":
              return "vue";
            case "feature":
              return "gherkin";
            case "svelte":
              return "svelte";
            case "rs":
              return "rust";
            default:
              return;
          }
        }
        function an(e, t) {
          const r = nn(t) ?? "plain";
          let n = r;
          return (
            r === "vue" && (n = "html"), qi.highlight(e, qi.languages[n], n)
          );
        }
        function sn(e, t) {
          let r = [];
          const n = [],
            i = { column: 0, line: 1, offset: -1 },
            a = [];
          let s = !1,
            o = 0;
          for (; o < e.length; ) {
            switch ((s && !lr(e[o]) && (u(), (s = !1)), e[o])) {
              case "\r":
                i.offset++;
                break;
              case `
`:
                $(), i.offset++, i.line++, (i.column = 0), (s = !0);
                break;
              case "<": {
                const d = C();
                d.isClosing ? H(d) : z(d);
                break;
              }
              case "&":
                y(m());
                break;
              default:
                y(e[o]);
                break;
            }
            o++;
          }
          return $(), n;
          function l(...d) {
            r.push(...d);
          }
          function u() {
            a.forEach((d) => l(v(d)));
          }
          function x() {
            a.forEach((d) => l(v({ ...d, isClosing: !0 })));
          }
          function v({ attributes: d, elementName: g, isClosing: _ }) {
            return _
              ? `</${g}>`
              : `<${g}${Object.entries(d ?? {}).reduce(
                  (O, [E, Z]) =>
                    Z === void 0 ? `${O} ${E}` : `${O} ${E}="${Z}"`,
                  ""
                )}>`;
          }
          function $() {
            x(), n.push(r.join("")), (r = []);
          }
          function y(d) {
            if ((i.column++, i.offset++, t))
              for (const g of t(i)) g.isClosing ? H(g) : (l(v(g)), a.push(g));
            l(d);
          }
          function C() {
            o++;
            const d = e[o] === "/" ? !0 : void 0;
            d && o++;
            const g = o;
            for (; !lr(e[o]) && e[o] !== ">"; ) o++;
            const _ = e.substring(g, o),
              O = X();
            return { elementName: _, attributes: O, isClosing: d };
          }
          function z(d) {
            a.push(d), l(v(d));
          }
          function H(d) {
            let g;
            for (g = a.length - 1; g >= 0; g--) {
              const _ = a[g];
              if (d.elementName === _.elementName && _.id === d.id) {
                l(v(d)), a.splice(g, 1);
                for (let O = g; O < a.length; O++) l(v(a[O]));
                break;
              }
              l(v({ ..._, isClosing: !0 }));
            }
            if (g === -1)
              throw new Error(
                `Cannot find corresponding opening tag for ${v(d)}`
              );
          }
          function X() {
            const d = Object.create(null);
            for (; o < e.length; ) {
              const g = e[o];
              if (g === ">") return d;
              if (!lr(g)) {
                const { name: _, value: O } = p();
                d[_] = O;
              }
              o++;
            }
            throw new Error(`Missing closing tag near ${e.substr(o - 10)}`);
          }
          function p() {
            const d = o;
            for (; e[o] !== "="; ) o++;
            const g = e.substring(d, o);
            o++;
            const _ = h();
            return { name: g, value: _ };
          }
          function h() {
            e[o] === '"' && o++;
            const d = o;
            for (; e[o] !== '"'; ) o++;
            return e.substring(d, o);
          }
          function m() {
            const d = o;
            for (; e[o] !== ";"; ) o++;
            return e.substring(d, o + 1);
          }
        }
        function lr(e) {
          return (
            e ===
              `
` ||
            e === " " ||
            e === "	"
          );
        }
        function Cl(e, t) {
          let r = 0,
            n = t.length - 1;
          for (; e[r] === t[r] && r < t.length; ) r++;
          const i = e.length - t.length;
          for (; e[n + i] === t[n] && n > r; ) n--;
          n === r && (lr(t[r - 1]) || r--), n++;
          const a = t.substring(r, n);
          return (
            ["true", "false"].forEach((s) => {
              a === s.substr(0, s.length - 1) && s.endsWith(t[n]) && n++,
                a === s.substr(1, s.length) && s.startsWith(t[r - 1]) && r--;
            }),
            [r, n]
          );
        }
        function cr(e, t) {
          return e.line > t.line || (e.line === t.line && e.column >= t.column);
        }
        const Ml =
          '#report-code-block{background:var(--prism-background);border:1px solid var(--prism-border);overflow:auto visible}.line-numbers{counter-reset:mte-line-number}.line .line-number{text-align:right;color:var(--mut-line-number);counter-increment:mte-line-number;padding:0 10px 0 15px}.line .line-number:before{content:counter(mte-line-number)}.line-marker:before{content:" ";padding:0 5px}.NoCoverage{--mut-status-color:var(--color-orange-500);--mut-squiggly-line:var(--mut-squiggly-NoCoverage)}.Survived{--mut-status-color:var(--color-red-500);--mut-squiggly-line:var(--mut-squiggly-Survived)}.Pending{--mut-status-color:var(--color-neutral-400)}.Killed{--mut-status-color:var(--color-green-600)}.Timeout{--mut-status-color:var(--color-amber-400)}.CompileError,.RuntimeError,.Ignored{--mut-status-color:var(--color-neutral-400)}svg.mutant-dot{fill:var(--mut-status-color)}.mte-selected-Pending .mutant.Pending,.mte-selected-Killed .mutant.Killed,.mte-selected-Timeout .mutant.Timeout,.mte-selected-CompileError .mutant.CompileError,.mte-selected-RuntimeError .mutant.RuntimeError,.mte-selected-Ignored .mutant.Ignored{-webkit-text-decoration:solid underline var(--mut-status-color)2px;-webkit-text-decoration:solid underline var(--mut-status-color)2px;text-decoration:solid underline var(--mut-status-color)2px;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none;text-underline-offset:3px;cursor:pointer}.mte-selected-Survived .mutant.Survived,.mte-selected-NoCoverage .mutant.NoCoverage{border-bottom-style:solid;border-image-slice:0 0 4;border-image-width:4px;border-image-outset:6px;border-image-repeat:repeat;border-image-source:var(--mut-squiggly-line);cursor:pointer}:is(.mte-selected-Survived .mutant.Survived,.mte-selected-NoCoverage .mutant.NoCoverage) .mutant.Survived,:is(.mte-selected-Survived .mutant.Survived,.mte-selected-NoCoverage .mutant.NoCoverage) .mutant.NoCoverage{border-bottom-style:none;border-image-source:none;text-decoration-line:none}.diff-old{background-color:var(--mut-diff-del-bg)}.diff-focus{background-color:var(--mut-diff-add-bg-line-number)}.diff-old .line-number{background-color:var(--mut-diff-del-bg-line-number);color:var(--mut-diff-del-line-number)}.diff-old .line-marker:before{content:"-"}.diff-new{background-color:var(--mut-diff-add-bg)}.diff-new .empty-line-number{background-color:var(--mut-diff-add-bg-line-number);color:var(--mut-diff-add-line-number)}.diff-new .line-marker:before{content:"+"}';
        /**
         * @license
         * Copyright 2017 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ class on extends Zr {
          constructor(t) {
            if ((super(t), (this.it = P), t.type !== Wr.CHILD))
              throw Error(
                this.constructor.directiveName +
                  "() can only be used in child bindings"
              );
          }
          render(t) {
            if (t === P || t == null) return (this._t = void 0), (this.it = t);
            if (t === Pe) return t;
            if (typeof t != "string")
              throw Error(
                this.constructor.directiveName +
                  "() called with a non-string value"
              );
            if (t === this.it) return this._t;
            this.it = t;
            const r = [t];
            return (
              (r.raw = r),
              (this._t = {
                _$litType$: this.constructor.resultType,
                strings: r,
                values: [],
              })
            );
          }
        }
        (on.directiveName = "unsafeHTML"), (on.resultType = 1);
        const El = Kr(on);
        function va(e, t) {
          return e === P && t === P
            ? P
            : b`<span class="ml-1 flex flex-row items-center">${e}${t}</span>`;
        }
        function ba(e, t) {
          return b`<tr class="line"
    ><td class="line-number"></td><td class="line-marker"></td><td class="code flex"><span>${El(
      e
    )}</span>${t}</td></tr
  >`;
        }
        const ya =
            "M 0,5 C 0,-1.66 10,-1.66 10,5 10,7.76 7.76,10 5,10 2.24,10 0,7.76 0,5 Z",
          wa = "M 0,0 C 0,0 10,0 10,0 10,0 5,10 5,10 5,10 0,0 0,0 Z",
          Tl = "0.4 0 0.2 1",
          ka = (
            e,
            t,
            r
          ) => ee`<path stroke-opacity="${r}" class="transition-stroke-opacity stroke-gray-800" d="${t}">
    <animate values="${e};${t}" attributeName="d" dur="0.2s" begin="indefinite" calcMode="spline" keySplines="${Tl}" />
  </path>`,
          xa = ka(ya, wa, 1),
          $a = ka(wa, ya, 0);
        function _a(e, t, r) {
          e?.querySelector(
            `[${t}="${encodeURIComponent(r)}"] path animate`
          )?.beginElement();
        }
        var Sa = Object.defineProperty,
          Pl = Object.getOwnPropertyDescriptor,
          Aa = (e) => {
            throw TypeError(e);
          },
          zl = (e, t, r) =>
            t in e
              ? Sa(e, t, {
                  enumerable: !0,
                  configurable: !0,
                  writable: !0,
                  value: r,
                })
              : (e[t] = r),
          We = (e, t, r, n) => {
            for (
              var i = n > 1 ? void 0 : n ? Pl(t, r) : t, a = e.length - 1, s;
              a >= 0;
              a--
            )
              (s = e[a]) && (i = (n ? s(t, r, i) : s(i)) || i);
            return n && i && Sa(t, r, i), i;
          },
          jt = (e, t, r) => zl(e, typeof t != "symbol" ? t + "" : t, r),
          ln = (e, t, r) => t.has(e) || Aa("Cannot " + r),
          cn = (e, t, r) => (ln(e, t, "read from private field"), t.get(e)),
          un = (e, t, r) =>
            t.has(e)
              ? Aa("Cannot add the same private member more than once")
              : t instanceof WeakSet
              ? t.add(e)
              : t.set(e, r),
          Fl = (e, t, r, n) => (
            ln(e, t, "write to private field"), t.set(e, r), r
          ),
          Ca = (e, t, r) => (ln(e, t, "access private method"), r),
          Lt,
          dn,
          ur,
          hn;
        const pn = "diff-old",
          Ma = "diff-new";
        let Ce = class extends Fe {
          constructor() {
            super(),
              un(this, ur),
              un(this, Lt),
              un(this, dn, (e) => {
                e.key === "Escape" &&
                  this.selectedMutant &&
                  this.toggleMutant(this.selectedMutant);
              }),
              jt(this, "filtersChanged", (e) => {
                this.selectedMutantStates = e.detail.concat(["Pending"]);
              }),
              jt(this, "codeClicked", (e) => {
                if ((e.stopPropagation(), e.target instanceof Element)) {
                  let t = e.target;
                  const r = [];
                  for (; t instanceof Element; t = t.parentElement) {
                    const i = t.getAttribute("mutant-id"),
                      a = this.mutants.find(({ id: s }) => s.toString() === i);
                    a && r.push(a);
                  }
                  const n =
                    (this.selectedMutant
                      ? r.indexOf(this.selectedMutant)
                      : -1) + 1;
                  r[n]
                    ? (this.toggleMutant(r[n]), Ta())
                    : this.selectedMutant &&
                      (this.toggleMutant(this.selectedMutant), Ta());
                }
              }),
              jt(this, "nextMutant", () => {
                const e = this.selectedMutant
                  ? (this.mutants.indexOf(this.selectedMutant) + 1) %
                    this.mutants.length
                  : 0;
                this.mutants[e] && this.toggleMutant(this.mutants[e]);
              }),
              jt(this, "previousMutant", () => {
                const e = this.selectedMutant
                  ? (this.mutants.indexOf(this.selectedMutant) +
                      this.mutants.length -
                      1) %
                    this.mutants.length
                  : this.mutants.length - 1;
                this.mutants[e] && this.toggleMutant(this.mutants[e]);
              }),
              (this.filters = []),
              (this.selectedMutantStates = []),
              (this.lines = []),
              (this.mutants = []),
              Fl(this, Lt, new AbortController());
          }
          connectedCallback() {
            super.connectedCallback(),
              window.addEventListener("keydown", cn(this, dn), {
                signal: cn(this, Lt).signal,
              });
          }
          disconnectedCallback() {
            cn(this, Lt).abort(), super.disconnectedCallback();
          }
          render() {
            const e = new Map();
            for (const r of this.mutants) {
              let n = e.get(r.location.start.line);
              n || ((n = []), e.set(r.location.start.line, n)), n.push(r);
            }
            const t = (r) =>
              this.renderMutantDots(
                [...e.entries()].filter(([n]) => n > r).flatMap(([, n]) => n)
              );
            return b`
      <mte-state-filter
        allow-toggle-all
        .filters="${this.filters}"
        @filters-changed="${this.filtersChanged}"
        @next=${this.nextMutant}
        @previous=${this.previousMutant}
      ></mte-state-filter>
      <pre
        @click="${this.codeClicked}"
        id="report-code-block"
        class="line-numbers ${this.selectedMutantStates
          .map((r) => `mte-selected-${r}`)
          .join(" ")} flex rounded-md py-4"
      >
        <code class="flex language-${this.model.language}">
          <table>${Ve(this.lines, (r, n) => {
            const i = n + 1,
              a = this.renderMutantDots(e.get(i)),
              s = this.lines.length === i ? t(i) : P;
            return ba(r, va(a, s));
          })}</table>
          </code>
          </pre>
    `;
          }
          renderMutantDots(e) {
            return e?.length
              ? e.map(
                  (t) => ee`<svg mutant-id="${
                    t.id
                  }" class="mutant-dot mx-0.5 cursor-pointer ${
                    this.selectedMutant?.id === t.id ? "selected" : ""
                  } ${t.status}" height="10" width="12">
              <title>${Ea(t)}</title>
              ${this.selectedMutant?.id === t.id ? xa : $a}
          </svg>`
                )
              : P;
          }
          toggleMutant(e) {
            if (
              (this.removeCurrentDiff(),
              Ca(this, ur, hn).call(this, e),
              this.selectedMutant === e)
            ) {
              (this.selectedMutant = void 0),
                this.dispatchEvent(
                  Ae("mutant-selected", { selected: !1, mutant: e })
                );
              return;
            } else
              this.selectedMutant &&
                Ca(this, ur, hn).call(this, this.selectedMutant);
            this.selectedMutant = e;
            const t = this.code.querySelectorAll("tr.line");
            for (
              let i = e.location.start.line - 1;
              i < e.location.end.line;
              i++
            )
              t.item(i).classList.add(pn);
            const r = this.highlightedReplacementRows(e),
              n = t.item(e.location.end.line - 1);
            n.insertAdjacentHTML("afterend", r),
              ha(n),
              this.dispatchEvent(
                Ae("mutant-selected", { selected: !0, mutant: e })
              );
          }
          removeCurrentDiff() {
            const e = this.code;
            e.querySelectorAll(`.${pn}`).forEach((n) => n.classList.remove(pn)),
              e.querySelectorAll(`.${Ma}`).forEach((n) => n.remove());
          }
          reactivate() {
            super.reactivate(), this.updateFileRepresentation();
          }
          update(e) {
            e.has("model") && this.model && this.updateFileRepresentation(),
              ((e.has("model") && this.model) ||
                e.has("selectedMutantStates")) &&
                ((this.mutants = this.model.mutants
                  .filter((t) => this.selectedMutantStates.includes(t.status))
                  .sort((t, r) =>
                    cr(t.location.start, r.location.start) ? 1 : -1
                  )),
                this.selectedMutant &&
                  !this.mutants.includes(this.selectedMutant) &&
                  e.has("selectedMutantStates") &&
                  this.selectedMutantsHaveChanged(
                    e.get("selectedMutantStates") ?? []
                  ) &&
                  this.toggleMutant(this.selectedMutant)),
              super.update(e);
          }
          updateFileRepresentation() {
            this.filters = [
              "Killed",
              "Survived",
              "NoCoverage",
              "Ignored",
              "Timeout",
              "CompileError",
              "RuntimeError",
            ]
              .filter((n) => this.model.mutants.some((i) => i.status === n))
              .map((n) => ({
                enabled: [
                  ...this.selectedMutantStates,
                  "Survived",
                  "NoCoverage",
                  "Timeout",
                ].includes(n),
                count: this.model.mutants.filter((i) => i.status === n).length,
                status: n,
                label: b`${ca(n)} ${n}`,
                context: vl(n),
              }));
            const e = an(this.model.source, this.model.name),
              t = new Set(),
              r = new Set(this.model.mutants);
            this.lines = sn(e, function* (n) {
              for (const i of t)
                cr(n, i.location.end) &&
                  (t.delete(i),
                  yield { elementName: "span", id: i.id, isClosing: !0 });
              for (const i of r)
                cr(n, i.location.start) &&
                  (t.add(i),
                  r.delete(i),
                  yield {
                    elementName: "span",
                    id: i.id,
                    attributes: {
                      class: en(`mutant border-none ${i.status}`),
                      title: en(Ea(i)),
                      "mutant-id": en(i.id.toString()),
                    },
                  });
            });
          }
          selectedMutantsHaveChanged(e) {
            return e.length !== this.selectedMutantStates.length
              ? !0
              : !e.every((t, r) => this.selectedMutantStates[r] === t);
          }
          highlightedReplacementRows(e) {
            const t = e.getMutatedLines().trimEnd(),
              r = e.getOriginalLines().trimEnd(),
              [n, i] = Cl(r, t),
              a = sn(an(t, this.model.name), function* ({ offset: l }) {
                l === n
                  ? yield {
                      elementName: "span",
                      id: "diff-focus",
                      attributes: { class: "diff-focus" },
                    }
                  : l === i &&
                    (yield {
                      elementName: "span",
                      id: "diff-focus",
                      isClosing: !0,
                    });
              }),
              s = `<tr class="${Ma}"><td class="empty-line-number"></td><td class="line-marker"></td><td class="code">`,
              o = "</td></tr>";
            return a.map((l) => `${s}${l}${o}`).join("");
          }
        };
        (Lt = new WeakMap()),
          (dn = new WeakMap()),
          (ur = new WeakSet()),
          (hn = function (e) {
            _a(this.code, "mutant-id", e.id);
          }),
          jt(Ce, "styles", [ra, ze, Te(Ml)]),
          We([he()], Ce.prototype, "filters", 2),
          We([I({ attribute: !1 })], Ce.prototype, "model", 2),
          We([he()], Ce.prototype, "selectedMutantStates", 2),
          We([he()], Ce.prototype, "selectedMutant", 2),
          We([he()], Ce.prototype, "lines", 2),
          We([he()], Ce.prototype, "mutants", 2),
          We([Xt("code")], Ce.prototype, "code", 2),
          (Ce = We([se("mte-file")], Ce));
        function Ea(e) {
          return `${e.mutatorName} ${e.status}`;
        }
        function Ta() {
          window.getSelection()?.removeAllRanges();
        }
        var dr = { exports: {} },
          Ol = dr.exports,
          Pa;
        function Il() {
          return (
            Pa ||
              ((Pa = 1),
              (function (e) {
                ((t, r) => {
                  e.exports ? (e.exports = r()) : (t.fuzzysort = r());
                })(Ol, (t) => {
                  var r = (f, c) => {
                      if (!f || !c) return j;
                      var w = C(f);
                      xe(c) || (c = y(c));
                      var A = w.bitflags;
                      return (A & c._bitflags) !== A ? j : H(w, c);
                    },
                    n = (f, c, w) => {
                      if (!f) return w?.all ? z(c, w) : G;
                      var A = C(f),
                        M = A.bitflags,
                        S = A.containsSpace,
                        k = v(w?.threshold || 0),
                        F = w?.limit || je,
                        T = 0,
                        R = 0,
                        L = c.length;
                      function ge(lt) {
                        T < F
                          ? (At.add(lt), ++T)
                          : (++R,
                            lt._score > At.peek()._score && At.replaceTop(lt));
                      }
                      if (w?.key)
                        for (var oe = w.key, U = 0; U < L; ++U) {
                          var de = c[U],
                            V = Be(de, oe);
                          if (
                            V &&
                            (xe(V) || (V = y(V)), (M & V._bitflags) === M)
                          ) {
                            var Y = H(A, V);
                            Y !== j && (Y._score < k || ((Y.obj = de), ge(Y)));
                          }
                        }
                      else if (w?.keys) {
                        var Ze = w.keys,
                          $e = Ze.length;
                        e: for (var U = 0; U < L; ++U) {
                          var de = c[U];
                          {
                            for (var le = 0, N = 0; N < $e; ++N) {
                              var oe = Ze[N],
                                V = Be(de, oe);
                              if (!V) {
                                Ee[N] = ce;
                                continue;
                              }
                              xe(V) || (V = y(V)),
                                (Ee[N] = V),
                                (le |= V._bitflags);
                            }
                            if ((M & le) !== M) continue;
                          }
                          if (S)
                            for (let W = 0; W < A.spaceSearches.length; W++)
                              q[W] = B;
                          for (var N = 0; N < $e; ++N) {
                            if (((V = Ee[N]), V === ce)) {
                              ke[N] = ce;
                              continue;
                            }
                            if (((ke[N] = H(A, V, !1, S)), ke[N] === j)) {
                              ke[N] = ce;
                              continue;
                            }
                            if (S)
                              for (let J = 0; J < A.spaceSearches.length; J++) {
                                if (ie[J] > -1e3 && q[J] > B) {
                                  var ae = (q[J] + ie[J]) / 4;
                                  ae > q[J] && (q[J] = ae);
                                }
                                ie[J] > q[J] && (q[J] = ie[J]);
                              }
                          }
                          if (S) {
                            for (let W = 0; W < A.spaceSearches.length; W++)
                              if (q[W] === B) continue e;
                          } else {
                            var D = !1;
                            for (let W = 0; W < $e; W++)
                              if (ke[W]._score !== B) {
                                D = !0;
                                break;
                              }
                            if (!D) continue;
                          }
                          var be = new l($e);
                          for (let W = 0; W < $e; W++) be[W] = ke[W];
                          if (S) {
                            var te = 0;
                            for (let W = 0; W < A.spaceSearches.length; W++)
                              te += q[W];
                          } else {
                            var te = B;
                            for (let J = 0; J < $e; J++) {
                              var Y = be[J];
                              if (Y._score > -1e3 && te > B) {
                                var ae = (te + Y._score) / 4;
                                ae > te && (te = ae);
                              }
                              Y._score > te && (te = Y._score);
                            }
                          }
                          if (((be.obj = de), (be._score = te), w?.scoreFn)) {
                            if (((te = w.scoreFn(be)), !te)) continue;
                            (te = v(te)), (be._score = te);
                          }
                          te < k || ge(be);
                        }
                      } else
                        for (var U = 0; U < L; ++U) {
                          var V = c[U];
                          if (
                            V &&
                            (xe(V) || (V = y(V)), (M & V._bitflags) === M)
                          ) {
                            var Y = H(A, V);
                            Y !== j && (Y._score < k || ge(Y));
                          }
                        }
                      if (T === 0) return G;
                      for (var Ge = new Array(T), U = T - 1; U >= 0; --U)
                        Ge[U] = At.poll();
                      return (Ge.total = T + R), Ge;
                    },
                    i = (f, c = "<b>", w = "</b>") => {
                      for (
                        var A = typeof c == "function" ? c : void 0,
                          M = f.target,
                          S = M.length,
                          k = f.indexes,
                          F = "",
                          T = 0,
                          R = 0,
                          L = !1,
                          ge = [],
                          oe = 0;
                        oe < S;
                        ++oe
                      ) {
                        var U = M[oe];
                        if (k[R] === oe) {
                          if (
                            (++R,
                            L ||
                              ((L = !0), A ? (ge.push(F), (F = "")) : (F += c)),
                            R === k.length)
                          ) {
                            A
                              ? ((F += U),
                                ge.push(A(F, T++)),
                                (F = ""),
                                ge.push(M.substr(oe + 1)))
                              : (F += U + w + M.substr(oe + 1));
                            break;
                          }
                        } else
                          L &&
                            ((L = !1),
                            A ? (ge.push(A(F, T++)), (F = "")) : (F += w));
                        F += U;
                      }
                      return A ? ge : F;
                    },
                    a = (f) => {
                      typeof f == "number"
                        ? (f = "" + f)
                        : typeof f != "string" && (f = "");
                      var c = h(f);
                      return u(f, {
                        _targetLower: c._lower,
                        _targetLowerCodes: c.lowerCodes,
                        _bitflags: c.bitflags,
                      });
                    },
                    s = () => {
                      g.clear(), _.clear();
                    };
                  class o {
                    get indexes() {
                      return this._indexes
                        .slice(0, this._indexes.len)
                        .sort((c, w) => c - w);
                    }
                    set indexes(c) {
                      return (this._indexes = c);
                    }
                    highlight(c, w) {
                      return i(this, c, w);
                    }
                    get score() {
                      return x(this._score);
                    }
                    set score(c) {
                      this._score = v(c);
                    }
                  }
                  class l extends Array {
                    get score() {
                      return x(this._score);
                    }
                    set score(c) {
                      this._score = v(c);
                    }
                  }
                  var u = (f, c) => {
                      const w = new o();
                      return (
                        (w.target = f),
                        (w.obj = c.obj ?? j),
                        (w._score = c._score ?? B),
                        (w._indexes = c._indexes ?? []),
                        (w._targetLower = c._targetLower ?? ""),
                        (w._targetLowerCodes = c._targetLowerCodes ?? j),
                        (w._nextBeginningIndexes =
                          c._nextBeginningIndexes ?? j),
                        (w._bitflags = c._bitflags ?? 0),
                        w
                      );
                    },
                    x = (f) =>
                      f === B
                        ? 0
                        : f > 1
                        ? f
                        : Math.E ** (((-f + 1) ** 0.04307 - 1) * -2),
                    v = (f) =>
                      f === 0
                        ? B
                        : f > 1
                        ? f
                        : 1 - Math.pow(Math.log(f) / -2 + 1, 1 / 0.04307),
                    $ = (f) => {
                      typeof f == "number"
                        ? (f = "" + f)
                        : typeof f != "string" && (f = ""),
                        (f = f.trim());
                      var c = h(f),
                        w = [];
                      if (c.containsSpace) {
                        var A = f.split(/\s+/);
                        A = [...new Set(A)];
                        for (var M = 0; M < A.length; M++)
                          if (A[M] !== "") {
                            var S = h(A[M]);
                            w.push({
                              lowerCodes: S.lowerCodes,
                              _lower: A[M].toLowerCase(),
                              containsSpace: !1,
                            });
                          }
                      }
                      return {
                        lowerCodes: c.lowerCodes,
                        _lower: c._lower,
                        containsSpace: c.containsSpace,
                        bitflags: c.bitflags,
                        spaceSearches: w,
                      };
                    },
                    y = (f) => {
                      if (f.length > 999) return a(f);
                      var c = g.get(f);
                      return c !== void 0 || ((c = a(f)), g.set(f, c)), c;
                    },
                    C = (f) => {
                      if (f.length > 999) return $(f);
                      var c = _.get(f);
                      return c !== void 0 || ((c = $(f)), _.set(f, c)), c;
                    },
                    z = (f, c) => {
                      var w = [];
                      w.total = f.length;
                      var A = c?.limit || je;
                      if (c?.key)
                        for (var M = 0; M < f.length; M++) {
                          var S = f[M],
                            k = Be(S, c.key);
                          if (k != j) {
                            xe(k) || (k = y(k));
                            var F = u(k.target, { _score: k._score, obj: S });
                            if ((w.push(F), w.length >= A)) return w;
                          }
                        }
                      else if (c?.keys)
                        for (var M = 0; M < f.length; M++) {
                          for (
                            var S = f[M],
                              T = new l(c.keys.length),
                              R = c.keys.length - 1;
                            R >= 0;
                            --R
                          ) {
                            var k = Be(S, c.keys[R]);
                            if (!k) {
                              T[R] = ce;
                              continue;
                            }
                            xe(k) || (k = y(k)),
                              (k._score = B),
                              (k._indexes.len = 0),
                              (T[R] = k);
                          }
                          if (
                            ((T.obj = S),
                            (T._score = B),
                            w.push(T),
                            w.length >= A)
                          )
                            return w;
                        }
                      else
                        for (var M = 0; M < f.length; M++) {
                          var k = f[M];
                          if (
                            k != j &&
                            (xe(k) || (k = y(k)),
                            (k._score = B),
                            (k._indexes.len = 0),
                            w.push(k),
                            w.length >= A)
                          )
                            return w;
                        }
                      return w;
                    },
                    H = (f, c, w = !1, A = !1) => {
                      if (w === !1 && f.containsSpace) return X(f, c, A);
                      for (
                        var M = f._lower,
                          S = f.lowerCodes,
                          k = S[0],
                          F = c._targetLowerCodes,
                          T = S.length,
                          R = F.length,
                          U = 0,
                          L = 0,
                          ge = 0;
                        ;

                      ) {
                        var oe = k === F[L];
                        if (oe) {
                          if (((O[ge++] = L), ++U, U === T)) break;
                          k = S[U];
                        }
                        if ((++L, L >= R)) return j;
                      }
                      var U = 0,
                        de = !1,
                        V = 0,
                        Y = c._nextBeginningIndexes;
                      Y === j && (Y = c._nextBeginningIndexes = d(c.target)),
                        (L = O[0] === 0 ? 0 : Y[O[0] - 1]);
                      var Ze = 0;
                      if (L !== R)
                        for (;;)
                          if (L >= R) {
                            if (U <= 0 || (++Ze, Ze > 200)) break;
                            --U;
                            var $e = E[--V];
                            L = Y[$e];
                          } else {
                            var oe = S[U] === F[L];
                            if (oe) {
                              if (((E[V++] = L), ++U, U === T)) {
                                de = !0;
                                break;
                              }
                              ++L;
                            } else L = Y[L];
                          }
                      var le = T <= 1 ? -1 : c._targetLower.indexOf(M, O[0]),
                        N = !!~le,
                        ae = N
                          ? le === 0 || c._nextBeginningIndexes[le - 1] === le
                          : !1;
                      if (N && !ae) {
                        for (var D = 0; D < Y.length; D = Y[D])
                          if (!(D <= le)) {
                            for (
                              var be = 0;
                              be < T && S[be] === c._targetLowerCodes[D + be];
                              be++
                            );
                            if (be === T) {
                              (le = D), (ae = !0);
                              break;
                            }
                          }
                      }
                      var te = (W) => {
                        for (var J = 0, bs = 0, Le = 1; Le < T; ++Le)
                          W[Le] - W[Le - 1] !== 1 && ((J -= W[Le]), ++bs);
                        var Fc = W[T - 1] - W[0] - (T - 1);
                        if (
                          ((J -= (12 + Fc) * bs),
                          W[0] !== 0 && (J -= W[0] * W[0] * 0.2),
                          !de)
                        )
                          J *= 1e3;
                        else {
                          for (var jn = 1, Le = Y[0]; Le < R; Le = Y[Le]) ++jn;
                          jn > 24 && (J *= (jn - 24) * 10);
                        }
                        return (
                          (J -= (R - T) / 2),
                          N && (J /= 1 + T * T * 1),
                          ae && (J /= 1 + T * T * 1),
                          (J -= (R - T) / 2),
                          J
                        );
                      };
                      if (de)
                        if (ae) {
                          for (var D = 0; D < T; ++D) O[D] = le + D;
                          var Ge = O,
                            lt = te(O);
                        } else
                          var Ge = E,
                            lt = te(E);
                      else {
                        if (N) for (var D = 0; D < T; ++D) O[D] = le + D;
                        var Ge = O,
                          lt = te(Ge);
                      }
                      c._score = lt;
                      for (var D = 0; D < T; ++D) c._indexes[D] = Ge[D];
                      c._indexes.len = T;
                      const Sr = new o();
                      return (
                        (Sr.target = c.target),
                        (Sr._score = c._score),
                        (Sr._indexes = c._indexes),
                        Sr
                      );
                    },
                    X = (f, c, w) => {
                      for (
                        var A = new Set(),
                          M = 0,
                          S = j,
                          k = 0,
                          F = f.spaceSearches,
                          T = F.length,
                          R = 0,
                          L = () => {
                            for (let ae = R - 1; ae >= 0; ae--)
                              c._nextBeginningIndexes[Z[ae * 2 + 0]] =
                                Z[ae * 2 + 1];
                          },
                          ge = !1,
                          N = 0;
                        N < T;
                        ++N
                      ) {
                        ie[N] = B;
                        var oe = F[N];
                        if (((S = H(oe, c)), w)) {
                          if (S === j) continue;
                          ge = !0;
                        } else if (S === j) return L(), j;
                        var U = N === T - 1;
                        if (!U) {
                          var de = S._indexes,
                            V = !0;
                          for (let D = 0; D < de.len - 1; D++)
                            if (de[D + 1] - de[D] !== 1) {
                              V = !1;
                              break;
                            }
                          if (V) {
                            var Y = de[de.len - 1] + 1,
                              Ze = c._nextBeginningIndexes[Y - 1];
                            for (
                              let D = Y - 1;
                              D >= 0 && Ze === c._nextBeginningIndexes[D];
                              D--
                            )
                              (c._nextBeginningIndexes[D] = Y),
                                (Z[R * 2 + 0] = D),
                                (Z[R * 2 + 1] = Ze),
                                R++;
                          }
                        }
                        (M += S._score / T),
                          (ie[N] = S._score / T),
                          S._indexes[0] < k && (M -= (k - S._indexes[0]) * 2),
                          (k = S._indexes[0]);
                        for (var $e = 0; $e < S._indexes.len; ++$e)
                          A.add(S._indexes[$e]);
                      }
                      if (w && !ge) return j;
                      L();
                      var le = H(f, c, !0);
                      if (le !== j && le._score > M) {
                        if (w)
                          for (var N = 0; N < T; ++N) ie[N] = le._score / T;
                        return le;
                      }
                      w && (S = c), (S._score = M);
                      var N = 0;
                      for (let ae of A) S._indexes[N++] = ae;
                      return (S._indexes.len = N), S;
                    },
                    p = (f) =>
                      f
                        .replace(new RegExp("\\p{Script=Latin}+", "gu"), (c) =>
                          c.normalize("NFD")
                        )
                        .replace(/[\u0300-\u036f]/g, ""),
                    h = (f) => {
                      f = p(f);
                      for (
                        var c = f.length,
                          w = f.toLowerCase(),
                          A = [],
                          M = 0,
                          S = !1,
                          k = 0;
                        k < c;
                        ++k
                      ) {
                        var F = (A[k] = w.charCodeAt(k));
                        if (F === 32) {
                          S = !0;
                          continue;
                        }
                        var T =
                          F >= 97 && F <= 122
                            ? F - 97
                            : F >= 48 && F <= 57
                            ? 26
                            : F <= 127
                            ? 30
                            : 31;
                        M |= 1 << T;
                      }
                      return {
                        lowerCodes: A,
                        bitflags: M,
                        containsSpace: S,
                        _lower: w,
                      };
                    },
                    m = (f) => {
                      for (
                        var c = f.length, w = [], A = 0, M = !1, S = !1, k = 0;
                        k < c;
                        ++k
                      ) {
                        var F = f.charCodeAt(k),
                          T = F >= 65 && F <= 90,
                          R =
                            T || (F >= 97 && F <= 122) || (F >= 48 && F <= 57),
                          L = (T && !M) || !S || !R;
                        (M = T), (S = R), L && (w[A++] = k);
                      }
                      return w;
                    },
                    d = (f) => {
                      f = p(f);
                      for (
                        var c = f.length,
                          w = m(f),
                          A = [],
                          M = w[0],
                          S = 0,
                          k = 0;
                        k < c;
                        ++k
                      )
                        M > k
                          ? (A[k] = M)
                          : ((M = w[++S]), (A[k] = M === void 0 ? c : M));
                      return A;
                    },
                    g = new Map(),
                    _ = new Map(),
                    O = [],
                    E = [],
                    Z = [],
                    q = [],
                    ie = [],
                    Ee = [],
                    ke = [],
                    Be = (f, c) => {
                      var w = f[c];
                      if (w !== void 0) return w;
                      if (typeof c == "function") return c(f);
                      var A = c;
                      Array.isArray(c) || (A = c.split("."));
                      for (var M = A.length, S = -1; f && ++S < M; )
                        f = f[A[S]];
                      return f;
                    },
                    xe = (f) =>
                      typeof f == "object" && typeof f._bitflags == "number",
                    je = 1 / 0,
                    B = -je,
                    G = [];
                  G.total = 0;
                  var j = null,
                    ce = a(""),
                    ue = (f) => {
                      var c = [],
                        w = 0,
                        A = {},
                        M = (S) => {
                          for (var k = 0, F = c[k], T = 1; T < w; ) {
                            var R = T + 1;
                            (k = T),
                              R < w && c[R]._score < c[T]._score && (k = R),
                              (c[(k - 1) >> 1] = c[k]),
                              (T = 1 + (k << 1));
                          }
                          for (
                            var L = (k - 1) >> 1;
                            k > 0 && F._score < c[L]._score;
                            L = ((k = L) - 1) >> 1
                          )
                            c[k] = c[L];
                          c[k] = F;
                        };
                      return (
                        (A.add = (S) => {
                          var k = w;
                          c[w++] = S;
                          for (
                            var F = (k - 1) >> 1;
                            k > 0 && S._score < c[F]._score;
                            F = ((k = F) - 1) >> 1
                          )
                            c[k] = c[F];
                          c[k] = S;
                        }),
                        (A.poll = (S) => {
                          if (w !== 0) {
                            var k = c[0];
                            return (c[0] = c[--w]), M(), k;
                          }
                        }),
                        (A.peek = (S) => {
                          if (w !== 0) return c[0];
                        }),
                        (A.replaceTop = (S) => {
                          (c[0] = S), M();
                        }),
                        A
                      );
                    },
                    At = ue();
                  return { single: r, go: n, prepare: a, cleanup: s };
                });
              })(dr)),
            dr.exports
          );
        }
        var Rl = Il();
        const fn = al(Rl);
        /**
         * @license
         * Copyright 2020 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ const { I: Dl } = Ds,
          za = () => document.createComment(""),
          Nt = (e, t, r) => {
            const n = e._$AA.parentNode,
              i = t === void 0 ? e._$AB : t._$AA;
            if (r === void 0) {
              const a = n.insertBefore(za(), i),
                s = n.insertBefore(za(), i);
              r = new Dl(a, s, e, e.options);
            } else {
              const a = r._$AB.nextSibling,
                s = r._$AM,
                o = s !== e;
              if (o) {
                let l;
                r._$AQ?.(e),
                  (r._$AM = e),
                  r._$AP !== void 0 && (l = e._$AU) !== s._$AU && r._$AP(l);
              }
              if (a !== i || o) {
                let l = r._$AA;
                for (; l !== a; ) {
                  const u = l.nextSibling;
                  n.insertBefore(l, i), (l = u);
                }
              }
            }
            return r;
          },
          nt = (e, t, r = e) => (e._$AI(t, r), e),
          Bl = {},
          jl = (e, t = Bl) => (e._$AH = t),
          Ll = (e) => e._$AH,
          gn = (e) => {
            e._$AP?.(!1, !0);
            let t = e._$AA;
            const r = e._$AB.nextSibling;
            for (; t !== r; ) {
              const n = t.nextSibling;
              t.remove(), (t = n);
            }
          };
        /**
         * @license
         * Copyright 2017 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ const Fa = (e, t, r) => {
            const n = new Map();
            for (let i = t; i <= r; i++) n.set(e[i], i);
            return n;
          },
          yt = Kr(
            class extends Zr {
              constructor(e) {
                if ((super(e), e.type !== Wr.CHILD))
                  throw Error("repeat() can only be used in text expressions");
              }
              dt(e, t, r) {
                let n;
                r === void 0 ? (r = t) : t !== void 0 && (n = t);
                const i = [],
                  a = [];
                let s = 0;
                for (const o of e)
                  (i[s] = n ? n(o, s) : s), (a[s] = r(o, s)), s++;
                return { values: a, keys: i };
              }
              render(e, t, r) {
                return this.dt(e, t, r).values;
              }
              update(e, [t, r, n]) {
                const i = Ll(e),
                  { values: a, keys: s } = this.dt(t, r, n);
                if (!Array.isArray(i)) return (this.ut = s), a;
                const o = (this.ut ??= []),
                  l = [];
                let u,
                  x,
                  v = 0,
                  $ = i.length - 1,
                  y = 0,
                  C = a.length - 1;
                for (; v <= $ && y <= C; )
                  if (i[v] === null) v++;
                  else if (i[$] === null) $--;
                  else if (o[v] === s[y]) (l[y] = nt(i[v], a[y])), v++, y++;
                  else if (o[$] === s[C]) (l[C] = nt(i[$], a[C])), $--, C--;
                  else if (o[v] === s[C])
                    (l[C] = nt(i[v], a[C])), Nt(e, l[C + 1], i[v]), v++, C--;
                  else if (o[$] === s[y])
                    (l[y] = nt(i[$], a[y])), Nt(e, i[v], i[$]), $--, y++;
                  else if (
                    (u === void 0 && ((u = Fa(s, y, C)), (x = Fa(o, v, $))),
                    u.has(o[v]))
                  )
                    if (u.has(o[$])) {
                      const z = x.get(s[y]),
                        H = z !== void 0 ? i[z] : null;
                      if (H === null) {
                        const X = Nt(e, i[v]);
                        nt(X, a[y]), (l[y] = X);
                      } else
                        (l[y] = nt(H, a[y])), Nt(e, i[v], H), (i[z] = null);
                      y++;
                    } else gn(i[$]), $--;
                  else gn(i[v]), v++;
                for (; y <= C; ) {
                  const z = Nt(e, l[C + 1]);
                  nt(z, a[y]), (l[y++] = z);
                }
                for (; v <= $; ) {
                  const z = i[v++];
                  z !== null && gn(z);
                }
                return (this.ut = s), jl(e, l), Pe;
              }
            }
          ),
          Nl = ee`
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
    <path fill-rule="evenodd" d="M2 4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4Zm4.78 1.97a.75.75 0 0 1 0 1.06L5.81 8l.97.97a.75.75 0 1 1-1.06 1.06l-1.5-1.5a.75.75 0 0 1 0-1.06l1.5-1.5a.75.75 0 0 1 1.06 0Zm2.44 1.06a.75.75 0 0 1 1.06-1.06l1.5 1.5a.75.75 0 0 1 0 1.06l-1.5 1.5a.75.75 0 1 1-1.06-1.06l.97-.97-.97-.97Z" clip-rule="evenodd" />
  </svg>
`,
          Oa = ee`
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"
    />
  </svg>
`,
          Ul = ee`
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
    <path fill-rule="evenodd" d="M2 4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4Zm2.22 1.97a.75.75 0 0 0 0 1.06l.97.97-.97.97a.75.75 0 1 0 1.06 1.06l1.5-1.5a.75.75 0 0 0 0-1.06l-1.5-1.5a.75.75 0 0 0-1.06 0ZM8.75 8.5a.75.75 0 0 0 0 1.5h2.5a.75.75 0 0 0 0-1.5h-2.5Z" clip-rule="evenodd" />
  </svg>
`,
          Ia = (
            e
          ) => ee`<svg aria-hidden="true" class="${e} h-4 w-4" fill="white" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
  <path
    fill-rule="evenodd"
    d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
    clip-rule="evenodd"
  ></path>
</svg>`,
          Hl = Ia("rotate-180"),
          ql = Ia();
        var Ra = Object.defineProperty,
          Vl = Object.getOwnPropertyDescriptor,
          Da = (e) => {
            throw TypeError(e);
          },
          Wl = (e, t, r) =>
            t in e
              ? Ra(e, t, {
                  enumerable: !0,
                  configurable: !0,
                  writable: !0,
                  value: r,
                })
              : (e[t] = r),
          Ut = (e, t, r, n) => {
            for (
              var i = n > 1 ? void 0 : n ? Vl(t, r) : t, a = e.length - 1, s;
              a >= 0;
              a--
            )
              (s = e[a]) && (i = (n ? s(t, r, i) : s(i)) || i);
            return n && i && Ra(t, r, i), i;
          },
          Ba = (e, t, r) => Wl(e, typeof t != "symbol" ? t + "" : t, r),
          mn = (e, t, r) => t.has(e) || Da("Cannot " + r),
          _e = (e, t, r) => (mn(e, t, "read from private field"), t.get(e)),
          Ie = (e, t, r) =>
            t.has(e)
              ? Da("Cannot add the same private member more than once")
              : t instanceof WeakSet
              ? t.add(e)
              : t.set(e, r),
          ja = (e, t, r, n) => (
            mn(e, t, "write to private field"), t.set(e, r), r
          ),
          we = (e, t, r) => (mn(e, t, "access private method"), r),
          hr,
          wt,
          pr,
          fe,
          La,
          Na,
          Ua,
          vn,
          Ha,
          qa,
          Va,
          Wa,
          bn,
          yn,
          wn,
          kn,
          fr,
          xn;
        let kt = class extends qe {
          constructor() {
            super(),
              Ie(this, fe),
              Ie(this, hr, new AbortController()),
              Ie(this, wt, []),
              Ie(this, pr, ""),
              Ba(this, "open", () => {
                this.dialog.showModal();
              }),
              Ba(this, "close", () => {
                this.dialog.close();
              }),
              Ie(this, vn, (e) => {
                (((e.ctrlKey || e.metaKey) && e.key === "k") ||
                  (!this.isOpen && e.key === "/")) &&
                  _e(this, bn).call(this, e),
                  this.isOpen &&
                    (e.key === "ArrowUp"
                      ? we(this, fe, Va).call(this)
                      : e.key === "ArrowDown" && we(this, fe, qa).call(this),
                    (e.key === "ArrowUp" || e.key === "ArrowDown") &&
                      this.updateComplete.then(() => {
                        we(this, fe, Ha).call(this);
                      }),
                    e.key === "Enter" && we(this, fe, Wa).call(this));
              }),
              Ie(this, bn, (e = null) => {
                e?.preventDefault(),
                  e?.stopPropagation(),
                  this.isOpen ? this.close() : this.open();
              }),
              Ie(this, yn, () => {
                (this.fileIndex = 0),
                  we(this, fe, fr).call(this, ""),
                  (document.body.style.overflow = _e(this, pr));
              }),
              Ie(this, wn, () => {
                document.body.style.overflow = "hidden";
              }),
              Ie(this, kn, (e) => {
                this.isOpen &&
                  (we(this, fe, fr).call(this, e.target.value),
                  (this.fileIndex = 0));
              }),
              (this.fileIndex = 0),
              (this.filteredFiles = []);
          }
          get isOpen() {
            return this.dialog.open;
          }
          connectedCallback() {
            super.connectedCallback(),
              ja(this, pr, document.body.style.overflow),
              window.addEventListener("keydown", _e(this, vn), {
                signal: _e(this, hr).signal,
              });
          }
          disconnectedCallback() {
            super.disconnectedCallback(), fn.cleanup(), _e(this, hr).abort();
          }
          willUpdate(e) {
            e.has("rootModel") &&
              (we(this, fe, Ua).call(this), we(this, fe, fr).call(this, ""));
          }
          render() {
            return b`
      <dialog
        @click="${this.close}"
        @close="${_e(this, yn)}"
        @show="${_e(this, wn)}"
        aria-labelledby="file-picker-label"
        class="mx-auto my-4 max-w-[40rem] bg-transparent backdrop:bg-gray-950/50 backdrop:backdrop-blur-lg md:w-1/2"
      >
        <div
          @click="${(e) => e.stopPropagation()}"
          class="flex h-fit max-h-[33rem] flex-col rounded-lg bg-gray-200/60 p-4 backdrop-blur-lg"
        >
          <div class="mb-3 flex items-center rounded-sm bg-gray-200/60 p-2 text-gray-800 shadow-lg">
            <div class="mx-2 flex items-center">${Oa}</div>
            <label id="file-picker-label" for="file-picker-input" class="sr-only">Search for a file</label>
            <input
              autocomplete="off"
              id="file-picker-input"
              @input="${_e(this, kn)}"
              type="search"
              style="box-shadow: none"
              class="mr-2 w-full border-0 border-transparent bg-transparent focus:shadow-none"
              placeholder="Search for a file (Ctrl-K)"
              aria-controls="files"
            />
          </div>
          ${we(this, fe, La).call(this)}
        </div>
      </dialog>
    `;
          }
        };
        (hr = new WeakMap()),
          (wt = new WeakMap()),
          (pr = new WeakMap()),
          (fe = new WeakSet()),
          (La = function () {
            return b`
      <ul id="files" tabindex="-1" class="flex snap-y flex-col gap-2 overflow-auto" role="listbox" aria-labelledby="file-picker-label">
        ${vt(
          this.filteredFiles.length === 0,
          () => b`<li class="text-gray-800">No files found</li>`
        )}
        ${yt(
          this.filteredFiles,
          (e) => e.name,
          ({ name: e, file: t, template: r }, n) => {
            const i = we(this, fe, xn).call(this, t);
            return b`
              <li
                class="group snap-start rounded-sm bg-gray-200 text-gray-900 transition-shadow aria-selected:bg-primary-500 aria-selected:text-gray-50 aria-selected:shadow-lg"
                role="option"
                aria-selected="${n === this.fileIndex}"
              >
                <a
                  tabindex="${n === this.fileIndex ? 0 : -1}"
                  @click="${this.close}"
                  class="flex h-full flex-wrap items-center p-2 outline-hidden"
                  @mousemove="${() => (this.fileIndex = n)}"
                  href="${bt(i, e)}"
                >
                  <span class="inline-flex" title="File with ${i}s">${we(
              this,
              fe,
              Na
            ).call(this, i)}</span>
                  <span class="ms-1">${t.result?.name}</span>
                  <span class="mx-2">•</span>
                  <span class="text-gray-400 group-aria-selected:text-gray-200">${
                    r ?? e
                  }</span>
                </a>
              </li>
            `;
          }
        )}
      </ul>
    `;
          }),
          (Na = function (e) {
            return e === me.mutant ? Nl : Ul;
          }),
          (Ua = function () {
            if (!this.rootModel) return;
            ja(this, wt, []);
            const e = (t, r = null, n) => {
              if (t) {
                if (t.file && t.name !== n) {
                  const i = r ? `${r}/${t.name}` : t.name;
                  _e(this, wt).push({
                    name: i,
                    file: t.file,
                    prepared: fn.prepare(i),
                  });
                }
                t.childResults.forEach((i) => {
                  r !== n && r && t.name
                    ? e(i, `${r}/${t.name}`, n)
                    : (r === n || !r) && t.name !== n
                    ? e(i, t.name, n)
                    : e(i, null, n);
                });
              }
            };
            e(this.rootModel.systemUnderTestMetrics, null, "All files"),
              e(this.rootModel.testMetrics, null, "All tests");
          }),
          (vn = new WeakMap()),
          (Ha = function () {
            this.renderRoot
              .querySelector('[aria-selected="true"] a')
              ?.scrollIntoView({ block: "nearest" });
          }),
          (qa = function () {
            if (this.fileIndex === this.filteredFiles.length - 1) {
              this.fileIndex = 0;
              return;
            }
            this.fileIndex = Math.min(
              this.filteredFiles.length - 1,
              this.fileIndex + 1
            );
          }),
          (Va = function () {
            if (this.fileIndex === 0) {
              this.fileIndex = this.filteredFiles.length - 1;
              return;
            }
            this.fileIndex = Math.max(0, this.fileIndex - 1);
          }),
          (Wa = function () {
            if (this.filteredFiles.length === 0) return;
            const e = this.filteredFiles[this.fileIndex];
            (window.location.href = bt(
              we(this, fe, xn).call(this, e.file),
              e.name
            )),
              this.close();
          }),
          (bn = new WeakMap()),
          (yn = new WeakMap()),
          (wn = new WeakMap()),
          (kn = new WeakMap()),
          (fr = function (e) {
            e
              ? (this.filteredFiles = fn
                  .go(e, _e(this, wt), {
                    key: "prepared",
                    threshold: 0.3,
                    limit: 500,
                  })
                  .map((t) => ({
                    file: t.obj.file,
                    name: t.obj.name,
                    template: t.highlight(
                      (r) =>
                        b`<mark class="bg-inherit text-primary-500 group-aria-selected:text-primary-50 group-aria-selected:underline">${r}</mark>`
                    ),
                  })))
              : (this.filteredFiles = _e(this, wt));
          }),
          (xn = function (e) {
            return e instanceof li ? me.test : me.mutant;
          }),
          Ut([I({ attribute: !1 })], kt.prototype, "rootModel", 2),
          Ut([he()], kt.prototype, "filteredFiles", 2),
          Ut([he()], kt.prototype, "fileIndex", 2),
          Ut([Xt("dialog")], kt.prototype, "dialog", 2),
          (kt = Ut([se("mte-file-picker")], kt));
        var Kl = Object.defineProperty,
          Zl = Object.getOwnPropertyDescriptor,
          Ka = (e) => {
            throw TypeError(e);
          },
          $n = (e, t, r, n) => {
            for (
              var i = n > 1 ? void 0 : n ? Zl(t, r) : t, a = e.length - 1, s;
              a >= 0;
              a--
            )
              (s = e[a]) && (i = (n ? s(t, r, i) : s(i)) || i);
            return n && i && Kl(t, r, i), i;
          },
          Gl = (e, t, r) => t.has(e) || Ka("Cannot " + r),
          Yl = (e, t, r) =>
            t.has(e)
              ? Ka("Cannot add the same private member more than once")
              : t instanceof WeakSet
              ? t.add(e)
              : t.set(e, r),
          it = (e, t, r) => (Gl(e, t, "access private method"), r),
          Re,
          Za,
          _n,
          Sn,
          Ga,
          Ya;
        let gr = class extends qe {
          constructor() {
            super(...arguments), Yl(this, Re);
          }
          get rootName() {
            switch (this.view) {
              case me.mutant:
                return "All files";
              case me.test:
                return "All tests";
            }
          }
          render() {
            return b`<nav class="my-4 flex rounded-md border border-primary-600 bg-primary-100 p-3 text-gray-700" aria-label="Breadcrumb">
      <ol class="inline-flex items-center">
        ${
          this.path && this.path.length > 0
            ? it(this, Re, Sn).call(this, this.rootName, [])
            : it(this, Re, _n).call(this, this.rootName)
        }
        ${it(this, Re, Za).call(this)}
      </ol>
      ${it(this, Re, Ga).call(this)}
    </nav> `;
          }
        };
        (Re = new WeakSet()),
          (Za = function () {
            if (this.path) {
              const e = this.path;
              return yt(
                e,
                (t) => t,
                (t, r) =>
                  r === e.length - 1
                    ? it(this, Re, _n).call(this, t)
                    : it(this, Re, Sn).call(this, t, e.slice(0, r + 1))
              );
            }
          }),
          (_n = function (e) {
            return b`<li aria-current="page">
      <span class="ml-1 text-sm font-medium text-gray-800 md:ml-2">${e}</span>
    </li> `;
          }),
          (Sn = function (e, t) {
            return b`<li class="after:text-gray-800 after:content-['/'] md:after:pl-1">
      <a
        href="${bt(this.view, ...t)}"
        class="ml-1 text-sm font-medium text-primary-800 underline hover:text-gray-900 hover:underline md:ml-2"
        >${e}</a
      >
    </li>`;
          }),
          (Ga = function () {
            return b`
      <button @click="${() =>
        it(this, Re, Ya).call(
          this
        )}" class="ml-auto" title="Open file picker (Ctrl-K)">${Oa}</button>
    `;
          }),
          (Ya = function () {
            this.blur(),
              this.renderRoot.querySelector("button")?.blur(),
              this.dispatchEvent(Ae("mte-file-picker-open", void 0));
          }),
          $n([I({ type: Array, attribute: !1 })], gr.prototype, "path", 2),
          $n([I()], gr.prototype, "view", 2),
          (gr = $n([se("mte-breadcrumb")], gr));
        var Ja = Object.defineProperty,
          Jl = Object.getOwnPropertyDescriptor,
          Qa = (e) => {
            throw TypeError(e);
          },
          Ql = (e, t, r) =>
            t in e
              ? Ja(e, t, {
                  enumerable: !0,
                  configurable: !0,
                  writable: !0,
                  value: r,
                })
              : (e[t] = r),
          Xa = (e, t, r, n) => {
            for (
              var i = n > 1 ? void 0 : n ? Jl(t, r) : t, a = e.length - 1, s;
              a >= 0;
              a--
            )
              (s = e[a]) && (i = (n ? s(t, r, i) : s(i)) || i);
            return n && i && Ja(t, r, i), i;
          },
          es = (e, t, r) => Ql(e, typeof t != "symbol" ? t + "" : t, r),
          Xl = (e, t, r) => t.has(e) || Qa("Cannot " + r),
          ec = (e, t, r) =>
            t.has(e)
              ? Qa("Cannot add the same private member more than once")
              : t instanceof WeakSet
              ? t.add(e)
              : t.set(e, r),
          ts = (e, t, r) => (Xl(e, t, "access private method"), r),
          mr,
          An;
        let Cn = class extends Fe {
          constructor() {
            super(...arguments),
              ec(this, mr),
              es(this, "next", (e) => {
                e.stopPropagation(),
                  this.dispatchEvent(
                    Ae("next", void 0, { bubbles: !0, composed: !0 })
                  );
              }),
              es(this, "previous", (e) => {
                e.stopPropagation(),
                  this.dispatchEvent(
                    Ae("previous", void 0, { bubbles: !0, composed: !0 })
                  );
              });
          }
          updated(e) {
            e.has("filters") && this.dispatchFiltersChangedEvent();
          }
          checkboxChanged(e, t) {
            (e.enabled = t), this.dispatchFiltersChangedEvent();
          }
          dispatchFiltersChangedEvent() {
            this.dispatchEvent(
              Ae(
                "filters-changed",
                this.filters
                  .filter(({ enabled: e }) => e)
                  .map(({ status: e }) => e)
              )
            );
          }
          render() {
            return b`
      <div class="sticky top-offset z-10 mb-1 flex flex-row gap-5 bg-white py-6 pt-7">
        <div class="flex items-center gap-2">
          ${ts(this, mr, An).call(
            this,
            this.previous,
            Hl,
            "Previous",
            "Select previous mutant"
          )}
          ${ts(this, mr, An).call(
            this,
            this.next,
            ql,
            "Next",
            "Select next mutant"
          )}
        </div>

        ${vt(
          this.filters?.length,
          yt(
            this.filters,
            (e) => e.status,
            (e) => b`
              <div class="flex items-center gap-2 last:mr-12" data-status="${e.status.toString()}">
                <input
                  ?checked="${e.enabled}"
                  id="filter-${e.status}"
                  aria-describedby="status-description"
                  type="checkbox"
                  .value="${e.status.toString()}"
                  @input="${(t) => this.checkboxChanged(e, t.target.checked)}"
                  class="h-5 w-5 shrink-0 rounded-sm bg-gray-100 ring-offset-gray-200! transition-colors checked:bg-primary-600 focus:ring-2 focus:ring-primary-500 focus:outline-hidden"
                />

                <label
                  for="filter-${e.status}"
                  class="${this.bgForContext(
                    e.context
                  )} rounded-md px-2.5 py-0.5 text-sm font-medium hover:cursor-pointer"
                >
                  ${e.label} (${e.count})
                </label>
              </div>
            `
          )
        )}
      </div>
    `;
          }
          bgForContext(e) {
            switch (e) {
              case "success":
                return "bg-green-100 text-green-800";
              case "warning":
                return "bg-yellow-100 text-yellow-800";
              case "danger":
                return "bg-red-100 text-red-800";
              case "caution":
                return "bg-orange-100 text-orange-800";
              default:
                return "bg-gray-100 text-gray-800";
            }
          }
        };
        (mr = new WeakSet()),
          (An = function (e, t, r, n) {
            return b`<button
      title="${r}"
      @click=${e}
      type="button"
      class="inline-flex items-center rounded-sm bg-primary-600 p-1 text-center text-white hover:bg-primary-700 focus:ring-2 focus:ring-primary-500 focus:outline-hidden"
      >${t}
      <span class="sr-only">${n}</span>
    </button>`;
          }),
          Xa([I({ type: Array })], Cn.prototype, "filters", 2),
          (Cn = Xa([se("mte-state-filter")], Cn));
        const tc =
          ':host{--theme-d:1.5em;--theme-s:1.2em;--theme-p:.15em;--theme-g:.06em;--theme-width:2.9em;--poly:polygon(44.1337% 12.9617%,50% 0%,55.8663% 12.9617%,59.7057% 13.7778%,63.4388% 14.9907%,67.0246% 16.5873%,79.3893% 9.54915%,76.5165% 23.4835%,79.143% 26.4005%,81.4502% 29.576%,83.4127% 32.9754%,97.5528% 34.5492%,87.0383% 44.1337%,87.4486% 48.0374%,87.4486% 51.9626%,87.0383% 55.8663%,97.5528% 65.4508%,83.4127% 67.0246%,81.4502% 70.424%,79.143% 73.5995%,76.5165% 76.5165%,79.3893% 90.4508%,67.0246% 83.4127%,63.4388% 85.0093%,59.7057% 86.2222%,55.8663% 87.0383%,50% 100%,44.1337% 87.0383%,40.2943% 86.2222%,36.5612% 85.0093%,32.9754% 83.4127%,20.6107% 90.4508%,23.4835% 76.5165%,20.857% 73.5995%,18.5499% 70.424%,16.5873% 67.0246%,2.44717% 65.4508%,12.9617% 55.8663%,12.5514% 51.9626%,12.5514% 48.0374%,12.9617% 44.1337%,2.44717% 34.5492%,16.5873% 32.9754%,18.5499% 29.576%,20.857% 26.4005%,23.4835% 23.4835%,20.6107% 9.54915%,32.9754% 16.5873%,36.5612% 14.9907%,40.2943% 13.7778%)}#darkTheme{position:absolute;right:100vw}#darkTheme+label{--i:0;--j:calc(1 - var(--i));grid-gap:var(--theme-p)var(--theme-g);padding:var(--theme-p);height:var(--theme-d);border-radius:calc(.5*var(--theme-s) + var(--theme-p));background:hsl(199,98%,calc(var(--j)*48%));color:#0000;-webkit-user-select:none;user-select:none;cursor:pointer;transition:all .3s;display:grid;overflow:hidden}#darkTheme+label:before,#darkTheme+label:after{width:var(--theme-s);height:var(--theme-s);content:"";transition:inherit}#darkTheme+label:before{transform-origin:20% 20%;transform:translate(calc(var(--i)*(100% + var(--theme-g))))scale(calc(1 - var(--i)*.8));-webkit-clip-path:var(--poly);clip-path:var(--poly);background:#ff0}#darkTheme+label:after{transform:translatey(calc(var(--i)*(-130% - var(--theme-p))));background:radial-gradient(circle at 19% 19%,#0000 41%,#fff 43%);border-radius:50%;grid-column:2}#darkTheme:checked+label{--i:1}.check-box-container{width:var(--theme-width)}';
        var rs = Object.defineProperty,
          rc = Object.getOwnPropertyDescriptor,
          nc = (e, t, r) =>
            t in e
              ? rs(e, t, {
                  enumerable: !0,
                  configurable: !0,
                  writable: !0,
                  value: r,
                })
              : (e[t] = r),
          ns = (e, t, r, n) => {
            for (
              var i = n > 1 ? void 0 : n ? rc(t, r) : t, a = e.length - 1, s;
              a >= 0;
              a--
            )
              (s = e[a]) && (i = (n ? s(t, r, i) : s(i)) || i);
            return n && i && rs(t, r, i), i;
          },
          ic = (e, t, r) => nc(e, t + "", r);
        let vr = class extends qe {
          dispatchThemeChangedEvent = (t) => {
            const r = t.target.checked;
            this.dispatchEvent(Ae("theme-switch", r ? "dark" : "light"));
          };
          render() {
            return b`
      <div class="check-box-container" @click="${(t) => t.stopPropagation()}">
        <input type="checkbox" @click="${
          this.dispatchThemeChangedEvent
        }" ?checked="${this.theme === "dark"}" id="darkTheme" />
        <label for="darkTheme">Dark</label>
      </div>
    `;
          }
        };
        ic(vr, "styles", [ze, Te(tc)]),
          ns([I()], vr.prototype, "theme", 2),
          (vr = ns([se("mte-theme-switch")], vr));
        const is = ({ hasDetail: e, mode: t }, r) => b`<mte-drawer
    class="fixed bottom-0 z-10 container rounded-t-3xl bg-gray-200/60 shadow-xl backdrop-blur-lg motion-safe:transition-[height,max-width] motion-safe:duration-200"
    ?has-detail=${e}
    mode="${t}"
  >
    ${r}
  </mte-drawer>`;
        var ac = Object.defineProperty,
          sc = Object.getOwnPropertyDescriptor,
          Mn = (e, t, r, n) => {
            for (
              var i = n > 1 ? void 0 : n ? sc(t, r) : t, a = e.length - 1, s;
              a >= 0;
              a--
            )
              (s = e[a]) && (i = (n ? s(t, r, i) : s(i)) || i);
            return n && i && ac(t, r, i), i;
          };
        const as = (e) =>
            `${e.name}${e.sourceFile && e.location ? ` (${da(e)})` : ""}`,
          ss = (e) => b`<span class="whitespace-pre-wrap">${e}</span>`;
        let br = class extends Fe {
          constructor() {
            super(), (this.mode = "closed");
          }
          render() {
            return is(
              {
                hasDetail: !!(
                  this.mutant?.killedByTests?.length ||
                  this.mutant?.coveredByTests?.length ||
                  this.mutant?.statusReason
                ),
                mode: this.mode,
              },
              Bt(
                this.mutant,
                (e) => b`
          <span class="align-middle text-lg" slot="header"
            >${ca(e.status)} ${e.mutatorName} ${e.status}
            (${e.location.start.line}:${e.location.start.column})</span
          >
          <span slot="summary">${this.renderSummary()}</span>
          <span slot="detail" class="block">${this.renderDetail()}</span>
        `
              )
            );
          }
          renderSummary() {
            return na(b`${
              this.mutant?.killedByTests?.[0]
                ? tt(b`${Q("🎯", "killed")} Killed by:
            ${this.mutant.killedByTests?.[0].name}${
                    this.mutant.killedByTests.length > 1
                      ? `(and ${this.mutant.killedByTests.length - 1} more)`
                      : ""
                  }`)
                : P
            }
      ${vt(this.mutant?.static, tt(b`${Q("🗿", "static")} Static mutant`))}
      ${Bt(this.mutant?.coveredByTests, (e) =>
        tt(b`${Q("☂️", "umbrella")} Covered by ${e.length}
          test${ua(e)}${
          this.mutant?.status === "Survived" ? " (yet still survived)" : ""
        }`)
      )}
      ${vt(
        this.mutant?.statusReason?.trim(),
        tt(
          b`${Q("🕵️", "spy")} ${ss(this.mutant.statusReason)}`,
          `Reason for the ${this.mutant.status} status`
        )
      )}
      ${Bt(this.mutant?.description, (e) =>
        tt(b`${Q("📖", "book")} ${ss(e)}`)
      )}`);
          }
          renderDetail() {
            return b`<ul class="mr-2 mb-6">
      ${Ve(this.mutant?.killedByTests, (e) =>
        ir(
          "This mutant was killed by this test",
          b`${Q("🎯", "killed")} ${as(e)}`
        )
      )}
      ${Ve(
        this.mutant?.coveredByTests?.filter(
          (e) => !this.mutant?.killedByTests?.includes(e)
        ),
        (e) =>
          ir(
            "This mutant was covered by this test",
            b`${Q("☂️", "umbrella")} ${as(e)}`
          )
      )}
    </ul>`;
          }
        };
        Mn([I({ attribute: !1 })], br.prototype, "mutant", 2),
          Mn([I({ reflect: !0 })], br.prototype, "mode", 2),
          (br = Mn([se("mte-drawer-mutant")], br));
        var oc = Object.defineProperty,
          lc = Object.getOwnPropertyDescriptor,
          xt = (e, t, r, n) => {
            for (
              var i = n > 1 ? void 0 : n ? lc(t, r) : t, a = e.length - 1, s;
              a >= 0;
              a--
            )
              (s = e[a]) && (i = (n ? s(t, r, i) : s(i)) || i);
            return n && i && oc(t, r, i), i;
          };
        let at = class extends Fe {
          constructor() {
            super(), (this.drawerMode = "closed");
          }
          handleClick = () => {
            this.drawerMode = "closed";
          };
          handleMutantSelected = (e) => {
            (this.selectedMutant = e.detail.mutant),
              (this.drawerMode = e.detail.selected ? "half" : "closed");
          };
          updated(e) {
            e.has("result") &&
              !this.result.file &&
              (this.drawerMode = "closed");
          }
          render() {
            return b`
      <main class="pb-drawer-half-open" @click="${this.handleClick}">
        <mte-metrics-table .columns="${cc}" .currentPath="${
              this.path
            }" .thresholds="${this.thresholds}" .model="${this.result}">
        </mte-metrics-table>
        ${
          this.result.file
            ? b`<mte-file @mutant-selected="${this.handleMutantSelected}" .model="${this.result.file}"></mte-file>`
            : P
        }
      </main>
      <mte-drawer-mutant mode="${this.drawerMode}" .mutant="${
              this.selectedMutant
            }"></mte-drawer-mutant>
    `;
          }
        };
        xt([he()], at.prototype, "drawerMode", 2),
          xt([I({ attribute: !1 })], at.prototype, "selectedMutant", 2),
          xt([I({ attribute: !1 })], at.prototype, "result", 2),
          xt(
            [I({ attribute: !1, reflect: !1 })],
            at.prototype,
            "thresholds",
            2
          ),
          xt([I({ attribute: !1, reflect: !1 })], at.prototype, "path", 2),
          (at = xt([se("mte-mutant-view")], at));
        const cc = [
          {
            key: "mutationScore",
            label: "Of total",
            tooltip:
              "The percentage of mutants that were detected. The higher, the better!",
            category: "percentage",
            group: "Mutation score",
          },
          {
            key: "mutationScoreBasedOnCoveredCode",
            label: "Of covered",
            tooltip: "Mutation score based on only the code covered by tests",
            category: "percentage",
            group: "Mutation score",
          },
          {
            key: "killed",
            label: "Killed",
            tooltip:
              "At least one test failed while these mutants were active. This is what you want!",
            category: "number",
          },
          {
            key: "survived",
            label: "Survived",
            tooltip:
              "All tests passed while these mutants were active. You're missing a test for them.",
            category: "number",
          },
          {
            key: "timeout",
            label: "Timeout",
            tooltip:
              "Running the tests while these mutants were active resulted in a timeout. For example, an infinite loop.",
            category: "number",
          },
          {
            key: "noCoverage",
            label: "No coverage",
            tooltip:
              "These mutants aren't covered by one of your tests and survived as a result.",
            category: "number",
          },
          {
            key: "ignored",
            label: "Ignored",
            tooltip:
              "These mutants weren't tested because they are ignored. Either by user action, or for another reason.",
            category: "number",
          },
          {
            key: "runtimeErrors",
            label: "Runtime errors",
            tooltip:
              "Running tests when these mutants are active resulted in an error (rather than a failed test). For example: an out of memory error.",
            category: "number",
          },
          {
            key: "compileErrors",
            label: "Compile errors",
            tooltip: "Mutants that caused a compile error.",
            category: "number",
          },
          {
            key: "totalDetected",
            label: "Detected",
            tooltip:
              "The number of mutants detected by your tests (killed + timeout).",
            category: "number",
            width: "large",
            isBold: !0,
          },
          {
            key: "totalUndetected",
            label: "Undetected",
            tooltip:
              "The number of mutants that are not detected by your tests (survived + no coverage).",
            category: "number",
            width: "large",
            isBold: !0,
          },
          {
            key: "totalMutants",
            label: "Total",
            tooltip: "All mutants (except runtimeErrors + compileErrors)",
            category: "number",
            width: "large",
            isBold: !0,
          },
        ];
        var uc = Object.defineProperty,
          dc = Object.getOwnPropertyDescriptor,
          Ht = (e, t, r, n) => {
            for (
              var i = n > 1 ? void 0 : n ? dc(t, r) : t, a = e.length - 1, s;
              a >= 0;
              a--
            )
              (s = e[a]) && (i = (n ? s(t, r, i) : s(i)) || i);
            return n && i && uc(t, r, i), i;
          };
        let $t = class extends Fe {
          constructor() {
            super(), (this.drawerMode = "closed");
          }
          handleClick = () => {
            this.drawerMode = "closed";
          };
          handleTestSelected = (e) => {
            (this.selectedTest = e.detail.test),
              (this.drawerMode = e.detail.selected ? "half" : "closed");
          };
          updated(e) {
            e.has("result") &&
              !this.result.file &&
              (this.drawerMode = "closed");
          }
          render() {
            return b`
      <main class="pb-drawer-half-open" @click="${this.handleClick}">
        <mte-metrics-table .columns="${hc}" .currentPath="${
              this.path
            }" .model="${this.result}"> </mte-metrics-table>
        ${
          this.result.file
            ? b`<mte-test-file @test-selected="${this.handleTestSelected}" .model="${this.result.file}"></mte-test-file>`
            : P
        }
      </main>
      <mte-drawer-test mode="${this.drawerMode}" .test="${
              this.selectedTest
            }"></mte-drawer-test>
    `;
          }
        };
        Ht([he()], $t.prototype, "drawerMode", 2),
          Ht([I({ attribute: !1 })], $t.prototype, "result", 2),
          Ht([I({ attribute: !1, reflect: !1 })], $t.prototype, "path", 2),
          Ht([I({ attribute: !1 })], $t.prototype, "selectedTest", 2),
          ($t = Ht([se("mte-test-view")], $t));
        const hc = [
          {
            key: "killing",
            label: "Killing",
            tooltip: "These tests killed at least one mutant",
            width: "normal",
            category: "number",
          },
          {
            key: "covering",
            label: "Covering",
            tooltip:
              "These tests are covering at least one mutant, but not killing any of them.",
            width: "normal",
            category: "number",
          },
          {
            key: "notCovering",
            label: "Not Covering",
            tooltip:
              "These tests were not covering a mutant (and thus not killing any of them).",
            width: "normal",
            category: "number",
          },
          {
            key: "total",
            label: "Total tests",
            width: "large",
            category: "number",
            isBold: !0,
          },
        ];
        var pc = Object.defineProperty,
          fc = Object.getOwnPropertyDescriptor,
          qt = (e, t, r, n) => {
            for (
              var i = n > 1 ? void 0 : n ? fc(t, r) : t, a = e.length - 1, s;
              a >= 0;
              a--
            )
              (s = e[a]) && (i = (n ? s(t, r, i) : s(i)) || i);
            return n && i && pc(t, r, i), i;
          };
        let _t = class extends Fe {
          constructor() {
            super(),
              (this.currentPath = []),
              (this.thresholds = { high: 80, low: 60 });
          }
          hasMultipleColspan = !1;
          willUpdate(e) {
            e.has("columns") &&
              (this.hasMultipleColspan = this.columns.some(
                (t) => t.category === "percentage"
              ));
          }
          render() {
            return this.model
              ? b`<div class="overflow-x-auto rounded-md border border-gray-200">
          <table class="w-full table-auto text-left text-sm">${this.renderTableHeadRow()}${this.renderTableBody(
                  this.model
                )} </table>
        </div>`
              : P;
          }
          renderTableHeadRow() {
            const e = this.columns.filter((r) => r.group !== "Mutation score"),
              t = this.columns.filter((r) => r.group === "Mutation score");
            return b`<thead class="border-b border-gray-200 text-center text-sm">
      <tr>
        <th rowspan="2" scope="col" class="px-4 py-4">
          <div class="flex items-center justify-around">
            <span>File / Directory</span
            ><a
              href="https://stryker-mutator.io/docs/mutation-testing-elements/mutant-states-and-metrics"
              target="_blank"
              class="info-icon float-right"
              title="What does this all mean?"
              >${Q("ℹ", "info icon")}</a
            >
          </div>
        </th>
        ${
          t.length > 0
            ? b`<th colspan="4" class="px-2 even:bg-gray-100">Mutation Score</th>`
            : ""
        }
        ${yt(
          e,
          (r) => r.key,
          (r) => this.renderTableHead(r)
        )}
      </tr>
      <tr>
        ${yt(
          t,
          (r) => r.key,
          (r) => this.renderTableHead(r)
        )}
      </tr>
    </thead>`;
          }
          renderTableHead(e) {
            const t = `tooltip-${e.key.toString()}`,
              r = e.tooltip
                ? b`<mte-tooltip title="${e.tooltip}" id="${t}">${e.label}</mte-tooltip>`
                : b`<span id="${t}">${e.label}</span>`;
            return e.group
              ? b` <th colspan="2" class="bg-gray-200 px-2"> ${r} </th>`
              : b`<th rowspan="2" class="w-24 px-2 even:bg-gray-100 2xl:w-28">
      <div class="inline-block">${r}</div>
    </th>`;
          }
          renderTableBody(e) {
            const t = () =>
              e.file
                ? P
                : Ve(e.childResults, (r) => {
                    const n = [r.name];
                    for (; !r.file && r.childResults.length === 1; )
                      (r = r.childResults[0]), n.push(r.name);
                    return this.renderRow(
                      n.join("/"),
                      r,
                      ...this.currentPath,
                      ...n
                    );
                  });
            return b`<tbody class="divide-y divide-gray-200">${this.renderRow(
              e.name,
              e
            )} ${t()}</tbody>`;
          }
          renderRow(e, t, ...r) {
            return b`<tr title="${t.name}" class="group hover:bg-gray-200">
      <td class="font-semibold">
        <div class="flex items-center justify-start">
          <mte-file-icon file-name="${t.name}" ?file="${
              t.file
            }" class="mx-1"></mte-file-icon> ${
              r.length > 0
                ? b`<a class="mr-auto inline-block w-full py-4 pr-2 hover:text-primary-on hover:underline" href="${bt(
                    ...r
                  )}"
                >${e}</a
              >`
                : b`<span class="py-4">${t.name}</span>`
            }
        </div>
      </td>
      ${Ve(this.columns, (n) => this.renderCell(n, t.metrics))}
    </tr>`;
          }
          renderCell(e, t) {
            const r = t[e.key],
              n = this.hasMultipleColspan
                ? "odd:bg-gray-100"
                : "even:bg-gray-100";
            if (e.category === "percentage") {
              const i = !isNaN(r),
                a = this.determineBgColoringClass(r),
                s = this.determineTextColoringClass(r),
                o = r.toFixed(2),
                l = `width: ${r}%`;
              return b`<td class="bg-gray-100 px-4 py-4 group-hover:bg-gray-200!">
          ${
            i
              ? b`<div class="h-3 w-full min-w-[24px] rounded-full bg-gray-300">
                <div
                  class="${a} h-3 rounded-full pl-1 transition-all"
                  role="progressbar"
                  aria-valuenow="${o}"
                  aria-valuemin="0"
                  aria-valuemax="100"
                  aria-describedby="tooltip-mutationScore"
                  title="${e.label}"
                  style="${l}"
                ></div>
              </div>`
              : b` <span class="text-light-muted font-bold">N/A</span> `
          }
        </td>
        <td class="${s} ${n} w-12 pr-2 text-center font-bold group-hover:bg-gray-200!"
          >${i ? b`<span class="transition-colors">${o}</span>` : P}</td
        >`;
            }
            return b`<td
      class="${Gr({
        "font-bold": e.isBold ?? !1,
        [n]: !0,
      })} py-4 text-center group-hover:bg-gray-200!"
      aria-describedby="${`tooltip-${e.key.toString()}`}"
      >${r}</td
    >`;
          }
          determineBgColoringClass(e) {
            return !isNaN(e) && this.thresholds
              ? e < this.thresholds.low
                ? "bg-red-600 text-gray-200"
                : e < this.thresholds.high
                ? "bg-yellow-400"
                : "bg-green-600 text-gray-200"
              : "bg-blue-600";
          }
          determineTextColoringClass(e) {
            return !isNaN(e) && this.thresholds
              ? e < this.thresholds.low
                ? "text-red-700"
                : e < this.thresholds.high
                ? "text-yellow-600"
                : "text-green-700"
              : "";
          }
        };
        qt([I({ attribute: !1 })], _t.prototype, "model", 2),
          qt([I({ attribute: !1 })], _t.prototype, "currentPath", 2),
          qt([I({ type: Array })], _t.prototype, "columns", 2),
          qt([I({ attribute: !1 })], _t.prototype, "thresholds", 2),
          (_t = qt([se("mte-metrics-table")], _t));
        const gc =
          '#report-code-block{background:var(--prism-background);border:1px solid var(--prism-border);overflow:auto visible}.line-numbers{counter-reset:mte-line-number}.line .line-number{text-align:right;color:var(--mut-line-number);counter-increment:mte-line-number;padding:0 10px 0 15px}.line .line-number:before{content:counter(mte-line-number)}.line-marker:before{content:" ";padding:0 5px}.Killing{--mut-test-dot-color:var(--color-green-700)}.Covering{--mut-test-dot-color:var(--color-amber-400)}.NotCovering{--mut-test-dot-color:var(--color-orange-500)}svg.test-dot{fill:var(--mut-test-dot-color)}';
        var os = Object.defineProperty,
          mc = Object.getOwnPropertyDescriptor,
          ls = (e) => {
            throw TypeError(e);
          },
          vc = (e, t, r) =>
            t in e
              ? os(e, t, {
                  enumerable: !0,
                  configurable: !0,
                  writable: !0,
                  value: r,
                })
              : (e[t] = r),
          st = (e, t, r, n) => {
            for (
              var i = n > 1 ? void 0 : n ? mc(t, r) : t, a = e.length - 1, s;
              a >= 0;
              a--
            )
              (s = e[a]) && (i = (n ? s(t, r, i) : s(i)) || i);
            return n && i && os(t, r, i), i;
          },
          yr = (e, t, r) => vc(e, typeof t != "symbol" ? t + "" : t, r),
          En = (e, t, r) => t.has(e) || ls("Cannot " + r),
          Vt = (e, t, r) => (En(e, t, "read from private field"), t.get(e)),
          wr = (e, t, r) =>
            t.has(e)
              ? ls("Cannot add the same private member more than once")
              : t instanceof WeakSet
              ? t.add(e)
              : t.set(e, r),
          bc = (e, t, r, n) => (
            En(e, t, "write to private field"), t.set(e, r), r
          ),
          cs = (e, t, r) => (En(e, t, "access private method"), r),
          Wt,
          Tn,
          kr,
          xr,
          Pn;
        let De = class extends Fe {
          constructor() {
            super(),
              wr(this, xr),
              wr(this, Wt),
              wr(this, Tn, (e) => {
                e.key === "Escape" && Vt(this, kr).call(this);
              }),
              yr(this, "filtersChanged", (e) => {
                (this.enabledStates = e.detail),
                  this.selectedTest &&
                    !this.enabledStates.includes(this.selectedTest.status) &&
                    this.toggleTest(this.selectedTest);
              }),
              yr(this, "nextTest", () => {
                const e = this.selectedTest
                  ? (this.tests.findIndex(
                      ({ id: t }) => t === this.selectedTest.id
                    ) +
                      1) %
                    this.tests.length
                  : 0;
                this.selectTest(this.tests[e]);
              }),
              yr(this, "previousTest", () => {
                const e = this.selectedTest
                  ? (this.tests.findIndex(
                      ({ id: t }) => t === this.selectedTest.id
                    ) +
                      this.tests.length -
                      1) %
                    this.tests.length
                  : this.tests.length - 1;
                this.selectTest(this.tests[e]);
              }),
              wr(this, kr, () => {
                this.selectedTest && this.toggleTest(this.selectedTest);
              }),
              (this.filters = []),
              (this.lines = []),
              (this.enabledStates = []),
              (this.tests = []),
              bc(this, Wt, new AbortController());
          }
          connectedCallback() {
            super.connectedCallback(),
              window.addEventListener("keydown", Vt(this, Tn), {
                signal: Vt(this, Wt).signal,
              });
          }
          disconnectedCallback() {
            Vt(this, Wt).abort(), super.disconnectedCallback();
          }
          toggleTest(e) {
            cs(this, xr, Pn).call(this, e),
              this.selectedTest === e
                ? ((this.selectedTest = void 0),
                  this.dispatchEvent(
                    Ae("test-selected", { selected: !1, test: e })
                  ))
                : (this.selectedTest &&
                    cs(this, xr, Pn).call(this, this.selectedTest),
                  (this.selectedTest = e),
                  this.dispatchEvent(
                    Ae("test-selected", { selected: !0, test: e })
                  ),
                  ha(this.renderRoot.querySelector(`[test-id="${e.id}"]`)));
          }
          selectTest(e) {
            e && this.toggleTest(e);
          }
          render() {
            return b`
      <mte-state-filter
        @next=${this.nextTest}
        @previous=${this.previousTest}
        .filters="${this.filters}"
        @filters-changed="${this.filtersChanged}"
      ></mte-state-filter>
      ${this.renderTestList()} ${this.renderCode()}
    `;
          }
          renderTestList() {
            const e = this.tests.filter((t) => !t.location);
            return e.length
              ? b`<ul class="max-w-6xl">
        ${yt(
          e,
          (t) => t.id,
          (t) => b`<li class="my-3">
              <button
                class="w-full rounded-sm p-3 text-left hover:bg-gray-100 active:bg-gray-200"
                type="button"
                data-active="${this.selectedTest === t}"
                test-id="${t.id}"
                @click=${(r) => {
                  r.stopPropagation(), this.toggleTest(t);
                }}
                >${Xr(t.status)} ${t.name} [${t.status}]
              </button>
            </li>`
        )}
      </ul>`
              : P;
          }
          renderCode() {
            if (this.model?.source) {
              const e = new Map();
              for (const r of this.tests)
                if (r.location) {
                  let n = e.get(r.location.start.line);
                  n || ((n = []), e.set(r.location.start.line, n)), n.push(r);
                }
              const t = (r) =>
                this.renderTestDots(
                  [...e.entries()].filter(([n]) => n > r).flatMap(([, n]) => n)
                );
              return b`<pre
        id="report-code-block"
        @click="${Vt(this, kr)}"
        class="line-numbers flex rounded-md p-1"
      ><code class="flex language-${nn(this.model.name)}">
      <table>
        ${Ve(this.lines, (r, n) => {
          const i = n + 1,
            a = this.renderTestDots(e.get(i)),
            s = this.lines.length === i ? t(i) : P;
          return ba(r, va(a, s));
        })}</table></code></pre>`;
            }
            return P;
          }
          renderTestDots(e) {
            return e?.length
              ? e.map(
                  (t) => ee`<svg
              test-id="${t.id}"
              class="test-dot mx-0.5 cursor-pointer ${
                this.selectedTest?.id === t.id ? "selected" : ""
              } ${t.status}"
              @click=${(r) => {
                r.stopPropagation(), this.toggleTest(t);
              }}
              height="10"
              width="12"
            >
              <title>${yc(t)}</title>
              ${this.selectedTest === t ? xa : $a}
            </svg>`
                )
              : P;
          }
          reactivate() {
            super.reactivate(), this.updateFileRepresentation();
          }
          willUpdate(e) {
            e.has("model") && this.updateFileRepresentation(),
              (e.has("model") || e.has("enabledStates")) &&
                this.model &&
                (this.tests = this.model.tests
                  .filter((t) => this.enabledStates.includes(t.status))
                  .sort((t, r) =>
                    t.location && r.location
                      ? cr(t.location.start, r.location.start)
                        ? 1
                        : -1
                      : this.model.tests.indexOf(t) -
                        this.model.tests.indexOf(r)
                  ));
          }
          updateFileRepresentation() {
            if (!this.model) return;
            const e = this.model;
            (this.filters = [ne.Killing, ne.Covering, ne.NotCovering]
              .filter((t) => e.tests.some((r) => r.status === t))
              .map((t) => ({
                enabled: !0,
                count: e.tests.filter((r) => r.status === t).length,
                status: t,
                label: b`${Xr(t)} ${t}`,
                context: bl(t),
              }))),
              this.model.source &&
                (this.lines = sn(an(this.model.source, this.model.name)));
          }
        };
        (Wt = new WeakMap()),
          (Tn = new WeakMap()),
          (kr = new WeakMap()),
          (xr = new WeakSet()),
          (Pn = function (e) {
            _a(this.renderRoot, "test-id", e.id);
          }),
          yr(De, "styles", [ra, ze, Te(gc)]),
          st([I({ attribute: !1 })], De.prototype, "model", 2),
          st([he()], De.prototype, "filters", 2),
          st([he()], De.prototype, "lines", 2),
          st([he()], De.prototype, "enabledStates", 2),
          st([he()], De.prototype, "selectedTest", 2),
          st([he()], De.prototype, "tests", 2),
          (De = st([se("mte-test-file")], De));
        function yc(e) {
          return `${e.name} (${e.status})`;
        }
        var wc = Object.defineProperty,
          kc = Object.getOwnPropertyDescriptor,
          zn = (e, t, r, n) => {
            for (
              var i = n > 1 ? void 0 : n ? kc(t, r) : t, a = e.length - 1, s;
              a >= 0;
              a--
            )
              (s = e[a]) && (i = (n ? s(t, r, i) : s(i)) || i);
            return n && i && wc(t, r, i), i;
          };
        const Fn = (e) => b`<code>${e.getMutatedLines()}</code> (${da(e)})`;
        let $r = class extends Fe {
          constructor() {
            super(), (this.mode = "closed");
          }
          render() {
            return is(
              {
                hasDetail: !!(
                  this.test?.killedMutants?.length ||
                  this.test?.coveredMutants?.length
                ),
                mode: this.mode,
              },
              Bt(
                this.test,
                (e) => b`
          <span class="align-middle text-lg" slot="header"
            >${Xr(e.status)} ${e.name} [${e.status}]
            ${
              e.location
                ? b`(${e.location.start.line}:${e.location.start.column})`
                : P
            }</span
          >
          <span slot="summary">${this.renderSummary()}</span>
          <span class="block" slot="detail">${this.renderDetail()}</span>
        `
              )
            );
          }
          renderSummary() {
            return na(b`${
              this.test?.killedMutants?.[0]
                ? tt(b`${Q("🎯", "killed")} Killed:
            ${Fn(this.test.killedMutants?.[0])}${
                    this.test.killedMutants.length > 1
                      ? b` (and ${this.test.killedMutants.length - 1} more)`
                      : ""
                  }`)
                : P
            }
      ${Bt(this.test?.coveredMutants, (e) =>
        tt(b`${Q("☂️", "umbrella")} Covered ${e.length}
          mutant${ua(e)}${
          this.test?.status === ne.Covering
            ? " (yet didn't kill any of them)"
            : ""
        }`)
      )}`);
          }
          renderDetail() {
            return b`<ul class="mr-2 mb-6">
      ${Ve(this.test?.killedMutants, (e) =>
        ir("This test killed this mutant", b`${Q("🎯", "killed")} ${Fn(e)}`)
      )}
      ${Ve(
        this.test?.coveredMutants?.filter(
          (e) => !this.test?.killedMutants?.includes(e)
        ),
        (e) =>
          ir(
            "This test covered this mutant",
            b`${Q("☂️", "umbrella")} ${Fn(e)}`
          )
      )}
    </ul>`;
          }
        };
        zn([I({ attribute: !1 })], $r.prototype, "test", 2),
          zn([I({ reflect: !0 })], $r.prototype, "mode", 2),
          ($r = zn([se("mte-drawer-test")], $r));
        const xc =
          "svg.cs{fill:var(--mut-file-csharp-color)}svg.html{fill:var(--mut-file-html-color)}svg.java{fill:var(--mut-file-java-color)}svg.javascript{fill:var(--mut-file-js-color)}svg.scala{fill:var(--mut-file-scala-color)}svg.typescript{fill:var(--mut-file-ts-color)}svg.php{fill:var(--mut-file-php-color)}svg.vue{fill:var(--mut-file-vue-color)}svg.octicon{fill:var(--mut-octicon-icon-color)}svg.javascript.test,svg.typescript.test{fill:var(--mut-file-js-test-color)}svg.gherkin{fill:var(--mut-file-gherkin-color)}svg.svelte{fill:var(--mut-file-svelte-color)}svg.rust{fill:var(--mut-file-rust-color)}svg{vertical-align:middle;width:20px}";
        var us = Object.defineProperty,
          $c = Object.getOwnPropertyDescriptor,
          _c = (e, t, r) =>
            t in e
              ? us(e, t, {
                  enumerable: !0,
                  configurable: !0,
                  writable: !0,
                  value: r,
                })
              : (e[t] = r),
          On = (e, t, r, n) => {
            for (
              var i = n > 1 ? void 0 : n ? $c(t, r) : t, a = e.length - 1, s;
              a >= 0;
              a--
            )
              (s = e[a]) && (i = (n ? s(t, r, i) : s(i)) || i);
            return n && i && us(t, r, i), i;
          },
          Sc = (e, t, r) => _c(e, t + "", r);
        let Kt = class extends qe {
          get language() {
            return nn(this.fileName);
          }
          get isTestFile() {
            const e = this.fileName
              .substr(0, this.fileName.lastIndexOf("."))
              .toLowerCase();
            return e.endsWith("spec") || e.endsWith("test");
          }
          get cssClass() {
            return Gr({
              [this.language?.toString() ?? "unknown"]: this.file,
              test: this.isTestFile,
            });
          }
          render() {
            if (!this.file)
              return ee`<svg aria-label="directory" class="octicon octicon-file-directory" viewBox="0 0 14 16" version="1.1" width="14" height="16" role="img"><path fill-rule="evenodd" d="M 13,2 H 7 V 1 C 7,0.34 6.69,0 6,0 H 1 C 0.45,0 0,0.45 0,1 v 10 c 0,0.55 0.45,1 1,1 h 12 c 0.55,0 1,-0.45 1,-1 V 3 C 14,2.45 13.55,2 13,2 Z M 6,2 H 1 V 1 h 5 z" id="path2" /></svg>`;
            if (!this.language)
              return ee`<svg aria-label="file" class="octicon octicon-file" viewBox="0 0 12 16" version="1.1" width="12" height="16" role="img"><path fill-rule="evenodd" d="M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"></path></svg>`;
            switch (this.language) {
              case ye.csharp:
                return ee`<svg class="${this.cssClass}" aria-label="cs" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><g><path d="M7.1 15.9c0-1.3.2-2.4.6-3.4.4-1 .9-1.8 1.6-2.5.7-.7 1.5-1.2 2.4-1.6s1.9-.5 2.9-.5 1.9.2 2.7.6c.8.4 1.5.9 2 1.4l-2.2 2.5c-.4-.3-.7-.6-1.1-.7-.4-.1-.8-.3-1.4-.3-.5 0-.9.1-1.3.3-.4.2-.8.5-1.1.9s-.5.8-.7 1.4c-.2.6-.3 1.2-.3 1.9 0 1.5.3 2.6 1 3.3.7.8 1.5 1.2 2.6 1.2.5 0 1-.1 1.4-.3.4-.2.8-.5 1.1-.9l2.2 2.5c-.7.8-1.4 1.3-2.2 1.7-.8.4-1.7.6-2.7.6s-2-.2-2.9-.5-1.7-.8-2.4-1.5-1.1-1.7-1.5-2.7c-.5-.9-.7-2.1-.7-3.4z"/><path d="M21.8 17.1h-1l-.4 2.4h-1.2l.4-2.4h-1.2V16h1.5l.2-1.6h-1.3v-1.1h1.5l.4-2.4h1.2l-.4 2.4h1l.4-2.4h1.2l-.4 2.4H25v1.1h-1.6l-.2 1.6h1.3v1.1h-1.6l-.4 2.4h-1.2c0 .1.5-2.4.5-2.4zm-.8-1h1l.2-1.6h-1l-.2 1.6z"/></g></svg>`;
              case ye.html:
                return ee`<svg class="${this.cssClass}" aria-label="html" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M8 15l6-5.6V12l-4.5 4 4.5 4v2.6L8 17v-2zm16 2.1l-6 5.6V20l4.6-4-4.6-4V9.3l6 5.6v2.2z"/></svg>`;
              case ye.java:
                return ee`<svg class="${this.cssClass}" aria-label="java" xmlns="http://www.w3.org/2000/svg" viewBox="-4 -4 20 20"><path class="cls-1" d="M6 0a6 6 0 1 0 6 6 6 6 0 0 0-6-6zm2.14 6.8a2.16 2.16 0 0 1-2.29 2.41 2.5 2.5 0 0 1-2-.87l.73-.92a1.52 1.52 0 0 0 1.23.59c.66 0 1.06-.42 1.06-1.32V2.8h1.26z"/></svg>`;
              case ye.javascript:
                return ee`<svg class="${this.cssClass}" aria-label="js" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path  d="M11.4 10h2.7v7.6c0 3.4-1.6 4.6-4.3 4.6-.6 0-1.5-.1-2-.3l.3-2.2c.4.2.9.3 1.4.3 1.1 0 1.9-.5 1.9-2.4V10zm5.1 9.2c.7.4 1.9.8 3 .8 1.3 0 1.9-.5 1.9-1.3s-.6-1.2-2-1.7c-2-.7-3.3-1.8-3.3-3.6 0-2.1 1.7-3.6 4.6-3.6 1.4 0 2.4.3 3.1.6l-.6 2.2c-.5-.2-1.3-.6-2.5-.6s-1.8.5-1.8 1.2c0 .8.7 1.1 2.2 1.7 2.1.8 3.1 1.9 3.1 3.6 0 2-1.6 3.7-4.9 3.7-1.4 0-2.7-.4-3.4-.7l.6-2.3z"/></svg>`;
              case ye.typescript:
                return ee`<svg class="${this.cssClass}" aria-label="ts" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M15.6 11.8h-3.4V22H9.7V11.8H6.3V10h9.2v1.8zm7.7 7.1c0-.5-.2-.8-.5-1.1-.3-.3-.9-.5-1.7-.8-1.4-.4-2.5-.9-3.3-1.5-.7-.6-1.1-1.3-1.1-2.3 0-1 .4-1.8 1.3-2.4.8-.6 1.9-.9 3.2-.9 1.3 0 2.4.4 3.2 1.1.8.7 1.2 1.6 1.2 2.6h-2.3c0-.6-.2-1-.6-1.4-.4-.3-.9-.5-1.6-.5-.6 0-1.1.1-1.5.4-.4.3-.5.7-.5 1.1 0 .4.2.7.6 1 .4.3 1 .5 2 .8 1.3.4 2.3.9 3 1.5.7.6 1 1.4 1 2.4s-.4 1.9-1.2 2.4c-.8.6-1.9.9-3.2.9-1.3 0-2.5-.3-3.4-1s-1.5-1.6-1.4-2.9h2.4c0 .7.2 1.2.7 1.6.4.3 1.1.5 1.8.5s1.2-.1 1.5-.4c.2-.3.4-.7.4-1.1z"/></svg>`;
              case ye.scala:
                return ee`<svg class="${this.cssClass}" aria-label="scala" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M21.6 7v4.2c-.1.1-.1.2-.2.2-.3.3-.7.5-1.1.6-.9.3-1.9.5-2.8.7-1.6.3-3.1.5-4.7.7-.8.1-1.6.2-2.4.4V9.6c.1-.1.2-.1.4-.1 1.2-.2 2.5-.4 3.8-.5 1.9-.3 3.8-.5 5.6-1.1.5-.2 1.1-.4 1.4-.9zm0 5.6v4.2l-.2.2c-.5.4-1.1.6-1.6.8-.8.2-1.6.4-2.4.5-1 .2-1.9.3-2.9.5-1.4.2-2.7.3-4.1.6v-4.2c.1-.1.2-.1.3-.1 1.7-.2 3.4-.5 5.1-.7 1.4-.2 2.9-.5 4.3-.9.6-.2 1.1-.4 1.5-.9zM10.5 25h-.1v-4.2c.1-.1.2-.1.3-.1 1.2-.2 2.3-.3 3.5-.5 2-.3 3.9-.5 5.8-1.1.6-.2 1.2-.4 1.6-.9v4.2c-.1.2-.3.3-.5.5-.6.3-1.2.5-1.9.7-1.2.3-2.5.5-3.7.7-1.3.2-2.6.4-3.9.5-.4 0-.7.1-1.1.2z"/></svg>`;
              case ye.php:
                return ee`<svg class="${this.cssClass}" aria-label="php" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M12.7 19.7c-.1-.6-.4-1.1-1-1.3-.2-.1-.5-.3-.7-.4-.3-.1-.6-.2-.8-.3-.2-.1-.4 0-.6.2-.1.2 0 .4.1.5.1.2.2.3.4.5.2.3.4.5.7.8.2.3.4.5.3.9-.1.7-.4 1.4-.9 1.9-.1.1-.2.1-.2.1-.3 0-.7-.2-.9-.4-.3-.3-.2-.6.1-.8.1 0 .2-.1.2-.2.2-.2.3-.4.2-.7-.1-.1-.1-.2-.2-.3-.4-.4-.9-.8-1.4-1.2-1.3-1-1.9-2.2-2-3.6-.1-1.6.3-3.1 1.1-4.5.3-.5.7-1 1.3-1.3.4-.2.8-.3 1.2-.4 1.1-.3 2.3-.5 3.5-.3 1 .2 1.8.7 2.1 1.7.2.7.3 1.3.2 2-.1 1.4-1.2 2.6-2.5 3-.6.2-.9.1-1.2-.4-.2-.3-.5-.7-.7-1.1V14c0-.1-.1-.1-.1-.2.1.6.2 1.2.5 1.7.2.3.4.5.8.5 1.3.1 2.3-.3 3.1-1.3.8-1.1 1-2.4.8-3.8 0-.3-.1-.5-.2-.8 0-.2 0-.3.2-.4.1 0 .2 0 .2-.1 1-.2 2.1-.3 3.1-.2 1.2.1 2.3.4 3.3 1.1 1.6 1 2.6 2.5 3.1 4.3.1.3.1.5.1.8 0 .2-.1.2-.3.1-.2-.1-.3-.3-.4-.4-.1-.1-.2-.3-.3-.4-.1-.1-.2-.1-.2 0s-.1.2-.1.3c-.3 1-.7 1.9-1.4 2.6-.1.1-.2.3-.2.4 0 .4-.1.8 0 1.2.1.8.2 1.7.3 2.5.1.5-.1.7-.5.9-.3.1-.6.2-1 .2h-1.6c0-.6 0-1.2-.5-1.5.1-.4.2-.8.3-1.3.1-.4 0-.7-.2-1-.2-.3-.5-.3-.8-.2-.8.5-1.6.5-2.5.2-.4-.1-.7-.1-.9.3-.2.4-.3.8-.3 1.2 0 .5.1 1.1.2 1.6 0 .3 0 .4-.3.5-.7.2-1.4.2-2 .1h-.1c0-.6 0-1.2-.7-1.5.4-.4.4-1.1.3-1.7zm-4.1-2.3c.1-.1.2-.2.2-.4.1-.3-.2-.8-.5-.9-.2-.1-.3 0-.4.1-.3.3-.5.6-.8.9 0 .1-.1.1-.1.2-.1.2 0 .4.2.4.1 0 .3 0 .4.1.4 0 .7-.1 1-.4zm0-3.3c0-.2-.2-.4-.4-.4s-.5.2-.4.5c0 .2.2.4.5.4.1-.1.3-.3.3-.5z"/></svg>`;
              case ye.vue:
                return ee`<svg class="${this.cssClass}" aria-label="vue" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1000"><path d="M600 495.9l159.1-275.4h-84.4L600 349.7l-74.6-129.2h-84.5z"/><path d="M793.7 220.5L600 555.9 406.3 220.5H277l323 559 323-559z"/></svg>`;
              case ye.gherkin:
                return ee`<svg class="${this.cssClass}" aria-label="gherkin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M16.129,2a12.348,12.348,0,0,0-2.35,24.465V30c7.371-1.114,13.9-6.982,14.384-14.684a12.8,12.8,0,0,0-5.9-11.667c-.223-.132-.449-.262-.682-.377s-.481-.231-.729-.33c-.079-.033-.156-.063-.235-.094-.216-.08-.435-.17-.658-.236A12.188,12.188,0,0,0,16.129,2Z" style="fill:var(--mut-file-gherkin-color)"/><path d="M18.68,6.563a1.345,1.345,0,0,0-1.178.472,5.493,5.493,0,0,0-.518.9,2.9,2.9,0,0,0,.377,3.023A3.317,3.317,0,0,0,19.763,9,2.388,2.388,0,0,0,20,8,1.411,1.411,0,0,0,18.68,6.563Zm-5.488.071A1.441,1.441,0,0,0,11.85,8,2.388,2.388,0,0,0,12.085,9a3.427,3.427,0,0,0,2.473,1.96,3.141,3.141,0,0,0-.212-3.85,1.322,1.322,0,0,0-1.154-.472Zm-3.7,3.637a1.3,1.3,0,0,0-.73,2.338,5.663,5.663,0,0,0,.895.543,3.386,3.386,0,0,0,3.179-.307,3.492,3.492,0,0,0-2.049-2.338,2.69,2.69,0,0,0-1.06-.236,1.369,1.369,0,0,0-.236,0Zm11.611,4.582a3.44,3.44,0,0,0-1.955.567A3.492,3.492,0,0,0,21.2,17.758a2.69,2.69,0,0,0,1.06.236,1.329,1.329,0,0,0,.966-2.362,5.47,5.47,0,0,0-.895-.52,3.247,3.247,0,0,0-1.225-.26Zm-10.292.071a3.247,3.247,0,0,0-1.225.26,2.575,2.575,0,0,0-.895.543A1.34,1.34,0,0,0,9.73,18.065a2.426,2.426,0,0,0,1.06-.236,3.185,3.185,0,0,0,1.955-2.338,3.366,3.366,0,0,0-1.931-.567Zm3.815,2.314a3.317,3.317,0,0,0-2.4,1.96,2.286,2.286,0,0,0-.236.968,1.4,1.4,0,0,0,2.426.992,5.492,5.492,0,0,0,.518-.9,3.109,3.109,0,0,0-.306-3.023Zm2.8.071a3.141,3.141,0,0,0,.212,3.85,1.47,1.47,0,0,0,2.5-.9,2.388,2.388,0,0,0-.236-.992,3.427,3.427,0,0,0-2.473-1.96Z" style="fill:#fff"/></svg>`;
              case ye.svelte:
                return ee`<svg class="${this.cssClass}" aria-label="svelte" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M10.617 10.473L14.809 7.8c2.387-1.52 5.688-.812 7.359 1.58a5.123 5.123 0 01.876 3.876 4.821 4.821 0 01-.72 1.798c.524.998.7 2.142.5 3.251a4.808 4.808 0 01-1.963 3.081l-.21.14-4.192 2.672c-2.386 1.52-5.688.812-7.36-1.58a5.125 5.125 0 01-.875-3.876c.116-.642.36-1.253.72-1.798a5.065 5.065 0 01-.5-3.251 4.81 4.81 0 011.962-3.081l.21-.14L14.81 7.8l-4.192 2.672zm9.825.008a3.33 3.33 0 00-3.573-1.324c-.226.06-.444.146-.65.256l-.202.118-4.192 2.671a2.891 2.891 0 00-1.306 1.937 3.081 3.081 0 00.526 2.33 3.33 3.33 0 003.574 1.326c.226-.06.444-.147.65-.256l.201-.118 1.6-1.02a.923.923 0 01.257-.113c.407-.105.837.054 1.077.4a.931.931 0 01.158.702.873.873 0 01-.295.512l-.099.072-4.192 2.671a.923.923 0 01-.257.113 1.003 1.003 0 01-1.076-.4.94.94 0 01-.171-.49l.002-.132.014-.156-.156-.047a5.407 5.407 0 01-1.387-.645l-.252-.174-.215-.158-.08.24a2.923 2.923 0 00-.1.392 3.082 3.082 0 00.527 2.33 3.33 3.33 0 003.38 1.37l.194-.045c.226-.06.444-.146.65-.256l.202-.118 4.192-2.671a2.892 2.892 0 001.306-1.937 3.081 3.081 0 00-.526-2.331 3.33 3.33 0 00-3.574-1.325 3.05 3.05 0 00-.65.257l-.201.117-1.6 1.02a.927.927 0 01-.257.113 1.003 1.003 0 01-1.077-.4.93.93 0 01-.158-.702.871.871 0 01.295-.512l.098-.072 4.192-2.671a.923.923 0 01.258-.113c.407-.106.836.053 1.076.399a.942.942 0 01.171.49l-.002.133-.014.156.155.047c.492.148.959.365 1.388.645l.252.175.215.157.079-.24c.042-.129.076-.26.1-.392a3.082 3.082 0 00-.526-2.33z"/></svg>`;
              case ye.rust:
                return ee`<svg class="${this.cssClass}" aria-label="rust" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M21.7 8.4V9l.1.1h.1c.3-.1.6-.1.9-.2.2-.1.4.1.3.3-.1.3-.1.6-.2.9v.1l.1.1c0 .1.1.1.2.1h.9c.2 0 .3.1.3.3v.2c-.1.3-.3.6-.4.8v.1s.1.1.1.2h.1c.3.1.6.1.9.2.2 0 .3.3.2.5-.2.3-.4.5-.5.7v.2c0 .1.1.1.2.2.3.1.5.2.8.3.2.1.3.3.1.5-.2.2-.4.4-.7.6v.3s.1.1.2.1c.2.1.4.3.7.4.2.1.2.4 0 .5-.3.2-.5.3-.8.5v.1c0 .2 0 .2.1.3.2.2.4.4.6.5.2.2.1.4-.1.5-.3.1-.6.2-.8.3 0 0-.1 0-.1.1-.1.1 0 .2 0 .3.2.2.3.4.5.7.1.1.1.3-.1.4-.1 0-.1 0-.2.1-.3 0-.5.1-.8.1h-.1c0 .1-.1.1-.1.2s0 .1.1.2c.1.2.2.5.3.7.1.1 0 .3-.1.4h-1.2c-.1.1-.1.2-.1.3.1.3.1.5.2.8.1.2-.1.4-.4.4-.3-.1-.6-.1-.9-.2H22l-.1.1s-.1.1 0 .1v.9c0 .2-.1.3-.3.3h-.2c-.3-.1-.5-.2-.8-.4h-.1c-.1 0-.2.1-.2.2 0 .3-.1.5-.1.8 0 .2-.3.3-.5.2-.2-.2-.5-.4-.7-.5h-.1c-.1 0-.2.1-.2.2-.1.3-.2.5-.3.8-.1.2-.2.2-.3.2-.1 0-.1-.1-.1-.1-.2-.2-.4-.4-.6-.7h-.2c-.1 0-.2.1-.2.2-.1.2-.3.5-.4.7-.1.2-.4.2-.5 0-.2-.3-.3-.5-.5-.8h-.2c-.1 0-.1 0-.2.1l-.6.6c-.1.1-.2.1-.4.1-.1 0-.1-.1-.1-.2l-.3-.9s0-.1-.1-.1h-.3c-.2.2-.4.3-.7.5-.4-.2-.7-.3-.7-.5-.1-.3-.1-.6-.1-.9 0 0 0-.1-.1-.1s-.1-.1-.2-.1-.1 0-.2.1c-.2.1-.5.2-.7.3-.2.1-.4 0-.4-.2V23l-.1-.1h-.1c-.3.1-.6.1-.9.2-.2.1-.4-.1-.3-.3.1-.3.1-.6.2-.9v-.1l-.1-.1H8c-.2 0-.3-.1-.3-.3v-.2c.1-.3.3-.6.4-.8v-.1s0-.1-.1-.1c0-.1-.1-.1-.1-.1-.3 0-.6-.1-.9-.1-.2 0-.3-.3-.2-.5.2-.2.4-.5.5-.7v-.1c0-.1 0-.1-.1-.2 0 0-.1-.1-.2-.1-.2-.1-.5-.2-.7-.3-.2-.1-.3-.3-.1-.5.3-.1.5-.4.8-.6v-.2c0-.1 0-.2-.1-.2-.2-.1-.5-.3-.7-.4-.2-.1-.2-.4 0-.5.3-.2.5-.3.8-.5V15l-.1-.1-.6-.6c-.1-.1-.1-.3 0-.4 0 0 .1 0 .1-.1l.9-.3v-.1c.1-.1 0-.2 0-.3-.2-.2-.3-.4-.5-.6-.1-.2 0-.5.2-.5.3-.1.6-.1.9-.2H8c0-.1.1-.1.1-.2s0-.1-.1-.2c-.1-.2-.2-.5-.3-.7-.1-.2 0-.4.2-.4H9s0-.1.1-.1v-.1c-.1-.3-.2-.6-.2-.9-.1-.2.1-.4.3-.3.3 0 .6.1.9.2h.1l.1-.1s.1-.1 0-.1V8c0-.2.1-.3.3-.3h.2c.3.1.6.3.8.4h.1s.1 0 .1-.1c.1 0 .1-.1.1-.1 0-.3.1-.6.1-.9 0-.2.3-.3.5-.2.2.2.5.4.7.5h.1c.1 0 .1 0 .2-.1 0 0 0-.1.1-.2.1-.2.2-.5.3-.7.1-.2.2-.2.4-.2l.1.1c.1.3.4.5.6.8h.1c.1 0 .2-.1.2-.1.1-.2.3-.5.4-.7.2-.2.4-.2.5-.1l.1.1c.2.3.3.5.5.8h.3c.1 0 .1-.1.1-.1.2-.2.4-.4.5-.6.1-.1.3-.1.4 0v.1c.1.3.2.6.3.8l.1.1h.2c.3-.1.6-.3.8-.5.2-.1.5 0 .5.2 0 .3.1.6.1.9 0 0 0 .1.1.1h.1c.1.1.2.1.2 0 .2-.1.5-.2.8-.3.2-.1.4 0 .4.3v.4zm-11.1 2.7h7.6c.3 0 .6 0 .9.1.6.2 1.1.5 1.4.9.3.3.5.7.5 1.2 0 .4-.1.8-.3 1.2-.2.3-.5.6-.8.8-.1.1-.2.2-.3.2.1.1.2.1.3.2.2.2.5.4.6.7.2.3.3.7.3 1 0 .1.1.2.2.3.2.2.5.2.8.2.2 0 .4-.1.5-.2.2-.2.2-.4.3-.6v-.5c0-.1 0-.1.1-.1h.7v-1.3c-.3-.1-.6-.3-.9-.4-.1-.1-.3-.1-.4-.2-.3-.1-.4-.4-.3-.8.2-.5.4-1 .7-1.5v-.1c-.4-.6-.8-1.2-1.4-1.7-1-.9-2.2-1.5-3.6-1.8h-.1c-.3.3-.6.6-1 .9-.2.2-.6.2-.8 0l-.9-.9h-.1c-.4.1-.7.2-1 .3-1.1.4-2 1-2.8 1.8-.1.1-.2.2-.2.3zm11.3 9.2h-3c-.2 0-.3 0-.4-.1-.4-.2-.6-.6-.7-1-.1-.4-.2-.7-.2-1.1 0-.2-.1-.4-.2-.6-.2-.5-.6-.8-1.1-.8h-1.8V18h1.8c.1 0 .1 0 .1.1v2c0 .1 0 .1-.1.1h-6c.2.3.4.5.6.7h.1c.4-.1.8-.2 1.2-.2.3-.1.6.1.7.4.1.4.2.9.3 1.3v.1c.8.3 1.6.6 2.4.6.7.1 1.4 0 2.1-.1.5-.1 1-.3 1.5-.5v-.1c.1-.4.2-.9.3-1.3.1-.3.3-.5.7-.4l1.2.3h.1c0-.2.2-.5.4-.7zm-11.9-7l.3.6c0 .1.1.2 0 .3 0 .2-.2.3-.3.4-.4.2-.8.4-1.2.5 0 0-.1 0-.1.1v.5c0 .7.1 1.4.3 2.2 0 0 0 .1.1.1h2.1v-4.7H10zm4.3 1.4c.1 0 .1 0 0 0h2.3c.2 0 .4 0 .6-.1.1-.1.2-.1.3-.3.1-.2.1-.5-.1-.7-.2-.2-.5-.3-.7-.3h-2.5c.1.5.1.9.1 1.4zm-6-1c0 .3.3.6.6.6s.6-.3.6-.6-.3-.6-.6-.6-.6.3-.6.6zM21 22.1c0-.3-.3-.6-.6-.6s-.6.3-.6.6.3.6.6.6.6-.2.6-.6zm-9.4-.6c-.3 0-.6.3-.6.6s.3.6.6.6.6-.3.6-.6-.3-.6-.6-.6zm5-13.1c0-.3-.2-.6-.6-.6-.3 0-.6.2-.6.6 0 .3.2.6.6.6.3 0 .5-.3.6-.6zm6.5 6c.3 0 .6-.3.6-.6s-.3-.6-.6-.6-.6.3-.6.6.2.6.6.6z"/></svg>`;
            }
          }
        };
        Sc(Kt, "styles", [Te(xc)]),
          On([I({ attribute: "file-name" })], Kt.prototype, "fileName", 2),
          On([I({ type: Boolean })], Kt.prototype, "file", 2),
          (Kt = On([se("mte-file-icon")], Kt));
        var Ac = Object.defineProperty,
          Cc = Object.getOwnPropertyDescriptor,
          ds = (e, t, r, n) => {
            for (
              var i = n > 1 ? void 0 : n ? Cc(t, r) : t, a = e.length - 1, s;
              a >= 0;
              a--
            )
              (s = e[a]) && (i = (n ? s(t, r, i) : s(i)) || i);
            return n && i && Ac(t, r, i), i;
          };
        let In = class extends qe {
          render() {
            return b`<span class="cursor-help underline decoration-dotted" title="${this.title}"><slot></slot></span>`;
          }
        };
        ds([I({ attribute: !0 })], In.prototype, "title", 2),
          (In = ds([se("mte-tooltip")], In));
        /**
         * @license
         * Copyright 2021 Google LLC
         * SPDX-License-Identifier: BSD-3-Clause
         */ class Mc {
          constructor(
            t,
            { target: r, config: n, callback: i, skipInitial: a }
          ) {
            (this.t = new Set()),
              (this.o = !1),
              (this.i = !1),
              (this.h = t),
              r !== null && this.t.add(r ?? t),
              (this.o = a ?? this.o),
              (this.callback = i),
              window.IntersectionObserver
                ? ((this.u = new IntersectionObserver((s) => {
                    const o = this.i;
                    (this.i = !1),
                      (this.o && o) ||
                        (this.handleChanges(s), this.h.requestUpdate());
                  }, n)),
                  t.addController(this))
                : console.warn(
                    "IntersectionController error: browser does not support IntersectionObserver."
                  );
          }
          handleChanges(t) {
            this.value = this.callback?.(t, this.u);
          }
          hostConnected() {
            for (const t of this.t) this.observe(t);
          }
          hostDisconnected() {
            this.disconnect();
          }
          async hostUpdated() {
            const t = this.u.takeRecords();
            t.length && this.handleChanges(t);
          }
          observe(t) {
            this.t.add(t), this.u.observe(t), (this.i = !0);
          }
          unobserve(t) {
            this.t.delete(t), this.u.unobserve(t);
          }
          disconnect() {
            this.u.disconnect();
          }
        }
        var Ec = Object.defineProperty,
          Tc = Object.getOwnPropertyDescriptor,
          hs = (e) => {
            throw TypeError(e);
          },
          St = (e, t, r, n) => {
            for (
              var i = n > 1 ? void 0 : n ? Tc(t, r) : t, a = e.length - 1, s;
              a >= 0;
              a--
            )
              (s = e[a]) && (i = (n ? s(t, r, i) : s(i)) || i);
            return n && i && Ec(t, r, i), i;
          },
          Rn = (e, t, r) => t.has(e) || hs("Cannot " + r),
          Pc = (e, t, r) => (
            Rn(e, t, "read from private field"), r ? r.call(e) : t.get(e)
          ),
          ps = (e, t, r) =>
            t.has(e)
              ? hs("Cannot add the same private member more than once")
              : t instanceof WeakSet
              ? t.add(e)
              : t.set(e, r),
          zc = (e, t, r, n) => (
            Rn(e, t, "write to private field"), t.set(e, r), r
          ),
          Ke = (e, t, r) => (Rn(e, t, "access private method"), r),
          _r,
          Me,
          fs,
          gs,
          Dn,
          Bn,
          ms,
          vs;
        let ot = class extends qe {
          constructor() {
            super(),
              ps(this, Me),
              ps(this, _r),
              (this.detected = 0),
              (this.noCoverage = 0),
              (this.pending = 0),
              (this.survived = 0),
              (this.total = 0),
              zc(
                this,
                _r,
                new Mc(this, { callback: ([e]) => !e.isIntersecting })
              );
          }
          render() {
            return b`
      ${Ke(this, Me, fs).call(this)}
      <div class="my-4 rounded-md border border-gray-200 bg-white transition-all">
        <div class="parts flex h-8 w-full overflow-hidden rounded-sm bg-gray-200">${Ke(
          this,
          Me,
          gs
        ).call(this)}</div>
      </div>
    `;
          }
        };
        return (
          (_r = new WeakMap()),
          (Me = new WeakSet()),
          (fs = function () {
            return b`<div
      class="${
        Pc(this, _r).value ? "opacity-100" : "opacity-0"
      } pointer-events-none fixed top-offset left-0 z-20 flex w-full justify-center transition-all"
    >
      <div class="container w-full bg-white py-2">
        <div class="flex h-2 overflow-hidden rounded-sm bg-gray-200">${Ke(
          this,
          Me,
          Bn
        )
          .call(this)
          .map((e) => Ke(this, Me, Dn).call(this, e, !0))}</div>
      </div>
    </div>`;
          }),
          (gs = function () {
            return Ke(this, Me, Bn)
              .call(this)
              .map((e) => Ke(this, Me, Dn).call(this, e, !1));
          }),
          (Dn = function (e, t) {
            return b`<div
      title="${t ? P : e.tooltip}"
      style="width: ${Ke(this, Me, vs).call(this, e.amount)}%"
      class="${Ke(this, Me, ms).call(this, e.type)} ${
              e.amount === 0 ? "opacity-0" : "opacity-100"
            } relative flex items-center overflow-hidden"
      >${
        t ? P : b`<span class="ms-3 font-bold text-gray-800">${e.amount}</span>`
      }
    </div>`;
          }),
          (Bn = function () {
            return [
              {
                type: "detected",
                amount: this.detected,
                tooltip: `killed + timeout (${this.detected})`,
              },
              {
                type: "survived",
                amount: this.survived,
                tooltip: `survived (${this.survived})`,
              },
              {
                type: "no coverage",
                amount: this.noCoverage,
                tooltip: `no coverage (${this.noCoverage})`,
              },
              { type: "pending", amount: this.pending, tooltip: "pending" },
            ];
          }),
          (ms = function (e) {
            switch (e) {
              case "detected":
                return "bg-green-600";
              case "survived":
                return "bg-red-600";
              case "no coverage":
                return "bg-yellow-600";
              default:
                return "bg-gray-200";
            }
          }),
          (vs = function (e) {
            return this.total !== 0 ? (100 * e) / this.total : 0;
          }),
          St([I({ type: Number })], ot.prototype, "detected", 2),
          St(
            [I({ type: Number, attribute: "no-coverage" })],
            ot.prototype,
            "noCoverage",
            2
          ),
          St([I({ type: Number })], ot.prototype, "pending", 2),
          St([I({ type: Number })], ot.prototype, "survived", 2),
          St([I({ type: Number })], ot.prototype, "total", 2),
          (ot = St([se("mte-result-status-bar")], ot)),
          Object.defineProperty(re, Symbol.toStringTag, { value: "Module" }),
          re
        );
      })({});
    </script>
  </head>
  <body>
    <svg
      style="
        width: 80px;
        position: fixed;
        right: 10px;
        bottom: 10px;
        z-index: 10;
      "
      class="stryker-image"
      viewBox="0 0 1458 1458"
      xmlns="http://www.w3.org/2000/svg"
      fill-rule="evenodd"
      clip-rule="evenodd"
      stroke-linejoin="round"
      stroke-miterlimit="2"
    >
      <path fill="none" d="M0 0h1458v1458H0z" />
      <clipPath id="a"><path d="M0 0h1458v1458H0z" /></clipPath>
      <g clip-path="url(#a)">
        <path
          d="M1458 729c0 402.655-326.345 729-729 729S0 1131.655 0 729C0 326.445 326.345 0 729 0s729 326.345 729 729"
          fill="#e74c3c"
          fill-rule="nonzero"
        />
        <path
          d="M778.349 1456.15L576.6 1254.401l233-105 85-78.668v-64.332l-257-257-44-187-50-208 251.806-82.793L1076.6 389.401l380.14 379.15c-19.681 367.728-311.914 663.049-678.391 687.599z"
          fill-opacity=".3"
        />
        <path
          d="M753.4 329.503c41.79 0 74.579 7.83 97.925 25.444 23.571 18.015 41.69 43.956 55.167 77.097l11.662 28.679 165.733-58.183-14.137-32.13c-26.688-60.655-64.896-108.61-114.191-144.011-49.329-35.423-117.458-54.302-204.859-54.302-50.78 0-95.646 7.376-134.767 21.542-40.093 14.671-74.09 34.79-102.239 60.259-28.84 26.207-50.646 57.06-65.496 92.701-14.718 35.052-22.101 72.538-22.101 112.401 0 72.536 20.667 133.294 61.165 182.704 38.624 47.255 98.346 88.037 179.861 121.291 42.257 17.475 78.715 33.125 109.227 46.994 27.193 12.361 49.294 26.124 66.157 41.751 15.309 14.186 26.497 30.584 33.63 49.258 7.721 20.214 11.16 45.69 11.16 76.402 0 28.021-4.251 51.787-13.591 71.219-8.832 18.374-20.171 33.178-34.523 44.219-14.787 11.374-31.193 19.591-49.393 24.466-19.68 5.359-39.14 7.993-58.69 7.993-29.359 0-54.387-3.407-75.182-10.747-20.112-7.013-37.144-16.144-51.259-27.486-13.618-11.009-24.971-23.766-33.744-38.279-9.64-15.8-17.272-31.924-23.032-48.408l-10.965-31.376-161.669 60.585 10.734 30.124c10.191 28.601 24.197 56.228 42.059 82.748 18.208 27.144 41.322 51.369 69.525 72.745 27.695 21.075 60.904 38.218 99.481 51.041 37.777 12.664 82.004 19.159 132.552 19.159 49.998 0 95.818-8.321 137.611-24.622 42.228-16.471 78.436-38.992 108.835-67.291 30.719-28.597 54.631-62.103 71.834-100.642 17.263-38.56 25.923-79.392 25.923-122.248 0-54.339-8.368-100.37-24.208-138.32-16.29-38.759-38.252-71.661-65.948-98.797-26.965-26.418-58.269-48.835-93.858-67.175-33.655-17.241-69.196-33.11-106.593-47.533-35.934-13.429-65.822-26.601-89.948-39.525-22.153-11.868-40.009-24.21-53.547-37.309-11.429-11.13-19.83-23.678-24.718-37.664-5.413-15.49-7.98-33.423-7.98-53.577 0-40.883 11.293-71.522 37.086-90.539 28.443-20.825 64.985-30.658 109.311-30.658z"
          fill="#f1c40f"
          fill-rule="nonzero"
        />
        <path
          d="M720 0h18v113h-18zM1458 738v-18h-113v18h113zM720 1345h18v113h-18zM113 738v-18H0v18h113z"
        />
      </g>
    </svg>
    <mutation-test-report-app titlePostfix="Stryker">
      Your browser doesn't support
      <a href="https://caniuse.com/#search=custom%20elements">custom elements</a
      >. Please use a latest version of an evergreen browser (Firefox, Chrome,
      Safari, Opera, Edge, etc).
    </mutation-test-report-app>
    <script>
      const app = document.querySelector("mutation-test-report-app");
      app.report = {
        files: {
          "extension/src/background-logic.ts": {
            language: "typescript",
            mutants: [
              {
                id: "28",
                mutatorName: "BooleanLiteral",
                replacement: "true",
                status: "NoCoverage",
                static: false,
                coveredBy: [],
                location: {
                  end: { column: 29, line: 114 },
                  start: { column: 24, line: 114 },
                },
              },
              {
                id: "1",
                mutatorName: "BooleanLiteral",
                replacement: "port",
                statusReason:
                  'Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 5013, {"download_dir": "/new/path"}\n\nNumber of calls: 0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:73:35\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 15,
                killedBy: ["0"],
                coveredBy: [
                  "0",
                  "1",
                  "2",
                  "3",
                  "4",
                  "5",
                  "6",
                  "7",
                  "8",
                  "9",
                  "10",
                  "11",
                  "12",
                  "13",
                  "14",
                ],
                location: {
                  end: { column: 12, line: 51 },
                  start: { column: 7, line: 51 },
                },
              },
              {
                id: "0",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  'Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 5013, {"download_dir": "/new/path"}\n\nNumber of calls: 0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:73:35\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 15,
                killedBy: ["0"],
                coveredBy: [
                  "0",
                  "1",
                  "2",
                  "3",
                  "4",
                  "5",
                  "6",
                  "7",
                  "8",
                  "9",
                  "10",
                  "11",
                  "12",
                  "13",
                  "14",
                ],
                location: {
                  end: { column: 2, line: 72 },
                  start: { column: 50, line: 50 },
                },
              },
              {
                id: "5",
                mutatorName: "ObjectLiteral",
                replacement: "{}",
                statusReason:
                  'Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 4\n+ Received  + 1\n\n- Object {\n-   "message": "Server port not found.",\n-   "status": "error",\n- }\n+ Object {}\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:91:20\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 3,
                killedBy: ["1"],
                coveredBy: ["1", "13", "14"],
                location: {
                  end: { column: 66, line: 52 },
                  start: { column: 12, line: 52 },
                },
              },
              {
                id: "3",
                mutatorName: "ConditionalExpression",
                replacement: "false",
                statusReason:
                  'Error: expect(jest.fn()).not.toHaveBeenCalled()\n\nExpected number of calls: 0\nReceived number of calls: 1\n\n1: null, {"download_dir": "/new/path"}\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:89:39\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 15,
                killedBy: ["1"],
                coveredBy: [
                  "0",
                  "1",
                  "2",
                  "3",
                  "4",
                  "5",
                  "6",
                  "7",
                  "8",
                  "9",
                  "10",
                  "11",
                  "12",
                  "13",
                  "14",
                ],
                location: {
                  end: { column: 12, line: 51 },
                  start: { column: 7, line: 51 },
                },
              },
              {
                id: "2",
                mutatorName: "ConditionalExpression",
                replacement: "true",
                statusReason:
                  'Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 5013, {"download_dir": "/new/path"}\n\nNumber of calls: 0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:73:35\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 15,
                killedBy: ["0"],
                coveredBy: [
                  "0",
                  "1",
                  "2",
                  "3",
                  "4",
                  "5",
                  "6",
                  "7",
                  "8",
                  "9",
                  "10",
                  "11",
                  "12",
                  "13",
                  "14",
                ],
                location: {
                  end: { column: 12, line: 51 },
                  start: { column: 7, line: 51 },
                },
              },
              {
                id: "4",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  'Error: expect(jest.fn()).not.toHaveBeenCalled()\n\nExpected number of calls: 0\nReceived number of calls: 1\n\n1: null, {"download_dir": "/new/path"}\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:89:39\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 3,
                killedBy: ["1"],
                coveredBy: ["1", "13", "14"],
                location: {
                  end: { column: 4, line: 53 },
                  start: { column: 14, line: 51 },
                },
              },
              {
                id: "6",
                mutatorName: "StringLiteral",
                replacement: '""',
                statusReason:
                  'Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 1\n+ Received  + 1\n\n  Object {\n    "message": "Server port not found.",\n-   "status": "error",\n+   "status": "",\n  }\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:91:20\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 3,
                killedBy: ["1"],
                coveredBy: ["1", "13", "14"],
                location: {
                  end: { column: 29, line: 52 },
                  start: { column: 22, line: 52 },
                },
              },
              {
                id: "7",
                mutatorName: "StringLiteral",
                replacement: '""',
                statusReason:
                  'Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 1\n+ Received  + 1\n\n  Object {\n-   "message": "Server port not found.",\n+   "message": "",\n    "status": "error",\n  }\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:91:20\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 3,
                killedBy: ["1"],
                coveredBy: ["1", "13", "14"],
                location: {
                  end: { column: 64, line: 52 },
                  start: { column: 40, line: 52 },
                },
              },
              {
                id: "11",
                mutatorName: "ConditionalExpression",
                replacement: "false",
                statusReason:
                  'Error: expect(jest.fn()).not.toHaveBeenCalled()\n\nExpected number of calls: 0\nReceived number of calls: 1\n\n1: {"download_dir": "/new/path"}\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:112:42\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 7,
                killedBy: ["2"],
                coveredBy: ["0", "2", "3", "8", "9", "10", "11"],
                location: {
                  end: { column: 23, line: 58 },
                  start: { column: 9, line: 58 },
                },
              },
              {
                id: "8",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  'Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 5013, {"download_dir": "/new/path"}\n\nNumber of calls: 0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:73:35\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 12,
                killedBy: ["0"],
                coveredBy: [
                  "0",
                  "2",
                  "3",
                  "4",
                  "5",
                  "6",
                  "7",
                  "8",
                  "9",
                  "10",
                  "11",
                  "12",
                ],
                location: {
                  end: { column: 4, line: 66 },
                  start: { column: 7, line: 55 },
                },
              },
              {
                id: "10",
                mutatorName: "ConditionalExpression",
                replacement: "true",
                statusReason:
                  'Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: {"download_dir": "/new/path"}\n\nNumber of calls: 0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:74:38\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 7,
                killedBy: ["0"],
                coveredBy: ["0", "2", "3", "8", "9", "10", "11"],
                location: {
                  end: { column: 23, line: 58 },
                  start: { column: 9, line: 58 },
                },
              },
              {
                id: "9",
                mutatorName: "BooleanLiteral",
                replacement: "serverSuccess",
                statusReason:
                  'Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: {"download_dir": "/new/path"}\n\nNumber of calls: 0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:74:38\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 7,
                killedBy: ["0"],
                coveredBy: ["0", "2", "3", "8", "9", "10", "11"],
                location: {
                  end: { column: 23, line: 58 },
                  start: { column: 9, line: 58 },
                },
              },
              {
                id: "12",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  'Error: expect(jest.fn()).not.toHaveBeenCalled()\n\nExpected number of calls: 0\nReceived number of calls: 1\n\n1: {"download_dir": "/new/path"}\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:112:42\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 1,
                killedBy: ["2"],
                coveredBy: ["2"],
                location: {
                  end: { column: 6, line: 60 },
                  start: { column: 25, line: 58 },
                },
              },
              {
                id: "13",
                mutatorName: "ObjectLiteral",
                replacement: "{}",
                statusReason:
                  'Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 4\n+ Received  + 1\n\n- Object {\n-   "message": "Failed to save config to server.",\n-   "status": "error",\n- }\n+ Object {}\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:113:20\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 1,
                killedBy: ["2"],
                coveredBy: ["2"],
                location: {
                  end: { column: 78, line: 59 },
                  start: { column: 14, line: 59 },
                },
              },
              {
                id: "16",
                mutatorName: "ObjectLiteral",
                replacement: "{}",
                statusReason:
                  'Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 3\n+ Received  + 1\n\n- Object {\n-   "status": "success",\n- }\n+ Object {}\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:75:20\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 4,
                killedBy: ["0"],
                coveredBy: ["0", "8", "9", "10"],
                location: {
                  end: { column: 33, line: 65 },
                  start: { column: 12, line: 65 },
                },
              },
              {
                id: "14",
                mutatorName: "StringLiteral",
                replacement: '""',
                statusReason:
                  'Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 1\n+ Received  + 1\n\n  Object {\n    "message": "Failed to save config to server.",\n-   "status": "error",\n+   "status": "",\n  }\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:113:20\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 1,
                killedBy: ["2"],
                coveredBy: ["2"],
                location: {
                  end: { column: 31, line: 59 },
                  start: { column: 24, line: 59 },
                },
              },
              {
                id: "17",
                mutatorName: "StringLiteral",
                replacement: '""',
                statusReason:
                  'Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 1\n+ Received  + 1\n\n  Object {\n-   "status": "success",\n+   "status": "",\n  }\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:75:20\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 4,
                killedBy: ["0"],
                coveredBy: ["0", "8", "9", "10"],
                location: {
                  end: { column: 31, line: 65 },
                  start: { column: 22, line: 65 },
                },
              },
              {
                id: "15",
                mutatorName: "StringLiteral",
                replacement: '""',
                statusReason:
                  'Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 1\n+ Received  + 1\n\n  Object {\n-   "message": "Failed to save config to server.",\n+   "message": "",\n    "status": "error",\n  }\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:113:20\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 1,
                killedBy: ["2"],
                coveredBy: ["2"],
                location: {
                  end: { column: 76, line: 59 },
                  start: { column: 42, line: 59 },
                },
              },
              {
                id: "18",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  'Error: expect(received).toEqual(expected) // deep equality\n\nExpected: {"message": "Storage is full", "status": "error"}\nReceived: undefined\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:136:20\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 7,
                killedBy: ["3"],
                coveredBy: ["3", "4", "5", "6", "7", "11", "12"],
                location: {
                  end: { column: 4, line: 71 },
                  start: { column: 17, line: 66 },
                },
              },
              {
                id: "19",
                mutatorName: "StringLiteral",
                replacement: '""',
                statusReason:
                  'Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 1\n+ Received  + 1\n\n  Object {\n-   "message": "An unknown error occurred.",\n+   "message": "",\n    "status": "error",\n  }\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:159:20\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 4,
                killedBy: ["4"],
                coveredBy: ["4", "5", "6", "7"],
                location: {
                  end: { column: 72, line: 68 },
                  start: { column: 44, line: 68 },
                },
              },
              {
                id: "21",
                mutatorName: "ObjectLiteral",
                replacement: "{}",
                statusReason:
                  'Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 4\n+ Received  + 1\n\n- Object {\n-   "message": "Storage is full",\n-   "status": "error",\n- }\n+ Object {}\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:136:20\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 7,
                killedBy: ["3"],
                coveredBy: ["3", "4", "5", "6", "7", "11", "12"],
                location: {
                  end: { column: 54, line: 70 },
                  start: { column: 12, line: 70 },
                },
              },
              {
                id: "20",
                mutatorName: "StringLiteral",
                replacement: '""',
                statusReason:
                  'Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: "[BG Logic] Error in handleSetConfig:", "Storage is full"\nReceived: "", "Storage is full"\n\nNumber of calls: 1\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:139:29\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 7,
                killedBy: ["3"],
                coveredBy: ["3", "4", "5", "6", "7", "11", "12"],
                location: {
                  end: { column: 57, line: 69 },
                  start: { column: 19, line: 69 },
                },
              },
              {
                id: "23",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalled()\n\nExpected number of calls: >= 1\nReceived number of calls:    0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:399:39\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 1,
                killedBy: ["15"],
                coveredBy: ["15"],
                location: {
                  end: { column: 2, line: 84 },
                  start: { column: 41, line: 81 },
                },
              },
              {
                id: "22",
                mutatorName: "StringLiteral",
                replacement: '""',
                statusReason:
                  'Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 1\n+ Received  + 1\n\n  Object {\n    "message": "Storage is full",\n-   "status": "error",\n+   "status": "",\n  }\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:136:20\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 7,
                killedBy: ["3"],
                coveredBy: ["3", "4", "5", "6", "7", "11", "12"],
                location: {
                  end: { column: 29, line: 70 },
                  start: { column: 22, line: 70 },
                },
              },
              {
                id: "24",
                mutatorName: "ObjectLiteral",
                replacement: "{}",
                statusReason:
                  'Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 11\n+ Received  +  1\n\n- Object {\n-   "history": Array [\n-     Object {\n-       "filename": "Test Video",\n-       "id": "1",\n-       "status": "completed",\n-       "timestamp": 1754455824490,\n-       "url": "https://example.com/video",\n-     },\n-   ],\n- }\n+ Object {}\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:400:20\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 1,
                killedBy: ["15"],
                coveredBy: ["15"],
                location: {
                  end: { column: 21, line: 83 },
                  start: { column: 10, line: 83 },
                },
              },
              {
                id: "25",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalled()\n\nExpected number of calls: >= 1\nReceived number of calls:    0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:408:41\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 1,
                killedBy: ["16"],
                coveredBy: ["16"],
                location: {
                  end: { column: 2, line: 96 },
                  start: { column: 32, line: 93 },
                },
              },
              {
                id: "26",
                mutatorName: "ObjectLiteral",
                replacement: "{}",
                statusReason:
                  'Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 3\n+ Received  + 1\n\n- Object {\n-   "status": "success",\n- }\n+ Object {}\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:409:20\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 1,
                killedBy: ["16"],
                coveredBy: ["16"],
                location: {
                  end: { column: 31, line: 95 },
                  start: { column: 10, line: 95 },
                },
              },
              {
                id: "27",
                mutatorName: "StringLiteral",
                replacement: '""',
                statusReason:
                  'Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 1\n+ Received  + 1\n\n  Object {\n-   "status": "success",\n+   "status": "",\n  }\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:409:20\n    at Generator.next (<' +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 1,
                killedBy: ["16"],
                coveredBy: ["16"],
                location: {
                  end: { column: 29, line: 95 },
                  start: { column: 20, line: 95 },
                },
              },
              {
                id: "29",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalled()\n\nExpected number of calls: >= 1\nReceived number of calls:    0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:437:36\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: true,
                testsCompleted: 64,
                killedBy: ["17"],
                coveredBy: [
                  "17",
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "25",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "50",
                  "51",
                  "52",
                  "53",
                  "54",
                ],
                location: {
                  end: { column: 2, line: 190 },
                  start: { column: 27, line: 117 },
                },
              },
              {
                id: "34",
                mutatorName: "ConditionalExpression",
                replacement: "false",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalled()\n\nExpected number of calls: >= 1\nReceived number of calls:    0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:437:36\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: true,
                testsCompleted: 64,
                killedBy: ["17"],
                coveredBy: [
                  "17",
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "25",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "50",
                  "51",
                  "52",
                  "53",
                  "54",
                ],
                location: {
                  end: { column: 17, line: 122 },
                  start: { column: 7, line: 122 },
                },
              },
              {
                id: "32",
                mutatorName: "BooleanLiteral",
                replacement: "startScan",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalled()\n\nExpected number of calls: >= 1\nReceived number of calls:    0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:437:36\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: true,
                testsCompleted: 64,
                killedBy: ["17"],
                coveredBy: [
                  "17",
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "25",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "50",
                  "51",
                  "52",
                  "53",
                  "54",
                ],
                location: {
                  end: { column: 17, line: 122 },
                  start: { column: 7, line: 122 },
                },
              },
              {
                id: "35",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalled()\n\nExpected number of calls: >= 1\nReceived number of calls:    0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:437:36\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 62,
                killedBy: ["17"],
                coveredBy: [
                  "17",
                  "18",
                  "19",
                  "21",
                  "22",
                  "23",
                  "24",
                  "25",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "50",
                  "51",
                  "52",
                  "54",
                ],
                location: {
                  end: { column: 4, line: 143 },
                  start: { column: 19, line: 122 },
                },
              },
              {
                id: "30",
                mutatorName: "ArithmeticOperator",
                replacement: "maxPort - defaultPort - 1",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "17",
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "25",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "50",
                  "51",
                  "52",
                  "53",
                  "54",
                ],
                location: {
                  end: { column: 47, line: 118 },
                  start: { column: 22, line: 118 },
                },
              },
              {
                id: "31",
                mutatorName: "ArithmeticOperator",
                replacement: "maxPort + defaultPort",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "17",
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "25",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "50",
                  "51",
                  "52",
                  "53",
                  "54",
                ],
                location: {
                  end: { column: 43, line: 118 },
                  start: { column: 22, line: 118 },
                },
              },
              {
                id: "33",
                mutatorName: "ConditionalExpression",
                replacement: "true",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "17",
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "25",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "50",
                  "51",
                  "52",
                  "53",
                  "54",
                ],
                location: {
                  end: { column: 17, line: 122 },
                  start: { column: 7, line: 122 },
                },
              },
              {
                id: "39",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 5013\nReceived\n       1: 5001\n       2: 5002\n       3: 5003\n\nNumber of calls: 5\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:438:29\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 20,
                killedBy: ["17"],
                coveredBy: [
                  "17",
                  "18",
                  "21",
                  "25",
                  "28",
                  "30",
                  "31",
                  "41",
                  "45",
                  "50",
                  "51",
                ],
                location: {
                  end: { column: 6, line: 142 },
                  start: { column: 26, line: 124 },
                },
              },
              {
                id: "37",
                mutatorName: "ConditionalExpression",
                replacement: "false",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 5013\nReceived\n       1: 5001\n       2: 5002\n       3: 5003\n\nNumber of calls: 5\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:438:29\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 62,
                killedBy: ["17"],
                coveredBy: [
                  "17",
                  "18",
                  "19",
                  "21",
                  "22",
                  "23",
                  "24",
                  "25",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "50",
                  "51",
                  "52",
                  "54",
                ],
                location: {
                  end: { column: 24, line: 124 },
                  start: { column: 9, line: 124 },
                },
              },
              {
                id: "40",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 5013\nReceived\n       1: 5001\n       2: 5002\n       3: 5003\n\nNumber of calls: 5\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:438:29\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 20,
                killedBy: ["17"],
                coveredBy: [
                  "17",
                  "18",
                  "21",
                  "25",
                  "28",
                  "30",
                  "31",
                  "41",
                  "45",
                  "50",
                  "51",
                ],
                location: {
                  end: { column: 8, line: 135 },
                  start: { column: 11, line: 125 },
                },
              },
              {
                id: "36",
                mutatorName: "ConditionalExpression",
                replacement: "true",
                status: "Timeout",
                static: false,
                coveredBy: [
                  "17",
                  "18",
                  "19",
                  "21",
                  "22",
                  "23",
                  "24",
                  "25",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "50",
                  "51",
                  "52",
                  "54",
                ],
                location: {
                  end: { column: 24, line: 124 },
                  start: { column: 9, line: 124 },
                },
              },
              {
                id: "38",
                mutatorName: "EqualityOperator",
                replacement: "cached === null",
                status: "Timeout",
                static: false,
                coveredBy: [
                  "17",
                  "18",
                  "19",
                  "21",
                  "22",
                  "23",
                  "24",
                  "25",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "50",
                  "51",
                  "52",
                  "54",
                ],
                location: {
                  end: { column: 24, line: 124 },
                  start: { column: 9, line: 124 },
                },
              },
              {
                id: "41",
                mutatorName: "ArrayDeclaration",
                replacement: "[]",
                status: "Timeout",
                static: false,
                coveredBy: [
                  "17",
                  "18",
                  "21",
                  "25",
                  "28",
                  "30",
                  "31",
                  "41",
                  "45",
                  "50",
                  "51",
                ],
                location: {
                  end: { column: 10, line: 131 },
                  start: { column: 39, line: 126 },
                },
              },
              {
                id: "45",
                mutatorName: "ConditionalExpression",
                replacement: "true",
                status: "Timeout",
                static: false,
                coveredBy: ["17", "25", "30", "50", "51"],
                location: {
                  end: { column: 15, line: 132 },
                  start: { column: 13, line: 132 },
                },
              },
              {
                id: "46",
                mutatorName: "ConditionalExpression",
                replacement: "false",
                status: "Timeout",
                static: false,
                coveredBy: ["17", "25", "30", "50", "51"],
                location: {
                  end: { column: 15, line: 132 },
                  start: { column: 13, line: 132 },
                },
              },
              {
                id: "47",
                mutatorName: "BlockStatement",
                replacement: "{}",
                status: "Timeout",
                static: false,
                coveredBy: ["17", "25", "50"],
                location: {
                  end: { column: 10, line: 134 },
                  start: { column: 17, line: 132 },
                },
              },
              {
                id: "42",
                mutatorName: "ArrowFunction",
                replacement: "() => undefined",
                statusReason:
                  "Error: expect(received).toBeNull()\n\nReceived: 5013\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:525:20\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 20,
                killedBy: ["21"],
                coveredBy: [
                  "17",
                  "18",
                  "21",
                  "25",
                  "28",
                  "30",
                  "31",
                  "41",
                  "45",
                  "50",
                  "51",
                ],
                location: {
                  end: { column: 68, line: 129 },
                  start: { column: 32, line: 128 },
                },
              },
              {
                id: "51",
                mutatorName: "ObjectLiteral",
                replacement: "{}",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 5001\n\nNumber of calls: 0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:480:29\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: true,
                testsCompleted: 61,
                killedBy: ["19"],
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                ],
                location: {
                  end: { column: 27, line: 147 },
                  start: { column: 5, line: 147 },
                },
              },
              {
                id: "43",
                mutatorName: "ArrowFunction",
                replacement: "() => undefined",
                statusReason:
                  "Error: expect(received).toBeNull()\n\nReceived: 5013\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:525:20\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 20,
                killedBy: ["21"],
                coveredBy: [
                  "17",
                  "18",
                  "21",
                  "25",
                  "28",
                  "30",
                  "31",
                  "41",
                  "45",
                  "50",
                  "51",
                ],
                location: {
                  end: { column: 58, line: 129 },
                  start: { column: 24, line: 129 },
                },
              },
              {
                id: "44",
                mutatorName: "StringLiteral",
                replacement: '""',
                status: "Timeout",
                static: false,
                coveredBy: ["21", "28", "31", "41"],
                location: {
                  end: { column: 56, line: 129 },
                  start: { column: 47, line: 129 },
                },
              },
              {
                id: "54",
                mutatorName: "ConditionalExpression",
                replacement: "false",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 5001\n\nNumber of calls: 0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:480:29\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: true,
                testsCompleted: 64,
                killedBy: ["19"],
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 39, line: 153 },
                  start: { column: 19, line: 153 },
                },
              },
              {
                id: "50",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: null\n\nNumber of calls: 0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:459:36\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 8,
                killedBy: ["18"],
                coveredBy: ["18", "21", "28", "41", "45", "51"],
                location: {
                  end: { column: 8, line: 141 },
                  start: { column: 35, line: 139 },
                },
              },
              {
                id: "56",
                mutatorName: "EqualityOperator",
                replacement: "i >= portRange.length",
                statusReason: "Hit limit reached (22034/22000)",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 39, line: 153 },
                  start: { column: 19, line: 153 },
                },
              },
              {
                id: "48",
                mutatorName: "ConditionalExpression",
                replacement: "true",
                statusReason:
                  "TypeError: storageService.setPort is not a function\n    at /Users/josephording/myscripts/Enhanced Video Downloader/extension/src/background-logic.ts:244:38\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/extension/src/background-logic.ts:5:58)",
                status: "Killed",
                static: false,
                testsCompleted: 14,
                killedBy: ["30"],
                coveredBy: ["18", "21", "28", "30", "31", "41", "45", "51"],
                location: {
                  end: { column: 33, line: 139 },
                  start: { column: 11, line: 139 },
                },
              },
              {
                id: "58",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 5001\n\nNumber of calls: 0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:480:29\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: true,
                testsCompleted: 64,
                killedBy: ["19"],
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 4, line: 187 },
                  start: { column: 57, line: 153 },
                },
              },
              {
                id: "49",
                mutatorName: "ConditionalExpression",
                replacement: "false",
                status: "Timeout",
                static: false,
                coveredBy: ["18", "21", "28", "30", "31", "41", "45", "51"],
                location: {
                  end: { column: 33, line: 139 },
                  start: { column: 11, line: 139 },
                },
              },
              {
                id: "57",
                mutatorName: "AssignmentOperator",
                replacement: "i -= batchSize",
                statusReason: "Hit limit reached (15652/15600)",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "21",
                  "22",
                  "23",
                  "24",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 55, line: 153 },
                  start: { column: 41, line: 153 },
                },
              },
              {
                id: "61",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 5001\n\nNumber of calls: 0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:480:29\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: true,
                testsCompleted: 64,
                killedBy: ["19"],
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 6, line: 169 },
                  start: { column: 48, line: 157 },
                },
              },
              {
                id: "62",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 5001\n\nNumber of calls: 0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:480:29\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: true,
                testsCompleted: 64,
                killedBy: ["19"],
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 8, line: 166 },
                  start: { column: 11, line: 158 },
                },
              },
              {
                id: "60",
                mutatorName: "ArithmeticOperator",
                replacement: "i - batchSize",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 5001\n\nNumber of calls: 0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:480:29\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: true,
                testsCompleted: 64,
                killedBy: ["19"],
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 51, line: 154 },
                  start: { column: 38, line: 154 },
                },
              },
              {
                id: "52",
                mutatorName: "ArrowFunction",
                replacement: "() => undefined",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                ],
                location: {
                  end: { column: 30, line: 148 },
                  start: { column: 5, line: 148 },
                },
              },
              {
                id: "53",
                mutatorName: "ArithmeticOperator",
                replacement: "defaultPort - i",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                ],
                location: {
                  end: { column: 30, line: 148 },
                  start: { column: 15, line: 148 },
                },
              },
              {
                id: "55",
                mutatorName: "EqualityOperator",
                replacement: "i <" + "= portRange.length",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 39, line: 153 },
                  start: { column: 19, line: 153 },
                },
              },
              {
                id: "59",
                mutatorName: "MethodExpression",
                replacement: "portRange",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 52, line: 154 },
                  start: { column: 19, line: 154 },
                },
              },
              {
                id: "63",
                mutatorName: "ArrayDeclaration",
                replacement: "[]",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 10, line: 164 },
                  start: { column: 48, line: 159 },
                },
              },
              {
                id: "64",
                mutatorName: "ArrowFunction",
                replacement: "() => undefined",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 68, line: 162 },
                  start: { column: 32, line: 161 },
                },
              },
              {
                id: "66",
                mutatorName: "StringLiteral",
                replacement: '""',
                status: "Timeout",
                static: false,
                coveredBy: ["21", "22", "28", "29", "31", "41", "42"],
                location: {
                  end: { column: 56, line: 162 },
                  start: { column: 47, line: 162 },
                },
              },
              {
                id: "65",
                mutatorName: "ArrowFunction",
                replacement: "() => undefined",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 58, line: 162 },
                  start: { column: 24, line: 162 },
                },
              },
              {
                id: "67",
                mutatorName: "BlockStatement",
                replacement: "{}",
                status: "Timeout",
                static: false,
                coveredBy: [
                  "18",
                  "21",
                  "22",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "41",
                  "42",
                  "45",
                ],
                location: {
                  end: { column: 8, line: 168 },
                  start: { column: 15, line: 166 },
                },
              },
              {
                id: "68",
                mutatorName: "ArrowFunction",
                replacement: "() => undefined",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 59, line: 172 },
                  start: { column: 36, line: 172 },
                },
              },
              {
                id: "72",
                mutatorName: "ConditionalExpression",
                replacement: "true",
                statusReason:
                  "Error: expect(received).toBeNull()\n\nReceived: undefined\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:460:20\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: true,
                testsCompleted: 64,
                killedBy: ["18"],
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 54, line: 174 },
                  start: { column: 9, line: 174 },
                },
              },
              {
                id: "69",
                mutatorName: "ConditionalExpression",
                replacement: "true",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 59, line: 172 },
                  start: { column: 46, line: 172 },
                },
              },
              {
                id: "70",
                mutatorName: "ConditionalExpression",
                replacement: "false",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 59, line: 172 },
                  start: { column: 46, line: 172 },
                },
              },
              {
                id: "74",
                mutatorName: "LogicalOperator",
                replacement: "foundPort !== null || foundPort !== undefined",
                statusReason:
                  "Error: expect(received).toBeNull()\n\nReceived: undefined\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:460:20\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: true,
                testsCompleted: 64,
                killedBy: ["18"],
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 54, line: 174 },
                  start: { column: 9, line: 174 },
                },
              },
              {
                id: "71",
                mutatorName: "EqualityOperator",
                replacement: "port === null",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 59, line: 172 },
                  start: { column: 46, line: 172 },
                },
              },
              {
                id: "79",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  "Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 5002\nReceived: null\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:482:20\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: false,
                testsCompleted: 11,
                killedBy: ["19"],
                coveredBy: ["19", "20", "26", "37", "51", "52", "53"],
                location: {
                  end: { column: 6, line: 180 },
                  start: { column: 56, line: 174 },
                },
              },
              {
                id: "80",
                mutatorName: "ConditionalExpression",
                replacement: "true",
                statusReason:
                  "TypeError: storageService.setPort is not a function\n    at /Users/josephording/myscripts/Enhanced Video Downloader/extension/src/background-logic.ts:303:38\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/extension/src/background-logic.ts:5:58)",
                status: "Killed",
                static: false,
                testsCompleted: 11,
                killedBy: ["26"],
                coveredBy: ["19", "20", "26", "37", "51", "52", "53"],
                location: {
                  end: { column: 33, line: 176 },
                  start: { column: 11, line: 176 },
                },
              },
              {
                id: "81",
                mutatorName: "ConditionalExpression",
                replacement: "false",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 5015\nReceived: null\n\nNumber of calls: 1\n    at /Users/josephording/myscripts/Enhanced Video Downloader/extension/src/__tests__/background-logic.test.ts:69:36\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/extension/src/__tests__/background-logic.test.ts:5:58)",
                status: "Killed",
                static: false,
                testsCompleted: 11,
                killedBy: ["51"],
                coveredBy: ["19", "20", "26", "37", "51", "52", "53"],
                location: {
                  end: { column: 33, line: 176 },
                  start: { column: 11, line: 176 },
                },
              },
              {
                id: "82",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 5015\nReceived: null\n\nNumber of calls: 1\n    at /Users/josephording/myscripts/Enhanced Video Downloader/extension/src/__tests__/background-logic.test.ts:69:36\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/extension/src/__tests__/background-logic.test.ts:5:58)",
                status: "Killed",
                static: false,
                testsCompleted: 8,
                killedBy: ["51"],
                coveredBy: ["19", "20", "37", "51", "52", "53"],
                location: {
                  end: { column: 8, line: 178 },
                  start: { column: 35, line: 176 },
                },
              },
              {
                id: "73",
                mutatorName: "ConditionalExpression",
                replacement: "false",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 54, line: 174 },
                  start: { column: 9, line: 174 },
                },
              },
              {
                id: "77",
                mutatorName: "ConditionalExpression",
                replacement: "true",
                statusReason:
                  "Error: expect(received).toBeNull()\n\nReceived: undefined\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:460:20\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: true,
                testsCompleted: 64,
                killedBy: ["18"],
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 54, line: 174 },
                  start: { column: 31, line: 174 },
                },
              },
              {
                id: "78",
                mutatorName: "EqualityOperator",
                replacement: "foundPort === undefined",
                statusReason:
                  "Error: expect(received).toBeNull()\n\nReceived: undefined\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:460:20\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: true,
                testsCompleted: 64,
                killedBy: ["18"],
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 54, line: 174 },
                  start: { column: 31, line: 174 },
                },
              },
              {
                id: "86",
                mutatorName: "BlockStatement",
                replacement: "{}",
                statusReason:
                  "Error: expect(jest.fn()).toHaveBeenCalled()\n\nExpected number of calls: >= 1\nReceived number of calls:    0\n    at /Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:566:24\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/tests/extension/background-logic.test.ts:10:58)",
                status: "Killed",
                static: true,
                testsCompleted: 11,
                killedBy: ["23"],
                coveredBy: [
                  "23",
                  "34",
                  "40",
                  "47",
                  "48",
                  "49",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 6, line: 186 },
                  start: { column: 21, line: 184 },
                },
              },
              {
                id: "75",
                mutatorName: "ConditionalExpression",
                replacement: "true",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 27, line: 174 },
                  start: { column: 9, line: 174 },
                },
              },
              {
                id: "84",
                mutatorName: "ConditionalExpression",
                replacement: "true",
                statusReason:
                  "TypeError: onProgress is not a function\n    at /Users/josephording/myscripts/Enhanced Video Downloader/extension/src/background-logic.ts:317:13\n    at Generator.next (<" +
                  "anonymous>)\n    at fulfilled (/Users/josephording/myscripts/Enhanced Video Downloader/extension/src/background-logic.ts:5:58)",
                status: "Killed",
                static: true,
                testsCompleted: 53,
                killedBy: ["54"],
                coveredBy: [
                  "18",
                  "21",
                  "22",
                  "23",
                  "24",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 19, line: 184 },
                  start: { column: 9, line: 184 },
                },
              },
              {
                id: "76",
                mutatorName: "EqualityOperator",
                replacement: "foundPort === null",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "51",
                  "52",
                  "53",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 27, line: 174 },
                  start: { column: 9, line: 174 },
                },
              },
              {
                id: "83",
                mutatorName: "AssignmentOperator",
                replacement: "scannedPorts -= batch.length",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "21",
                  "22",
                  "23",
                  "24",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 33, line: 183 },
                  start: { column: 5, line: 183 },
                },
              },
              {
                id: "85",
                mutatorName: "ConditionalExpression",
                replacement: "false",
                status: "Timeout",
                static: true,
                coveredBy: [
                  "18",
                  "21",
                  "22",
                  "23",
                  "24",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "54",
                  "409",
                  "451",
                  "457",
                ],
                location: {
                  end: { column: 19, line: 184 },
                  start: { column: 9, line: 184 },
                },
              },
            ],
            source:
              '/**\n * @fileoverview\n * This file contains the core message handling logic for the background script.\n * It is designed to be testable and independent of the Chrome extension environment.\n * All functions in this file should be pure and rely on injected dependencies (services)\n * for any side effects (like API calls or storage access).\n */\n\nimport type { ServerConfig, HistoryEntry } from "./types";\nimport { getServerPort, getClientPort, getPortRange } from "./constants";\n\n/**\n * Interface for API services used by the message handlers.\n * This allows for mocking API interactions in tests.\n */\nexport interface ApiService {\n  fetchConfig(port: number): Promise<' +
              "Partial<" +
              "ServerConfig>>;\n  saveConfig(port: number, config: Partial<" +
              "ServerConfig>): Promise<" +
              "boolean>;\n  // Add other API methods here as they are refactored\n}\n\n/**\n * Interface for storage services.\n */\nexport interface StorageService {\n  getConfig(): Promise<" +
              "Partial<" +
              "ServerConfig>>;\n  setConfig(config: Partial<" +
              "ServerConfig>): Promise<" +
              "void>;\n  getPort(): Promise<" +
              "number | null>;\n  setPort?(port: number | null): Promise<" +
              "void>;\n  getHistory(): Promise<" +
              "HistoryEntry[]>;\n  clearHistory(): Promise<" +
              "void>;\n  // Add other storage methods here\n}\n\n/**\n * Handles the 'setConfig' message. It saves the configuration to both the\n * local server and chrome.storage.\n *\n * @param port - The server port.\n * @param config - The new configuration to save.\n * @param apiService - The service for making API calls.\n * @param storageService - The service for accessing storage.\n * @returns A promise that resolves to an object with status and an optional message.\n */\nexport async function handleSetConfig(\n  port: number | null,\n  config: Partial<" +
              "ServerConfig>,\n  apiService: ApiService,\n  storageService: StorageService\n): Promise<" +
              '{ status: string; message?: string }> {\n  if (!port) {\n    return { status: "error", message: "Server port not found." };\n  }\n\n  try {\n    // First, try to save to the server\n    const serverSuccess = await apiService.saveConfig(port, config);\n    if (!serverSuccess) {\n      return { status: "error", message: "Failed to save config to server." };\n    }\n\n    // Then, save to local storage\n    await storageService.setConfig(config);\n\n    return { status: "success" };\n  } catch (err) {\n    const errorMessage =\n      err instanceof Error ? err.message : "An unknown error occurred.";\n    console.error("[BG Logic] Error in handleSetConfig:", errorMessage);\n    return { status: "error", message: errorMessage };\n  }\n}\n\n/**\n * Handles the \'getHistory\' message.\n * @param storageService - The service for accessing storage.\n * @returns A promise that resolves to the download history.\n */\nexport async function handleGetHistory(\n  storageService: StorageService\n): Promise<' +
              "{ history: HistoryEntry[] }> {\n  const history = await storageService.getHistory();\n  return { history };\n}\n\n/**\n * Handles the 'clearHistory' message.\n * @param storageService - The service for accessing storage.\n * @returns A promise that resolves to a status object.\n */\nexport async function handleClearHistory(\n  storageService: StorageService\n): Promise<" +
              '{ status: string }> {\n  await storageService.clearHistory();\n  return { status: "success" };\n}\n\n/**\n * Discover the server port by checking a cached value or scanning a range.\n * @param storageService - Service for accessing stored port\n * @param checkStatus - Function to check server availability for a port\n * @param defaultPort - Starting port for scan\n * @param maxPort - Maximum port for scan\n * @param startScan - If true, force scanning even if cached port exists\n * @param timeout - Timeout for individual port checks (ms)\n * @param onProgress - Optional callback for scanning progress updates\n * @returns The discovered port or null if not found\n */\nexport async function discoverServerPort(\n  storageService: StorageService,\n  checkStatus: (port: number) => Promise<' +
              "boolean>,\n  defaultPort: number,\n  maxPort: number,\n  startScan: boolean = false,\n  timeout: number = 2000,\n  onProgress?: (current: number, total: number) => void\n): Promise<" +
              "number | null> {\n  const totalPorts = maxPort - defaultPort + 1;\n  let scannedPorts = 0;\n\n  // Try cached port if not forcing scan\n  if (!startScan) {\n    const cached = await storageService.getPort();\n    if (cached !== null) {\n      try {\n        const ok = await Promise.race([\n          checkStatus(cached),\n          new Promise<" +
              'boolean>((_, reject) =>\n            setTimeout(() => reject(new Error("Timeout")), timeout)\n          ),\n        ]);\n        if (ok) {\n          return cached;\n        }\n      } catch (error) {\n        // Cached port failed, continue to scan\n      }\n      // Expire cached port\n      if (storageService.setPort) {\n        await storageService.setPort(null);\n      }\n    }\n  }\n\n  // Scan port range with timeout and parallel checking for efficiency\n  const portRange = Array.from(\n    { length: totalPorts },\n    (_, i) => defaultPort + i\n  );\n\n  // Check ports in batches to avoid overwhelming the system\n  const batchSize = 5;\n  for (let i = 0; i <' +
              " portRange.length; i += batchSize) {\n    const batch = portRange.slice(i, i + batchSize);\n\n    // Check ports in parallel within the batch\n    const promises = batch.map(async (port) => {\n      try {\n        const isAvailable = await Promise.race([\n          checkStatus(port),\n          new Promise<" +
              'boolean>((_, reject) =>\n            setTimeout(() => reject(new Error("Timeout")), timeout)\n          ),\n        ]);\n        return isAvailable ? port : null;\n      } catch {\n        return null;\n      }\n    });\n\n    const results = await Promise.all(promises);\n    const foundPort = results.find((port) => port !== null);\n\n    if (foundPort !== null && foundPort !== undefined) {\n      // Cache discovered port\n      if (storageService.setPort) {\n        await storageService.setPort(foundPort);\n      }\n      return foundPort;\n    }\n\n    // Update progress\n    scannedPorts += batch.length;\n    if (onProgress) {\n      onProgress(scannedPorts, totalPorts);\n    }\n  }\n\n  return null;\n}\n',
          },
        },
        schemaVersion: "1.0",
        thresholds: { high: 80, low: 60, break: 70 },
        testFiles: {
          "tests/extension/background-logic.test.ts": {
            tests: [
              {
                id: "0",
                name: "Background Logic: handleSetConfig should return success when both server and storage saves succeed",
                location: { start: { column: 4, line: 60 } },
              },
              {
                id: "1",
                name: "Background Logic: handleSetConfig should return an error if the server port is not available",
                location: { start: { column: 4, line: 77 } },
              },
              {
                id: "2",
                name: "Background Logic: handleSetConfig should return an error if saving to the server fails",
                location: { start: { column: 4, line: 96 } },
              },
              {
                id: "3",
                name: "Background Logic: handleSetConfig should return an error if saving to storage throws an exception",
                location: { start: { column: 4, line: 118 } },
              },
              {
                id: "4",
                name: "Background Logic: handleSetConfig should handle unknown errors gracefully",
                location: { start: { column: 4, line: 144 } },
              },
              {
                id: "5",
                name: "Background Logic: handleSetConfig should handle API service errors that throw non-Error objects",
                location: { start: { column: 4, line: 171 } },
              },
              {
                id: "6",
                name: "Background Logic: handleSetConfig should handle API service errors that throw null",
                location: { start: { column: 4, line: 197 } },
              },
              {
                id: "7",
                name: "Background Logic: handleSetConfig should handle API service errors that throw undefined",
                location: { start: { column: 4, line: 223 } },
              },
              {
                id: "8",
                name: "Background Logic: handleSetConfig should handle empty config object",
                location: { start: { column: 4, line: 250 } },
              },
              {
                id: "9",
                name: "Background Logic: handleSetConfig should handle null config",
                location: { start: { column: 4, line: 268 } },
              },
              {
                id: "10",
                name: "Background Logic: handleSetConfig should handle undefined config",
                location: { start: { column: 4, line: 285 } },
              },
              {
                id: "11",
                name: "Background Logic: handleSetConfig should validate error message content for storage errors",
                location: { start: { column: 4, line: 303 } },
              },
              {
                id: "12",
                name: "Background Logic: handleSetConfig should validate error message content for API errors",
                location: { start: { column: 4, line: 324 } },
              },
              {
                id: "13",
                name: "Background Logic: handleSetConfig should handle null port with null config",
                location: { start: { column: 4, line: 346 } },
              },
              {
                id: "14",
                name: "Background Logic: handleSetConfig should handle undefined port with undefined config",
                location: { start: { column: 4, line: 363 } },
              },
              {
                id: "15",
                name: "Background Logic: History Handlers handleGetHistory should retrieve history from the storage service",
                location: { start: { column: 4, line: 382 } },
              },
              {
                id: "16",
                name: "Background Logic: History Handlers handleClearHistory should call the storage service to clear history",
                location: { start: { column: 4, line: 402 } },
              },
              {
                id: "17",
                name: "Background Logic: discoverServerPort should return cached port if it's still valid",
                location: { start: { column: 4, line: 420 } },
              },
              {
                id: "18",
                name: "Background Logic: discoverServerPort should clear cached port if it's no longer valid",
                location: { start: { column: 4, line: 441 } },
              },
              {
                id: "19",
                name: "Background Logic: discoverServerPort should scan ports when no cached port exists",
                location: { start: { column: 4, line: 462 } },
              },
              {
                id: "20",
                name: "Background Logic: discoverServerPort should force scan when startScan is true",
                location: { start: { column: 4, line: 484 } },
              },
              {
                id: "21",
                name: "Background Logic: discoverServerPort should handle timeout for cached port check",
                location: { start: { column: 4, line: 506 } },
              },
              {
                id: "22",
                name: "Background Logic: discoverServerPort should handle timeout during port scanning",
                location: { start: { column: 4, line: 528 } },
              },
              {
                id: "23",
                name: "Background Logic: discoverServerPort should call onProgress callback during scanning",
                location: { start: { column: 4, line: 548 } },
              },
              {
                id: "24",
                name: "Background Logic: discoverServerPort should return null when no port is found in range",
                location: { start: { column: 4, line: 569 } },
              },
              {
                id: "25",
                name: "Background Logic: discoverServerPort should handle storage service without setPort method",
                location: { start: { column: 4, line: 587 } },
              },
              {
                id: "26",
                name: "Background Logic: discoverServerPort should handle storage service without setPort method during scan",
                location: { start: { column: 4, line: 1402 } },
              },
              {
                id: "27",
                name: "Background Logic: discoverServerPort should handle errors during port scanning gracefully",
                location: { start: { column: 4, line: 1421 } },
              },
              {
                id: "28",
                name: "Background Logic: discoverServerPort should handle timeout with different error messages",
                location: { start: { column: 4, line: 1439 } },
              },
              {
                id: "29",
                name: "Background Logic: discoverServerPort should handle timeout during scanning with different error messages",
                location: { start: { column: 4, line: 1460 } },
              },
              {
                id: "30",
                name: "Background Logic: discoverServerPort should handle storage service without setPort method during cached port failure",
                location: { start: { column: 4, line: 1480 } },
              },
              {
                id: "31",
                name: "Background Logic: discoverServerPort should handle storage service without setPort method during timeout",
                location: { start: { column: 4, line: 1500 } },
              },
              {
                id: "32",
                name: "Background Logic: discoverServerPort should handle batch processing edge case with exact batch size",
                location: { start: { column: 4, line: 1522 } },
              },
              {
                id: "33",
                name: "Background Logic: discoverServerPort should handle batch processing with remainder ports",
                location: { start: { column: 4, line: 1540 } },
              },
              {
                id: "34",
                name: "Background Logic: discoverServerPort should handle progress tracking with empty range",
                location: { start: { column: 4, line: 1287 } },
              },
              {
                id: "35",
                name: "Background Logic: discoverServerPort should handle null port discovery in batch processing",
                location: { start: { column: 4, line: 1327 } },
              },
              {
                id: "36",
                name: "Background Logic: discoverServerPort should handle undefined port discovery in batch processing",
                location: { start: { column: 4, line: 1345 } },
              },
              {
                id: "37",
                name: "Background Logic: discoverServerPort should handle mixed null/undefined results in batch processing",
                location: { start: { column: 4, line: 1363 } },
              },
              {
                id: "38",
                name: "Background Logic: discoverServerPort should handle port scanning when no port is found",
                location: { start: { column: 4, line: 1384 } },
              },
              {
                id: "39",
                name: "Background Logic: discoverServerPort should scan ports in batches efficiently",
                location: { start: { column: 4, line: 1558 } },
              },
              {
                id: "40",
                name: "Background Logic: discoverServerPort should handle progress tracking with negative batch length",
                location: { start: { column: 4, line: 1307 } },
              },
              {
                id: "41",
                name: "Background Logic: discoverServerPort should validate specific error message content for timeout errors",
                location: { start: { column: 4, line: 1112 } },
              },
              {
                id: "42",
                name: "Background Logic: discoverServerPort should validate specific error message content for scanning timeout errors",
                location: { start: { column: 4, line: 1135 } },
              },
              {
                id: "43",
                name: "Background Logic: discoverServerPort should handle boundary condition with exact port range length",
                location: { start: { column: 4, line: 1155 } },
              },
              {
                id: "44",
                name: "Background Logic: discoverServerPort should handle boundary condition with remainder ports",
                location: { start: { column: 4, line: 1173 } },
              },
              {
                id: "45",
                name: "Background Logic: discoverServerPort should handle exception in catch block with proper error handling",
                location: { start: { column: 4, line: 1191 } },
              },
              {
                id: "46",
                name: "Background Logic: discoverServerPort should handle null/undefined foundPort with proper conditional logic",
                location: { start: { column: 4, line: 1209 } },
              },
              {
                id: "47",
                name: "Background Logic: discoverServerPort should handle progress tracking with proper assignment operator",
                location: { start: { column: 4, line: 1227 } },
              },
              {
                id: "48",
                name: "Background Logic: discoverServerPort should handle progress tracking with multiple batches",
                location: { start: { column: 4, line: 1247 } },
              },
              {
                id: "49",
                name: "Background Logic: discoverServerPort should handle progress tracking with single batch",
                location: { start: { column: 4, line: 1267 } },
              },
            ],
            source:
              '/**\n * @fileoverview\n * Unit tests for the background script\'s message handling logic.\n */\n\nimport {\n  handleSetConfig,\n  handleGetHistory,\n  handleClearHistory,\n  discoverServerPort,\n} from "extension/src/background-logic";\nimport type {\n  ApiService,\n  StorageService,\n} from "extension/src/background-logic";\nimport type { ServerConfig, HistoryEntry } from "extension/src/types";\nimport {\n  getServerPort,\n  getClientPort,\n  getPortRange,\n} from "../../extension/src/constants";\n\n// Mock services for testing\nconst createMockApiService = (\n  overrides: Partial<' +
              "ApiService> = {}\n): ApiService => ({\n  fetchConfig: jest.fn().mockResolvedValue({}),\n  saveConfig: jest.fn().mockResolvedValue(true),\n  ...overrides,\n});\n\nconst createMockStorageService = (\n  overrides: Partial<" +
              'StorageService> = {}\n): StorageService => ({\n  getConfig: jest.fn().mockResolvedValue({}),\n  setConfig: jest.fn().mockResolvedValue(undefined),\n  getPort: jest.fn().mockResolvedValue(5013), // Use centralized default\n  setPort: jest.fn().mockResolvedValue(undefined),\n  getHistory: jest.fn().mockResolvedValue([]),\n  clearHistory: jest.fn().mockResolvedValue(undefined),\n  ...overrides,\n});\n\n// Mock console.error to capture error messages\nconst originalConsoleError = console.error;\nlet consoleErrorSpy: jest.SpyInstance;\n\nbeforeEach(() => {\n  consoleErrorSpy = jest.spyOn(console, "error").mockImplementation();\n});\n\nafterEach(() => {\n  consoleErrorSpy.mockRestore();\n});\n\ndescribe("Background Logic: handleSetConfig", () => {\n  const mockConfig: Partial<' +
              'ServerConfig> = { download_dir: "/new/path" };\n\n  it("should return success when both server and storage saves succeed", async () => {\n    const apiService = createMockApiService();\n    const storageService = createMockStorageService();\n    const port = 5013; // Use centralized default\n\n    const result = await handleSetConfig(\n      port,\n      mockConfig,\n      apiService,\n      storageService\n    );\n\n    expect(apiService.saveConfig).toHaveBeenCalledWith(port, mockConfig);\n    expect(storageService.setConfig).toHaveBeenCalledWith(mockConfig);\n    expect(result).toEqual({ status: "success" });\n  });\n\n  it("should return an error if the server port is not available", async () => {\n    const apiService = createMockApiService();\n    const storageService = createMockStorageService();\n\n    const result = await handleSetConfig(\n      null,\n      mockConfig,\n      apiService,\n      storageService\n    );\n\n    expect(apiService.saveConfig).not.toHaveBeenCalled();\n    expect(storageService.setConfig).not.toHaveBeenCalled();\n    expect(result).toEqual({\n      status: "error",\n      message: "Server port not found.",\n    });\n  });\n\n  it("should return an error if saving to the server fails", async () => {\n    const apiService = createMockApiService({\n      saveConfig: jest.fn().mockResolvedValue(false),\n    });\n    const storageService = createMockStorageService();\n    const port = 5013; // Use centralized default\n\n    const result = await handleSetConfig(\n      port,\n      mockConfig,\n      apiService,\n      storageService\n    );\n\n    expect(apiService.saveConfig).toHaveBeenCalledWith(port, mockConfig);\n    expect(storageService.setConfig).not.toHaveBeenCalled();\n    expect(result).toEqual({\n      status: "error",\n      message: "Failed to save config to server.",\n    });\n  });\n\n  it("should return an error if saving to storage throws an exception", async () => {\n    const testError = new Error("Storage is full");\n    const apiService = createMockApiService();\n    const storageService = createMockStorageService({\n      setConfig: jest.fn().mockRejectedValue(testError),\n    });\n    const port = 5001;\n\n    const result = await handleSetConfig(\n      port,\n      mockConfig,\n      apiService,\n      storageService\n    );\n\n    expect(apiService.saveConfig).toHaveBeenCalledWith(port, mockConfig);\n    expect(storageService.setConfig).toHaveBeenCalledWith(mockConfig);\n    expect(result).toEqual({ status: "error", message: "Storage is full" });\n\n    // Verify error message is logged with correct prefix\n    expect(consoleErrorSpy).toHaveBeenCalledWith(\n      "[BG Logic] Error in handleSetConfig:",\n      "Storage is full"\n    );\n  });\n\n  it("should handle unknown errors gracefully", async () => {\n    const apiService = createMockApiService({\n      saveConfig: jest.fn().mockRejectedValue("Unknown error"),\n    });\n    const storageService = createMockStorageService();\n    const port = 5001;\n\n    const result = await handleSetConfig(\n      port,\n      mockConfig,\n      apiService,\n      storageService\n    );\n\n    expect(result).toEqual({\n      status: "error",\n      message: "An unknown error occurred.",\n    });\n\n    // Verify error message is logged with correct prefix\n    expect(consoleErrorSpy).toHaveBeenCalledWith(\n      "[BG Logic] Error in handleSetConfig:",\n      "An unknown error occurred."\n    );\n  });\n\n  // Additional tests to address survived mutants\n  it("should handle API service errors that throw non-Error objects", async () => {\n    const apiService = createMockApiService({\n      saveConfig: jest.fn().mockRejectedValue("String error"),\n    });\n    const storageService = createMockStorageService();\n    const port = 5001;\n\n    const result = await handleSetConfig(\n      port,\n      mockConfig,\n      apiService,\n      storageService\n    );\n\n    expect(result).toEqual({\n      status: "error",\n      message: "An unknown error occurred.",\n    });\n\n    // Verify error message is logged with correct prefix\n    expect(consoleErrorSpy).toHaveBeenCalledWith(\n      "[BG Logic] Error in handleSetConfig:",\n      "An unknown error occurred."\n    );\n  });\n\n  it("should handle API service errors that throw null", async () => {\n    const apiService = createMockApiService({\n      saveConfig: jest.fn().mockRejectedValue(null),\n    });\n    const storageService = createMockStorageService();\n    const port = 5001;\n\n    const result = await handleSetConfig(\n      port,\n      mockConfig,\n      apiService,\n      storageService\n    );\n\n    expect(result).toEqual({\n      status: "error",\n      message: "An unknown error occurred.",\n    });\n\n    // Verify error message is logged with correct prefix\n    expect(consoleErrorSpy).toHaveBeenCalledWith(\n      "[BG Logic] Error in handleSetConfig:",\n      "An unknown error occurred."\n    );\n  });\n\n  it("should handle API service errors that throw undefined", async () => {\n    const apiService = createMockApiService({\n      saveConfig: jest.fn().mockRejectedValue(undefined),\n    });\n    const storageService = createMockStorageService();\n    const port = 5001;\n\n    const result = await handleSetConfig(\n      port,\n      mockConfig,\n      apiService,\n      storageService\n    );\n\n    expect(result).toEqual({\n      status: "error",\n      message: "An unknown error occurred.",\n    });\n\n    // Verify error message is logged with correct prefix\n    expect(consoleErrorSpy).toHaveBeenCalledWith(\n      "[BG Logic] Error in handleSetConfig:",\n      "An unknown error occurred."\n    );\n  });\n\n  // Boundary condition tests\n  it("should handle empty config object", async () => {\n    const apiService = createMockApiService();\n    const storageService = createMockStorageService();\n    const port = 5013;\n    const emptyConfig = {};\n\n    const result = await handleSetConfig(\n      port,\n      emptyConfig,\n      apiService,\n      storageService\n    );\n\n    expect(apiService.saveConfig).toHaveBeenCalledWith(port, emptyConfig);\n    expect(storageService.setConfig).toHaveBeenCalledWith(emptyConfig);\n    expect(result).toEqual({ status: "success" });\n  });\n\n  it("should handle null config", async () => {\n    const apiService = createMockApiService();\n    const storageService = createMockStorageService();\n    const port = 5013;\n\n    const result = await handleSetConfig(\n      port,\n      null as any,\n      apiService,\n      storageService\n    );\n\n    expect(apiService.saveConfig).toHaveBeenCalledWith(port, null);\n    expect(storageService.setConfig).toHaveBeenCalledWith(null);\n    expect(result).toEqual({ status: "success" });\n  });\n\n  it("should handle undefined config", async () => {\n    const apiService = createMockApiService();\n    const storageService = createMockStorageService();\n    const port = 5013;\n\n    const result = await handleSetConfig(\n      port,\n      undefined as any,\n      apiService,\n      storageService\n    );\n\n    expect(apiService.saveConfig).toHaveBeenCalledWith(port, undefined);\n    expect(storageService.setConfig).toHaveBeenCalledWith(undefined);\n    expect(result).toEqual({ status: "success" });\n  });\n\n  // Enhanced error message validation tests\n  it("should validate error message content for storage errors", async () => {\n    const specificError = new Error("Specific storage error message");\n    const apiService = createMockApiService();\n    const storageService = createMockStorageService({\n      setConfig: jest.fn().mockRejectedValue(specificError),\n    });\n    const port = 5001;\n\n    const result = await handleSetConfig(\n      port,\n      mockConfig,\n      apiService,\n      storageService\n    );\n\n    expect(result).toEqual({\n      status: "error",\n      message: "Specific storage error message",\n    });\n  });\n\n  it("should validate error message content for API errors", async () => {\n    const specificError = new Error("API connection failed");\n    const apiService = createMockApiService({\n      saveConfig: jest.fn().mockRejectedValue(specificError),\n    });\n    const storageService = createMockStorageService();\n    const port = 5001;\n\n    const result = await handleSetConfig(\n      port,\n      mockConfig,\n      apiService,\n      storageService\n    );\n\n    expect(result).toEqual({\n      status: "error",\n      message: "API connection failed",\n    });\n  });\n\n  // Null/undefined scenario testing\n  it("should handle null port with null config", async () => {\n    const apiService = createMockApiService();\n    const storageService = createMockStorageService();\n\n    const result = await handleSetConfig(\n      null,\n      null as any,\n      apiService,\n      storageService\n    );\n\n    expect(result).toEqual({\n      status: "error",\n      message: "Server port not found.",\n    });\n  });\n\n  it("should handle undefined port with undefined config", async () => {\n    const apiService = createMockApiService();\n    const storageService = createMockStorageService();\n\n    const result = await handleSetConfig(\n      undefined as any,\n      undefined as any,\n      apiService,\n      storageService\n    );\n\n    expect(result).toEqual({\n      status: "error",\n      message: "Server port not found.",\n    });\n  });\n});\n\ndescribe("Background Logic: History Handlers", () => {\n  it("handleGetHistory should retrieve history from the storage service", async () => {\n    const mockHistory: HistoryEntry[] = [\n      {\n        id: "1",\n        url: "https://example.com/video",\n        filename: "Test Video",\n        status: "completed",\n        timestamp: Date.now(),\n      },\n    ];\n    const storageService = createMockStorageService({\n      getHistory: jest.fn().mockResolvedValue(mockHistory),\n    });\n\n    const result = await handleGetHistory(storageService);\n\n    expect(storageService.getHistory).toHaveBeenCalled();\n    expect(result).toEqual({ history: mockHistory });\n  });\n\n  it("handleClearHistory should call the storage service to clear history", async () => {\n    const storageService = createMockStorageService();\n\n    const result = await handleClearHistory(storageService);\n\n    expect(storageService.clearHistory).toHaveBeenCalled();\n    expect(result).toEqual({ status: "success" });\n  });\n});\n\ndescribe("Background Logic: discoverServerPort", () => {\n  const mockCheckStatus = jest.fn();\n  const mockStorageService = createMockStorageService();\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it("should return cached port if it\'s still valid", async () => {\n    const cachedPort = 5013;\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(cachedPort),\n    });\n    mockCheckStatus.mockResolvedValue(true);\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5020,\n      false,\n      2000\n    );\n\n    expect(storageService.getPort).toHaveBeenCalled();\n    expect(mockCheckStatus).toHaveBeenCalledWith(cachedPort);\n    expect(result).toBe(cachedPort);\n  });\n\n  it("should clear cached port if it\'s no longer valid", async () => {\n    const cachedPort = 5013;\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(cachedPort),\n      setPort: jest.fn().mockResolvedValue(undefined),\n    });\n    mockCheckStatus.mockRejectedValue(new Error("Connection failed"));\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5020,\n      false,\n      2000\n    );\n\n    expect(storageService.setPort).toHaveBeenCalledWith(null);\n    expect(result).toBeNull();\n  });\n\n  it("should scan ports when no cached port exists", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus\n      .mockResolvedValueOnce(false) // First port fails\n      .mockResolvedValueOnce(true); // Second port succeeds\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5002,\n      false,\n      2000\n    );\n\n    expect(mockCheckStatus).toHaveBeenCalledWith(5001);\n    expect(mockCheckStatus).toHaveBeenCalledWith(5002);\n    expect(result).toBe(5002);\n  });\n\n  it("should force scan when startScan is true", async () => {\n    const cachedPort = 5013;\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(cachedPort),\n    });\n    mockCheckStatus.mockResolvedValue(true);\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5020,\n      true, // Force scan\n      2000\n    );\n\n    // Should not use cached port when startScan is true\n    expect(mockCheckStatus).toHaveBeenCalledWith(5001);\n    expect(result).toBe(5001);\n  });\n\n  // Enhanced timeout testing\n  it("should handle timeout for cached port check", async () => {\n    mockCheckStatus.mockImplementation(\n      () => new Promise((resolve) => setTimeout(() => resolve(true), 3000)) // Longer than timeout\n    );\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(5013),\n      setPort: jest.fn().mockResolvedValue(undefined),\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5010,\n      false,\n      1000 // Short timeout\n    );\n\n    expect(result).toBeNull();\n    expect(storageService.setPort).toHaveBeenCalledWith(null);\n  });\n\n  it("should handle timeout during port scanning", async () => {\n    mockCheckStatus.mockImplementation(\n      () => new Promise((resolve) => setTimeout(() => resolve(true), 3000)) // Longer than timeout\n    );\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005,\n      false,\n      1000 // Short timeout\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should call onProgress callback during scanning", async () => {\n    mockCheckStatus.mockResolvedValue(false);\n    const onProgress = jest.fn();\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n\n    await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005,\n      false,\n      1000,\n      onProgress\n    );\n\n    expect(onProgress).toHaveBeenCalled();\n  });\n\n  // Boundary condition tests\n  it("should return null when no port is found in range", async () => {\n    mockCheckStatus.mockResolvedValue(false);\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5003,\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle storage service without setPort method", async () => {\n    mockCheckStatus.mockResolvedValue(true);\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(5013),\n      setPort: undefined, // Remove setPort method\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5010,\n      false,\n      1000\n    );\n\n    expect(result).toBe(5013);\n  });\n\n  it("should handle storage service without setPort method during scan", async () => {\n    mockCheckStatus.mockResolvedValueOnce(false).mockResolvedValueOnce(true);\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n      setPort: undefined, // Remove setPort method\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5002,\n      false,\n      1000\n    );\n\n    expect(result).toBe(5002);\n  });\n\n  // Exception handling tests\n  it("should handle errors during port scanning gracefully", async () => {\n    mockCheckStatus.mockRejectedValue(new Error("Network error"));\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5003,\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle timeout with different error messages", async () => {\n    mockCheckStatus.mockImplementation(\n      () => new Promise((resolve) => setTimeout(() => resolve(true), 3000))\n    );\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(5013),\n      setPort: jest.fn().mockResolvedValue(undefined),\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5010,\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle timeout during scanning with different error messages", async () => {\n    mockCheckStatus.mockImplementation(\n      () => new Promise((resolve) => setTimeout(() => resolve(true), 3000))\n    );\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005,\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle storage service without setPort method during cached port failure", async () => {\n    mockCheckStatus.mockResolvedValue(false);\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(5013),\n      setPort: undefined, // Remove setPort method\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5010,\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle storage service without setPort method during timeout", async () => {\n    mockCheckStatus.mockImplementation(\n      () => new Promise((resolve) => setTimeout(() => resolve(true), 3000))\n    );\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(5013),\n      setPort: undefined, // Remove setPort method\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5010,\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  // Batch processing edge case tests\n  it("should handle batch processing edge case with exact batch size", async () => {\n    mockCheckStatus.mockResolvedValue(false);\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005, // 5 ports, batch size is 5\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle batch processing with remainder ports", async () => {\n    mockCheckStatus.mockResolvedValue(false);\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5007, // 7 ports, batch size is 5 (remainder of 2)\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle progress tracking with empty range", async () => {\n    mockCheckStatus.mockResolvedValue(false);\n    const onProgress = jest.fn();\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n\n    await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5001, // Single port range\n      false,\n      1000,\n      onProgress\n    );\n\n    expect(onProgress).toHaveBeenCalled();\n  });\n\n  // Null/undefined handling tests\n  it("should handle null port discovery in batch processing", async () => {\n    mockCheckStatus.mockResolvedValue(null);\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5003,\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle undefined port discovery in batch processing", async () => {\n    mockCheckStatus.mockResolvedValue(undefined);\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5003,\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle mixed null/undefined results in batch processing", async () => {\n    mockCheckStatus\n      .mockResolvedValueOnce(false)\n      .mockResolvedValueOnce(false)\n      .mockResolvedValueOnce(true);\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5003,\n      false,\n      1000\n    );\n\n    expect(result).toBe(5003); // Third port (5003) should be found\n  });\n\n  it("should handle port scanning when no port is found", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005,\n      false,\n      2000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle storage service without setPort method during scan", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n      setPort: undefined, // Remove setPort method\n    });\n    mockCheckStatus.mockResolvedValue(true);\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005,\n      false,\n      2000\n    );\n\n    expect(result).toBe(5001);\n  });\n\n  it("should handle errors during port scanning gracefully", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockRejectedValue(new Error("Network error"));\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005,\n      false,\n      2000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should scan ports in batches efficiently", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n\n    await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5010,\n      false,\n      2000\n    );\n\n    // Should check all ports in the range\n    expect(mockCheckStatus).toHaveBeenCalledTimes(10);\n  });\n\n  // Boundary condition tests\n  it("should handle timeout with different error messages", async () => {\n    const cachedPort = 5013;\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(cachedPort),\n    });\n    mockCheckStatus.mockImplementation(\n      () => new Promise((resolve) => setTimeout(() => resolve(true), 3000))\n    );\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5020,\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  }, 10000); // Increase test timeout\n\n  it("should handle timeout during scanning with different error messages", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockImplementation(\n      () => new Promise((resolve) => setTimeout(() => resolve(true), 3000))\n    );\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005,\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  }, 10000); // Increase test timeout\n\n  it("should handle storage service without setPort method during cached port failure", async () => {\n    const cachedPort = 5013;\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(cachedPort),\n      setPort: undefined, // Remove setPort method\n    });\n    mockCheckStatus.mockRejectedValue(new Error("Connection failed"));\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5020,\n      false,\n      2000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle storage service without setPort method during timeout", async () => {\n    const cachedPort = 5013;\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(cachedPort),\n      setPort: undefined, // Remove setPort method\n    });\n    mockCheckStatus.mockImplementation(\n      () => new Promise((resolve) => setTimeout(() => resolve(true), 3000))\n    );\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5020,\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  }, 10000); // Increase test timeout\n\n  it("should handle batch processing edge case with exact batch size", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n\n    await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005, // 5 ports, batch size is 5\n      false,\n      2000\n    );\n\n    expect(mockCheckStatus).toHaveBeenCalledTimes(5);\n  });\n\n  it("should handle batch processing with remainder ports", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n\n    await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5007, // 7 ports, batch size is 5, remainder is 2\n      false,\n      2000\n    );\n\n    expect(mockCheckStatus).toHaveBeenCalledTimes(7);\n  });\n\n  it("should handle progress tracking with negative batch length", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n    const onProgress = jest.fn();\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5000, // Invalid range (negative)\n      false,\n      2000,\n      onProgress\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle null port discovery in batch processing", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(null);\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005,\n      false,\n      2000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle undefined port discovery in batch processing", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(undefined);\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005,\n      false,\n      2000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle mixed null/undefined results in batch processing", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus\n      .mockResolvedValueOnce(null)\n      .mockResolvedValueOnce(undefined)\n      .mockResolvedValueOnce(5003);\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005,\n      false,\n      2000\n    );\n\n    expect(result).toBe(5003);\n  });\n\n  // Additional tests to address remaining survived mutants\n  it("should validate specific error message content for timeout errors", async () => {\n    const cachedPort = 5013;\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(cachedPort),\n      setPort: jest.fn().mockResolvedValue(undefined),\n    });\n    mockCheckStatus.mockImplementation(\n      () => new Promise((resolve) => setTimeout(() => resolve(true), 3000))\n    );\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5010,\n      false,\n      1000 // Short timeout\n    );\n\n    expect(result).toBeNull();\n    expect(storageService.setPort).toHaveBeenCalledWith(null);\n  }, 10000);\n\n  it("should validate specific error message content for scanning timeout errors", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockImplementation(\n      () => new Promise((resolve) => setTimeout(() => resolve(true), 3000))\n    );\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005,\n      false,\n      1000 // Short timeout\n    );\n\n    expect(result).toBeNull();\n  }, 10000);\n\n  it("should handle boundary condition with exact port range length", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005, // 5 ports, batch size is 5\n      false,\n      2000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle boundary condition with remainder ports", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5007, // 7 ports, batch size is 5, remainder is 2\n      false,\n      2000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle exception in catch block with proper error handling", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(5013),\n    });\n    mockCheckStatus.mockRejectedValue(new Error("Network error"));\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5020,\n      false,\n      2000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle null/undefined foundPort with proper conditional logic", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5003,\n      false,\n      2000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle progress tracking with proper assignment operator", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n    const onProgress = jest.fn();\n\n    await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005,\n      false,\n      2000,\n      onProgress\n    );\n\n    expect(onProgress).toHaveBeenCalled();\n  });\n\n  it("should handle progress tracking with multiple batches", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n    const onProgress = jest.fn();\n\n    await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5010, // 10 ports, 2 batches of 5\n      false,\n      2000,\n      onProgress\n    );\n\n    expect(onProgress).toHaveBeenCalled();\n  });\n\n  it("should handle progress tracking with single batch", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n    const onProgress = jest.fn();\n\n    await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5003, // 3 ports, single batch\n      false,\n      2000,\n      onProgress\n    );\n\n    expect(onProgress).toHaveBeenCalled();\n  });\n\n  it("should handle progress tracking with empty range", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n    const onProgress = jest.fn();\n\n    await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5001, // Single port range\n      false,\n      2000,\n      onProgress\n    );\n\n    expect(onProgress).toHaveBeenCalled();\n  });\n\n  it("should handle progress tracking with negative batch length", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n    const onProgress = jest.fn();\n\n    await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5001, // Single port range\n      false,\n      2000,\n      onProgress\n    );\n\n    expect(onProgress).toHaveBeenCalled();\n  });\n\n  it("should handle null port discovery in batch processing", async () => {\n    mockCheckStatus.mockResolvedValue(null);\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5003,\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle undefined port discovery in batch processing", async () => {\n    mockCheckStatus.mockResolvedValue(undefined);\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5003,\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle mixed null/undefined results in batch processing", async () => {\n    mockCheckStatus\n      .mockResolvedValueOnce(false)\n      .mockResolvedValueOnce(false)\n      .mockResolvedValueOnce(true);\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5003,\n      false,\n      1000\n    );\n\n    expect(result).toBe(5003); // Third port (5003) should be found\n  });\n\n  it("should handle port scanning when no port is found", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005,\n      false,\n      2000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle storage service without setPort method during scan", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n      setPort: undefined, // Remove setPort method\n    });\n    mockCheckStatus.mockResolvedValue(true);\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005,\n      false,\n      2000\n    );\n\n    expect(result).toBe(5001);\n  });\n\n  it("should handle errors during port scanning gracefully", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockRejectedValue(new Error("Scan error"));\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005,\n      false,\n      2000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle timeout with different error messages", async () => {\n    const cachedPort = 5013;\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(cachedPort),\n    });\n    mockCheckStatus.mockImplementation(\n      () => new Promise((resolve) => setTimeout(() => resolve(true), 3000))\n    );\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5020,\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  }, 10000);\n\n  it("should handle timeout during scanning with different error messages", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockImplementation(\n      () => new Promise((resolve) => setTimeout(() => resolve(true), 3000))\n    );\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005,\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  }, 10000);\n\n  it("should handle storage service without setPort method during cached port failure", async () => {\n    const cachedPort = 5013;\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(cachedPort),\n      setPort: undefined, // Remove setPort method\n    });\n    mockCheckStatus.mockRejectedValue(new Error("Connection failed"));\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5020,\n      false,\n      2000\n    );\n\n    expect(result).toBeNull();\n  });\n\n  it("should handle storage service without setPort method during timeout", async () => {\n    const cachedPort = 5013;\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(cachedPort),\n      setPort: undefined, // Remove setPort method\n    });\n    mockCheckStatus.mockImplementation(\n      () => new Promise((resolve) => setTimeout(() => resolve(true), 3000))\n    );\n\n    const result = await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5020,\n      false,\n      1000\n    );\n\n    expect(result).toBeNull();\n  }, 10000);\n\n  it("should handle batch processing edge case with exact batch size", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n\n    await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5005, // 5 ports, batch size is 5\n      false,\n      2000\n    );\n\n    expect(mockCheckStatus).toHaveBeenCalledTimes(5);\n  });\n\n  it("should handle batch processing with remainder ports", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n\n    await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5007, // 7 ports, batch size is 5, remainder is 2\n      false,\n      2000\n    );\n\n    expect(mockCheckStatus).toHaveBeenCalledTimes(7);\n  });\n\n  it("should scan ports in batches efficiently", async () => {\n    const storageService = createMockStorageService({\n      getPort: jest.fn().mockResolvedValue(null),\n    });\n    mockCheckStatus.mockResolvedValue(false);\n\n    await discoverServerPort(\n      storageService,\n      mockCheckStatus,\n      5001,\n      5010, // 10 ports, 2 batches of 5\n      false,\n      2000\n    );\n\n    expect(mockCheckStatus).toHaveBeenCalledTimes(10);\n  });\n});\n',
          },
          "extension/src/__tests__/background-logic.test.ts": {
            tests: [
              {
                id: "50",
                name: "discoverServerPort returns cached port if valid",
                location: { start: { column: 4, line: 17 } },
              },
              {
                id: "51",
                name: "discoverServerPort scans all ports when cached invalid and caches discovered port",
                location: { start: { column: 4, line: 37 } },
              },
              {
                id: "52",
                name: "discoverServerPort scans ports when no cache",
                location: { start: { column: 4, line: 71 } },
              },
              {
                id: "53",
                name: "discoverServerPort forces scan when startScan is true",
                location: { start: { column: 4, line: 93 } },
              },
              {
                id: "54",
                name: "discoverServerPort returns null if no port found",
                location: { start: { column: 4, line: 125 } },
              },
            ],
            source:
              'import { discoverServerPort } from "../background-logic";\nimport { getServerPort, getPortRange } from "../constants";\n\ndescribe("discoverServerPort", () => {\n  const defaultPort = getServerPort();\n  const maxPort = getPortRange()[1];\n  let calls: number[];\n  let storageService: any;\n  beforeEach(() => {\n    calls = [];\n    storageService = {\n      getPort: jest.fn(),\n      setPort: jest.fn(),\n    };\n  });\n\n  it("returns cached port if valid", async () => {\n    const cachedPort = getServerPort() + 1;\n    storageService.getPort.mockResolvedValue(cachedPort);\n    const checkStatus = jest.fn().mockImplementation((port) => {\n      calls.push(port);\n      return Promise.resolve(true);\n    });\n    const port = await discoverServerPort(\n      storageService,\n      checkStatus,\n      defaultPort,\n      maxPort,\n      false\n    );\n    expect(port).toBe(cachedPort);\n    expect(calls).toEqual([cachedPort]);\n    // should not scan other ports\n    expect(storageService.setPort).not.toHaveBeenCalled();\n  });\n\n  it("scans all ports when cached invalid and caches discovered port", async () => {\n    const cachedPort = getServerPort() + 1;\n    const discoveredPort = getServerPort() + 2;\n    storageService.getPort.mockResolvedValue(cachedPort);\n    const statuses: Record<' +
              'number, boolean> = {\n      [getServerPort()]: false,\n      [cachedPort]: false,\n      [discoveredPort]: true,\n    };\n    const checkStatus = jest.fn().mockImplementation((port) => {\n      calls.push(port);\n      return Promise.resolve(statuses[port]);\n    });\n    const port = await discoverServerPort(\n      storageService,\n      checkStatus,\n      defaultPort,\n      maxPort,\n      false\n    );\n    expect(port).toBe(discoveredPort);\n    // The actual implementation scans the full port range, so we expect more calls\n    // but we can verify the key calls are in the right order\n    expect(calls).toContain(cachedPort);\n    expect(calls).toContain(getServerPort());\n    expect(calls).toContain(discoveredPort);\n    expect(calls.indexOf(cachedPort)).toBeLessThan(\n      calls.indexOf(discoveredPort)\n    );\n    // should expire cache then set new cache\n    expect(storageService.setPort).toHaveBeenCalledWith(null);\n    expect(storageService.setPort).toHaveBeenCalledWith(discoveredPort);\n  });\n\n  it("scans ports when no cache", async () => {\n    storageService.getPort.mockResolvedValue(null);\n    const discoveredPort = getServerPort() + 1;\n    const statuses: Record<' +
              'number, boolean> = {\n      [getServerPort()]: false,\n      [discoveredPort]: true,\n      [getServerPort() + 2]: true,\n    };\n    const checkStatus = jest\n      .fn()\n      .mockImplementation((port) => Promise.resolve(statuses[port]));\n    const port = await discoverServerPort(\n      storageService,\n      checkStatus,\n      defaultPort,\n      maxPort,\n      false\n    );\n    expect(port).toBe(discoveredPort);\n    expect(storageService.setPort).toHaveBeenCalledWith(discoveredPort);\n  });\n\n  it("forces scan when startScan is true", async () => {\n    const cachedPort = getServerPort() + 1;\n    const discoveredPort = getServerPort() + 2;\n    storageService.getPort.mockResolvedValue(cachedPort);\n    const statuses: Record<' +
              'number, boolean> = {\n      [getServerPort()]: false,\n      [cachedPort]: false,\n      [discoveredPort]: true,\n    };\n    const checkStatus = jest.fn().mockImplementation((port) => {\n      calls.push(port);\n      return Promise.resolve(statuses[port]);\n    });\n    const port = await discoverServerPort(\n      storageService,\n      checkStatus,\n      defaultPort,\n      maxPort,\n      true\n    );\n    expect(port).toBe(discoveredPort);\n    // should not return cached, so calls start with scanning all\n    // The actual implementation scans the full port range, so we expect more calls\n    // but we can verify the key calls are in the right order\n    expect(calls).toContain(getServerPort());\n    expect(calls).toContain(cachedPort);\n    expect(calls).toContain(discoveredPort);\n    expect(calls.indexOf(getServerPort())).toBeLessThan(\n      calls.indexOf(discoveredPort)\n    );\n  });\n\n  it("returns null if no port found", async () => {\n    storageService.getPort.mockResolvedValue(null);\n    const checkStatus = jest.fn().mockResolvedValue(false);\n    const port = await discoverServerPort(\n      storageService,\n      checkStatus,\n      defaultPort,\n      maxPort,\n      false\n    );\n    expect(port).toBeNull();\n    expect(storageService.setPort).not.toHaveBeenCalled();\n  });\n});\n',
          },
          "tests/extension/content-logic.test.ts": {
            tests: [
              {
                id: "55",
                name: "isSignificantVideo returns false for non-video and non-iframe elements",
                location: { start: { column: 4, line: 4 } },
              },
              {
                id: "56",
                name: "isSignificantVideo returns false if video parent has ad-banner class",
                location: { start: { column: 4, line: 9 } },
              },
              {
                id: "57",
                name: "isSignificantVideo returns false if video is not visible (width or height zero)",
                location: { start: { column: 4, line: 24 } },
              },
              {
                id: "58",
                name:
                  "isSignificantVideo returns false if video is too small (<" +
                  "200x150)",
                location: { start: { column: 4, line: 43 } },
              },
              {
                id: "59",
                name: "isSignificantVideo returns false if video has no src",
                location: { start: { column: 4, line: 63 } },
              },
              {
                id: "60",
                name: "isSignificantVideo returns true for significant video elements",
                location: { start: { column: 4, line: 76 } },
              },
              {
                id: "61",
                name: "isSignificantVideo returns true for iframe elements regardless of size",
                location: { start: { column: 4, line: 88 } },
              },
            ],
            source:
              'import { isSignificantVideo } from "extension/src/content";\n\ndescribe("isSignificantVideo", () => {\n  it("returns false for non-video and non-iframe elements", () => {\n    const div = document.createElement("div");\n    expect(isSignificantVideo(div)).toBe(false);\n  });\n\n  it("returns false if video parent has ad-banner class", () => {\n    const video = document.createElement("video");\n    // Mock getBoundingClientRect so width/height > thresholds\n    (video as any).getBoundingClientRect = () => ({\n      width: 300,\n      height: 200,\n      left: 0,\n      top: 0,\n    });\n    const wrapper = document.createElement("div");\n    wrapper.classList.add("ad-banner");\n    wrapper.appendChild(video);\n    expect(isSignificantVideo(video)).toBe(false);\n  });\n\n  it("returns false if video is not visible (width or height zero)", () => {\n    const video = document.createElement("video");\n    (video as any).getBoundingClientRect = () => ({\n      width: 0,\n      height: 200,\n      left: 0,\n      top: 0,\n    });\n    expect(isSignificantVideo(video)).toBe(false);\n\n    (video as any).getBoundingClientRect = () => ({\n      width: 300,\n      height: 0,\n      left: 0,\n      top: 0,\n    });\n    expect(isSignificantVideo(video)).toBe(false);\n  });\n\n  it("returns false if video is too small (<' +
              '200x150)", () => {\n    const video = document.createElement("video");\n    (video as any).getBoundingClientRect = () => ({\n      width: 199,\n      height: 150,\n      left: 0,\n      top: 0,\n    });\n    video.src = "http://example.com/video.mp4";\n    expect(isSignificantVideo(video)).toBe(false);\n\n    (video as any).getBoundingClientRect = () => ({\n      width: 200,\n      height: 149,\n      left: 0,\n      top: 0,\n    });\n    expect(isSignificantVideo(video)).toBe(false);\n  });\n\n  it("returns false if video has no src", () => {\n    const video = document.createElement("video");\n    (video as any).getBoundingClientRect = () => ({\n      width: 200,\n      height: 150,\n      left: 0,\n      top: 0,\n    });\n    // Simulate no src by overriding the src getter\n    Object.defineProperty(video, "src", { get: () => "" });\n    expect(isSignificantVideo(video)).toBe(false);\n  });\n\n  it("returns true for significant video elements", () => {\n    const video = document.createElement("video");\n    (video as any).getBoundingClientRect = () => ({\n      width: 200,\n      height: 150,\n      left: 0,\n      top: 0,\n    });\n    video.src = "http://example.com/video.mp4";\n    expect(isSignificantVideo(video)).toBe(true);\n  });\n\n  it("returns true for iframe elements regardless of size", () => {\n    const iframe = document.createElement("iframe");\n    (iframe as any).getBoundingClientRect = () => ({\n      width: 0,\n      height: 0,\n      left: 0,\n      top: 0,\n    });\n    expect(isSignificantVideo(iframe)).toBe(true);\n  });\n});\n',
          },
          "tests/extension/popup.test.ts": {
            tests: [
              {
                id: "62",
                name: "Popup UI Tests Theme Handling applies dark theme when prefers-color-scheme is dark",
                location: { start: { column: 6, line: 83 } },
              },
              {
                id: "63",
                name: "Popup UI Tests Theme Handling applies light theme when prefers-color-scheme is light",
                location: { start: { column: 6, line: 105 } },
              },
              {
                id: "64",
                name: "Popup UI Tests Theme Handling updates logo for dark theme",
                location: { start: { column: 6, line: 127 } },
              },
              {
                id: "65",
                name: "Popup UI Tests Theme Handling updates logo for light theme",
                location: { start: { column: 6, line: 138 } },
              },
              {
                id: "66",
                name: "Popup UI Tests Theme Handling handles missing logo element gracefully",
                location: { start: { column: 6, line: 149 } },
              },
              {
                id: "67",
                name: "Popup UI Tests Theme Handling handles logo with different src patterns",
                location: { start: { column: 6, line: 157 } },
              },
              {
                id: "68",
                name: "Popup UI Tests Status Message sets a success message and clears it after a timeout",
                location: { start: { column: 6, line: 174 } },
              },
              {
                id: "69",
                name: "Popup UI Tests Status Message sets an error message with a tip",
                location: { start: { column: 6, line: 192 } },
              },
              {
                id: "70",
                name: "Popup UI Tests Status Message clears previous timeout when setting new status",
                location: { start: { column: 6, line: 204 } },
              },
              {
                id: "71",
                name: "Popup UI Tests Status Message handles custom duration for status messages",
                location: { start: { column: 6, line: 216 } },
              },
              {
                id: "72",
                name: "Popup UI Tests Toggle Button State updates toggle button to active state",
                location: { start: { column: 6, line: 237 } },
              },
              {
                id: "73",
                name: "Popup UI Tests Toggle Button State updates toggle button to inactive state",
                location: { start: { column: 6, line: 248 } },
              },
              {
                id: "74",
                name: "Popup UI Tests Toggle Button State handles custom button ID",
                location: { start: { column: 6, line: 259 } },
              },
              {
                id: "75",
                name: "Popup UI Tests Toggle Button State handles custom text and disabled state",
                location: { start: { column: 6, line: 271 } },
              },
              {
                id: "76",
                name: "Popup UI Tests Toggle Button State handles boolean state with custom button ID",
                location: { start: { column: 6, line: 281 } },
              },
              {
                id: "77",
                name: "Popup UI Tests History Rendering displays a message when no history is available",
                location: { start: { column: 6, line: 294 } },
              },
              {
                id: "78",
                name: "Popup UI Tests History Rendering renders history items correctly",
                location: { start: { column: 6, line: 308 } },
              },
              {
                id: "79",
                name: "Popup UI Tests History Rendering respects history limit parameter",
                location: { start: { column: 6, line: 339 } },
              },
              {
                id: "80",
                name: "Popup UI Tests History Rendering handles history items with missing optional fields",
                location: { start: { column: 6, line: 374 } },
              },
              {
                id: "81",
                name: "Popup UI Tests History Rendering handles storage error gracefully",
                location: { start: { column: 6, line: 393 } },
              },
              {
                id: "82",
                name: "Popup UI Tests Configuration Management loads configuration from storage",
                location: { start: { column: 6, line: 411 } },
              },
              {
                id: "83",
                name: "Popup UI Tests Configuration Management falls back to storage when runtime error occurs",
                location: { start: { column: 6, line: 424 } },
              },
              {
                id: "84",
                name: "Popup UI Tests Configuration Management updates download directory display",
                location: { start: { column: 6, line: 442 } },
              },
              {
                id: "85",
                name: "Popup UI Tests Configuration Management falls back to storage for download directory",
                location: { start: { column: 6, line: 458 } },
              },
              {
                id: "86",
                name: "Popup UI Tests Configuration Management updates port display",
                location: { start: { column: 6, line: 478 } },
              },
              {
                id: "87",
                name: "Popup UI Tests Configuration Management handles missing port display element",
                location: { start: { column: 6, line: 494 } },
              },
              {
                id: "88",
                name: "Popup UI Tests Configuration Management shows config error if present",
                location: { start: { column: 6, line: 501 } },
              },
              {
                id: "89",
                name: "Popup UI Tests Configuration Management handles missing config error element",
                location: { start: { column: 6, line: 520 } },
              },
              {
                id: "90",
                name: "Popup UI Tests Configuration Management handles no config error in storage",
                location: { start: { column: 6, line: 527 } },
              },
              {
                id: "91",
                name: "Popup UI Tests List Item Creation creates error list item",
                location: { start: { column: 6, line: 546 } },
              },
              {
                id: "92",
                name: "Popup UI Tests List Item Creation creates generic list item",
                location: { start: { column: 6, line: 566 } },
              },
              {
                id: "93",
                name: "Popup UI Tests List Item Creation creates queued list item",
                location: { start: { column: 6, line: 577 } },
              },
              {
                id: "94",
                name: "Popup UI Tests List Item Creation creates active list item",
                location: { start: { column: 6, line: 586 } },
              },
              {
                id: "95",
                name: "Popup UI Tests List Item Creation creates active list item with error status",
                location: { start: { column: 6, line: 600 } },
              },
              {
                id: "96",
                name: "Popup UI Tests Drag and Drop Handlers handles drag start",
                location: { start: { column: 6, line: 615 } },
              },
              {
                id: "97",
                name: "Popup UI Tests Drag and Drop Handlers handles drag over",
                location: { start: { column: 6, line: 643 } },
              },
              {
                id: "98",
                name: "Popup UI Tests Drag and Drop Handlers handles drag leave",
                location: { start: { column: 6, line: 668 } },
              },
              {
                id: "99",
                name: "Popup UI Tests Drag and Drop Handlers handles drop",
                location: { start: { column: 6, line: 681 } },
              },
              {
                id: "100",
                name: "Popup UI Tests Drag and Drop Handlers handles drop with null dragSrcIndex",
                location: { start: { column: 6, line: 711 } },
              },
              {
                id: "101",
                name: "Popup UI Tests Drag and Drop Handlers handles drag end",
                location: { start: { column: 6, line: 732 } },
              },
              {
                id: "102",
                name: "Popup UI Tests Download Status Rendering renders download status with active downloads",
                location: { start: { column: 6, line: 747 } },
              },
              {
                id: "103",
                name: "Popup UI Tests Download Status Rendering renders empty download status",
                location: { start: { column: 6, line: 766 } },
              },
              {
                id: "104",
                name: "Popup UI Tests Download Status Rendering renders paused downloads with resume button",
                location: { start: { column: 6, line: 780 } },
              },
              {
                id: "105",
                name: "Popup UI Tests Download Status Rendering renders queued downloads",
                location: { start: { column: 6, line: 799 } },
              },
              {
                id: "106",
                name: "Popup UI Tests Download Status Rendering handles missing download status container",
                location: { start: { column: 6, line: 811 } },
              },
              {
                id: "107",
                name: "Popup UI Tests Edge Cases and Error Handling handles missing status element",
                location: { start: { column: 6, line: 822 } },
              },
              {
                id: "108",
                name: "Popup UI Tests Edge Cases and Error Handling handles missing toggle button",
                location: { start: { column: 6, line: 829 } },
              },
              {
                id: "109",
                name: "Popup UI Tests Edge Cases and Error Handling handles missing history container",
                location: { start: { column: 6, line: 836 } },
              },
              {
                id: "110",
                name: "Popup UI Tests Edge Cases and Error Handling handles storage errors gracefully",
                location: { start: { column: 6, line: 843 } },
              },
              {
                id: "111",
                name: "Popup UI Tests Edge Cases and Error Handling handles missing download directory display element",
                location: { start: { column: 6, line: 855 } },
              },
              {
                id: "112",
                name: "Popup Error Handling and Edge Cases DOM manipulation error handling should handle missing elements gracefully",
                location: { start: { column: 6, line: 871 } },
              },
              {
                id: "113",
                name: "Popup Error Handling and Edge Cases DOM manipulation error handling should handle element without setAttribute method",
                location: { start: { column: 6, line: 887 } },
              },
              {
                id: "114",
                name: "Popup Error Handling and Edge Cases DOM manipulation error handling should handle missing classList gracefully",
                location: { start: { column: 6, line: 903 } },
              },
              {
                id: "115",
                name: "Popup Error Handling and Edge Cases Theme handling edge cases should handle theme toggle with missing elements",
                location: { start: { column: 6, line: 915 } },
              },
              {
                id: "116",
                name: "Popup Error Handling and Edge Cases Theme handling edge cases should handle theme toggle button without addEventListener",
                location: { start: { column: 6, line: 930 } },
              },
              {
                id: "117",
                name: "Popup Error Handling and Edge Cases Theme handling edge cases should handle logo switching with missing logo elements",
                location: { start: { column: 6, line: 945 } },
              },
              {
                id: "118",
                name: "Popup Error Handling and Edge Cases Drag and drop edge cases should handle dragstart event with missing dataTransfer",
                location: { start: { column: 6, line: 963 } },
              },
              {
                id: "119",
                name: "Popup Error Handling and Edge Cases Drag and drop edge cases should handle dragstart event with dataTransfer without setData method",
                location: { start: { column: 6, line: 973 } },
              },
              {
                id: "120",
                name: "Popup Error Handling and Edge Cases Drag and drop edge cases should handle drop event with missing dataTransfer",
                location: { start: { column: 6, line: 987 } },
              },
              {
                id: "121",
                name: "Popup Error Handling and Edge Cases Drag and drop edge cases should handle drop event with dataTransfer without getData method",
                location: { start: { column: 6, line: 999 } },
              },
              {
                id: "122",
                name: "Popup Error Handling and Edge Cases Event listener edge cases should handle addEventListener with null element",
                location: { start: { column: 6, line: 1017 } },
              },
              {
                id: "123",
                name: "Popup Error Handling and Edge Cases Event listener edge cases should handle addEventListener with element without addEventListener method",
                location: { start: { column: 6, line: 1026 } },
              },
              {
                id: "124",
                name: "Popup Error Handling and Edge Cases Event listener edge cases should handle removeEventListener with null element",
                location: { start: { column: 6, line: 1036 } },
              },
              {
                id: "125",
                name: "Popup Error Handling and Edge Cases Event listener edge cases should handle removeEventListener with element without removeEventListener method",
                location: { start: { column: 6, line: 1045 } },
              },
              {
                id: "126",
                name: "Popup Error Handling and Edge Cases URL and data validation edge cases should handle invalid URLs gracefully",
                location: { start: { column: 6, line: 1060 } },
              },
              {
                id: "127",
                name: "Popup Error Handling and Edge Cases URL and data validation edge cases should handle malformed JSON data gracefully",
                location: { start: { column: 6, line: 1073 } },
              },
              {
                id: "128",
                name: "Popup Error Handling and Edge Cases URL and data validation edge cases should handle non-string data types gracefully",
                location: { start: { column: 6, line: 1096 } },
              },
              {
                id: "129",
                name: "Popup Error Handling and Edge Cases Element attribute and property edge cases should handle element without setAttribute method",
                location: { start: { column: 6, line: 1111 } },
              },
              {
                id: "130",
                name: "Popup Error Handling and Edge Cases Element attribute and property edge cases should handle element without getAttribute method",
                location: { start: { column: 6, line: 1121 } },
              },
              {
                id: "131",
                name: "Popup Error Handling and Edge Cases Element attribute and property edge cases should handle element without classList property",
                location: { start: { column: 6, line: 1133 } },
              },
              {
                id: "132",
                name: "Popup Error Handling and Edge Cases Element attribute and property edge cases should handle element without style property",
                location: { start: { column: 6, line: 1143 } },
              },
              {
                id: "133",
                name: "Popup Error Handling and Edge Cases Popup function edge cases should handle setStatus with missing status element",
                location: { start: { column: 6, line: 1155 } },
              },
              {
                id: "134",
                name: "Popup Error Handling and Edge Cases Popup function edge cases should handle updateToggleButtonState with missing button",
                location: { start: { column: 6, line: 1167 } },
              },
              {
                id: "135",
                name: "Popup Error Handling and Edge Cases Popup function edge cases should handle loadAndRenderHistory with missing container",
                location: { start: { column: 6, line: 1179 } },
              },
            ],
            source:
              'import { jest } from "@jest/globals";\n\n// Mock Chrome API\nglobal.chrome = {\n  storage: {\n    local: {\n      get: jest.fn(),\n      set: jest.fn(),\n    },\n  },\n  runtime: {\n    lastError: null,\n    sendMessage: jest.fn(),\n    openOptionsPage: jest.fn(),\n  },\n} as any;\n\n// Mock DragEvent for test environment\nglobal.DragEvent = class DragEvent extends Event {\n  dataTransfer: DataTransfer | null = null;\n  constructor(type: string, init?: any) {\n    super(type, init);\n    this.dataTransfer = init?.dataTransfer || null;\n  }\n} as any;\n\n// Import after mocks\nimport {\n  setStatus,\n  applyPopupTheme,\n  updateToggleButtonState,\n  loadAndRenderHistory,\n  loadConfig,\n  updateDownloadDirDisplay,\n  updatePortDisplay,\n  showConfigErrorIfPresent,\n  createErrorListItem,\n  createGenericListItem,\n  createQueuedListItem,\n  createActiveListItem,\n  handleDragStart,\n  handleDragOver,\n  handleDragLeave,\n  handleDrop,\n  handleDragEnd,\n  renderDownloadStatus,\n} from "../../extension/src/popup";\nimport {\n  getServerPort,\n  getClientPort,\n  getPortRange,\n} from "../../extension/src/constants";\n\ndescribe("Popup UI Tests", () => {\n  beforeEach(() => {\n    // Clear DOM\n    document.body.innerHTML =\n      \'<' +
              'div id="status"><' +
              "/div>' +\n      '<" +
              'button id="toggle-enhanced-download-button"><' +
              "/button>' +\n      '<" +
              'div id="history-items"><' +
              "/div>' +\n      '<" +
              'div id="download-dir-display"><' +
              "/div>' +\n      '<" +
              'div id="server-port-display"><' +
              "/div>' +\n      '<" +
              'div id="config-error-display" style="display: none;"><' +
              "/div>' +\n      '<" +
              'div id="download-status"><' +
              "/div>' +\n      '<" +
              'div id="download-queue"><' +
              "/div>' +\n      '<" +
              'img id="header-logo" src="icon48.png" />\';\n\n    // Reset mocks\n    jest.clearAllMocks();\n    (chrome.storage.local.get as jest.Mock).mockImplementation(\n      (keys: any, callback: any) => {\n        if (callback) callback({});\n      }\n    );\n    (chrome.runtime.sendMessage as jest.Mock).mockImplementation(\n      (message: any, callback: any) => {\n        if (callback) callback({});\n      }\n    );\n  });\n\n  describe("Theme Handling", () => {\n    it("applies dark theme when prefers-color-scheme is dark", () => {\n      Object.defineProperty(window, "matchMedia", {\n        writable: true,\n        value: jest.fn().mockImplementation((query: any) => ({\n          matches: query === "(prefers-color-scheme: dark)",\n          media: query,\n          onchange: null,\n          addListener: jest.fn(),\n          removeListener: jest.fn(),\n          addEventListener: jest.fn(),\n          removeEventListener: jest.fn(),\n          dispatchEvent: jest.fn(),\n        })),\n      });\n\n      applyPopupTheme(true);\n\n      expect(document.documentElement.classList.contains("dark-theme")).toBe(\n        true\n      );\n    });\n\n    it("applies light theme when prefers-color-scheme is light", () => {\n      Object.defineProperty(window, "matchMedia", {\n        writable: true,\n        value: jest.fn().mockImplementation((query: any) => ({\n          matches: query === "(prefers-color-scheme: light)",\n          media: query,\n          onchange: null,\n          addListener: jest.fn(),\n          removeListener: jest.fn(),\n          addEventListener: jest.fn(),\n          removeEventListener: jest.fn(),\n          dispatchEvent: jest.fn(),\n        })),\n      });\n\n      applyPopupTheme(false);\n\n      expect(document.documentElement.classList.contains("dark-theme")).toBe(\n        false\n      );\n    });\n\n    it("updates logo for dark theme", () => {\n      const logoElement = document.getElementById(\n        "header-logo"\n      ) as HTMLImageElement;\n      logoElement.src = "icon48.png";\n\n      applyPopupTheme(true);\n\n      expect(logoElement.src).toContain("darkicon48.png");\n    });\n\n    it("updates logo for light theme", () => {\n      const logoElement = document.getElementById(\n        "header-logo"\n      ) as HTMLImageElement;\n      logoElement.src = "darkicon48.png";\n\n      applyPopupTheme(false);\n\n      expect(logoElement.src).toContain("icon48.png");\n    });\n\n    it("handles missing logo element gracefully", () => {\n      document.getElementById("header-logo")?.remove();\n\n      // Should not throw\n      expect(() => applyPopupTheme(true)).not.toThrow();\n      expect(() => applyPopupTheme(false)).not.toThrow();\n    });\n\n    it("handles logo with different src patterns", () => {\n      const logoElement = document.getElementById(\n        "header-logo"\n      ) as HTMLImageElement;\n      logoElement.src = "some-other-icon.png";\n\n      // Should change "icon" to "darkicon" when applying dark theme\n      applyPopupTheme(true);\n      expect(logoElement.src).toContain("some-other-darkicon.png");\n\n      // Should change "darkicon" back to "icon" when applying light theme\n      applyPopupTheme(false);\n      expect(logoElement.src).toContain("some-other-icon.png");\n    });\n  });\n\n  describe("Status Message", () => {\n    it("sets a success message and clears it after a timeout", () => {\n      jest.useFakeTimers();\n\n      setStatus("Success message");\n\n      const statusElement = document.getElementById("status");\n      expect(statusElement?.textContent).toBe("Success message");\n      expect(statusElement?.className).toContain("status-success");\n\n      // Fast-forward time and run all timers\n      jest.runAllTimers();\n\n      expect(statusElement?.textContent).toBe("");\n      expect(statusElement?.className).toBe("");\n\n      jest.useRealTimers();\n    });\n\n    it("sets an error message with a tip", () => {\n      setStatus("Error message", true);\n\n      const statusElement = document.getElementById("status");\n      expect(statusElement?.textContent).toContain("Error message");\n      expect(statusElement?.className).toContain("status-error");\n      expect(statusElement?.querySelector(".error-tip")).toBeTruthy();\n      expect(statusElement?.querySelector(".error-tip")?.textContent).toContain(\n        "Tip: check your network connection and try again"\n      );\n    });\n\n    it("clears previous timeout when setting new status", () => {\n      jest.useFakeTimers();\n\n      const timeout1 = setStatus("First message");\n      const timeout2 = setStatus("Second message");\n\n      expect(timeout1).not.toBe(timeout2);\n\n      jest.runAllTimers();\n      jest.useRealTimers();\n    });\n\n    it("handles custom duration for status messages", () => {\n      jest.useFakeTimers();\n\n      setStatus("Custom duration message", false, 5000);\n\n      const statusElement = document.getElementById("status");\n      expect(statusElement?.textContent).toBe("Custom duration message");\n\n      // Should still be visible after 3000ms (default duration)\n      jest.advanceTimersByTime(3000);\n      expect(statusElement?.textContent).toBe("Custom duration message");\n\n      // Should be cleared after 5000ms\n      jest.advanceTimersByTime(2000);\n      expect(statusElement?.textContent).toBe("");\n\n      jest.useRealTimers();\n    });\n  });\n\n  describe("Toggle Button State", () => {\n    it("updates toggle button to active state", () => {\n      updateToggleButtonState(true);\n\n      const button = document.getElementById(\n        "toggle-enhanced-download-button"\n      ) as HTMLButtonElement;\n      expect(button?.classList.contains("active")).toBe(true);\n      expect(button?.textContent).toContain("HIDE");\n      expect(button?.getAttribute("aria-pressed")).toBe("true");\n    });\n\n    it("updates toggle button to inactive state", () => {\n      updateToggleButtonState(false);\n\n      const button = document.getElementById(\n        "toggle-enhanced-download-button"\n      ) as HTMLButtonElement;\n      expect(button?.classList.contains("active")).toBe(false);\n      expect(button?.textContent).toContain("SHOW");\n      expect(button?.getAttribute("aria-pressed")).toBe("false");\n    });\n\n    it("handles custom button ID", () => {\n      document.body.innerHTML += \'<' +
              'button id="custom-button"><' +
              '/button>\';\n\n      updateToggleButtonState(true, "custom-button");\n\n      const button = document.getElementById(\n        "custom-button"\n      ) as HTMLButtonElement;\n      expect(button?.classList.contains("active")).toBe(true);\n      expect(button?.textContent).toContain("HIDE");\n    });\n\n    it("handles custom text and disabled state", () => {\n      updateToggleButtonState("Custom Text", "toggle-enhanced-download-button");\n\n      const button = document.getElementById(\n        "toggle-enhanced-download-button"\n      ) as HTMLButtonElement;\n      expect(button?.textContent).toBe("Custom Text");\n      expect(button?.disabled).toBe(true);\n    });\n\n    it("handles boolean state with custom button ID", () => {\n      document.body.innerHTML += \'<' +
              'button id="another-button"><' +
              '/button>\';\n\n      updateToggleButtonState(true, "another-button");\n\n      const button = document.getElementById(\n        "another-button"\n      ) as HTMLButtonElement;\n      expect(button?.classList.contains("active")).toBe(true);\n    });\n  });\n\n  describe("History Rendering", () => {\n    it("displays a message when no history is available", () => {\n      (chrome.storage.local.get as jest.Mock).mockImplementation(\n        (keys: any, callback: any) => {\n          callback({ downloadHistory: [] });\n        }\n      );\n\n      loadAndRenderHistory();\n\n      const container = document.getElementById("history-items");\n      const emptyMessage = container?.querySelector(".history-empty");\n      expect(emptyMessage?.textContent).toContain("No download history");\n    });\n\n    it("renders history items correctly", () => {\n      const history = [\n        {\n          id: "1",\n          page_title: "Test Video 1",\n          status: "completed",\n          timestamp: new Date().toISOString(),\n        },\n        {\n          id: "2",\n          page_title: "Test Video 2",\n          status: "failed",\n          timestamp: new Date().toISOString(),\n        },\n      ];\n\n      (chrome.storage.local.get as jest.Mock).mockImplementation(\n        (keys: any, callback: any) => {\n          callback({ downloadHistory: history });\n        }\n      );\n\n      loadAndRenderHistory();\n\n      const container = document.getElementById("history-items");\n      const items = container?.querySelectorAll(".history-item");\n      expect(items?.length).toBe(2);\n      expect(items?.[0]?.textContent).toContain("Test Video 1");\n      expect(items?.[1]?.textContent).toContain("Test Video 2");\n    });\n\n    it("respects history limit parameter", () => {\n      const history = [\n        {\n          id: "1",\n          page_title: "Video 1",\n          status: "completed",\n          timestamp: new Date().toISOString(),\n        },\n        {\n          id: "2",\n          page_title: "Video 2",\n          status: "completed",\n          timestamp: new Date().toISOString(),\n        },\n        {\n          id: "3",\n          page_title: "Video 3",\n          status: "completed",\n          timestamp: new Date().toISOString(),\n        },\n      ];\n\n      (chrome.storage.local.get as jest.Mock).mockImplementation(\n        (keys: any, callback: any) => {\n          callback({ downloadHistory: history });\n        }\n      );\n\n      loadAndRenderHistory("history-items", 2);\n\n      const container = document.getElementById("history-items");\n      const items = container?.querySelectorAll(".history-item");\n      expect(items?.length).toBe(2);\n    });\n\n    it("handles history items with missing optional fields", () => {\n      const history = [\n        { id: "1", page_title: "Video 1", status: "completed" }, // No timestamp\n        { id: "2", status: "failed" }, // No page_title or timestamp\n      ];\n\n      (chrome.storage.local.get as jest.Mock).mockImplementation(\n        (keys: any, callback: any) => {\n          callback({ downloadHistory: history });\n        }\n      );\n\n      loadAndRenderHistory();\n\n      const container = document.getElementById("history-items");\n      const items = container?.querySelectorAll(".history-item");\n      expect(items?.length).toBe(2);\n    });\n\n    it("handles storage error gracefully", () => {\n      (chrome.storage.local.get as jest.Mock).mockImplementation(\n        (keys: any, callback: any) => {\n          chrome.runtime.lastError = { message: "Storage error" };\n          callback({});\n        }\n      );\n\n      // Should not throw\n      expect(() => loadAndRenderHistory()).not.toThrow();\n    });\n  });\n\n  describe("Configuration Management", () => {\n    beforeEach(() => {\n      chrome.runtime.lastError = null;\n    });\n\n    it("loads configuration from storage", async () => {\n      const mockConfig = { download_dir: "/test/path", server_port: 5000 };\n      (chrome.runtime.sendMessage as jest.Mock).mockImplementation(\n        (message: any, callback: any) => {\n          chrome.runtime.lastError = null;\n          callback({ serverConfig: mockConfig });\n        }\n      );\n\n      const config = await loadConfig();\n      expect(config).toEqual(mockConfig);\n    });\n\n    it("falls back to storage when runtime error occurs", async () => {\n      const mockConfig = { download_dir: "/fallback/path" };\n      (chrome.runtime.sendMessage as jest.Mock).mockImplementation(\n        (message: any, callback: any) => {\n          chrome.runtime.lastError = { message: "Runtime error" };\n          callback({});\n        }\n      );\n      (chrome.storage.local.get as jest.Mock).mockImplementation(\n        (keys: any, callback: any) => {\n          callback({ extensionConfig: mockConfig });\n        }\n      );\n\n      const config = await loadConfig();\n      expect(config).toEqual(mockConfig);\n    });\n\n    it("updates download directory display", async () => {\n      const mockConfig = { download_dir: "/test/path" };\n      (chrome.runtime.sendMessage as jest.Mock).mockImplementation(\n        (message: any, callback: any) => {\n          chrome.runtime.lastError = null;\n          callback({ serverConfig: mockConfig });\n        }\n      );\n\n      await updateDownloadDirDisplay();\n      await new Promise((r) => setTimeout(r, 0));\n\n      const display = document.getElementById("download-dir-display");\n      expect(display?.textContent).toBe("Saving to: /test/path");\n    });\n\n    it("falls back to storage for download directory", async () => {\n      (chrome.runtime.sendMessage as jest.Mock).mockImplementation(\n        (message: any, callback: any) => {\n          chrome.runtime.lastError = { message: "Runtime error" };\n          callback({});\n        }\n      );\n      (chrome.storage.local.get as jest.Mock).mockImplementation(\n        (keys: any, callback: any) => {\n          callback({ extensionConfig: { download_dir: "/storage/path" } });\n        }\n      );\n\n      await updateDownloadDirDisplay();\n      await new Promise((r) => setTimeout(r, 0));\n\n      const display = document.getElementById("download-dir-display");\n      expect(display?.textContent).toBe("Saving to: /storage/path");\n    });\n\n    it("updates port display", async () => {\n      const mockConfig = { server_port: 5000 };\n      (chrome.runtime.sendMessage as jest.Mock).mockImplementation(\n        (message: any, callback: any) => {\n          chrome.runtime.lastError = null;\n          callback({ serverConfig: mockConfig });\n        }\n      );\n\n      await updatePortDisplay();\n      await new Promise((r) => setTimeout(r, 0));\n\n      const display = document.getElementById("server-port-display");\n      expect(display?.textContent).toBe("Server Port: 5000");\n    });\n\n    it("handles missing port display element", async () => {\n      document.getElementById("server-port-display")?.remove();\n\n      // Should not throw\n      await expect(updatePortDisplay()).resolves.not.toThrow();\n    });\n\n    it("shows config error if present", () => {\n      const errorDiv = document.getElementById(\n        "config-error-display"\n      ) as HTMLDivElement;\n      (chrome.storage.local.get as jest.Mock).mockImplementation(\n        (keys: any, callback: any) => {\n          callback({ configError: "Configuration error" });\n        }\n      );\n\n      showConfigErrorIfPresent();\n\n      // The function is async, so we need to wait for the callback\n      setTimeout(() => {\n        expect(errorDiv?.style.display).toBe("block");\n        expect(errorDiv?.textContent).toContain("Configuration error");\n      }, 0);\n    });\n\n    it("handles missing config error element", () => {\n      document.getElementById("config-error-display")?.remove();\n\n      // Should not throw\n      expect(() => showConfigErrorIfPresent()).not.toThrow();\n    });\n\n    it("handles no config error in storage", () => {\n      const errorDiv = document.getElementById(\n        "config-error-display"\n      ) as HTMLDivElement;\n      (chrome.storage.local.get as jest.Mock).mockImplementation(\n        (keys: any, callback: any) => {\n          callback({}); // No configError\n        }\n      );\n\n      showConfigErrorIfPresent();\n\n      setTimeout(() => {\n        expect(errorDiv?.style.display).toBe("none");\n      }, 0);\n    });\n  });\n\n  describe("List Item Creation", () => {\n    it("creates error list item", () => {\n      const item = createErrorListItem("test-id", {\n        filename: "test.mp4",\n        errorInfo: {\n          type: "network",\n          message: "Connection failed",\n          original: "Network error",\n        },\n      });\n\n      expect(item.tagName).toBe("LI");\n      expect(item.classList.contains("status-network")).toBe(true);\n      expect(item.classList.contains("severity-network")).toBe(true);\n      expect(item.textContent).toContain("test.mp4");\n      expect(item.textContent).toContain("Connection failed");\n      // Note: help-link might not be present in all implementations\n      // expect(item.querySelector(".help-link")).toBeTruthy();\n      // expect(item.querySelector(".help-link")?.textContent).toBe("Help");\n    });\n\n    it("creates generic list item", () => {\n      const item = createGenericListItem("test-id", {\n        status: "paused",\n      });\n\n      expect(item.tagName).toBe("LI");\n      expect(item.classList.contains("status-paused")).toBe(true);\n      expect(item.textContent).toContain("paused");\n      expect(item.querySelector("button")?.textContent).toBe("Resume");\n    });\n\n    it("creates queued list item", () => {\n      const item = createQueuedListItem({ id: "test-id" });\n\n      expect(item.tagName).toBe("LI");\n      expect(item.classList.contains("queued-item")).toBe(true);\n      expect(item.textContent).toContain("test-id");\n      expect(item.querySelector("button")?.textContent).toBe("Cancel");\n    });\n\n    it("creates active list item", () => {\n      const item = createActiveListItem("test-id", {\n        status: "downloading",\n        progress: 50,\n        filename: "test.mp4",\n      });\n\n      expect(item.tagName).toBe("LI");\n      expect(item.classList.contains("active-item")).toBe(true);\n      expect(item.textContent).toContain("test.mp4");\n      expect(item.textContent).toContain("50%");\n      expect(item.querySelector("button")?.textContent).toBe("Pause");\n    });\n\n    it("creates active list item with error status", () => {\n      const item = createActiveListItem("test-id", {\n        status: "error",\n        progress: 0,\n        filename: "test.mp4",\n        error: "Download failed",\n      });\n\n      expect(item.classList.contains("status-error")).toBe(true);\n      // The error message might be displayed differently in the actual implementation\n      expect(item.textContent).toContain("test.mp4");\n    });\n  });\n\n  describe("Drag and Drop Handlers", () => {\n    it("handles drag start", () => {\n      // Create a proper DOM structure for drag testing\n      const container = document.createElement("div");\n      const li = document.createElement("li");\n      li.dataset.downloadId = "test-id";\n      container.appendChild(li);\n      document.body.appendChild(container);\n\n      const event = new DragEvent("dragstart");\n      const mockSetData = jest.fn();\n      Object.defineProperty(event, "dataTransfer", {\n        value: {\n          setData: mockSetData,\n          effectAllowed: "",\n        },\n        writable: true,\n      });\n      Object.defineProperty(event, "currentTarget", {\n        value: li,\n        writable: true,\n      });\n\n      handleDragStart(event);\n\n      expect(mockSetData).toHaveBeenCalledWith("text/plain", "test-id");\n      expect(event.dataTransfer?.effectAllowed).toBe("move");\n    });\n\n    it("handles drag over", () => {\n      const li = document.createElement("li");\n      const event = new DragEvent("dragover");\n      const mockPreventDefault = jest.fn();\n      Object.defineProperty(event, "preventDefault", {\n        value: mockPreventDefault,\n        writable: true,\n      });\n      Object.defineProperty(event, "currentTarget", {\n        value: li,\n        writable: true,\n      });\n      Object.defineProperty(event, "dataTransfer", {\n        value: {\n          dropEffect: "",\n        },\n        writable: true,\n      });\n\n      handleDragOver(event);\n\n      expect(mockPreventDefault).toHaveBeenCalled();\n      expect(event.dataTransfer?.dropEffect).toBe("move");\n    });\n\n    it("handles drag leave", () => {\n      const li = document.createElement("li");\n      li.classList.add("drag-over");\n      const event = new DragEvent("dragleave");\n      Object.defineProperty(event, "currentTarget", {\n        value: li,\n        writable: true,\n      });\n\n      handleDragLeave(event);\n      expect(li.classList.contains("drag-over")).toBe(false);\n    });\n\n    it("handles drop", () => {\n      // Create proper DOM structure with parent and siblings\n      const container = document.createElement("div");\n      const li1 = document.createElement("li");\n      li1.dataset.downloadId = "id1";\n      const li2 = document.createElement("li");\n      li2.dataset.downloadId = "id2";\n      container.appendChild(li1);\n      container.appendChild(li2);\n      document.body.appendChild(container);\n\n      const event = new DragEvent("drop");\n      const mockPreventDefault = jest.fn();\n      Object.defineProperty(event, "preventDefault", {\n        value: mockPreventDefault,\n        writable: true,\n      });\n      Object.defineProperty(event, "currentTarget", {\n        value: li2,\n        writable: true,\n      });\n\n      // Mock the global dragSrcIndex\n      (global as any).dragSrcIndex = 0;\n\n      handleDrop(event);\n\n      expect(mockPreventDefault).toHaveBeenCalled();\n    });\n\n    it("handles drop with null dragSrcIndex", () => {\n      // Setup DOM structure and event\n      const container = document.createElement("div");\n      const li = document.createElement("li");\n      container.appendChild(li);\n      document.body.appendChild(container);\n      const event = new DragEvent("drop");\n      const mockPreventDefault = jest.fn();\n      Object.defineProperty(event, "preventDefault", {\n        value: mockPreventDefault,\n        writable: true,\n      });\n      Object.defineProperty(event, "currentTarget", {\n        value: li,\n        writable: true,\n      });\n      (global as any).dragSrcIndex = null;\n      // Should not throw even with null dragSrcIndex\n      expect(() => handleDrop(event)).not.toThrow();\n    });\n\n    it("handles drag end", () => {\n      const li = document.createElement("li");\n      li.classList.add("dragging");\n      const event = new DragEvent("dragend");\n      Object.defineProperty(event, "currentTarget", {\n        value: li,\n        writable: true,\n      });\n\n      handleDragEnd(event);\n      expect(li.classList.contains("dragging")).toBe(false);\n    });\n  });\n\n  describe("Download Status Rendering", () => {\n    it("renders download status with active downloads", () => {\n      const data = {\n        active: {\n          "test-id": {\n            status: "downloading",\n            progress: 75,\n            filename: "test.mp4",\n          },\n        },\n        queue: ["queued-id"],\n      };\n\n      renderDownloadStatus(data);\n\n      const statusContainer = document.getElementById("download-status");\n      expect(statusContainer?.children.length).toBeGreaterThan(0);\n      expect(statusContainer?.textContent).toContain("Active Downloads");\n    });\n\n    it("renders empty download status", () => {\n      const data = {\n        active: {},\n        queue: [],\n      };\n\n      renderDownloadStatus(data);\n\n      const statusContainer = document.getElementById("download-status");\n      expect(statusContainer?.textContent).toContain(\n        "No active or queued downloads"\n      );\n    });\n\n    it("renders paused downloads with resume button", () => {\n      const data = {\n        active: {\n          "test-id": {\n            status: "paused",\n            progress: 50,\n            filename: "test.mp4",\n          },\n        },\n        queue: [],\n      };\n\n      renderDownloadStatus(data);\n\n      const statusContainer = document.getElementById("download-status");\n      expect(statusContainer?.textContent).toContain("paused");\n      expect(statusContainer?.textContent).toContain("Resume");\n    });\n\n    it("renders queued downloads", () => {\n      const data = {\n        active: {},\n        queue: ["queued-id-1", "queued-id-2"],\n      };\n\n      renderDownloadStatus(data);\n\n      const statusContainer = document.getElementById("download-status");\n      expect(statusContainer?.textContent).toContain("Queued Downloads");\n    });\n\n    it("handles missing download status container", () => {\n      document.getElementById("download-status")?.remove();\n\n      const data = { active: {}, queue: [] };\n\n      // Should not throw\n      expect(() => renderDownloadStatus(data)).not.toThrow();\n    });\n  });\n\n  describe("Edge Cases and Error Handling", () => {\n    it("handles missing status element", () => {\n      document.getElementById("status")?.remove();\n\n      // Should not throw\n      expect(() => setStatus("test")).not.toThrow();\n    });\n\n    it("handles missing toggle button", () => {\n      document.getElementById("toggle-enhanced-download-button")?.remove();\n\n      // Should not throw\n      expect(() => updateToggleButtonState(true)).not.toThrow();\n    });\n\n    it("handles missing history container", () => {\n      document.getElementById("history-items")?.remove();\n\n      // Should not throw\n      expect(() => loadAndRenderHistory("nonexistent-container")).not.toThrow();\n    });\n\n    it("handles storage errors gracefully", async () => {\n      (chrome.storage.local.get as jest.Mock).mockImplementation(\n        (keys: any, callback: any) => {\n          chrome.runtime.lastError = { message: "Storage error" };\n          callback({});\n        }\n      );\n\n      // Should not throw\n      await expect(loadConfig()).resolves.not.toThrow();\n    });\n\n    it("handles missing download directory display element", async () => {\n      document.getElementById("download-dir-display")?.remove();\n\n      // Should not throw\n      await expect(updateDownloadDirDisplay()).resolves.not.toThrow();\n    });\n  });\n});\n\ndescribe("Popup Error Handling and Edge Cases", () => {\n  beforeEach(() => {\n    document.body.innerHTML = "";\n    jest.clearAllMocks();\n  });\n\n  describe("DOM manipulation error handling", () => {\n    it("should handle missing elements gracefully", () => {\n      // Mock missing elements\n      const originalQuerySelector = document.querySelector;\n      document.querySelector = jest.fn().mockReturnValue(null);\n\n      // This should not throw an error\n      expect(() => {\n        const element = document.querySelector(".test-element");\n        if (element) {\n          element.setAttribute("data-test", "value");\n        }\n      }).not.toThrow();\n\n      document.querySelector = originalQuerySelector;\n    });\n\n    it("should handle element without setAttribute method", () => {\n      const mockElement = { tagName: "DIV" } as any; // Mock element without setAttribute\n      const originalQuerySelector = document.querySelector;\n      document.querySelector = jest.fn().mockReturnValue(mockElement);\n\n      // This should not throw an error\n      expect(() => {\n        const element = document.querySelector(".test-element") as any;\n        if (element && typeof element.setAttribute === "function") {\n          element.setAttribute("data-test", "value");\n        }\n      }).not.toThrow();\n\n      document.querySelector = originalQuerySelector;\n    });\n\n    it("should handle missing classList gracefully", () => {\n      const mockElement = { tagName: "DIV" } as any; // Mock element without classList\n\n      expect(() => {\n        if (mockElement.classList) {\n          mockElement.classList.toggle("dark-theme");\n        }\n      }).not.toThrow();\n    });\n  });\n\n  describe("Theme handling edge cases", () => {\n    it("should handle theme toggle with missing elements", () => {\n      // Mock missing theme toggle button\n      const originalQuerySelector = document.querySelector;\n      document.querySelector = jest.fn().mockReturnValue(null);\n\n      expect(() => {\n        const themeToggle = document.querySelector("#theme-toggle");\n        if (themeToggle) {\n          themeToggle.addEventListener("click", () => {});\n        }\n      }).not.toThrow();\n\n      document.querySelector = originalQuerySelector;\n    });\n\n    it("should handle theme toggle button without addEventListener", () => {\n      const mockButton = { tagName: "BUTTON" } as any; // Mock button without addEventListener\n      const originalQuerySelector = document.querySelector;\n      document.querySelector = jest.fn().mockReturnValue(mockButton);\n\n      expect(() => {\n        const themeToggle = document.querySelector("#theme-toggle") as any;\n        if (themeToggle && typeof themeToggle.addEventListener === "function") {\n          themeToggle.addEventListener("click", () => {});\n        }\n      }).not.toThrow();\n\n      document.querySelector = originalQuerySelector;\n    });\n\n    it("should handle logo switching with missing logo elements", () => {\n      const originalQuerySelector = document.querySelector;\n      document.querySelector = jest.fn().mockReturnValue(null);\n\n      expect(() => {\n        const logo = document.querySelector(".logo") as HTMLImageElement;\n        if (logo) {\n          logo.src = logo.src.includes("dark")\n            ? "light-logo.png"\n            : "dark-logo.png";\n        }\n      }).not.toThrow();\n\n      document.querySelector = originalQuerySelector;\n    });\n  });\n\n  describe("Drag and drop edge cases", () => {\n    it("should handle dragstart event with missing dataTransfer", () => {\n      const mockEvent = { type: "dragstart" } as any; // Mock event without dataTransfer\n\n      expect(() => {\n        if (mockEvent.dataTransfer) {\n          mockEvent.dataTransfer.setData("text/plain", "test");\n        }\n      }).not.toThrow();\n    });\n\n    it("should handle dragstart event with dataTransfer without setData method", () => {\n      const mockDataTransfer = { effectAllowed: "copy" } as any; // Mock dataTransfer without setData\n      const mockEvent = { type: "dragstart", dataTransfer: mockDataTransfer };\n\n      expect(() => {\n        if (\n          mockEvent.dataTransfer &&\n          typeof mockEvent.dataTransfer.setData === "function"\n        ) {\n          mockEvent.dataTransfer.setData("text/plain", "test");\n        }\n      }).not.toThrow();\n    });\n\n    it("should handle drop event with missing dataTransfer", () => {\n      const mockEvent = { type: "drop" } as any; // Mock event without dataTransfer\n\n      expect(() => {\n        if (mockEvent.dataTransfer) {\n          const data = mockEvent.dataTransfer.getData("text/plain");\n          return data;\n        }\n        return null;\n      }).not.toThrow();\n    });\n\n    it("should handle drop event with dataTransfer without getData method", () => {\n      const mockDataTransfer = { effectAllowed: "copy" } as any; // Mock dataTransfer without getData\n      const mockEvent = { type: "drop", dataTransfer: mockDataTransfer };\n\n      expect(() => {\n        if (\n          mockEvent.dataTransfer &&\n          typeof mockEvent.dataTransfer.getData === "function"\n        ) {\n          const data = mockEvent.dataTransfer.getData("text/plain");\n          return data;\n        }\n        return null;\n      }).not.toThrow();\n    });\n  });\n\n  describe("Event listener edge cases", () => {\n    it("should handle addEventListener with null element", () => {\n      expect(() => {\n        const element = null as any;\n        if (element && typeof element.addEventListener === "function") {\n          element.addEventListener("click", () => {});\n        }\n      }).not.toThrow();\n    });\n\n    it("should handle addEventListener with element without addEventListener method", () => {\n      const mockElement = { tagName: "BUTTON" } as any; // Mock element without addEventListener\n\n      expect(() => {\n        if (mockElement && typeof mockElement.addEventListener === "function") {\n          mockElement.addEventListener("click", () => {});\n        }\n      }).not.toThrow();\n    });\n\n    it("should handle removeEventListener with null element", () => {\n      expect(() => {\n        const element = null as any;\n        if (element && typeof element.removeEventListener === "function") {\n          element.removeEventListener("click", () => {});\n        }\n      }).not.toThrow();\n    });\n\n    it("should handle removeEventListener with element without removeEventListener method", () => {\n      const mockElement = { tagName: "BUTTON" } as any; // Mock element without removeEventListener\n\n      expect(() => {\n        if (\n          mockElement &&\n          typeof mockElement.removeEventListener === "function"\n        ) {\n          mockElement.removeEventListener("click", () => {});\n        }\n      }).not.toThrow();\n    });\n  });\n\n  describe("URL and data validation edge cases", () => {\n    it("should handle invalid URLs gracefully", () => {\n      const invalidUrls = ["", null, undefined, "not-a-url", "ftp://invalid"];\n\n      invalidUrls.forEach((url) => {\n        expect(() => {\n          if (url && typeof url === "string" && url.startsWith("http")) {\n            return url;\n          }\n          return null;\n        }).not.toThrow();\n      });\n    });\n\n    it("should handle malformed JSON data gracefully", () => {\n      const malformedData = [\n        "",\n        null,\n        undefined,\n        "{invalid json}",\n        "[incomplete",\n      ];\n\n      malformedData.forEach((data) => {\n        expect(() => {\n          if (data && typeof data === "string") {\n            try {\n              return JSON.parse(data);\n            } catch (error) {\n              return null;\n            }\n          }\n          return null;\n        }).not.toThrow();\n      });\n    });\n\n    it("should handle non-string data types gracefully", () => {\n      const nonStringData = [123, true, false, {}, [], null, undefined];\n\n      nonStringData.forEach((data) => {\n        expect(() => {\n          if (typeof data === "string") {\n            return data.trim();\n          }\n          return "";\n        }).not.toThrow();\n      });\n    });\n  });\n\n  describe("Element attribute and property edge cases", () => {\n    it("should handle element without setAttribute method", () => {\n      const mockElement = { tagName: "BUTTON" } as any; // Mock element without setAttribute\n\n      expect(() => {\n        if (mockElement && typeof mockElement.setAttribute === "function") {\n          mockElement.setAttribute("data-test", "value");\n        }\n      }).not.toThrow();\n    });\n\n    it("should handle element without getAttribute method", () => {\n      const mockElement = { tagName: "BUTTON" } as any; // Mock element without getAttribute\n\n      expect(() => {\n        if (mockElement && typeof mockElement.getAttribute === "function") {\n          const value = mockElement.getAttribute("data-test");\n          return value;\n        }\n        return null;\n      }).not.toThrow();\n    });\n\n    it("should handle element without classList property", () => {\n      const mockElement = { tagName: "BUTTON" } as any; // Mock element without classList\n\n      expect(() => {\n        if (mockElement.classList) {\n          mockElement.classList.add("test-class");\n        }\n      }).not.toThrow();\n    });\n\n    it("should handle element without style property", () => {\n      const mockElement = { tagName: "BUTTON" } as any; // Mock element without style\n\n      expect(() => {\n        if (mockElement.style) {\n          mockElement.style.display = "none";\n        }\n      }).not.toThrow();\n    });\n  });\n\n  describe("Popup function edge cases", () => {\n    it("should handle setStatus with missing status element", () => {\n      // Mock missing status element\n      const originalGetElementById = document.getElementById;\n      document.getElementById = jest.fn().mockReturnValue(null) as any;\n\n      expect(() => {\n        setStatus("test message", false, 1000);\n      }).not.toThrow();\n\n      document.getElementById = originalGetElementById;\n    });\n\n    it("should handle updateToggleButtonState with missing button", () => {\n      // Mock missing button\n      const originalGetElementById = document.getElementById;\n      document.getElementById = jest.fn().mockReturnValue(null) as any;\n\n      expect(() => {\n        updateToggleButtonState("missing-button", true);\n      }).not.toThrow();\n\n      document.getElementById = originalGetElementById;\n    });\n\n    it("should handle loadAndRenderHistory with missing container", () => {\n      // Mock missing container\n      const originalGetElementById = document.getElementById;\n      document.getElementById = jest.fn().mockReturnValue(null) as any;\n\n      expect(() => {\n        loadAndRenderHistory("missing-container", 5);\n      }).not.toThrow();\n\n      document.getElementById = originalGetElementById;\n    });\n  });\n});\n',
          },
          "tests/extension/options.unit.test.ts": {
            tests: [
              {
                id: "136",
                name: "Options Page Tests Validation and Saving shows an error for an invalid port on form submission",
                location: { start: { column: 6, line: 90 } },
              },
              {
                id: "137",
                name: "Options Page Tests Validation and Saving saves valid settings and shows success on form submission",
                location: { start: { column: 6, line: 113 } },
              },
              {
                id: "138",
                name: "Options Page Tests Validation and Saving shows an error if saving to server fails",
                location: { start: { column: 6, line: 159 } },
              },
              {
                id: "139",
                name: "Options Page Tests Validation and Saving shows an error if chrome.runtime.lastError is set during save",
                location: { start: { column: 6, line: 187 } },
              },
              {
                id: "140",
                name: "Options Page Tests Folder Picker warns when folder picker API is not supported",
                location: { start: { column: 6, line: 216 } },
              },
              {
                id: "141",
                name: "Options Page Tests Folder Picker sets the input value on successful directory selection",
                location: { start: { column: 6, line: 232 } },
              },
              {
                id: "142",
                name: "Options Page Tests Folder Picker shows a warning on generic error during directory selection",
                location: { start: { column: 6, line: 248 } },
              },
              {
                id: "143",
                name: "Options Page Tests Server Actions sends a restart message when restart button is clicked",
                location: { start: { column: 6, line: 265 } },
              },
              {
                id: "144",
                name: "Options Page Tests Server Actions shows an error message when server restart fails",
                location: { start: { column: 6, line: 290 } },
              },
              {
                id: "145",
                name: "Options Page Tests Server Actions sends a clear history message when clear history button is clicked",
                location: { start: { column: 6, line: 315 } },
              },
              {
                id: "146",
                name: "Options Page Tests Tab Navigation switches tabs correctly on click",
                location: { start: { column: 6, line: 331 } },
              },
              {
                id: "147",
                name: "Options Page Tests Theme Management applyOptionsTheme should apply dark theme",
                location: { start: { column: 6, line: 359 } },
              },
              {
                id: "148",
                name: "Options Page Tests Theme Management applyOptionsTheme should apply light theme",
                location: { start: { column: 6, line: 366 } },
              },
              {
                id: "149",
                name: "Options Page Tests Theme Management applyOptionsTheme should use system preference when no theme specified",
                location: { start: { column: 6, line: 373 } },
              },
              {
                id: "150",
                name: "Options Page Tests Theme Management handleThemeToggle should toggle from light to dark",
                location: { start: { column: 6, line: 395 } },
              },
              {
                id: "151",
                name: "Options Page Tests Theme Management handleThemeToggle should toggle from dark to light",
                location: { start: { column: 6, line: 406 } },
              },
              {
                id: "152",
                name: "Options Page Tests Theme Management initializeOptionsTheme should use stored theme",
                location: { start: { column: 6, line: 417 } },
              },
              {
                id: "153",
                name: "Options Page Tests Theme Management initializeOptionsTheme should fall back to system preference when no stored theme",
                location: { start: { column: 6, line: 430 } },
              },
              {
                id: "154",
                name: "Options Page Tests Server Status updateOptionsServerStatus should update connected status",
                location: { start: { column: 6, line: 444 } },
              },
              {
                id: "155",
                name: "Options Page Tests Server Status updateOptionsServerStatus should update disconnected status",
                location: { start: { column: 6, line: 454 } },
              },
              {
                id: "156",
                name: "Options Page Tests Server Status updateOptionsServerStatus should update checking status",
                location: { start: { column: 6, line: 464 } },
              },
              {
                id: "157",
                name: "Options Page Tests Validation Functions validatePort should validate valid port",
                location: { start: { column: 6, line: 473 } },
              },
              {
                id: "158",
                name: "Options Page Tests Validation Functions validatePort should reject invalid port",
                location: { start: { column: 6, line: 481 } },
              },
              {
                id: "159",
                name: "Options Page Tests Validation Functions validateFolder should validate valid folder path",
                location: { start: { column: 6, line: 489 } },
              },
              {
                id: "160",
                name: "Options Page Tests Validation Functions validateFolder should reject empty folder path",
                location: { start: { column: 6, line: 497 } },
              },
              {
                id: "161",
                name: "Options Page Tests Validation Functions validateLogLevel should validate valid log level",
                location: { start: { column: 6, line: 505 } },
              },
              {
                id: "162",
                name: "Options Page Tests Validation Functions validateFormat should validate valid format",
                location: { start: { column: 6, line: 516 } },
              },
              {
                id: "163",
                name: "Options Page Tests Search Functionality performSearch should highlight matching text",
                location: { start: { column: 6, line: 529 } },
              },
              {
                id: "164",
                name: "Options Page Tests Search Functionality highlightMatchingText should highlight matching terms",
                location: { start: { column: 6, line: 540 } },
              },
              {
                id: "165",
                name: "Options Page Tests Search Functionality showNoResultsMessage should show/hide message",
                location: { start: { column: 6, line: 553 } },
              },
              {
                id: "166",
                name: "Options Page Tests Utility Functions showValidationMessage should show success message",
                location: { start: { column: 6, line: 566 } },
              },
              {
                id: "167",
                name: "Options Page Tests Utility Functions showValidationMessage should show error message",
                location: { start: { column: 6, line: 577 } },
              },
              {
                id: "168",
                name: "Options Page Tests Utility Functions showValidationMessage should handle null element",
                location: { start: { column: 6, line: 588 } },
              },
            ],
            source:
              'import {\n  initOptionsPage,\n  saveSettings,\n  selectDownloadDirectory,\n  applyOptionsTheme,\n  handleThemeToggle,\n  initializeOptionsTheme,\n  updateOptionsServerStatus,\n  validatePort,\n  validateFolder,\n  validateLogLevel,\n  validateFormat,\n  performSearch,\n  highlightMatchingText,\n  showNoResultsMessage,\n  showValidationMessage,\n} from "extension/src/options";\n/* eslint-env jest */\n\n// Create a mock event that satisfies the properties used in the function\nconst createMockEvent = (target: HTMLFormElement): Event =>\n  ({\n    target,\n    preventDefault: jest.fn(),\n  } as unknown as Event);\n\ndescribe("Options Page Tests", () => {\n  beforeEach(() => {\n    // Set up a more complete DOM for each test\n    document.body.innerHTML =\n      \'<' +
              "div class=\"tabs\">' +\n      '<" +
              'button class="tab-button active" data-tab="general-settings">General<' +
              "/button>' +\n      '<" +
              'button class="tab-button" data-tab="log-viewer">Logs<' +
              "/button>' +\n      \"<" +
              "/div>\" +\n      '<" +
              'div id="general-settings" class="tab-content active">\' +\n      \'<' +
              "form id=\"settings-form\">' +\n      '<" +
              'input name="server-port" type="number" id="settings-server-port" min="1024" max="65535" value="5001" required />\' +\n      \'<' +
              'div id="port-validation" class="validation-message"><' +
              "/div>' +\n      '<" +
              'input name="download-dir" id="settings-download-dir" value="/downloads" required />\' +\n      \'<' +
              'div id="folder-validation" class="validation-message"><' +
              "/div>' +\n      '<" +
              'input type="checkbox" name="enable-debug" id="settings-enable-debug" />\' +\n      \'<' +
              'input type="checkbox" name="enable-history" id="settings-enable-history" />\' +\n      \'<' +
              'select name="log-level" id="settings-log-level">\' +\n      \'<' +
              'option value="ERROR">Errors Only<' +
              "/option>' +\n      '<" +
              'option value="INFO" selected>Normal<' +
              "/option>' +\n      '<" +
              'option value="DEBUG">Verbose<' +
              "/option>' +\n      \"<" +
              "/select>\" +\n      '<" +
              'div id="log-level-validation" class="validation-message"><' +
              "/div>' +\n      '<" +
              'select name="ytdlp-format" id="settings-ytdlp-format">\' +\n      \'<' +
              'option value="bestvideo+bestaudio/best">Best Quality (MP4/WEBM)<' +
              "/option>' +\n      '<" +
              'option value="best">Best Available Single File<' +
              "/option>' +\n      '<" +
              'option value="mp4">MP4 (Best)<' +
              "/option>' +\n      '<" +
              'option value="webm">WebM (Best)<' +
              "/option>' +\n      '<" +
              'option value="bestaudio[ext=m4a]">Best Audio (M4A)<' +
              "/option>' +\n      '<" +
              'option value="bestaudio[ext=opus]">Best Audio (Opus)<' +
              "/option>' +\n      \"<" +
              "/select>\" +\n      '<" +
              'div id="format-validation" class="validation-message"><' +
              "/div>' +\n      '<" +
              'input type="checkbox" name="allow-playlists" id="settings-allow-playlists" />\' +\n      \'<' +
              'button type="submit" id="save-settings">Save<' +
              "/button>' +\n      \"<" +
              "/form>\" +\n      '<" +
              'div id="settings-status"><' +
              "/div>' +\n      '<" +
              'button id="settings-folder-picker"><' +
              "/button>' +\n      '<" +
              'div id="settings-download-dir-warning"><' +
              "/div>' +\n      '<" +
              'button id="restart-server"><' +
              "/button>' +\n      '<" +
              'div id="restart-status"><' +
              "/div>' +\n      '<" +
              'button id="settings-clear-history"><' +
              "/button>' +\n      '<" +
              'button id="settings-resume-downloads"><' +
              "/button>' +\n      '<" +
              'button id="theme-toggle">Toggle Theme<' +
              "/button>' +\n      '<" +
              'div id="server-status-indicator"><' +
              "/div>' +\n      '<" +
              'div id="server-status-text"><' +
              "/div>' +\n      '<" +
              'div class="search-results"><' +
              "/div>' +\n      '<" +
              'div class="no-results-message"><' +
              "/div>' +\n      \"<" +
              "/div>\" +\n      '<" +
              'div id="log-viewer" class="tab-content"><' +
              '/div>\';\n    // Clear mocks before each test\n    (chrome.storage.local.set as jest.Mock).mockClear();\n    (chrome.runtime.sendMessage as jest.Mock).mockClear();\n    (chrome.storage.local.get as jest.Mock).mockClear();\n    jest.useFakeTimers();\n    // Re-initialize scripts\n    initOptionsPage();\n  });\n\n  afterEach(() => {\n    jest.useRealTimers();\n    document.body.innerHTML = "";\n  });\n\n  describe("Validation and Saving", () => {\n    it("shows an error for an invalid port on form submission", async () => {\n      const form = document.getElementById("settings-form") as HTMLFormElement;\n      const portInput = document.getElementById(\n        "settings-server-port"\n      ) as HTMLInputElement;\n      const status = document.getElementById(\n        "settings-status"\n      ) as HTMLDivElement;\n      portInput.value = "99999"; // Invalid port (out of range)\n\n      // Clear any calls from init\n      (chrome.runtime.sendMessage as jest.Mock).mockClear();\n\n      await saveSettings(createMockEvent(form));\n\n      // The validation should prevent saving and show validation error\n      expect(status.textContent).toMatch(\n        /Please fix validation errors before saving/\n      );\n      expect(chrome.storage.local.set).not.toHaveBeenCalled();\n      expect(chrome.runtime.sendMessage).not.toHaveBeenCalled();\n    });\n\n    it("saves valid settings and shows success on form submission", async () => {\n      const form = document.getElementById("settings-form") as HTMLFormElement;\n      const status = document.getElementById(\n        "settings-status"\n      ) as HTMLDivElement;\n\n      // Mock sendMessage to simulate a successful server response\n      (chrome.runtime.sendMessage as jest.Mock).mockImplementation(\n        (message, callback) => {\n          if (message.type === "setConfig") {\n            if (typeof callback === "function") {\n              callback({ status: "success" });\n            }\n            return Promise.resolve({ status: "success" });\n          }\n          // For other calls like getConfig, do nothing\n          return Promise.resolve({ status: "success" });\n        }\n      );\n\n      // Mock storage.set to simulate successful save\n      (chrome.storage.local.set as jest.Mock).mockImplementation(\n        (items, callback) => {\n          if (typeof callback === "function") {\n            callback();\n          }\n          return Promise.resolve();\n        }\n      );\n\n      await saveSettings(createMockEvent(form));\n\n      expect(chrome.storage.local.set).toHaveBeenCalled();\n      expect(chrome.runtime.sendMessage).toHaveBeenCalledWith(\n        expect.objectContaining({ type: "setConfig" }),\n        expect.any(Function)\n      );\n\n      // Check for success message\n      expect(status.textContent).toBe("Settings saved successfully!");\n\n      // Fast-forward timers to check if the message disappears\n      jest.runAllTimers();\n      expect(status.textContent).toBe("");\n    });\n\n    it("shows an error if saving to server fails", async () => {\n      const form = document.getElementById("settings-form") as HTMLFormElement;\n      const status = document.getElementById(\n        "settings-status"\n      ) as HTMLDivElement;\n\n      (chrome.runtime.sendMessage as jest.Mock).mockImplementation(\n        (message, callback) => {\n          if (message.type === "setConfig") {\n            if (typeof callback === "function") {\n              callback({ status: "error", message: "Server is offline" });\n            }\n            return Promise.resolve({\n              status: "error",\n              message: "Server is offline",\n            });\n          }\n          return Promise.resolve({ status: "success" });\n        }\n      );\n\n      await saveSettings(createMockEvent(form));\n\n      expect(status.textContent).toMatch(\n        /Error saving settings: Server is offline/\n      );\n    });\n\n    it("shows an error if chrome.runtime.lastError is set during save", async () => {\n      const form = document.getElementById("settings-form") as HTMLFormElement;\n      const status = document.getElementById(\n        "settings-status"\n      ) as HTMLDivElement;\n\n      (chrome.runtime.sendMessage as jest.Mock).mockImplementation(\n        (message, callback) => {\n          if (message.type === "setConfig") {\n            chrome.runtime.lastError = { message: "Message send failed" };\n            if (typeof callback === "function") {\n              callback(undefined); // Callback is called with no response on lastError\n            }\n            return Promise.resolve(undefined);\n          }\n          return Promise.resolve({ status: "success" });\n        }\n      );\n\n      await saveSettings(createMockEvent(form));\n\n      expect(status.textContent).toMatch(\n        /Error saving settings: Message send failed/\n      );\n      chrome.runtime.lastError = null; // Clean up for other tests\n    });\n  });\n\n  describe("Folder Picker", () => {\n    it("warns when folder picker API is not supported", async () => {\n      const status = document.getElementById(\n        "settings-status"\n      ) as HTMLDivElement;\n\n      // Simulate environment where picker is not available\n      // @ts-expect-error - Testing unsupported API scenario\n      delete window.showDirectoryPicker;\n\n      await selectDownloadDirectory();\n\n      expect(status.textContent).toMatch(\n        /does not support directory selection/\n      );\n    });\n\n    it("sets the input value on successful directory selection", async () => {\n      const downloadDirInput = document.getElementById(\n        "settings-download-dir"\n      ) as HTMLInputElement;\n\n      // Mock the directory picker\n      // @ts-expect-error - Mocking experimental API for testing\n      window.showDirectoryPicker = jest.fn().mockResolvedValue({\n        name: "/mock/path",\n      });\n\n      await selectDownloadDirectory();\n\n      expect(downloadDirInput.value).toBe("/mock/path");\n    });\n\n    it("shows a warning on generic error during directory selection", async () => {\n      const status = document.getElementById(\n        "settings-status"\n      ) as HTMLDivElement;\n\n      // @ts-expect-error - Mocking experimental API error scenario\n      window.showDirectoryPicker = jest\n        .fn()\n        .mockRejectedValue(new Error("Generic error"));\n\n      await selectDownloadDirectory();\n\n      expect(status.textContent).toMatch(/Failed to select directory/);\n    });\n  });\n\n  describe("Server Actions", () => {\n    it("sends a restart message when restart button is clicked", () => {\n      const restartButton = document.getElementById(\n        "restart-server"\n      ) as HTMLButtonElement;\n      const status = document.getElementById(\n        "settings-status"\n      ) as HTMLDivElement;\n\n      (chrome.runtime.sendMessage as jest.Mock).mockImplementation(\n        (message, callback) => {\n          if (message.type === "restartServer") {\n            callback({ status: "success" });\n          }\n        }\n      );\n\n      restartButton.click();\n\n      expect(chrome.runtime.sendMessage).toHaveBeenCalledWith(\n        { type: "restartServer" },\n        expect.any(Function)\n      );\n      expect(status.textContent).toBe("Server restarted successfully!");\n    });\n\n    it("shows an error message when server restart fails", () => {\n      const restartButton = document.getElementById(\n        "restart-server"\n      ) as HTMLButtonElement;\n      const status = document.getElementById(\n        "settings-status"\n      ) as HTMLDivElement;\n\n      (chrome.runtime.sendMessage as jest.Mock).mockImplementation(\n        (message, callback) => {\n          if (message.type === "restartServer") {\n            callback({ status: "error", message: "Restart failed" });\n          }\n        }\n      );\n\n      restartButton.click();\n\n      expect(chrome.runtime.sendMessage).toHaveBeenCalledWith(\n        { type: "restartServer" },\n        expect.any(Function)\n      );\n      expect(status.textContent).toBe("Error: Restart failed");\n    });\n\n    it("sends a clear history message when clear history button is clicked", () => {\n      const clearHistoryButton = document.getElementById(\n        "settings-clear-history"\n      ) as HTMLButtonElement;\n      window.confirm = jest.fn(() => true); // Mock confirm dialog\n\n      clearHistoryButton.click();\n\n      expect(window.confirm).toHaveBeenCalled();\n      // Note: The actual call is in history.ts, so we can\'t directly test it here\n      // without more complex mocking. We are testing that the button click is wired up.\n      // A better test would be an E2E test.\n    });\n  });\n\n  describe("Tab Navigation", () => {\n    it("switches tabs correctly on click", () => {\n      const generalTab = document.querySelector(\n        \'[data-tab="general-settings"]\'\n      ) as HTMLElement;\n      const generalContent = document.getElementById("general-settings");\n      const logsTab = document.querySelector(\n        \'[data-tab="log-viewer"]\'\n      ) as HTMLElement;\n      const logsContent = document.getElementById("log-viewer");\n\n      // Initial state\n      expect(generalTab?.classList.contains("active")).toBe(true);\n      expect(generalContent?.classList.contains("active")).toBe(true);\n      expect(logsTab?.classList.contains("active")).toBe(false);\n      expect(logsContent?.classList.contains("active")).toBe(false);\n\n      // Click logs tab\n      logsTab?.click();\n\n      // Final state\n      expect(generalTab?.classList.contains("active")).toBe(false);\n      expect(generalContent?.classList.contains("active")).toBe(false);\n      expect(logsTab?.classList.contains("active")).toBe(true);\n      expect(logsContent?.classList.contains("active")).toBe(true);\n    });\n  });\n\n  describe("Theme Management", () => {\n    it("applyOptionsTheme should apply dark theme", () => {\n      applyOptionsTheme("dark");\n      expect(document.documentElement.classList.contains("dark-theme")).toBe(\n        true\n      );\n    });\n\n    it("applyOptionsTheme should apply light theme", () => {\n      applyOptionsTheme("light");\n      expect(document.documentElement.classList.contains("dark-theme")).toBe(\n        false\n      );\n    });\n\n    it("applyOptionsTheme should use system preference when no theme specified", () => {\n      // Mock matchMedia to return dark preference\n      Object.defineProperty(window, "matchMedia", {\n        writable: true,\n        value: jest.fn().mockImplementation((query) => ({\n          matches: query === "(prefers-color-scheme: dark)",\n          media: query,\n          onchange: null,\n          addListener: jest.fn(),\n          removeListener: jest.fn(),\n          addEventListener: jest.fn(),\n          removeEventListener: jest.fn(),\n          dispatchEvent: jest.fn(),\n        })),\n      });\n\n      applyOptionsTheme();\n      expect(document.documentElement.classList.contains("dark-theme")).toBe(\n        true\n      );\n    });\n\n    it("handleThemeToggle should toggle from light to dark", async () => {\n      // Mock chrome.storage.local.get to return light theme\n      (chrome.storage.local.get as jest.Mock).mockResolvedValueOnce({\n        theme: "light",\n      });\n\n      await handleThemeToggle();\n\n      expect(chrome.storage.local.set).toHaveBeenCalledWith({ theme: "dark" });\n    });\n\n    it("handleThemeToggle should toggle from dark to light", async () => {\n      // Mock chrome.storage.local.get to return dark theme\n      (chrome.storage.local.get as jest.Mock).mockResolvedValueOnce({\n        theme: "dark",\n      });\n\n      await handleThemeToggle();\n\n      expect(chrome.storage.local.set).toHaveBeenCalledWith({ theme: "light" });\n    });\n\n    it("initializeOptionsTheme should use stored theme", async () => {\n      // Mock chrome.storage.local.get to return stored theme\n      (chrome.storage.local.get as jest.Mock).mockResolvedValueOnce({\n        theme: "dark",\n      });\n\n      await initializeOptionsTheme();\n\n      expect(document.documentElement.classList.contains("dark-theme")).toBe(\n        true\n      );\n    });\n\n    it("initializeOptionsTheme should fall back to system preference when no stored theme", async () => {\n      // Mock chrome.storage.local.get to return no theme\n      (chrome.storage.local.get as jest.Mock).mockResolvedValueOnce({});\n\n      await initializeOptionsTheme();\n\n      // Should apply system preference (mocked to dark in setup)\n      expect(document.documentElement.classList.contains("dark-theme")).toBe(\n        true\n      );\n    });\n  });\n\n  describe("Server Status", () => {\n    it("updateOptionsServerStatus should update connected status", () => {\n      updateOptionsServerStatus("connected");\n\n      const indicator = document.getElementById("server-status-indicator");\n      const text = document.getElementById("server-status-text");\n\n      expect(indicator?.classList.contains("connected")).toBe(true);\n      expect(text?.textContent).toBe("Connected");\n    });\n\n    it("updateOptionsServerStatus should update disconnected status", () => {\n      updateOptionsServerStatus("disconnected");\n\n      const indicator = document.getElementById("server-status-indicator");\n      const text = document.getElementById("server-status-text");\n\n      expect(indicator?.classList.contains("disconnected")).toBe(true);\n      expect(text?.textContent).toBe("Disconnected");\n    });\n\n    it("updateOptionsServerStatus should update checking status", () => {\n      updateOptionsServerStatus("checking");\n\n      const text = document.getElementById("server-status-text");\n      expect(text?.textContent).toBe("Checking...");\n    });\n  });\n\n  describe("Validation Functions", () => {\n    it("validatePort should validate valid port", () => {\n      const input = document.createElement("input");\n      input.value = "5001";\n\n      const result = validatePort(input);\n      expect(result).toBe(true);\n    });\n\n    it("validatePort should reject invalid port", () => {\n      const input = document.createElement("input");\n      input.value = "99999"; // Invalid port\n\n      const result = validatePort(input);\n      expect(result).toBe(false);\n    });\n\n    it("validateFolder should validate valid folder path", () => {\n      const input = document.createElement("input");\n      input.value = "/valid/path";\n\n      const result = validateFolder(input);\n      expect(result).toBe(true);\n    });\n\n    it("validateFolder should reject empty folder path", () => {\n      const input = document.createElement("input");\n      input.value = "";\n\n      const result = validateFolder(input);\n      expect(result).toBe(false);\n    });\n\n    it("validateLogLevel should validate valid log level", () => {\n      const select = document.createElement("select");\n      const option = document.createElement("option");\n      option.value = "INFO";\n      select.appendChild(option);\n      select.value = "INFO";\n\n      const result = validateLogLevel(select);\n      expect(result).toBe(true);\n    });\n\n    it("validateFormat should validate valid format", () => {\n      const select = document.createElement("select");\n      const option = document.createElement("option");\n      option.value = "mp4";\n      select.appendChild(option);\n      select.value = "mp4";\n\n      const result = validateFormat(select);\n      expect(result).toBe(true);\n    });\n  });\n\n  describe("Search Functionality", () => {\n    it("performSearch should highlight matching text", () => {\n      const section = document.createElement("div");\n      section.innerHTML = "<' +
              "p>This is a test paragraph<" +
              '/p>";\n\n      performSearch("test");\n\n      // Check if search results are shown\n      const searchResults = document.querySelector(".search-results");\n      expect(searchResults).toBeTruthy();\n    });\n\n    it("highlightMatchingText should highlight matching terms", () => {\n      const section = document.createElement("div");\n      section.innerHTML = "<' +
              "p>This is a test paragraph<" +
              '/p>";\n\n      // Test that the function doesn\'t throw and processes the section\n      expect(() => {\n        highlightMatchingText(section, ["test"]);\n      }).not.toThrow();\n\n      // Verify the section still exists\n      expect(section).toBeTruthy();\n    });\n\n    it("showNoResultsMessage should show/hide message", () => {\n      showNoResultsMessage(true);\n\n      const message = document.querySelector(".no-results-message");\n      expect(message).toBeTruthy();\n\n      showNoResultsMessage(false);\n      // Check if the element exists rather than specific style\n      expect(message).toBeTruthy();\n    });\n  });\n\n  describe("Utility Functions", () => {\n    it("showValidationMessage should show success message", () => {\n      const element = document.createElement("div");\n      element.id = "test-element";\n      document.body.appendChild(element);\n\n      showValidationMessage(element, "Success message", "success");\n\n      expect(element.classList.contains("success")).toBe(true);\n      expect(element.textContent).toBe("Success message");\n    });\n\n    it("showValidationMessage should show error message", () => {\n      const element = document.createElement("div");\n      element.id = "test-element";\n      document.body.appendChild(element);\n\n      showValidationMessage(element, "Error message", "error");\n\n      expect(element.classList.contains("error")).toBe(true);\n      expect(element.textContent).toBe("Error message");\n    });\n\n    it("showValidationMessage should handle null element", () => {\n      // Should not throw error\n      expect(() => {\n        showValidationMessage(null, "Test message", "warning");\n      }).not.toThrow();\n    });\n  });\n});\n',
          },
          "tests/extension/content.util.test.ts": {
            tests: [
              {
                id: "169",
                name: "debounce should call the function after the specified delay",
                location: { start: { column: 4, line: 11 } },
              },
              {
                id: "170",
                name: "debounce should pass arguments to the original function",
                location: { start: { column: 4, line: 20 } },
              },
              {
                id: "171",
                name: "isSignificantVideo returns false for non-HTMLVideoElement or non-IFrameElement",
                location: { start: { column: 4, line: 51 } },
              },
              {
                id: "172",
                name: "isSignificantVideo returns false when video is not visible",
                location: { start: { column: 4, line: 56 } },
              },
              {
                id: "173",
                name: "isSignificantVideo returns false when dimensions are too small",
                location: { start: { column: 4, line: 71 } },
              },
              {
                id: "174",
                name: "isSignificantVideo returns true for visible video with sufficient dimensions and src",
                location: { start: { column: 4, line: 86 } },
              },
              {
                id: "175",
                name: "isSignificantVideo returns false for ad video inside ad container",
                location: { start: { column: 4, line: 90 } },
              },
              {
                id: "176",
                name: "isSignificantVideo returns true for an iframe",
                location: { start: { column: 4, line: 98 } },
              },
            ],
            source:
              '/* eslint-env jest */\n\nimport { debounce, isSignificantVideo } from "../../extension/src/content";\n\ndescribe("debounce", () => {\n  beforeEach(() => {\n    jest.useFakeTimers();\n  });\n\n  it("should call the function after the specified delay", () => {\n    const func = jest.fn();\n    const debounced = debounce(func, 1000);\n    debounced();\n    expect(func).not.toHaveBeenCalled();\n    jest.advanceTimersByTime(1000);\n    expect(func).toHaveBeenCalledTimes(1);\n  });\n\n  it("should pass arguments to the original function", () => {\n    const func = jest.fn();\n    const debounced = debounce(func, 500);\n    debounced("a", 123);\n    jest.advanceTimersByTime(500);\n    expect(func).toHaveBeenCalledWith("a", 123);\n  });\n});\n\ndescribe("isSignificantVideo", () => {\n  let video: HTMLVideoElement;\n\n  beforeEach(() => {\n    document.body.innerHTML = "";\n    video = document.createElement("video");\n    // Mock getBoundingClientRect\n    video.getBoundingClientRect = jest.fn(() => ({\n      width: 200,\n      height: 150,\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      x: 0,\n      y: 0,\n      toJSON: () => "",\n    }));\n    video.src = "http://example.com/video.mp4";\n    document.body.appendChild(video);\n  });\n\n  it("returns false for non-HTMLVideoElement or non-IFrameElement", () => {\n    const div = document.createElement("div");\n    expect(isSignificantVideo(div as any)).toBe(false);\n  });\n\n  it("returns false when video is not visible", () => {\n    video.getBoundingClientRect = jest.fn(() => ({\n      width: 0,\n      height: 0,\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      x: 0,\n      y: 0,\n      toJSON: () => "",\n    }));\n    expect(isSignificantVideo(video)).toBe(false);\n  });\n\n  it("returns false when dimensions are too small", () => {\n    video.getBoundingClientRect = jest.fn(() => ({\n      width: 199,\n      height: 149,\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      x: 0,\n      y: 0,\n      toJSON: () => "",\n    }));\n    expect(isSignificantVideo(video)).toBe(false);\n  });\n\n  it("returns true for visible video with sufficient dimensions and src", () => {\n    expect(isSignificantVideo(video)).toBe(true);\n  });\n\n  it("returns false for ad video inside ad container", () => {\n    const adContainer = document.createElement("div");\n    adContainer.className = "ad-banner";\n    adContainer.appendChild(video);\n    document.body.appendChild(adContainer);\n    expect(isSignificantVideo(video)).toBe(false);\n  });\n\n  it("returns true for an iframe", () => {\n    const iframe = document.createElement("iframe");\n    expect(isSignificantVideo(iframe)).toBe(true);\n  });\n});\n',
          },
          "tests/extension/content.test.ts": {
            tests: [
              {
                id: "177",
                name: "Content Script Tests createOrUpdateButton should create a new button if one does not exist",
                location: { start: { column: 6, line: 43 } },
              },
              {
                id: "178",
                name: "Content Script Tests createOrUpdateButton should reuse existing button when no video element is provided",
                location: { start: { column: 6, line: 50 } },
              },
              {
                id: "179",
                name: "Content Script Tests createOrUpdateButton should create button with correct default styles",
                location: { start: { column: 6, line: 56 } },
              },
              {
                id: "180",
                name: "Content Script Tests createOrUpdateButton should handle button creation with video element",
                location: { start: { column: 6, line: 63 } },
              },
              {
                id: "181",
                name: "Content Script Tests resetButtonPosition should reset the button position to the default",
                location: { start: { column: 6, line: 75 } },
              },
              {
                id: "182",
                name: "Content Script Tests resetButtonPosition should save button state after resetting position",
                location: { start: { column: 6, line: 85 } },
              },
              {
                id: "183",
                name: "Content Script Tests resetButtonPosition should handle storage errors gracefully during reset",
                location: { start: { column: 6, line: 100 } },
              },
              {
                id: "184",
                name: "Content Script Tests setButtonHiddenState should hide the button when hidden is true",
                location: { start: { column: 6, line: 113 } },
              },
              {
                id: "185",
                name: "Content Script Tests setButtonHiddenState should show the button when hidden is false",
                location: { start: { column: 6, line: 119 } },
              },
              {
                id: "186",
                name: "Content Script Tests setButtonHiddenState should save button state when hiding",
                location: { start: { column: 6, line: 126 } },
              },
              {
                id: "187",
                name: "Content Script Tests setButtonHiddenState should save button state when showing",
                location: { start: { column: 6, line: 140 } },
              },
              {
                id: "188",
                name: "Content Script Tests setButtonHiddenState should handle storage errors gracefully when hiding",
                location: { start: { column: 6, line: 154 } },
              },
              {
                id: "189",
                name: "Content Script Tests isSignificantVideo should return true for a large, visible video with a source",
                location: { start: { column: 6, line: 170 } },
              },
              {
                id: "190",
                name: "Content Script Tests isSignificantVideo should return false for a small video",
                location: { start: { column: 6, line: 186 } },
              },
              {
                id: "191",
                name: "Content Script Tests isSignificantVideo should return false for a video without a source",
                location: { start: { column: 6, line: 202 } },
              },
              {
                id: "192",
                name: "Content Script Tests isSignificantVideo should return false for a video with ad-banner parent",
                location: { start: { column: 6, line: 217 } },
              },
              {
                id: "193",
                name: "Content Script Tests isSignificantVideo should return true for an iframe from a supported source",
                location: { start: { column: 6, line: 236 } },
              },
              {
                id: "194",
                name: "Content Script Tests isSignificantVideo should return false for non-video and non-iframe elements",
                location: { start: { column: 6, line: 252 } },
              },
              {
                id: "195",
                name: "Content Script Tests Button Click Handler handles successful download response",
                location: { start: { column: 6, line: 270 } },
              },
              {
                id: "196",
                name: "Content Script Tests Button Click Handler handles error download response",
                location: { start: { column: 6, line: 290 } },
              },
              {
                id: "197",
                name: "Content Script Tests Button Click Handler handles retry/warning download response",
                location: { start: { column: 6, line: 308 } },
              },
              {
                id: "198",
                name: "Content Script Tests Button Click Handler handles unknown download response status",
                location: { start: { column: 6, line: 327 } },
              },
              {
                id: "199",
                name: "Content Script Tests Button Click Handler handles runtime error during download request",
                location: { start: { column: 6, line: 346 } },
              },
              {
                id: "200",
                name: "Content Script Tests Storage Error Handling should handle storage get errors gracefully",
                location: { start: { column: 6, line: 367 } },
              },
              {
                id: "201",
                name: "Content Script Tests Storage Error Handling should handle storage set errors gracefully",
                location: { start: { column: 6, line: 379 } },
              },
              {
                id: "202",
                name: "Content Script Tests Storage Error Handling should handle storage exceptions gracefully",
                location: { start: { column: 6, line: 390 } },
              },
              {
                id: "203",
                name: "Content Script Tests DOM Manipulation Edge Cases should handle button not in document gracefully",
                location: { start: { column: 6, line: 402 } },
              },
              {
                id: "204",
                name: "Content Script Tests DOM Manipulation Edge Cases should handle computed style edge cases",
                location: { start: { column: 6, line: 412 } },
              },
              {
                id: "205",
                name: "Content Script Tests Button State Management should use default state when storage is empty",
                location: { start: { column: 6, line: 437 } },
              },
              {
                id: "206",
                name: "Content Script Tests Content Script Drag-and-Drop should start dragging on left mousedown",
                location: { start: { column: 6, line: 462 } },
              },
              {
                id: "207",
                name: "Content Script Tests Content Script Drag-and-Drop should not start dragging on right mousedown",
                location: { start: { column: 6, line: 485 } },
              },
              {
                id: "208",
                name: "Content Script Tests Content Script Drag-and-Drop should update button position during drag",
                location: { start: { column: 6, line: 507 } },
              },
              {
                id: "209",
                name: "Content Script Tests Content Script Drag-and-Drop should end dragging on mouseup",
                location: { start: { column: 6, line: 530 } },
              },
              {
                id: "210",
                name: "Content Script Tests Content Script Drag-and-Drop should distinguish between click and drag",
                location: { start: { column: 6, line: 581 } },
              },
            ],
            source:
              '/**\n * Tests for content script functionality.\n *\n * Covers: button creation and management, video detection,\n * user interaction handling, and Chrome API integration.\n *\n * Tests both UI elements and background communication logic.\n */\n\n/* eslint-env jest */\nimport {\n  createOrUpdateButton,\n  resetButtonPosition,\n  setButtonHiddenState,\n  isSignificantVideo,\n  debounce,\n  getButtonState,\n  saveButtonState,\n  ensureDownloadButtonStyle,\n  _resetStateForTesting,\n} from "../../extension/src/content";\n\ndescribe("Content Script Tests", () => {\n  beforeEach(() => {\n    document.body.innerHTML = "";\n    // Mock storage and runtime APIs\n    global.chrome = {\n      storage: {\n        local: {\n          get: jest.fn((keys, callback) => callback({})) as any,\n          set: jest.fn((data, callback) => callback()) as any,\n        },\n      },\n      runtime: {\n        sendMessage: jest.fn() as any,\n        lastError: null,\n      },\n    } as any;\n  });\n\n  describe("createOrUpdateButton", () => {\n    it("should create a new button if one does not exist", async () => {\n      const button = await createOrUpdateButton();\n      expect(button).toBeInstanceOf(HTMLElement);\n      expect(button.tagName).toBe("BUTTON");\n      expect(button.textContent).toBe("DOWNLOAD");\n    });\n\n    it("should reuse existing button when no video element is provided", async () => {\n      const button1 = await createOrUpdateButton();\n      const button2 = await createOrUpdateButton();\n      expect(button1).toBe(button2);\n    });\n\n    it("should create button with correct default styles", async () => {\n      const button = await createOrUpdateButton();\n      expect(button.style.position).toBe("fixed");\n      expect(button.style.zIndex).toBe("2147483647");\n      expect(button.classList.contains("download-button")).toBe(true);\n    });\n\n    it("should handle button creation with video element", async () => {\n      const video = document.createElement("video");\n      video.src = "test-video.mp4";\n      document.body.appendChild(video);\n\n      const button = await createOrUpdateButton(video);\n      expect(button).toBeInstanceOf(HTMLElement);\n      expect(button.id).toContain("evd-download-button-");\n    });\n  });\n\n  describe("resetButtonPosition", () => {\n    it("should reset the button position to the default", async () => {\n      const button = await createOrUpdateButton();\n      button.style.left = "100px";\n      button.style.top = "10px";\n      await resetButtonPosition();\n\n      expect(button.style.left).toBe("10px");\n      expect(button.style.top).toBe("10px");\n    });\n\n    it("should save button state after resetting position", async () => {\n      const button = await createOrUpdateButton();\n      await resetButtonPosition();\n\n      expect(global.chrome.storage.local.set).toHaveBeenCalledWith(\n        expect.objectContaining({\n          [window.location.hostname]: expect.objectContaining({\n            x: 10,\n            y: 10,\n          }),\n        }),\n        expect.any(Function)\n      );\n    });\n\n    it("should handle storage errors gracefully during reset", async () => {\n      (global.chrome.storage.local.set as jest.Mock).mockImplementation(\n        (data, callback) => {\n          callback(new Error("Storage error"));\n        }\n      );\n\n      const button = await createOrUpdateButton();\n      await expect(resetButtonPosition()).resolves.not.toThrow();\n    });\n  });\n\n  describe("setButtonHiddenState", () => {\n    it("should hide the button when hidden is true", async () => {\n      const button = await createOrUpdateButton();\n      await setButtonHiddenState(true);\n      expect(button.style.display).toBe("none");\n    });\n\n    it("should show the button when hidden is false", async () => {\n      const button = await createOrUpdateButton();\n      button.style.display = "none";\n      await setButtonHiddenState(false);\n      expect(button.style.display).toBe("block");\n    });\n\n    it("should save button state when hiding", async () => {\n      const button = await createOrUpdateButton();\n      await setButtonHiddenState(true);\n\n      expect(global.chrome.storage.local.set).toHaveBeenCalledWith(\n        expect.objectContaining({\n          [window.location.hostname]: expect.objectContaining({\n            hidden: true,\n          }),\n        }),\n        expect.any(Function)\n      );\n    });\n\n    it("should save button state when showing", async () => {\n      const button = await createOrUpdateButton();\n      await setButtonHiddenState(false);\n\n      expect(global.chrome.storage.local.set).toHaveBeenCalledWith(\n        expect.objectContaining({\n          [window.location.hostname]: expect.objectContaining({\n            hidden: false,\n          }),\n        }),\n        expect.any(Function)\n      );\n    });\n\n    it("should handle storage errors gracefully when hiding", async () => {\n      (global.chrome.storage.local.set as jest.Mock).mockImplementation(\n        (data, callback) => {\n          callback(new Error("Storage error"));\n        }\n      );\n\n      const button = await createOrUpdateButton();\n      await expect(setButtonHiddenState(true)).resolves.not.toThrow();\n    });\n  });\n\n  describe("isSignificantVideo", () => {\n    beforeEach(() => {\n      if (typeof _resetStateForTesting === "function") _resetStateForTesting();\n    });\n    it("should return true for a large, visible video with a source", () => {\n      const video = document.createElement("video");\n      video.src = "test-video.mp4";\n      video.style.width = "400px";\n      video.style.height = "300px";\n      document.body.appendChild(video);\n      video.getBoundingClientRect = jest.fn().mockReturnValue({\n        width: 400,\n        height: 300,\n        top: 0,\n        left: 0,\n        right: 400,\n        bottom: 300,\n      });\n      expect(isSignificantVideo(video)).toBe(true);\n    });\n    it("should return false for a small video", () => {\n      const video = document.createElement("video");\n      video.src = "test-video.mp4";\n      video.style.width = "100px";\n      video.style.height = "75px";\n      document.body.appendChild(video);\n      video.getBoundingClientRect = jest.fn().mockReturnValue({\n        width: 100,\n        height: 75,\n        top: 0,\n        left: 0,\n        right: 100,\n        bottom: 75,\n      });\n      expect(isSignificantVideo(video)).toBe(false);\n    });\n    it("should return false for a video without a source", () => {\n      const video = document.createElement("video");\n      video.style.width = "400px";\n      video.style.height = "300px";\n      document.body.appendChild(video);\n      video.getBoundingClientRect = jest.fn().mockReturnValue({\n        width: 400,\n        height: 300,\n        top: 0,\n        left: 0,\n        right: 400,\n        bottom: 300,\n      });\n      expect(isSignificantVideo(video)).toBe(false);\n    });\n    it("should return false for a video with ad-banner parent", () => {\n      const video = document.createElement("video");\n      video.src = "test-video.mp4";\n      video.style.width = "400px";\n      video.style.height = "300px";\n      const parent = document.createElement("div");\n      parent.classList.add("ad-banner");\n      parent.appendChild(video);\n      document.body.appendChild(parent);\n      video.getBoundingClientRect = jest.fn().mockReturnValue({\n        width: 400,\n        height: 300,\n        top: 0,\n        left: 0,\n        right: 400,\n        bottom: 300,\n      });\n      expect(isSignificantVideo(video)).toBe(false);\n    });\n    it("should return true for an iframe from a supported source", () => {\n      const iframe = document.createElement("iframe");\n      iframe.src = "https://www.youtube.com/embed/test";\n      iframe.style.width = "400px";\n      iframe.style.height = "300px";\n      document.body.appendChild(iframe);\n      iframe.getBoundingClientRect = jest.fn().mockReturnValue({\n        width: 400,\n        height: 300,\n        top: 0,\n        left: 0,\n        right: 400,\n        bottom: 300,\n      });\n      expect(isSignificantVideo(iframe)).toBe(true);\n    });\n    it("should return false for non-video and non-iframe elements", () => {\n      const div = document.createElement("div");\n      div.style.width = "400px";\n      div.style.height = "300px";\n      document.body.appendChild(div);\n      div.getBoundingClientRect = jest.fn().mockReturnValue({\n        width: 400,\n        height: 300,\n        top: 0,\n        left: 0,\n        right: 400,\n        bottom: 300,\n      });\n      expect(isSignificantVideo(div)).toBe(false);\n    });\n  });\n\n  describe("Button Click Handler", () => {\n    it("handles successful download response", async () => {\n      const btn = await createOrUpdateButton();\n      document.body.appendChild(btn);\n\n      (global.chrome.runtime.sendMessage as jest.Mock).mockImplementation(\n        (message, callback) => {\n          if (message.type === "downloadVideo") {\n            callback({ status: "success" });\n          }\n        }\n      );\n\n      btn.dispatchEvent(new MouseEvent("mousedown", { bubbles: true }));\n      btn.click();\n\n      // Check for the success class after the async operation completes\n      await new Promise((resolve) => setTimeout(resolve, 10));\n      expect(btn.classList.contains("download-success")).toBe(true);\n    });\n\n    it("handles error download response", async () => {\n      const btn = await createOrUpdateButton();\n      document.body.appendChild(btn);\n\n      (global.chrome.runtime.sendMessage as jest.Mock).mockImplementation(\n        (message, callback) => {\n          if (message.type === "downloadVideo") {\n            callback({ status: "error" });\n          }\n        }\n      );\n\n      btn.dispatchEvent(new MouseEvent("mousedown", { bubbles: true }));\n      btn.click();\n\n      expect(btn.classList.contains("download-error")).toBe(true);\n    });\n\n    it("handles retry/warning download response", async () => {\n      const btn = await createOrUpdateButton();\n      document.body.appendChild(btn);\n\n      (global.chrome.runtime.sendMessage as jest.Mock).mockImplementation(\n        (message, callback) => {\n          if (message.type === "downloadVideo") {\n            callback({ status: "retry" });\n          }\n        }\n      );\n\n      btn.dispatchEvent(new MouseEvent("mousedown", { bubbles: true }));\n      btn.click();\n\n      // All non-success statuses are treated as error (red)\n      expect(btn.classList.contains("download-error")).toBe(true);\n    });\n\n    it("handles unknown download response status", async () => {\n      const btn = await createOrUpdateButton();\n      document.body.appendChild(btn);\n\n      (global.chrome.runtime.sendMessage as jest.Mock).mockImplementation(\n        (message, callback) => {\n          if (message.type === "downloadVideo") {\n            callback({ status: "unknown" });\n          }\n        }\n      );\n\n      btn.dispatchEvent(new MouseEvent("mousedown", { bubbles: true }));\n      btn.click();\n\n      // All non-success statuses are treated as error (red)\n      expect(btn.classList.contains("download-error")).toBe(true);\n    });\n\n    it("handles runtime error during download request", async () => {\n      const btn = await createOrUpdateButton();\n      document.body.appendChild(btn);\n\n      (global.chrome.runtime.sendMessage as jest.Mock).mockImplementation(\n        (message, callback) => {\n          if (message.type === "downloadVideo") {\n            global.chrome.runtime.lastError = new Error("Runtime error");\n            callback({});\n          }\n        }\n      );\n\n      btn.dispatchEvent(new MouseEvent("mousedown", { bubbles: true }));\n      btn.click();\n\n      expect(btn.classList.contains("download-error")).toBe(true);\n    });\n  });\n\n  describe("Storage Error Handling", () => {\n    it("should handle storage get errors gracefully", async () => {\n      (global.chrome.storage.local.get as jest.Mock).mockImplementation(\n        (keys, callback) => {\n          callback(new Error("Storage error"));\n        }\n      );\n\n      const button = await createOrUpdateButton();\n      expect(button.style.left).toBe("10px");\n      expect(button.style.top).toBe("10px");\n    });\n\n    it("should handle storage set errors gracefully", async () => {\n      (global.chrome.storage.local.set as jest.Mock).mockImplementation(\n        (data, callback) => {\n          callback(new Error("Storage error"));\n        }\n      );\n\n      const button = await createOrUpdateButton();\n      await expect(setButtonHiddenState(true)).resolves.not.toThrow();\n    });\n\n    it("should handle storage exceptions gracefully", async () => {\n      (global.chrome.storage.local.get as jest.Mock).mockImplementation(() => {\n        throw new Error("Storage exception");\n      });\n\n      const button = await createOrUpdateButton();\n      expect(button.style.left).toBe("10px");\n      expect(button.style.top).toBe("10px");\n    });\n  });\n\n  describe("DOM Manipulation Edge Cases", () => {\n    it("should handle button not in document gracefully", () => {\n      const button = document.createElement("button");\n      if (button.parentNode) {\n        button.parentNode.removeChild(button);\n      }\n      expect(() => {\n        if (button.parentNode) button.parentNode.removeChild(button);\n      }).not.toThrow();\n    });\n\n    it("should handle computed style edge cases", async () => {\n      const button = await createOrUpdateButton();\n\n      // Mock getComputedStyle to return problematic values\n      const originalGetComputedStyle = window.getComputedStyle;\n      window.getComputedStyle = jest.fn().mockReturnValue({\n        display: "none",\n        opacity: "0.5",\n        padding: "0px",\n        borderRadius: "0px",\n        backgroundColor: "transparent",\n        borderWidth: "0px",\n        borderStyle: "none",\n      } as any);\n\n      // Should force correct styles\n      button.style.display = "block";\n      button.style.opacity = "1";\n      expect(button.style.display).toBe("block");\n      expect(button.style.opacity).toBe("1");\n      window.getComputedStyle = originalGetComputedStyle;\n    });\n  });\n\n  describe("Button State Management", () => {\n    it("should use default state when storage is empty", async () => {\n      (global.chrome.storage.local.get as jest.Mock).mockImplementation(\n        (keys, callback) => {\n          callback({});\n        }\n      );\n\n      const button = await createOrUpdateButton();\n      expect(button.style.left).toBe("10px");\n      expect(button.style.top).toBe("10px");\n    });\n  });\n\n  describe("Content Script Drag-and-Drop", () => {\n    let button: HTMLElement;\n    beforeEach(async () => {\n      if (typeof _resetStateForTesting === "function") _resetStateForTesting();\n      document.body.innerHTML = "";\n      button = await createOrUpdateButton();\n      document.body.appendChild(button);\n    });\n    afterEach(() => {\n      if (typeof _resetStateForTesting === "function") _resetStateForTesting();\n    });\n\n    it("should start dragging on left mousedown", () => {\n      const mousedown = new MouseEvent("mousedown", {\n        button: 0,\n        clientX: 100,\n        clientY: 200,\n        bubbles: true,\n      });\n      button.dispatchEvent(mousedown);\n\n      // Check that dragging state is set (this will be tested indirectly)\n      // The button should now respond to mousemove events\n      const mousemove = new MouseEvent("mousemove", {\n        clientX: 150,\n        clientY: 250,\n        bubbles: true,\n      });\n      document.dispatchEvent(mousemove);\n\n      // Verify the button position changed (indicating drag started)\n      expect(button.style.left).not.toBe("10px");\n      expect(button.style.top).not.toBe("10px");\n    });\n\n    it("should not start dragging on right mousedown", () => {\n      const mousedown = new MouseEvent("mousedown", {\n        button: 2,\n        clientX: 100,\n        clientY: 200,\n        bubbles: true,\n      });\n      button.dispatchEvent(mousedown);\n\n      // Check that dragging state is not set\n      const mousemove = new MouseEvent("mousemove", {\n        clientX: 150,\n        clientY: 250,\n        bubbles: true,\n      });\n      document.dispatchEvent(mousemove);\n\n      // Button position should remain unchanged\n      expect(button.style.left).toBe("10px");\n      expect(button.style.top).toBe("10px");\n    });\n\n    it("should update button position during drag", () => {\n      // Start drag\n      const mousedown = new MouseEvent("mousedown", {\n        button: 0,\n        clientX: 100,\n        clientY: 200,\n        bubbles: true,\n      });\n      button.dispatchEvent(mousedown);\n\n      // Move mouse\n      const mousemove = new MouseEvent("mousemove", {\n        clientX: 150,\n        clientY: 250,\n        bubbles: true,\n      });\n      document.dispatchEvent(mousemove);\n\n      // Button should have moved\n      expect(button.style.left).not.toBe("10px");\n      expect(button.style.top).not.toBe("10px");\n    });\n\n    it("should end dragging on mouseup", () => {\n      // Start drag\n      const mousedown = new MouseEvent("mousedown", {\n        button: 0,\n        clientX: 100,\n        clientY: 200,\n        bubbles: true,\n      });\n      button.dispatchEvent(mousedown);\n\n      // Move mouse\n      const mousemove = new MouseEvent("mousemove", {\n        clientX: 150,\n        clientY: 250,\n        bubbles: true,\n      });\n      document.dispatchEvent(mousemove);\n\n      // End drag\n      const mouseup = new MouseEvent("mouseup", {\n        button: 0,\n        bubbles: true,\n      });\n      document.dispatchEvent(mouseup);\n\n      // Further mousemove should not change position (drag ended)\n      const finalMove = new MouseEvent("mousemove", {\n        clientX: 200,\n        clientY: 300,\n        bubbles: true,\n      });\n      document.dispatchEvent(finalMove);\n\n      // Position should remain at the last drag position\n      const expectedLeft = button.style.left;\n      const expectedTop = button.style.top;\n\n      // Dispatch another mousemove\n      document.dispatchEvent(\n        new MouseEvent("mousemove", {\n          clientX: 250,\n          clientY: 350,\n          bubbles: true,\n        })\n      );\n\n      // Position should not change (drag ended)\n      expect(button.style.left).toBe(expectedLeft);\n      expect(button.style.top).toBe(expectedTop);\n    });\n\n    it("should distinguish between click and drag", () => {\n      // Start drag\n      const mousedown = new MouseEvent("mousedown", {\n        button: 0,\n        clientX: 100,\n        clientY: 200,\n        bubbles: true,\n      });\n      button.dispatchEvent(mousedown);\n\n      // Move mouse significantly\n      const mousemove = new MouseEvent("mousemove", {\n        clientX: 200,\n        clientY: 300,\n        bubbles: true,\n      });\n      document.dispatchEvent(mousemove);\n\n      // End drag\n      const mouseup = new MouseEvent("mouseup", {\n        button: 0,\n        bubbles: true,\n      });\n      document.dispatchEvent(mouseup);\n\n      // Button should have moved (indicating drag, not click)\n      expect(button.style.left).not.toBe("10px");\n      expect(button.style.top).not.toBe("10px");\n    });\n  });\n});\n',
          },
          "tests/extension/options.ui.test.ts": {
            tests: [
              {
                id: "211",
                name: "Options UI Logic Tests Port Validation validates empty port as invalid",
                location: { start: { column: 6, line: 48 } },
              },
              {
                id: "212",
                name: "Options UI Logic Tests Port Validation validates non-numeric port as invalid",
                location: { start: { column: 6, line: 59 } },
              },
              {
                id: "213",
                name: "Options UI Logic Tests Port Validation validates port below range as invalid",
                location: { start: { column: 6, line: 69 } },
              },
              {
                id: "214",
                name: "Options UI Logic Tests Port Validation validates port above range as invalid",
                location: { start: { column: 6, line: 79 } },
              },
              {
                id: "215",
                name: "Options UI Logic Tests Port Validation validates common port with warning",
                location: { start: { column: 6, line: 89 } },
              },
              {
                id: "216",
                name: "Options UI Logic Tests Port Validation validates valid port with success",
                location: { start: { column: 6, line: 101 } },
              },
              {
                id: "217",
                name: "Options UI Logic Tests Folder Validation validates empty folder path as invalid",
                location: { start: { column: 6, line: 114 } },
              },
              {
                id: "218",
                name: "Options UI Logic Tests Folder Validation validates path with suspicious patterns as invalid",
                location: { start: { column: 6, line: 124 } },
              },
              {
                id: "219",
                name: "Options UI Logic Tests Folder Validation validates relative path with warning",
                location: { start: { column: 6, line: 134 } },
              },
              {
                id: "220",
                name: "Options UI Logic Tests Folder Validation validates absolute Unix path with success",
                location: { start: { column: 6, line: 144 } },
              },
              {
                id: "221",
                name: "Options UI Logic Tests Folder Validation validates absolute Windows path with success",
                location: { start: { column: 6, line: 154 } },
              },
              {
                id: "222",
                name: "Options UI Logic Tests Log Level Validation validates empty log level as invalid",
                location: { start: { column: 6, line: 176 } },
              },
              {
                id: "223",
                name: "Options UI Logic Tests Log Level Validation validates invalid log level as invalid",
                location: { start: { column: 6, line: 186 } },
              },
              {
                id: "224",
                name: "Options UI Logic Tests Log Level Validation validates ERROR level as valid",
                location: { start: { column: 6, line: 196 } },
              },
              {
                id: "225",
                name: "Options UI Logic Tests Log Level Validation validates INFO level as valid",
                location: { start: { column: 6, line: 208 } },
              },
              {
                id: "226",
                name: "Options UI Logic Tests Log Level Validation validates DEBUG level as valid",
                location: { start: { column: 6, line: 220 } },
              },
              {
                id: "227",
                name: "Options UI Logic Tests Format Validation validates empty format as invalid",
                location: { start: { column: 6, line: 244 } },
              },
              {
                id: "228",
                name: "Options UI Logic Tests Format Validation validates invalid format as invalid",
                location: { start: { column: 6, line: 254 } },
              },
              {
                id: "229",
                name: "Options UI Logic Tests Format Validation validates bestvideo+bestaudio/best as valid",
                location: { start: { column: 6, line: 264 } },
              },
              {
                id: "230",
                name: "Options UI Logic Tests Format Validation validates best as valid",
                location: { start: { column: 6, line: 277 } },
              },
              {
                id: "231",
                name: "Options UI Logic Tests Format Validation validates mp4 as valid",
                location: { start: { column: 6, line: 289 } },
              },
              {
                id: "232",
                name: "Options UI Logic Tests Format Validation validates webm as valid",
                location: { start: { column: 6, line: 301 } },
              },
              {
                id: "233",
                name: "Options UI Logic Tests Format Validation validates bestaudio[ext=m4a] as valid",
                location: { start: { column: 6, line: 313 } },
              },
              {
                id: "234",
                name: "Options UI Logic Tests Format Validation validates bestaudio[ext=opus] as valid",
                location: { start: { column: 6, line: 326 } },
              },
              {
                id: "235",
                name: "Options UI Logic Tests Search Functionality shows all sections when search query is empty",
                location: { start: { column: 6, line: 341 } },
              },
              {
                id: "236",
                name: "Options UI Logic Tests Search Functionality hides non-matching sections and highlights matching ones",
                location: { start: { column: 6, line: 352 } },
              },
              {
                id: "237",
                name: "Options UI Logic Tests Search Functionality shows no results message when no sections match",
                location: { start: { column: 6, line: 368 } },
              },
              {
                id: "238",
                name: "Options UI Logic Tests Search Functionality hides no results message when sections match",
                location: { start: { column: 6, line: 375 } },
              },
              {
                id: "239",
                name: "Options UI Logic Tests Search Functionality handles multiple search terms",
                location: { start: { column: 6, line: 389 } },
              },
              {
                id: "240",
                name: "Options UI Logic Tests Text Highlighting highlights matching text in section titles",
                location: { start: { column: 6, line: 399 } },
              },
              {
                id: "241",
                name: "Options UI Logic Tests Text Highlighting removes existing highlights before adding new ones",
                location: { start: { column: 6, line: 413 } },
              },
              {
                id: "242",
                name: "Options UI Logic Tests Text Highlighting handles case-insensitive highlighting",
                location: { start: { column: 6, line: 434 } },
              },
              {
                id: "243",
                name: "Options UI Logic Tests Text Highlighting does nothing when section has no title",
                location: { start: { column: 6, line: 448 } },
              },
              {
                id: "244",
                name: "Options UI Logic Tests No Results Message creates and shows no results message when show is true",
                location: { start: { column: 6, line: 458 } },
              },
              {
                id: "245",
                name: "Options UI Logic Tests No Results Message hides existing no results message when show is false",
                location: { start: { column: 6, line: 467 } },
              },
              {
                id: "246",
                name: "Options UI Logic Tests No Results Message reuses existing no results element",
                location: { start: { column: 6, line: 481 } },
              },
              {
                id: "247",
                name: "Options UI Logic Tests Validation Message Display shows validation message with correct class",
                location: { start: { column: 6, line: 495 } },
              },
              {
                id: "248",
                name: "Options UI Logic Tests Validation Message Display handles null element gracefully",
                location: { start: { column: 6, line: 504 } },
              },
              {
                id: "249",
                name: "Options UI Logic Tests Validation Message Display auto-hides success messages after timeout",
                location: { start: { column: 6, line: 510 } },
              },
              {
                id: "250",
                name: "Options UI Logic Tests Validation Message Display does not auto-hide error messages",
                location: { start: { column: 6, line: 524 } },
              },
              {
                id: "251",
                name: "Options UI Logic Tests Validation Message Display does not auto-hide warning messages",
                location: { start: { column: 6, line: 538 } },
              },
            ],
            source:
              '/**\n * Unit tests for options page UI logic functions\n */\n\nimport {\n  validatePort,\n  validateFolder,\n  validateLogLevel,\n  validateFormat,\n  performSearch,\n  highlightMatchingText,\n  showNoResultsMessage,\n  showValidationMessage,\n} from "extension/src/options";\nimport {\n  getServerPort,\n  getClientPort,\n  getPortRange,\n} from "../../extension/src/constants";\n\ndescribe("Options UI Logic Tests", () => {\n  beforeEach(() => {\n    // Set up DOM elements needed for tests\n    document.body.innerHTML =\n      \'<' +
              'div id="port-validation" class="validation-message"><' +
              "/div>' +\n      '<" +
              'div id="folder-validation" class="validation-message"><' +
              "/div>' +\n      '<" +
              'div id="log-level-validation" class="validation-message"><' +
              "/div>' +\n      '<" +
              'div id="format-validation" class="validation-message"><' +
              "/div>' +\n      '<" +
              "div class=\"settings-container\">' +\n      '<" +
              'section class="settings-group" data-category="server">\' +\n      \'<' +
              'h2 class="section-title">Server Configuration<' +
              "/h2>' +\n      '<" +
              'div class="section-content">Server settings content<' +
              "/div>' +\n      \"<" +
              "/section>\" +\n      '<" +
              'section class="settings-group" data-category="download">\' +\n      \'<' +
              'h2 class="section-title">Download Settings<' +
              "/h2>' +\n      '<" +
              'div class="section-content">Download settings content<' +
              "/div>' +\n      \"<" +
              '/section>" +\n      "<' +
              '/div>";\n  });\n\n  afterEach(() => {\n    document.body.innerHTML = "";\n    jest.clearAllTimers();\n  });\n\n  describe("Port Validation", () => {\n    it("validates empty port as invalid", () => {\n      const input = document.createElement("input");\n      input.value = "";\n\n      const result = validatePort(input);\n\n      expect(result).toBe(false);\n      expect(input.classList.contains("invalid")).toBe(true);\n      expect(input.classList.contains("valid")).toBe(false);\n    });\n\n    it("validates non-numeric port as invalid", () => {\n      const input = document.createElement("input");\n      input.value = "abc";\n\n      const result = validatePort(input);\n\n      expect(result).toBe(false);\n      expect(input.classList.contains("invalid")).toBe(true);\n    });\n\n    it("validates port below range as invalid", () => {\n      const input = document.createElement("input");\n      input.value = "1023";\n\n      const result = validatePort(input);\n\n      expect(result).toBe(false);\n      expect(input.classList.contains("invalid")).toBe(true);\n    });\n\n    it("validates port above range as invalid", () => {\n      const input = document.createElement("input");\n      input.value = "65536";\n\n      const result = validatePort(input);\n\n      expect(result).toBe(false);\n      expect(input.classList.contains("invalid")).toBe(true);\n    });\n\n    it("validates common port with warning", () => {\n      const input = document.createElement("input");\n      input.value = "8080";\n\n      const result = validatePort(input);\n\n      // Port 8080 is outside the allowed range (5001-5099), so it should be invalid\n      expect(result).toBe(false);\n      expect(input.classList.contains("valid")).toBe(false);\n      expect(input.classList.contains("invalid")).toBe(true);\n    });\n\n    it("validates valid port with success", () => {\n      const input = document.createElement("input");\n      input.value = "5001";\n\n      const result = validatePort(input);\n\n      expect(result).toBe(true);\n      expect(input.classList.contains("valid")).toBe(true);\n      expect(input.classList.contains("invalid")).toBe(false);\n    });\n  });\n\n  describe("Folder Validation", () => {\n    it("validates empty folder path as invalid", () => {\n      const input = document.createElement("input");\n      input.value = "";\n\n      const result = validateFolder(input);\n\n      expect(result).toBe(false);\n      expect(input.classList.contains("invalid")).toBe(true);\n    });\n\n    it("validates path with suspicious patterns as invalid", () => {\n      const input = document.createElement("input");\n      input.value = "/path/../secret";\n\n      const result = validateFolder(input);\n\n      expect(result).toBe(false);\n      expect(input.classList.contains("invalid")).toBe(true);\n    });\n\n    it("validates relative path with warning", () => {\n      const input = document.createElement("input");\n      input.value = "downloads";\n\n      const result = validateFolder(input);\n\n      expect(result).toBe(true);\n      expect(input.classList.contains("valid")).toBe(true);\n    });\n\n    it("validates absolute Unix path with success", () => {\n      const input = document.createElement("input");\n      input.value = "/home/user/downloads";\n\n      const result = validateFolder(input);\n\n      expect(result).toBe(true);\n      expect(input.classList.contains("valid")).toBe(true);\n    });\n\n    it("validates absolute Windows path with success", () => {\n      const input = document.createElement("input");\n      input.value = "C:\\\\Users\\\\user\\\\Downloads";\n\n      const result = validateFolder(input);\n\n      expect(result).toBe(true);\n      expect(input.classList.contains("valid")).toBe(true);\n    });\n  });\n\n  describe("Log Level Validation", () => {\n    beforeEach(() => {\n      // Ensure the validation element exists for each test\n      let validationDiv = document.getElementById("log-level-validation");\n      if (!validationDiv) {\n        validationDiv = document.createElement("div");\n        validationDiv.id = "log-level-validation";\n        document.body.appendChild(validationDiv);\n      }\n    });\n\n    it("validates empty log level as invalid", () => {\n      const select = document.createElement("select");\n      select.value = "";\n\n      const result = validateLogLevel(select);\n\n      expect(result).toBe(false);\n      expect(select.classList.contains("invalid")).toBe(true);\n    });\n\n    it("validates invalid log level as invalid", () => {\n      const select = document.createElement("select");\n      select.value = "INVALID";\n\n      const result = validateLogLevel(select);\n\n      expect(result).toBe(false);\n      expect(select.classList.contains("invalid")).toBe(true);\n    });\n\n    it("validates ERROR level as valid", () => {\n      const select = document.createElement("select");\n      select.id = "settings-log-level";\n      select.innerHTML = \'<' +
              'option value="ERROR">ERROR<' +
              '/option>\';\n      select.value = "ERROR";\n\n      const result = validateLogLevel(select);\n\n      expect(result).toBe(true);\n      expect(select.classList.contains("valid")).toBe(true);\n    });\n\n    it("validates INFO level as valid", () => {\n      const select = document.createElement("select");\n      select.id = "settings-log-level";\n      select.innerHTML = \'<' +
              'option value="INFO">INFO<' +
              '/option>\';\n      select.value = "INFO";\n\n      const result = validateLogLevel(select);\n\n      expect(result).toBe(true);\n      expect(select.classList.contains("valid")).toBe(true);\n    });\n\n    it("validates DEBUG level as valid", () => {\n      const select = document.createElement("select");\n      select.id = "settings-log-level";\n      select.innerHTML = \'<' +
              'option value="DEBUG">DEBUG<' +
              '/option>\';\n      select.value = "DEBUG";\n\n      const result = validateLogLevel(select);\n\n      expect(result).toBe(true);\n      expect(select.classList.contains("valid")).toBe(true);\n    });\n  });\n\n  describe("Format Validation", () => {\n    beforeEach(() => {\n      // Ensure the validation element exists for each test\n      let validationDiv = document.getElementById("format-validation");\n      if (!validationDiv) {\n        validationDiv = document.createElement("div");\n        validationDiv.id = "format-validation";\n        document.body.appendChild(validationDiv);\n      }\n    });\n\n    it("validates empty format as invalid", () => {\n      const select = document.createElement("select");\n      select.value = "";\n\n      const result = validateFormat(select);\n\n      expect(result).toBe(false);\n      expect(select.classList.contains("invalid")).toBe(true);\n    });\n\n    it("validates invalid format as invalid", () => {\n      const select = document.createElement("select");\n      select.value = "invalid-format";\n\n      const result = validateFormat(select);\n\n      expect(result).toBe(false);\n      expect(select.classList.contains("invalid")).toBe(true);\n    });\n\n    it("validates bestvideo+bestaudio/best as valid", () => {\n      const select = document.createElement("select");\n      select.id = "settings-ytdlp-format";\n      select.innerHTML =\n        \'<' +
              'option value="bestvideo+bestaudio/best">bestvideo+bestaudio/best<' +
              '/option>\';\n      select.value = "bestvideo+bestaudio/best";\n\n      const result = validateFormat(select);\n\n      expect(result).toBe(true);\n      expect(select.classList.contains("valid")).toBe(true);\n    });\n\n    it("validates best as valid", () => {\n      const select = document.createElement("select");\n      select.id = "settings-ytdlp-format";\n      select.innerHTML = \'<' +
              'option value="best">best<' +
              '/option>\';\n      select.value = "best";\n\n      const result = validateFormat(select);\n\n      expect(result).toBe(true);\n      expect(select.classList.contains("valid")).toBe(true);\n    });\n\n    it("validates mp4 as valid", () => {\n      const select = document.createElement("select");\n      select.id = "settings-ytdlp-format";\n      select.innerHTML = \'<' +
              'option value="mp4">mp4<' +
              '/option>\';\n      select.value = "mp4";\n\n      const result = validateFormat(select);\n\n      expect(result).toBe(true);\n      expect(select.classList.contains("valid")).toBe(true);\n    });\n\n    it("validates webm as valid", () => {\n      const select = document.createElement("select");\n      select.id = "settings-ytdlp-format";\n      select.innerHTML = \'<' +
              'option value="webm">webm<' +
              '/option>\';\n      select.value = "webm";\n\n      const result = validateFormat(select);\n\n      expect(result).toBe(true);\n      expect(select.classList.contains("valid")).toBe(true);\n    });\n\n    it("validates bestaudio[ext=m4a] as valid", () => {\n      const select = document.createElement("select");\n      select.id = "settings-ytdlp-format";\n      select.innerHTML =\n        \'<' +
              'option value="bestaudio[ext=m4a]">bestaudio[ext=m4a]<' +
              '/option>\';\n      select.value = "bestaudio[ext=m4a]";\n\n      const result = validateFormat(select);\n\n      expect(result).toBe(true);\n      expect(select.classList.contains("valid")).toBe(true);\n    });\n\n    it("validates bestaudio[ext=opus] as valid", () => {\n      const select = document.createElement("select");\n      select.id = "settings-ytdlp-format";\n      select.innerHTML =\n        \'<' +
              'option value="bestaudio[ext=opus]">bestaudio[ext=opus]<' +
              '/option>\';\n      select.value = "bestaudio[ext=opus]";\n\n      const result = validateFormat(select);\n\n      expect(result).toBe(true);\n      expect(select.classList.contains("valid")).toBe(true);\n    });\n  });\n\n  describe("Search Functionality", () => {\n    it("shows all sections when search query is empty", () => {\n      const sections = document.querySelectorAll(".settings-group");\n\n      performSearch("");\n\n      sections.forEach((section) => {\n        expect(section.classList.contains("hidden")).toBe(false);\n        expect(section.classList.contains("highlighted")).toBe(false);\n      });\n    });\n\n    it("hides non-matching sections and highlights matching ones", () => {\n      const sections = document.querySelectorAll(".settings-group");\n\n      performSearch("server");\n\n      const serverSection = document.querySelector(\'[data-category="server"]\');\n      const downloadSection = document.querySelector(\n        \'[data-category="download"]\'\n      );\n\n      expect(serverSection?.classList.contains("hidden")).toBe(false);\n      expect(serverSection?.classList.contains("highlighted")).toBe(true);\n      expect(downloadSection?.classList.contains("hidden")).toBe(true);\n      expect(downloadSection?.classList.contains("highlighted")).toBe(false);\n    });\n\n    it("shows no results message when no sections match", () => {\n      performSearch("nonexistent");\n\n      const noResultsElement = document.getElementById("no-results-message");\n      expect(noResultsElement?.style.display).toBe("block");\n    });\n\n    it("hides no results message when sections match", () => {\n      // First show no results\n      performSearch("nonexistent");\n      expect(document.getElementById("no-results-message")?.style.display).toBe(\n        "block"\n      );\n\n      // Then search for something that matches\n      performSearch("server");\n      expect(document.getElementById("no-results-message")?.style.display).toBe(\n        "none"\n      );\n    });\n\n    it("handles multiple search terms", () => {\n      performSearch("server configuration");\n\n      const serverSection = document.querySelector(\'[data-category="server"]\');\n      expect(serverSection?.classList.contains("hidden")).toBe(false);\n      expect(serverSection?.classList.contains("highlighted")).toBe(true);\n    });\n  });\n\n  describe("Text Highlighting", () => {\n    it("highlights matching text in section titles", () => {\n      const section = document.querySelector(\n        \'[data-category="server"]\'\n      ) as Element;\n      const searchTerms = ["server"];\n\n      highlightMatchingText(section, searchTerms);\n\n      const titleElement = section.querySelector(".section-title");\n      expect(titleElement?.innerHTML).toContain(\n        \'<' +
              'mark class="search-highlight">Server<' +
              '/mark>\'\n      );\n    });\n\n    it("removes existing highlights before adding new ones", () => {\n      const section = document.querySelector(\n        \'[data-category="server"]\'\n      ) as Element;\n\n      // Add initial highlight\n      highlightMatchingText(section, ["server"]);\n      expect(section.querySelector(".section-title")?.innerHTML).toContain(\n        \'<' +
              'mark class="search-highlight">Server<' +
              '/mark>\'\n      );\n\n      // Add new highlight\n      highlightMatchingText(section, ["configuration"]);\n      expect(section.querySelector(".section-title")?.innerHTML).toContain(\n        \'<' +
              'mark class="search-highlight">Configuration<' +
              "/mark>'\n      );\n      expect(section.querySelector(\".section-title\")?.innerHTML).not.toContain(\n        '<" +
              'mark class="search-highlight">Server<' +
              '/mark>\'\n      );\n    });\n\n    it("handles case-insensitive highlighting", () => {\n      const section = document.querySelector(\n        \'[data-category="server"]\'\n      ) as Element;\n      const searchTerms = ["SERVER"];\n\n      highlightMatchingText(section, searchTerms);\n\n      const titleElement = section.querySelector(".section-title");\n      expect(titleElement?.innerHTML).toContain(\n        \'<' +
              'mark class="search-highlight">Server<' +
              '/mark>\'\n      );\n    });\n\n    it("does nothing when section has no title", () => {\n      const section = document.createElement("div");\n      const searchTerms = ["test"];\n\n      // Should not throw an error\n      expect(() => highlightMatchingText(section, searchTerms)).not.toThrow();\n    });\n  });\n\n  describe("No Results Message", () => {\n    it("creates and shows no results message when show is true", () => {\n      showNoResultsMessage(true);\n\n      const noResultsElement = document.getElementById("no-results-message");\n      expect(noResultsElement).toBeTruthy();\n      expect(noResultsElement?.style.display).toBe("block");\n      expect(noResultsElement?.className).toBe("no-results-message");\n    });\n\n    it("hides existing no results message when show is false", () => {\n      // First create the message\n      showNoResultsMessage(true);\n      expect(document.getElementById("no-results-message")?.style.display).toBe(\n        "block"\n      );\n\n      // Then hide it\n      showNoResultsMessage(false);\n      expect(document.getElementById("no-results-message")?.style.display).toBe(\n        "none"\n      );\n    });\n\n    it("reuses existing no results element", () => {\n      // Create message twice\n      showNoResultsMessage(true);\n      const firstElement = document.getElementById("no-results-message");\n\n      showNoResultsMessage(false);\n      showNoResultsMessage(true);\n      const secondElement = document.getElementById("no-results-message");\n\n      expect(firstElement).toBe(secondElement);\n    });\n  });\n\n  describe("Validation Message Display", () => {\n    it("shows validation message with correct class", () => {\n      const element = document.getElementById("port-validation");\n\n      showValidationMessage(element, "Test message", "error");\n\n      expect(element?.textContent).toBe("Test message");\n      expect(element?.className).toBe("validation-message error");\n    });\n\n    it("handles null element gracefully", () => {\n      expect(() =>\n        showValidationMessage(null, "Test message", "success")\n      ).not.toThrow();\n    });\n\n    it("auto-hides success messages after timeout", () => {\n      jest.useFakeTimers();\n      const element = document.getElementById("port-validation");\n\n      showValidationMessage(element, "Success message", "success");\n      expect(element?.textContent).toBe("Success message");\n\n      jest.advanceTimersByTime(3000);\n      expect(element?.textContent).toBe("");\n      expect(element?.className).toBe("validation-message");\n\n      jest.useRealTimers();\n    });\n\n    it("does not auto-hide error messages", () => {\n      jest.useFakeTimers();\n      const element = document.getElementById("port-validation");\n\n      showValidationMessage(element, "Error message", "error");\n      expect(element?.textContent).toBe("Error message");\n\n      jest.advanceTimersByTime(3000);\n      expect(element?.textContent).toBe("Error message");\n      expect(element?.className).toBe("validation-message error");\n\n      jest.useRealTimers();\n    });\n\n    it("does not auto-hide warning messages", () => {\n      jest.useFakeTimers();\n      const element = document.getElementById("port-validation");\n\n      showValidationMessage(element, "Warning message", "warning");\n      expect(element?.textContent).toBe("Warning message");\n\n      jest.advanceTimersByTime(3000);\n      expect(element?.textContent).toBe("Warning message");\n      expect(element?.className).toBe("validation-message warning");\n\n      jest.useRealTimers();\n    });\n  });\n});\n',
          },
          "tests/extension/history.script.test.ts": {
            tests: [
              {
                id: "252",
                name: "history.ts core functions fetchHistory returns empty history on runtime error",
                location: { start: { column: 6, line: 23 } },
              },
              {
                id: "253",
                name: "history.ts core functions fetchHistory returns paginated and sorted history",
                location: { start: { column: 6, line: 33 } },
              },
              {
                id: "254",
                name: "history.ts core functions renderHistoryItems renders empty state when no items",
                location: { start: { column: 6, line: 51 } },
              },
              {
                id: "255",
                name: "history.ts core functions renderHistoryItems renders list of items",
                location: { start: { column: 6, line: 68 } },
              },
            ],
            source:
              '// @jest-environment jsdom\nimport { fetchHistory, renderHistoryItems } from "../../extension/src/history";\n\ndescribe("history.ts core functions", () => {\n  beforeEach(() => {\n    document.body.innerHTML =\n      \'<' +
              'ul id="history-list"><' +
              "/ul>' +\n      '<" +
              'div id="page-info"><' +
              "/div>' +\n      '<" +
              'button id="prev-btn"><' +
              "/button>' +\n      '<" +
              'button id="next-btn"><' +
              '/button>\';\n    (global as any).chrome = {\n      runtime: { lastError: undefined },\n      storage: {\n        local: {\n          get: jest.fn(),\n          set: jest.fn((items: any, cb: any) => cb && cb()),\n        },\n      },\n    };\n  });\n\n  describe("fetchHistory", () => {\n    it("returns empty history on runtime error", async () => {\n      (global as any).chrome.runtime.lastError = { message: "fail" };\n      (\n        (global as any).chrome.storage.local.get as jest.Mock\n      ).mockImplementation((keys: any, cb: any) => cb({}));\n      const result = await fetchHistory(1, 5);\n      expect(result.history).toEqual([]);\n      expect(result.totalItems).toBe(0);\n    });\n\n    it("returns paginated and sorted history", async () => {\n      (global as any).chrome.runtime.lastError = undefined;\n      const entries = [\n        { id: "1", timestamp: 100, page_title: "A" },\n        { id: "2", timestamp: 200, page_title: "B" },\n      ];\n      (\n        (global as any).chrome.storage.local.get as jest.Mock\n      ).mockImplementation((keys: any, cb: any) =>\n        cb({ downloadHistory: entries })\n      );\n      const result = await fetchHistory(1, 1);\n      expect(result.history).toEqual([entries[1]]);\n      expect(result.totalItems).toBe(2);\n    });\n  });\n\n  describe("renderHistoryItems", () => {\n    it("renders empty state when no items", () => {\n      const listEl = document.getElementById("history-list");\n      const pageInfoEl = document.getElementById("page-info");\n      const prevBtn = document.getElementById("prev-btn") as HTMLButtonElement;\n      const nextBtn = document.getElementById("next-btn") as HTMLButtonElement;\n\n      if (!listEl || !pageInfoEl || !prevBtn || !nextBtn) {\n        throw new Error("Required DOM elements not found");\n      }\n\n      renderHistoryItems([], 1, 5, 0, listEl, pageInfoEl, prevBtn, nextBtn);\n      expect(listEl.innerHTML).toContain("empty-history");\n      expect(pageInfoEl.textContent).toBe("No items");\n      expect(prevBtn.disabled).toBe(true);\n      expect(nextBtn.disabled).toBe(true);\n    });\n\n    it("renders list of items", () => {\n      const listEl = document.getElementById("history-list");\n      if (!listEl) {\n        throw new Error("History list element not found");\n      }\n\n      renderHistoryItems(\n        [{ id: "1", timestamp: 1000, page_title: "Test", status: "done" }],\n        1,\n        5,\n        1,\n        listEl\n      );\n      expect(listEl.querySelectorAll("li.history-item").length).toBe(1);\n      const titleElement = listEl.querySelector("li.history-item b");\n      expect(titleElement?.textContent).toBe("Test");\n    });\n  });\n});\n',
          },
          "tests/extension/content.behavior.test.ts": {
            tests: [
              {
                id: "256",
                name: "Content script button behaviors createOrUpdateButton positioning positions main button at stored x/y on generic host",
                location: { start: { column: 6, line: 37 } },
              },
              {
                id: "257",
                name: "Content script button behaviors createOrUpdateButton positioning pins button to top-right on fresh YouTube page",
                location: { start: { column: 6, line: 50 } },
              },
              {
                id: "258",
                name: "Content script button behaviors hidden and reset behavior hides and shows button via setButtonHiddenState",
                location: { start: { column: 6, line: 66 } },
              },
              {
                id: "259",
                name: "Content script button behaviors hidden and reset behavior resets button position via resetButtonPosition",
                location: { start: { column: 6, line: 92 } },
              },
              {
                id: "260",
                name: "Content script button behaviors Button Drag and Drop should start dragging on mousedown",
                location: { start: { column: 6, line: 120 } },
              },
              {
                id: "261",
                name: "Content script button behaviors Button Drag and Drop should move the button on mousemove",
                location: { start: { column: 6, line: 131 } },
              },
              {
                id: "262",
                name: "Content script button behaviors Button Drag and Drop should stop dragging on mouseup and save the new position",
                location: { start: { column: 6, line: 153 } },
              },
              {
                id: "263",
                name: "Content script button behaviors ensureDownloadButtonStyle should force display to block and opacity to 1 if needed",
                location: { start: { column: 6, line: 196 } },
              },
              {
                id: "264",
                name: "Content script button behaviors ensureDownloadButtonStyle should apply guideline styles if not in temporary feedback state",
                location: { start: { column: 6, line: 206 } },
              },
              {
                id: "265",
                name: "Content script button behaviors ensureDownloadButtonStyle should not override temporary feedback backgrounds",
                location: { start: { column: 6, line: 215 } },
              },
              {
                id: "266",
                name: "Content script button behaviors error handling in getButtonState/saveButtonState should handle chrome.runtime.lastError in getButtonState",
                location: { start: { column: 6, line: 228 } },
              },
              {
                id: "267",
                name: "Content script button behaviors error handling in getButtonState/saveButtonState should handle chrome.runtime.lastError in saveButtonState",
                location: { start: { column: 6, line: 240 } },
              },
              {
                id: "268",
                name: "Content script button behaviors multiple video button injection should create a button for each video element",
                location: { start: { column: 6, line: 256 } },
              },
              {
                id: "269",
                name: "Content script button behaviors video detection and injection should detect video elements and inject buttons",
                location: { start: { column: 6, line: 276 } },
              },
              {
                id: "270",
                name: "Content script button behaviors video detection and injection should handle significant video detection",
                location: { start: { column: 6, line: 295 } },
              },
              {
                id: "271",
                name: "Content script button behaviors drag and drop edge cases should handle drag handle interactions",
                location: { start: { column: 6, line: 317 } },
              },
              {
                id: "272",
                name: "Content script button behaviors drag and drop edge cases should distinguish between click and drag",
                location: { start: { column: 6, line: 335 } },
              },
              {
                id: "273",
                name: "Content script button behaviors button state management should handle button state reset for testing",
                location: { start: { column: 6, line: 364 } },
              },
              {
                id: "274",
                name: "Content script button behaviors button state management should handle storage errors gracefully",
                location: { start: { column: 6, line: 370 } },
              },
              {
                id: "275",
                name: "Content script button behaviors style enforcement edge cases should handle button not in document",
                location: { start: { column: 6, line: 382 } },
              },
              {
                id: "276",
                name: "Content script button behaviors style enforcement edge cases should handle computed style edge cases",
                location: { start: { column: 6, line: 390 } },
              },
              {
                id: "277",
                name: "Content script button behaviors logging and error paths should handle logging in test environment",
                location: { start: { column: 6, line: 415 } },
              },
            ],
            source:
              '/* eslint-env jest */\n/**\n * @jest-environment jsdom\n */\n\nimport {\n  createOrUpdateButton,\n  resetButtonPosition,\n  setButtonHiddenState,\n  _resetStateForTesting,\n} from "../../extension/src/content";\nimport * as utils from "../../extension/src/lib/utils";\n\n// Additional imports for direct style testing\nimport { ensureDownloadButtonStyle } from "../../extension/src/content";\n\ndescribe("Content script button behaviors", () => {\n  let getHostnameSpy: jest.SpyInstance;\n\n  beforeEach(() => {\n    // Reset DOM\n    document.body.innerHTML = "";\n    // Reset mocks\n    jest.clearAllMocks();\n    // Default hostname\n    getHostnameSpy = jest\n      .spyOn(utils, "getHostname")\n      .mockReturnValue("example.com");\n  });\n\n  afterEach(() => {\n    getHostnameSpy.mockRestore();\n  });\n\n  describe("createOrUpdateButton positioning", () => {\n    it("positions main button at stored x/y on generic host", async () => {\n      (chrome.storage.local.get as jest.Mock).mockImplementation((keys, cb) =>\n        cb({ "example.com": { x: 50, y: 60, hidden: false } })\n      );\n      await createOrUpdateButton();\n      const btn = document.getElementById("evd-download-button-main");\n      expect(btn).not.toBeNull();\n      if (btn) {\n        expect(btn.style.left).toBe("50px");\n        expect(btn.style.top).toBe("60px");\n      }\n    });\n\n    it("pins button to top-right on fresh YouTube page", async () => {\n      getHostnameSpy.mockReturnValue("www.youtube.com");\n      (chrome.storage.local.get as jest.Mock).mockImplementation((keys, cb) =>\n        cb({ "www.youtube.com": { x: 10, y: 10, hidden: false } })\n      );\n      await createOrUpdateButton();\n      const btn = document.getElementById("evd-download-button-main");\n      if (btn) {\n        expect(btn.style.top).toBe("70px");\n        expect(btn.style.right).toBe("20px");\n        expect(btn.style.left).toBe("auto");\n      }\n    });\n  });\n\n  describe("hidden and reset behavior", () => {\n    it("hides and shows button via setButtonHiddenState", async () => {\n      (chrome.storage.local.get as jest.Mock).mockImplementation((keys, cb) =>\n        cb({ "example.com": { x: 0, y: 0, hidden: false } })\n      );\n      await createOrUpdateButton();\n      const btn = document.getElementById("evd-download-button-main");\n      // Hide\n      await setButtonHiddenState(true);\n      if (btn) {\n        expect(btn.style.display).toBe("none");\n      }\n      expect(chrome.storage.local.set).toHaveBeenCalledWith(\n        { "example.com": { x: 0, y: 0, hidden: true } },\n        expect.any(Function)\n      );\n      // Show\n      await setButtonHiddenState(false);\n      if (btn) {\n        expect(btn.style.display).toBe("block");\n      }\n      expect(chrome.storage.local.set).toHaveBeenCalledWith(\n        { "example.com": { x: 0, y: 0, hidden: false } },\n        expect.any(Function)\n      );\n    });\n\n    it("resets button position via resetButtonPosition", async () => {\n      await createOrUpdateButton();\n      const btn = document.getElementById("evd-download-button-main");\n      // Change style\n      if (btn) {\n        btn.style.left = "123px";\n        btn.style.top = "456px";\n      }\n      // Reset\n      await resetButtonPosition();\n      if (btn) {\n        expect(btn.style.left).toBe("10px");\n        expect(btn.style.top).toBe("10px");\n      }\n      expect(chrome.storage.local.set).toHaveBeenCalledWith(\n        { "example.com": { x: 10, y: 10, hidden: false } },\n        expect.any(Function)\n      );\n    });\n  });\n\n  describe("Button Drag and Drop", () => {\n    beforeEach(async () => {\n      document.body.innerHTML = "";\n      _resetStateForTesting();\n      await createOrUpdateButton(); // Create the button\n    });\n\n    it("should start dragging on mousedown", () => {\n      const button = document.getElementById("evd-download-button-main")!;\n      const mouseDownEvent = new MouseEvent("mousedown", {\n        bubbles: true,\n        cancelable: true,\n        clientX: 50,\n        clientY: 50,\n      });\n      button.dispatchEvent(mouseDownEvent);\n    });\n\n    it("should move the button on mousemove", () => {\n      const button = document.getElementById("evd-download-button-main")!;\n      const mouseDownEvent = new MouseEvent("mousedown", {\n        bubbles: true,\n        cancelable: true,\n        clientX: 10,\n        clientY: 10,\n      });\n      button.dispatchEvent(mouseDownEvent);\n\n      const mouseMoveEvent = new MouseEvent("mousemove", {\n        bubbles: true,\n        cancelable: true,\n        clientX: 100,\n        clientY: 100,\n      });\n      document.dispatchEvent(mouseMoveEvent);\n\n      expect(button.style.left).not.toBe("10px");\n      expect(button.style.top).not.toBe("10px");\n    });\n\n    it("should stop dragging on mouseup and save the new position", async () => {\n      const button = document.getElementById("evd-download-button-main")!;\n      const mouseDownEvent = new MouseEvent("mousedown", {\n        bubbles: true,\n        cancelable: true,\n        clientX: 10,\n        clientY: 10,\n      });\n      button.dispatchEvent(mouseDownEvent);\n\n      const mouseMoveEvent = new MouseEvent("mousemove", {\n        bubbles: true,\n        cancelable: true,\n        clientX: 100,\n        clientY: 100,\n      });\n      document.dispatchEvent(mouseMoveEvent);\n\n      const mouseUpEvent = new MouseEvent("mouseup", {\n        bubbles: true,\n        cancelable: true,\n      });\n      document.dispatchEvent(mouseUpEvent);\n\n      // Use a short timeout to allow the async `saveButtonState` to complete\n      await new Promise((resolve) => setTimeout(resolve, 0));\n\n      // Check that storage was called with the new position\n      expect(chrome.storage.local.set).toHaveBeenCalledWith(\n        {\n          "example.com": {\n            x: expect.any(Number),\n            y: expect.any(Number),\n            hidden: false,\n          },\n        },\n        expect.any(Function)\n      );\n    });\n  });\n\n  // --- NEW TESTS ---\n  describe("ensureDownloadButtonStyle", () => {\n    it("should force display to block and opacity to 1 if needed", () => {\n      const btn = document.createElement("button");\n      btn.style.display = "none";\n      btn.style.opacity = "0.5";\n      document.body.appendChild(btn);\n      ensureDownloadButtonStyle(btn);\n      expect(btn.style.display).toBe("block");\n      expect(btn.style.opacity).toBe("1");\n    });\n\n    it("should apply guideline styles if not in temporary feedback state", () => {\n      const btn = document.createElement("button");\n      btn.style.backgroundColor = "rgba(0,0,0,0.3)";\n      document.body.appendChild(btn);\n      ensureDownloadButtonStyle(btn);\n      expect(btn.style.borderRadius).toBe("4px");\n      expect(btn.style.padding).toBe("4px 8px");\n    });\n\n    it("should not override temporary feedback backgrounds", () => {\n      const btn = document.createElement("button");\n      btn.style.backgroundColor = "rgba(255,0,0,0.7)"; // FAILED\n      document.body.appendChild(btn);\n      ensureDownloadButtonStyle(btn);\n      // Should not override to guideline background\n      expect(btn.style.backgroundColor.replace(/\\s/g, "")).toBe(\n        "rgba(255,0,0,0.7)"\n      );\n    });\n  });\n\n  describe("error handling in getButtonState/saveButtonState", () => {\n    it("should handle chrome.runtime.lastError in getButtonState", async () => {\n      (chrome.storage.local.get as jest.Mock).mockImplementation((keys, cb) => {\n        chrome.runtime.lastError = { message: "fail" } as any;\n        cb({});\n        chrome.runtime.lastError = undefined;\n      });\n      const btn = await createOrUpdateButton();\n      // Accept either fallback or default position (implementation may vary)\n      expect(["10px", "90px"]).toContain(btn.style.left);\n      expect(["10px", "90px"]).toContain(btn.style.top);\n    });\n\n    it("should handle chrome.runtime.lastError in saveButtonState", async () => {\n      (chrome.storage.local.get as jest.Mock).mockImplementation((keys, cb) =>\n        cb({ "example.com": { x: 10, y: 10, hidden: false } })\n      );\n      (chrome.storage.local.set as jest.Mock).mockImplementation((data, cb) => {\n        chrome.runtime.lastError = { message: "fail" } as any;\n        cb();\n        chrome.runtime.lastError = undefined;\n      });\n      await createOrUpdateButton();\n      await setButtonHiddenState(true);\n      // Should not throw\n    });\n  });\n\n  describe("multiple video button injection", () => {\n    it("should create a button for each video element", async () => {\n      (chrome.storage.local.get as jest.Mock).mockImplementation((keys, cb) =>\n        cb({ "example.com": { x: 10, y: 10, hidden: false } })\n      );\n      const video1 = document.createElement("video");\n      const video2 = document.createElement("video");\n      document.body.appendChild(video1);\n      document.body.appendChild(video2);\n      // Simulate injection logic\n      await createOrUpdateButton(video1);\n      await createOrUpdateButton(video2);\n      const buttons = document.querySelectorAll(\n        "button[id^=\'evd-download-button-\']"\n      );\n      expect(buttons.length).toBeGreaterThanOrEqual(2);\n    });\n  });\n\n  // --- ADDITIONAL COMPREHENSIVE TESTS ---\n  describe("video detection and injection", () => {\n    it("should detect video elements and inject buttons", async () => {\n      (chrome.storage.local.get as jest.Mock).mockImplementation((keys, cb) =>\n        cb({ "example.com": { x: 10, y: 10, hidden: false } })\n      );\n\n      // Create video elements\n      const video = document.createElement("video");\n      const iframe = document.createElement("iframe");\n      iframe.src = "https://www.youtube.com/embed/test";\n      document.body.appendChild(video);\n      document.body.appendChild(iframe);\n\n      // Simulate video detection\n      const videos = document.querySelectorAll(\n        \'video, iframe[src*="youtube.com"]\'\n      );\n      expect(videos.length).toBe(2);\n    });\n\n    it("should handle significant video detection", async () => {\n      const video = document.createElement("video");\n      video.style.width = "100px";\n      video.style.height = "100px";\n      document.body.appendChild(video);\n\n      // Test significant video logic - test the condition directly\n      // In the actual implementation, this would check offsetWidth > 50 && offsetHeight > 50\n      const width = 100; // Simulated width\n      const height = 100; // Simulated height\n      const isSignificant = width > 50 && height > 50;\n      expect(isSignificant).toBe(true);\n    });\n  });\n\n  describe("drag and drop edge cases", () => {\n    beforeEach(async () => {\n      document.body.innerHTML = "";\n      _resetStateForTesting();\n      await createOrUpdateButton();\n    });\n\n    it("should handle drag handle interactions", () => {\n      const button = document.getElementById("evd-download-button-main")!;\n      const dragHandle = document.createElement("div");\n      dragHandle.className = "evd-drag-handle";\n      button.appendChild(dragHandle);\n\n      const mouseDownEvent = new MouseEvent("mousedown", {\n        bubbles: true,\n        cancelable: true,\n        clientX: 10,\n        clientY: 10,\n      });\n      dragHandle.dispatchEvent(mouseDownEvent);\n\n      // Should not throw and should handle drag\n      expect(button).toBeDefined();\n    });\n\n    it("should distinguish between click and drag", () => {\n      const button = document.getElementById("evd-download-button-main")!;\n      const originalLeft = button.style.left;\n      const originalTop = button.style.top;\n\n      // Quick mousedown/mouseup (click)\n      const mouseDownEvent = new MouseEvent("mousedown", {\n        bubbles: true,\n        cancelable: true,\n        clientX: 10,\n        clientY: 10,\n      });\n      button.dispatchEvent(mouseDownEvent);\n\n      const mouseUpEvent = new MouseEvent("mouseup", {\n        bubbles: true,\n        cancelable: true,\n        clientX: 10,\n        clientY: 10,\n      });\n      document.dispatchEvent(mouseUpEvent);\n\n      // Position should remain the same for a click\n      expect(button.style.left).toBe(originalLeft);\n      expect(button.style.top).toBe(originalTop);\n    });\n  });\n\n  describe("button state management", () => {\n    it("should handle button state reset for testing", () => {\n      _resetStateForTesting();\n      // Should not throw and should reset internal state\n      expect(document.getElementById("evd-download-button-main")).toBeNull();\n    });\n\n    it("should handle storage errors gracefully", async () => {\n      (chrome.storage.local.get as jest.Mock).mockImplementation((keys, cb) => {\n        throw new Error("Storage error");\n      });\n\n      // Should not throw and should use defaults\n      const btn = await createOrUpdateButton();\n      expect(btn).toBeDefined();\n    });\n  });\n\n  describe("style enforcement edge cases", () => {\n    it("should handle button not in document", () => {\n      const btn = document.createElement("button");\n      // Don\'t append to document\n      ensureDownloadButtonStyle(btn);\n      // Should not throw\n      expect(btn).toBeDefined();\n    });\n\n    it("should handle computed style edge cases", () => {\n      const btn = document.createElement("button");\n      document.body.appendChild(btn);\n\n      // Mock getComputedStyle to return edge case values\n      const originalGetComputedStyle = window.getComputedStyle;\n      window.getComputedStyle = jest.fn().mockReturnValue({\n        display: "none",\n        opacity: "0.1",\n        backgroundColor: "rgba(0,0,0,0.3)",\n        borderRadius: "0px",\n        padding: "0px",\n      } as any);\n\n      ensureDownloadButtonStyle(btn);\n\n      // Restore original\n      window.getComputedStyle = originalGetComputedStyle;\n\n      expect(btn.style.display).toBe("block");\n      expect(btn.style.opacity).toBe("1");\n    });\n  });\n\n  describe("logging and error paths", () => {\n    it("should handle logging in test environment", () => {\n      // Test that logging functions don\'t throw in test environment\n      const logSpy = jest.spyOn(console, "log").mockImplementation();\n      const warnSpy = jest.spyOn(console, "warn").mockImplementation();\n      const errorSpy = jest.spyOn(console, "error").mockImplementation();\n\n      // Trigger some logging paths\n      const btn = document.createElement("button");\n      btn.style.display = "none";\n      document.body.appendChild(btn);\n      ensureDownloadButtonStyle(btn);\n\n      // Should not throw\n      expect(btn.style.display).toBe("block");\n\n      logSpy.mockRestore();\n      warnSpy.mockRestore();\n      errorSpy.mockRestore();\n    });\n  });\n});\n',
          },
          "tests/extension/content.extra.test.ts": {
            tests: [
              {
                id: "278",
                name: "Content.ts additional branch coverage getButtonState error handling returns default on storage lastError",
                location: { start: { column: 6, line: 19 } },
              },
              {
                id: "279",
                name: "Content.ts additional branch coverage getButtonState error handling returns default on exception",
                location: { start: { column: 6, line: 39 } },
              },
              {
                id: "280",
                name: "Content.ts additional branch coverage saveButtonState error handling logs error when saving state fails",
                location: { start: { column: 6, line: 58 } },
              },
              {
                id: "281",
                name: "Content.ts additional branch coverage ensureDownloadButtonStyle adjustments fixes display and opacity and applies guideline styles",
                location: { start: { column: 6, line: 76 } },
              },
              {
                id: "282",
                name: "Content.ts additional branch coverage ensureDownloadButtonStyle adjustments skips if element not in DOM",
                location: { start: { column: 6, line: 100 } },
              },
              {
                id: "283",
                name: "Content.ts additional branch coverage createOrUpdateButton existing instance reuses the same button and reapplies styles",
                location: { start: { column: 6, line: 108 } },
              },
            ],
            source:
              'import {\n  getButtonState,\n  saveButtonState,\n  ensureDownloadButtonStyle,\n  createOrUpdateButton,\n} from "../../extension/src/content";\nimport * as ytEnhance from "../../extension/src/youtube_enhance";\nimport { logger } from "../../extension/src/lib/utils";\n\ndescribe("Content.ts additional branch coverage", () => {\n  beforeEach(() => {\n    document.body.innerHTML = "";\n    jest.clearAllMocks();\n    chrome.runtime.lastError = null;\n    jest.spyOn(logger, "error");\n  });\n\n  describe("getButtonState error handling", () => {\n    it("returns default on storage lastError", async () => {\n      // Simulate lastError in callback\n      (chrome.storage.local.get as jest.Mock).mockImplementation((key, cb) => {\n        chrome.runtime.lastError = {\n          message: "fail",\n        };\n        cb({});\n      });\n      const state = await getButtonState();\n      expect(state).toEqual({\n        x: 10,\n        y: 10,\n        hidden: false,\n      });\n      expect(logger.error).toHaveBeenCalledWith(\n        "Error getting button state from storage:",\n        "fail"\n      );\n    });\n\n    it("returns default on exception", async () => {\n      // Throw an exception in storage.get\n      (chrome.storage.local.get as jest.Mock).mockImplementation(() => {\n        throw new Error("boom");\n      });\n      const state = await getButtonState();\n      expect(state).toEqual({\n        x: 10,\n        y: 10,\n        hidden: false,\n      });\n      expect(logger.error).toHaveBeenCalledWith(\n        "Error getting button state from storage:",\n        "boom"\n      );\n    });\n  });\n\n  describe("saveButtonState error handling", () => {\n    it("logs error when saving state fails", async () => {\n      // Simulate lastError after set\n      chrome.runtime.lastError = {\n        message: "savefail",\n      };\n      await saveButtonState({\n        x: 5,\n        y: 5,\n        hidden: true,\n      });\n      expect(logger.error).toHaveBeenCalledWith(\n        "Error saving button state to storage:",\n        "savefail"\n      );\n    });\n  });\n\n  describe("ensureDownloadButtonStyle adjustments", () => {\n    it("fixes display and opacity and applies guideline styles", () => {\n      const btn = document.createElement("button");\n      document.body.appendChild(btn);\n      // Stub computed style\n      jest.spyOn(window, "getComputedStyle").mockReturnValue({\n        display: "none",\n        opacity: "0.5",\n        padding: "0px",\n        borderRadius: "0px",\n        backgroundColor: "red",\n        borderWidth: "2px",\n        borderStyle: "dashed",\n      } as any);\n      ensureDownloadButtonStyle(btn);\n      expect(btn.style.display).toBe("block");\n      expect(btn.style.opacity).toBe("1");\n      // Check guideline props\n      expect(btn.style.padding).toBe("4px 8px");\n      expect(btn.style.borderRadius).toBe("4px");\n      expect(btn.style.backgroundColor).toBe("rgba(0, 0, 0, 0.3)");\n      expect(btn.style.borderWidth).toBe("1px");\n      expect(btn.style.borderStyle).toBe("solid");\n    });\n\n    it("skips if element not in DOM", () => {\n      const orphan = document.createElement("button");\n      // Should not throw\n      expect(() => ensureDownloadButtonStyle(orphan)).not.toThrow();\n    });\n  });\n\n  describe("createOrUpdateButton existing instance", () => {\n    it("reuses the same button and reapplies styles", async () => {\n      const styleSpy = jest.spyOn(ytEnhance, "enhanceYouTubeButton");\n      const first = await createOrUpdateButton();\n      const second = await createOrUpdateButton();\n      expect(second).toBe(first);\n      expect(styleSpy).toHaveBeenCalled();\n    });\n  });\n});\n',
          },
          "tests/extension/content.ui.test.ts": {
            tests: [
              {
                id: "284",
                name: "content.ts UI functions createOrUpdateButton injects a download button into the DOM when no video element is provided",
                location: { start: { column: 6, line: 25 } },
              },
              {
                id: "285",
                name: "content.ts UI functions ensureDownloadButtonStyle applies guideline styles to the button",
                location: { start: { column: 6, line: 37 } },
              },
            ],
            source:
              '// @jest-environment jsdom\nimport {\n  createOrUpdateButton,\n  ensureDownloadButtonStyle,\n  setButtonHiddenState,\n  resetButtonPosition,\n} from "../../extension/src/content";\n\ndescribe("content.ts UI functions", () => {\n  beforeEach(() => {\n    document.body.innerHTML =\n      \'<' +
              'div id="video-container"><' +
              'video id="video"><' +
              "/video><" +
              '/div>\';\n    (global as any).chrome = {\n      storage: {\n        local: {\n          get: jest.fn((key: any, cb: any) => cb({})),\n          set: jest.fn((items: any, cb: any) => cb && cb()),\n        },\n      },\n      runtime: { lastError: undefined },\n    };\n  });\n\n  describe("createOrUpdateButton", () => {\n    it("injects a download button into the DOM when no video element is provided", async () => {\n      // Ensure no existing button\n      document.body.innerHTML = "";\n      await createOrUpdateButton();\n      const btn = document.body.querySelector("button");\n      expect(btn).not.toBeNull();\n      // ID should start with our prefix\n      expect(btn?.id).toMatch(/^evd-download-button-/);\n    });\n  });\n\n  describe("ensureDownloadButtonStyle", () => {\n    it("applies guideline styles to the button", () => {\n      const btn = document.createElement("button");\n      document.body.appendChild(btn);\n      ensureDownloadButtonStyle(btn);\n      expect(btn.style.padding).toBe("4px 8px");\n      expect(btn.style.borderRadius).toBe("4px");\n      expect(btn.style.backgroundColor).toBe("rgba(0, 0, 0, 0.3)");\n      expect(btn.style.borderWidth).toBe("1px");\n      expect(btn.style.borderStyle).toBe("solid");\n    });\n  });\n\n  // Note: setButtonHiddenState and resetButtonPosition handle storage and are covered by storage tests\n});\n',
          },
          "tests/extension/utils.test.ts": {
            tests: [
              {
                id: "286",
                name: "Utility functions debounce should debounce function calls",
                location: { start: { column: 6, line: 18 } },
              },
              {
                id: "287",
                name: "Utility functions debounce should use the most recent arguments",
                location: { start: { column: 6, line: 37 } },
              },
              {
                id: "288",
                name: "Utility functions debounce should handle multiple rapid calls correctly",
                location: { start: { column: 6, line: 50 } },
              },
              {
                id: "289",
                name: "Utility functions logger should log with prefix when console.log is mocked",
                location: { start: { column: 6, line: 88 } },
              },
              {
                id: "290",
                name: "Utility functions logger should warn with prefix when console.warn is mocked",
                location: { start: { column: 6, line: 93 } },
              },
              {
                id: "291",
                name: "Utility functions logger should error with prefix when console.error is mocked",
                location: { start: { column: 6, line: 101 } },
              },
              {
                id: "292",
                name: "Utility functions logger should debug with prefix when console.debug is mocked",
                location: { start: { column: 6, line: 109 } },
              },
              {
                id: "293",
                name: "Utility functions logger should handle logging errors gracefully",
                location: { start: { column: 6, line: 117 } },
              },
              {
                id: "294",
                name: "Utility functions logger should handle warning errors gracefully",
                location: { start: { column: 6, line: 127 } },
              },
              {
                id: "295",
                name: "Utility functions logger should handle error logging failures gracefully",
                location: { start: { column: 6, line: 135 } },
              },
              {
                id: "296",
                name: "Utility functions logger should handle debug logging failures gracefully",
                location: { start: { column: 6, line: 143 } },
              },
              {
                id: "297",
                name: "Utility functions getHostname should return the provided hostname",
                location: { start: { column: 6, line: 153 } },
              },
              {
                id: "298",
                name: "Utility functions getHostname should return empty string for empty hostname",
                location: { start: { column: 6, line: 157 } },
              },
              {
                id: "299",
                name: "Utility functions getHostname should return window.location.hostname if no argument is provided",
                location: { start: { column: 6, line: 161 } },
              },
              {
                id: "300",
                name: "Utility functions safeParse should parse valid JSON",
                location: { start: { column: 6, line: 167 } },
              },
              {
                id: "301",
                name: "Utility functions safeParse should return fallback for invalid JSON",
                location: { start: { column: 6, line: 174 } },
              },
              {
                id: "302",
                name: "Utility functions safeParse should handle complex JSON objects",
                location: { start: { column: 6, line: 182 } },
              },
              {
                id: "303",
                name: "Utility functions safeParse should handle empty string as invalid JSON",
                location: { start: { column: 6, line: 193 } },
              },
              {
                id: "304",
                name: "Utility functions safeParse should handle null string as invalid JSON",
                location: { start: { column: 6, line: 199 } },
              },
              {
                id: "305",
                name: "Utility functions safeStringify should stringify objects",
                location: { start: { column: 6, line: 207 } },
              },
              {
                id: "306",
                name: "Utility functions safeStringify should handle circular references",
                location: { start: { column: 6, line: 214 } },
              },
              {
                id: "307",
                name: "Utility functions safeStringify should handle arrays",
                location: { start: { column: 6, line: 222 } },
              },
              {
                id: "308",
                name: "Utility functions safeStringify should handle primitive values",
                location: { start: { column: 6, line: 227 } },
              },
              {
                id: "309",
                name: "Utility functions safeStringify should handle undefined",
                location: { start: { column: 6, line: 234 } },
              },
              {
                id: "310",
                name: "Utility functions safeStringify should handle functions",
                location: { start: { column: 6, line: 239 } },
              },
              {
                id: "311",
                name: "Utility functions generateId should generate a unique string",
                location: { start: { column: 6, line: 247 } },
              },
              {
                id: "312",
                name: "Utility functions generateId should generate ids with expected format",
                location: { start: { column: 6, line: 256 } },
              },
              {
                id: "313",
                name: "Utility functions generateId should generate different ids on subsequent calls",
                location: { start: { column: 6, line: 269 } },
              },
              {
                id: "314",
                name: "Utility functions generateId should handle rapid successive calls",
                location: { start: { column: 6, line: 281 } },
              },
            ],
            source:
              '/**\n * Tests for utility functions\n */\nimport {\n  debounce,\n  logger,\n  safeParse,\n  safeStringify,\n  getHostname,\n  generateId,\n} from "../../extension/src/lib/utils";\n\ndescribe("Utility functions", () => {\n  describe("debounce", () => {\n    jest.useFakeTimers();\n\n    it("should debounce function calls", () => {\n      const mockFn = jest.fn();\n      const debounced = debounce(mockFn, 100);\n\n      // Call multiple times\n      debounced();\n      debounced();\n      debounced();\n\n      // Function should not have been called yet\n      expect(mockFn).not.toHaveBeenCalled();\n\n      // Fast-forward time\n      jest.advanceTimersByTime(100);\n\n      // Function should have been called once\n      expect(mockFn).toHaveBeenCalledTimes(1);\n    });\n\n    it("should use the most recent arguments", () => {\n      const mockFn = jest.fn();\n      const debounced = debounce(mockFn, 100);\n\n      debounced("first");\n      debounced("second");\n      debounced("third");\n\n      jest.advanceTimersByTime(100);\n\n      expect(mockFn).toHaveBeenCalledWith("third");\n    });\n\n    it("should handle multiple rapid calls correctly", () => {\n      const mockFn = jest.fn();\n      const debounced = debounce(mockFn, 100);\n\n      // Call multiple times rapidly\n      debounced("a");\n      jest.advanceTimersByTime(50);\n      debounced("b");\n      jest.advanceTimersByTime(50);\n      debounced("c");\n\n      // Should not have been called yet\n      expect(mockFn).not.toHaveBeenCalled();\n\n      // Advance to trigger the call\n      jest.advanceTimersByTime(100);\n      expect(mockFn).toHaveBeenCalledWith("c");\n      expect(mockFn).toHaveBeenCalledTimes(1);\n    });\n  });\n\n  describe("logger", () => {\n    const originalConsole = { ...console };\n\n    beforeEach(() => {\n      console.log = jest.fn();\n      console.warn = jest.fn();\n      console.error = jest.fn();\n      console.debug = jest.fn();\n    });\n\n    afterEach(() => {\n      console.log = originalConsole.log;\n      console.warn = originalConsole.warn;\n      console.error = originalConsole.error;\n      console.debug = originalConsole.debug;\n    });\n\n    it("should log with prefix when console.log is mocked", () => {\n      logger.log("test message");\n      expect(console.log).toHaveBeenCalledWith("[EVD]", "test message");\n    });\n\n    it("should warn with prefix when console.warn is mocked", () => {\n      logger.warn("warning message");\n      expect(console.warn).toHaveBeenCalledWith(\n        "[EVD Warning]",\n        "warning message"\n      );\n    });\n\n    it("should error with prefix when console.error is mocked", () => {\n      logger.error("error message");\n      expect(console.error).toHaveBeenCalledWith(\n        "[EVD Error]",\n        "error message"\n      );\n    });\n\n    it("should debug with prefix when console.debug is mocked", () => {\n      logger.debug("debug message");\n      expect(console.debug).toHaveBeenCalledWith(\n        "[EVD Debug]",\n        "debug message"\n      );\n    });\n\n    it("should handle logging errors gracefully", () => {\n      // Mock console.log to throw an error\n      console.log = jest.fn().mockImplementation(() => {\n        throw new Error("Logging failed");\n      });\n\n      // Should not throw\n      expect(() => logger.log("test")).not.toThrow();\n    });\n\n    it("should handle warning errors gracefully", () => {\n      console.warn = jest.fn().mockImplementation(() => {\n        throw new Error("Warning failed");\n      });\n\n      expect(() => logger.warn("test")).not.toThrow();\n    });\n\n    it("should handle error logging failures gracefully", () => {\n      console.error = jest.fn().mockImplementation(() => {\n        throw new Error("Error logging failed");\n      });\n\n      expect(() => logger.error("test")).not.toThrow();\n    });\n\n    it("should handle debug logging failures gracefully", () => {\n      console.debug = jest.fn().mockImplementation(() => {\n        throw new Error("Debug logging failed");\n      });\n\n      expect(() => logger.debug("test")).not.toThrow();\n    });\n  });\n\n  describe("getHostname", () => {\n    it("should return the provided hostname", () => {\n      expect(getHostname("example.com")).toBe("example.com");\n    });\n\n    it("should return empty string for empty hostname", () => {\n      expect(getHostname("")).toBe("");\n    });\n\n    it("should return window.location.hostname if no argument is provided", () => {\n      expect(getHostname()).toBe(window.location.hostname);\n    });\n  });\n\n  describe("safeParse", () => {\n    it("should parse valid JSON", () => {\n      const result = safeParse(\'{"test": true}\', null);\n      expect(result).toEqual({\n        test: true,\n      });\n    });\n\n    it("should return fallback for invalid JSON", () => {\n      const fallback = {\n        default: true,\n      };\n      const result = safeParse("invalid json", fallback);\n      expect(result).toBe(fallback);\n    });\n\n    it("should handle complex JSON objects", () => {\n      const complexJson = \'{"nested": {"array": [1,2,3], "string": "test"}}\';\n      const result = safeParse(complexJson, null);\n      expect(result).toEqual({\n        nested: {\n          array: [1, 2, 3],\n          string: "test",\n        },\n      });\n    });\n\n    it("should handle empty string as invalid JSON", () => {\n      const fallback = { empty: true };\n      const result = safeParse("", fallback);\n      expect(result).toBe(fallback);\n    });\n\n    it("should handle null string as invalid JSON", () => {\n      const fallback = { null: true };\n      const result = safeParse(null as any, fallback);\n      expect(result).toBe(null);\n    });\n  });\n\n  describe("safeStringify", () => {\n    it("should stringify objects", () => {\n      const obj = {\n        test: true,\n      };\n      expect(safeStringify(obj)).toBe(\'{"test":true}\');\n    });\n\n    it("should handle circular references", () => {\n      const circular: any = {};\n      circular.self = circular;\n\n      const result = safeStringify(circular);\n      expect(result).toContain("[Object that couldn\'t be stringified");\n    });\n\n    it("should handle arrays", () => {\n      const arr = [1, 2, 3, "test"];\n      expect(safeStringify(arr)).toBe(\'[1,2,3,"test"]\');\n    });\n\n    it("should handle primitive values", () => {\n      expect(safeStringify("string")).toBe(\'"string"\');\n      expect(safeStringify(123)).toBe("123");\n      expect(safeStringify(true)).toBe("true");\n      expect(safeStringify(null)).toBe("null");\n    });\n\n    it("should handle undefined", () => {\n      const result = safeStringify(undefined);\n      expect(result).toBeUndefined();\n    });\n\n    it("should handle functions", () => {\n      const func = () => "test";\n      const result = safeStringify(func);\n      expect(result).toBeUndefined();\n    });\n  });\n\n  describe("generateId", () => {\n    it("should generate a unique string", () => {\n      const id1 = generateId();\n      const id2 = generateId();\n\n      expect(typeof id1).toBe("string");\n      expect(typeof id2).toBe("string");\n      expect(id1).not.toBe(id2);\n    });\n\n    it("should generate ids with expected format", () => {\n      const id = generateId();\n\n      // Should be a string\n      expect(typeof id).toBe("string");\n\n      // Should not be empty\n      expect(id.length).toBeGreaterThan(0);\n\n      // Should contain alphanumeric characters (base36)\n      expect(id).toMatch(/^[a-z0-9]+$/);\n    });\n\n    it("should generate different ids on subsequent calls", () => {\n      const ids = new Set();\n\n      // Generate multiple ids\n      for (let i = 0; i <' +
              ' 100; i++) {\n        ids.add(generateId());\n      }\n\n      // All should be unique\n      expect(ids.size).toBe(100);\n    });\n\n    it("should handle rapid successive calls", () => {\n      const start = Date.now();\n      const ids = [];\n\n      // Generate many ids rapidly\n      for (let i = 0; i <' +
              " 1000; i++) {\n        ids.push(generateId());\n      }\n\n      const end = Date.now();\n\n      // Should complete quickly\n      expect(end - start).toBeLessThan(1000);\n\n      // All should be unique\n      const uniqueIds = new Set(ids);\n      expect(uniqueIds.size).toBe(1000);\n    });\n  });\n});\n",
          },
          "tests/extension/background-helpers.test.ts": {
            tests: [
              {
                id: "315",
                name: "background-helpers actionIconPaths should have correct light theme icon paths",
                location: { start: { column: 6, line: 43 } },
              },
              {
                id: "316",
                name: "background-helpers actionIconPaths should have correct dark theme icon paths",
                location: { start: { column: 6, line: 56 } },
              },
              {
                id: "317",
                name: "background-helpers actionIconPaths should have all required icon sizes for both themes",
                location: { start: { column: 6, line: 69 } },
              },
              {
                id: "318",
                name: "background-helpers actionIconPaths should have different paths for light and dark themes",
                location: { start: { column: 6, line: 81 } },
              },
              {
                id: "319",
                name: "background-helpers applyThemeToActionIcon theme validation and fallback should apply light theme when 'light' is passed",
                location: { start: { column: 8, line: 92 } },
              },
              {
                id: "320",
                name: "background-helpers applyThemeToActionIcon theme validation and fallback should apply dark theme when 'dark' is passed",
                location: { start: { column: 8, line: 101 } },
              },
              {
                id: "321",
                name: "background-helpers applyThemeToActionIcon theme validation and fallback should fallback to light theme for invalid theme values",
                location: { start: { column: 8, line: 110 } },
              },
              {
                id: "322",
                name: "background-helpers applyThemeToActionIcon theme validation and fallback should fallback to light theme for empty string",
                location: { start: { column: 8, line: 132 } },
              },
              {
                id: "323",
                name: "background-helpers applyThemeToActionIcon theme validation and fallback should fallback to light theme for null",
                location: { start: { column: 8, line: 141 } },
              },
              {
                id: "324",
                name: "background-helpers applyThemeToActionIcon theme validation and fallback should fallback to light theme for undefined",
                location: { start: { column: 8, line: 150 } },
              },
              {
                id: "325",
                name: "background-helpers applyThemeToActionIcon theme validation and fallback should handle case-sensitive theme values",
                location: { start: { column: 8, line: 159 } },
              },
              {
                id: "326",
                name: "background-helpers applyThemeToActionIcon Chrome API availability should work when chrome is available",
                location: { start: { column: 8, line: 184 } },
              },
              {
                id: "327",
                name: "background-helpers applyThemeToActionIcon Chrome API availability should handle when chrome is undefined",
                location: { start: { column: 8, line: 190 } },
              },
              {
                id: "328",
                name: "background-helpers applyThemeToActionIcon Chrome API availability should handle when chrome.action is undefined",
                location: { start: { column: 8, line: 198 } },
              },
              {
                id: "329",
                name: "background-helpers applyThemeToActionIcon Chrome API availability should handle when chrome.action.setIcon is undefined",
                location: { start: { column: 8, line: 206 } },
              },
              {
                id: "330",
                name: "background-helpers applyThemeToActionIcon Chrome API availability should handle when chrome.runtime is undefined",
                location: { start: { column: 8, line: 217 } },
              },
              {
                id: "331",
                name: "background-helpers applyThemeToActionIcon error handling should handle setIcon callback errors",
                location: { start: { column: 8, line: 227 } },
              },
              {
                id: "332",
                name: "background-helpers applyThemeToActionIcon error handling should handle setIcon callback without error",
                location: { start: { column: 8, line: 246 } },
              },
              {
                id: "333",
                name: "background-helpers applyThemeToActionIcon error handling should handle setIcon callback with null error",
                location: { start: { column: 8, line: 261 } },
              },
              {
                id: "334",
                name: "background-helpers applyThemeToActionIcon error handling should handle setIcon callback with empty error message",
                location: { start: { column: 8, line: 276 } },
              },
              {
                id: "335",
                name: "background-helpers applyThemeToActionIcon error handling should handle setIcon callback with undefined error message",
                location: { start: { column: 8, line: 294 } },
              },
              {
                id: "336",
                name: "background-helpers applyThemeToActionIcon callback handling should call setIcon with a callback function",
                location: { start: { column: 8, line: 314 } },
              },
              {
                id: "337",
                name: "background-helpers applyThemeToActionIcon callback handling should always call setIcon with a callback function",
                location: { start: { column: 8, line: 321 } },
              },
              {
                id: "338",
                name: "background-helpers applyThemeToActionIcon callback handling should handle setIcon with null callback",
                location: { start: { column: 8, line: 335 } },
              },
              {
                id: "339",
                name: "background-helpers applyThemeToActionIcon path validation should handle when paths are available",
                location: { start: { column: 8, line: 347 } },
              },
              {
                id: "340",
                name: "background-helpers applyThemeToActionIcon path validation should handle when paths are available for dark theme",
                location: { start: { column: 8, line: 357 } },
              },
              {
                id: "341",
                name: "background-helpers applyThemeToActionIcon multiple calls should handle multiple theme changes",
                location: { start: { column: 8, line: 369 } },
              },
              {
                id: "342",
                name: "background-helpers applyThemeToActionIcon multiple calls should handle rapid theme changes",
                location: { start: { column: 8, line: 383 } },
              },
              {
                id: "343",
                name: "background-helpers applyThemeToActionIcon edge cases should handle non-string theme values",
                location: { start: { column: 8, line: 394 } },
              },
              {
                id: "344",
                name: "background-helpers applyThemeToActionIcon edge cases should handle very long theme strings",
                location: { start: { column: 8, line: 408 } },
              },
              {
                id: "345",
                name: "background-helpers applyThemeToActionIcon edge cases should handle special characters in theme strings",
                location: { start: { column: 8, line: 421 } },
              },
            ],
            source:
              '/* eslint-env jest */\n\nimport {\n  applyThemeToActionIcon,\n  actionIconPaths,\n  getActionIconPaths,\n} from "../../extension/src/background-helpers";\nimport { Theme } from "../../extension/src/types";\n\ndeclare const global: any;\n\ndescribe("background-helpers", () => {\n  let originalChrome: any;\n  let consoleSpy: jest.SpyInstance;\n\n  beforeEach(() => {\n    // Mock console methods to avoid noise in tests\n    consoleSpy = jest.spyOn(console, "warn").mockImplementation(() => {});\n    jest.spyOn(console, "error").mockImplementation(() => {});\n\n    // Mock chrome APIs\n    originalChrome = global.chrome;\n    global.chrome = {\n      action: {\n        setIcon: jest.fn((opts: any, cb: () => void) => {\n          if (cb) cb();\n        }),\n      },\n      runtime: {\n        getURL: (path: string) => "/resolved/" + path,\n        lastError: undefined,\n      },\n    };\n  });\n\n  afterEach(() => {\n    global.chrome = originalChrome;\n    jest.restoreAllMocks();\n  });\n\n  describe("actionIconPaths", () => {\n    it("should have correct light theme icon paths", () => {\n      const paths = getActionIconPaths();\n      expect(paths.light["16"]).toBe(\n        chrome.runtime.getURL("extension/icons/icon16.png")\n      );\n      expect(paths.light["48"]).toBe(\n        chrome.runtime.getURL("extension/icons/icon48.png")\n      );\n      expect(paths.light["128"]).toBe(\n        chrome.runtime.getURL("extension/icons/icon128.png")\n      );\n    });\n\n    it("should have correct dark theme icon paths", () => {\n      const paths = getActionIconPaths();\n      expect(paths.dark["16"]).toBe(\n        chrome.runtime.getURL("extension/icons/darkicon16.png")\n      );\n      expect(paths.dark["48"]).toBe(\n        chrome.runtime.getURL("extension/icons/darkicon48.png")\n      );\n      expect(paths.dark["128"]).toBe(\n        chrome.runtime.getURL("extension/icons/darkicon128.png")\n      );\n    });\n\n    it("should have all required icon sizes for both themes", () => {\n      const requiredSizes = ["16", "48", "128"];\n      const paths = getActionIconPaths();\n\n      requiredSizes.forEach((size) => {\n        expect(paths.light[size]).toBeDefined();\n        expect(paths.dark[size]).toBeDefined();\n        expect(typeof paths.light[size]).toBe("string");\n        expect(typeof paths.dark[size]).toBe("string");\n      });\n    });\n\n    it("should have different paths for light and dark themes", () => {\n      const sizes = ["16", "48", "128"];\n      const paths = getActionIconPaths();\n      sizes.forEach((size) => {\n        expect(paths.light[size]).not.toBe(paths.dark[size]);\n      });\n    });\n  });\n\n  describe("applyThemeToActionIcon", () => {\n    describe("theme validation and fallback", () => {\n      it("should apply light theme when \'light\' is passed", () => {\n        applyThemeToActionIcon("light");\n\n        expect(global.chrome.action.setIcon).toHaveBeenCalledWith(\n          { path: getActionIconPaths().light },\n          expect.any(Function)\n        );\n      });\n\n      it("should apply dark theme when \'dark\' is passed", () => {\n        applyThemeToActionIcon("dark");\n\n        expect(global.chrome.action.setIcon).toHaveBeenCalledWith(\n          { path: getActionIconPaths().dark },\n          expect.any(Function)\n        );\n      });\n\n      it("should fallback to light theme for invalid theme values", () => {\n        const invalidThemes: any[] = [\n          "invalid",\n          "",\n          null,\n          undefined,\n          "light-dark",\n          "DARK",\n          "LIGHT",\n        ];\n\n        invalidThemes.forEach((invalidTheme) => {\n          global.chrome.action.setIcon.mockClear();\n          applyThemeToActionIcon(invalidTheme);\n\n          expect(global.chrome.action.setIcon).toHaveBeenCalledWith(\n            { path: getActionIconPaths().light },\n            expect.any(Function)\n          );\n        });\n      });\n\n      it("should fallback to light theme for empty string", () => {\n        applyThemeToActionIcon("" as any);\n\n        expect(global.chrome.action.setIcon).toHaveBeenCalledWith(\n          { path: getActionIconPaths().light },\n          expect.any(Function)\n        );\n      });\n\n      it("should fallback to light theme for null", () => {\n        applyThemeToActionIcon(null as any);\n\n        expect(global.chrome.action.setIcon).toHaveBeenCalledWith(\n          { path: getActionIconPaths().light },\n          expect.any(Function)\n        );\n      });\n\n      it("should fallback to light theme for undefined", () => {\n        applyThemeToActionIcon(undefined as any);\n\n        expect(global.chrome.action.setIcon).toHaveBeenCalledWith(\n          { path: getActionIconPaths().light },\n          expect.any(Function)\n        );\n      });\n\n      it("should handle case-sensitive theme values", () => {\n        const caseVariations = [\n          "LIGHT",\n          "Light",\n          "light",\n          "DARK",\n          "Dark",\n          "dark",\n        ];\n\n        caseVariations.forEach((theme) => {\n          global.chrome.action.setIcon.mockClear();\n          applyThemeToActionIcon(theme as any);\n\n          // Only exact "dark" matches should use dark theme, everything else uses light\n          const expectedTheme = theme === "dark" ? "dark" : "light";\n          expect(global.chrome.action.setIcon).toHaveBeenCalledWith(\n            { path: getActionIconPaths()[expectedTheme as Theme] },\n            expect.any(Function)\n          );\n        });\n      });\n    });\n\n    describe("Chrome API availability", () => {\n      it("should work when chrome is available", () => {\n        applyThemeToActionIcon("light");\n\n        expect(global.chrome.action.setIcon).toHaveBeenCalled();\n      });\n\n      it("should handle when chrome is undefined", () => {\n        global.chrome = undefined;\n\n        expect(() => {\n          applyThemeToActionIcon("light");\n        }).not.toThrow();\n      });\n\n      it("should handle when chrome.action is undefined", () => {\n        global.chrome = { runtime: { lastError: undefined } };\n\n        expect(() => {\n          applyThemeToActionIcon("light");\n        }).not.toThrow();\n      });\n\n      it("should handle when chrome.action.setIcon is undefined", () => {\n        global.chrome = {\n          action: {},\n          runtime: { lastError: undefined },\n        };\n\n        expect(() => {\n          applyThemeToActionIcon("light");\n        }).not.toThrow();\n      });\n\n      it("should handle when chrome.runtime is undefined", () => {\n        global.chrome = { action: { setIcon: jest.fn() } };\n\n        expect(() => {\n          applyThemeToActionIcon("light");\n        }).not.toThrow();\n      });\n    });\n\n    describe("error handling", () => {\n      it("should handle setIcon callback errors", () => {\n        const errorMessage = "Failed to set icon";\n        global.chrome.runtime.lastError = { message: errorMessage };\n\n        const consoleErrorSpy = jest.spyOn(console, "error");\n\n        applyThemeToActionIcon("light");\n\n        // Simulate the callback being called with an error\n        const setIconCall = global.chrome.action.setIcon.mock.calls[0];\n        const callback = setIconCall[1];\n        callback();\n\n        expect(consoleErrorSpy).toHaveBeenCalledWith(\n          "[BG] Error setting action icon for theme light:",\n          errorMessage\n        );\n      });\n\n      it("should handle setIcon callback without error", () => {\n        global.chrome.runtime.lastError = undefined;\n\n        const consoleErrorSpy = jest.spyOn(console, "error");\n\n        applyThemeToActionIcon("dark");\n\n        // Simulate the callback being called without an error\n        const setIconCall = global.chrome.action.setIcon.mock.calls[0];\n        const callback = setIconCall[1];\n        callback();\n\n        expect(consoleErrorSpy).not.toHaveBeenCalled();\n      });\n\n      it("should handle setIcon callback with null error", () => {\n        global.chrome.runtime.lastError = null;\n\n        const consoleErrorSpy = jest.spyOn(console, "error");\n\n        applyThemeToActionIcon("light");\n\n        // Simulate the callback being called with null error\n        const setIconCall = global.chrome.action.setIcon.mock.calls[0];\n        const callback = setIconCall[1];\n        callback();\n\n        expect(consoleErrorSpy).not.toHaveBeenCalled();\n      });\n\n      it("should handle setIcon callback with empty error message", () => {\n        global.chrome.runtime.lastError = { message: "" };\n\n        const consoleErrorSpy = jest.spyOn(console, "error");\n\n        applyThemeToActionIcon("dark");\n\n        // Simulate the callback being called with empty error message\n        const setIconCall = global.chrome.action.setIcon.mock.calls[0];\n        const callback = setIconCall[1];\n        callback();\n\n        expect(consoleErrorSpy).toHaveBeenCalledWith(\n          "[BG] Error setting action icon for theme dark:",\n          ""\n        );\n      });\n\n      it("should handle setIcon callback with undefined error message", () => {\n        global.chrome.runtime.lastError = { message: undefined };\n\n        const consoleErrorSpy = jest.spyOn(console, "error");\n\n        applyThemeToActionIcon("light");\n\n        // Simulate the callback being called with undefined error message\n        const setIconCall = global.chrome.action.setIcon.mock.calls[0];\n        const callback = setIconCall[1];\n        callback();\n\n        expect(consoleErrorSpy).toHaveBeenCalledWith(\n          "[BG] Error setting action icon for theme light:",\n          undefined\n        );\n      });\n    });\n\n    describe("callback handling", () => {\n      it("should call setIcon with a callback function", () => {\n        applyThemeToActionIcon("light");\n\n        const setIconCall = global.chrome.action.setIcon.mock.calls[0];\n        expect(setIconCall[1]).toBeInstanceOf(Function);\n      });\n\n      it("should always call setIcon with a callback function", () => {\n        // Even when we mock setIcon to not expect a callback, the function always provides one\n        global.chrome.action.setIcon = jest.fn();\n\n        expect(() => {\n          applyThemeToActionIcon("dark");\n        }).not.toThrow();\n\n        expect(global.chrome.action.setIcon).toHaveBeenCalledWith(\n          { path: getActionIconPaths().dark },\n          expect.any(Function)\n        );\n      });\n\n      it("should handle setIcon with null callback", () => {\n        global.chrome.action.setIcon = jest.fn((opts: any, cb: any) => {\n          if (cb) cb();\n        });\n\n        expect(() => {\n          applyThemeToActionIcon("light");\n        }).not.toThrow();\n      });\n    });\n\n    describe("path validation", () => {\n      it("should handle when paths are available", () => {\n        // Test that the function works when paths are available\n        applyThemeToActionIcon("light");\n\n        expect(global.chrome.action.setIcon).toHaveBeenCalledWith(\n          { path: getActionIconPaths().light },\n          expect.any(Function)\n        );\n      });\n\n      it("should handle when paths are available for dark theme", () => {\n        // Test that the function works when paths are available\n        applyThemeToActionIcon("dark");\n\n        expect(global.chrome.action.setIcon).toHaveBeenCalledWith(\n          { path: getActionIconPaths().dark },\n          expect.any(Function)\n        );\n      });\n    });\n\n    describe("multiple calls", () => {\n      it("should handle multiple theme changes", () => {\n        const themes: Theme[] = ["light", "dark", "light", "dark"];\n\n        themes.forEach((theme) => {\n          global.chrome.action.setIcon.mockClear();\n          applyThemeToActionIcon(theme);\n\n          expect(global.chrome.action.setIcon).toHaveBeenCalledWith(\n            { path: getActionIconPaths()[theme] },\n            expect.any(Function)\n          );\n        });\n      });\n\n      it("should handle rapid theme changes", () => {\n        for (let i = 0; i <' +
              ' 10; i++) {\n          const theme: Theme = i % 2 === 0 ? "light" : "dark";\n          applyThemeToActionIcon(theme);\n        }\n\n        expect(global.chrome.action.setIcon).toHaveBeenCalledTimes(10);\n      });\n    });\n\n    describe("edge cases", () => {\n      it("should handle non-string theme values", () => {\n        const nonStringThemes = [123, true, false, {}, [], () => {}];\n\n        nonStringThemes.forEach((theme) => {\n          global.chrome.action.setIcon.mockClear();\n          applyThemeToActionIcon(theme as any);\n\n          expect(global.chrome.action.setIcon).toHaveBeenCalledWith(\n            { path: getActionIconPaths().light },\n            expect.any(Function)\n          );\n        });\n      });\n\n      it("should handle very long theme strings", () => {\n        const longTheme = "a".repeat(1000);\n\n        expect(() => {\n          applyThemeToActionIcon(longTheme as any);\n        }).not.toThrow();\n\n        expect(global.chrome.action.setIcon).toHaveBeenCalledWith(\n          { path: getActionIconPaths().light },\n          expect.any(Function)\n        );\n      });\n\n      it("should handle special characters in theme strings", () => {\n        const specialThemes = ["light!", "dark@", "light#", "dark$", "light%"];\n\n        specialThemes.forEach((theme) => {\n          global.chrome.action.setIcon.mockClear();\n          applyThemeToActionIcon(theme as any);\n\n          expect(global.chrome.action.setIcon).toHaveBeenCalledWith(\n            { path: getActionIconPaths().light },\n            expect.any(Function)\n          );\n        });\n      });\n    });\n  });\n});\n',
          },
          "tests/extension/popup.util.test.ts": {
            tests: [
              {
                id: "346",
                name: "Popup Util Functions setStatus should display error message with prefix and tip and clear after timeout",
                location: { start: { column: 6, line: 34 } },
              },
              {
                id: "347",
                name: "Popup Util Functions applyPopupTheme should toggle dark theme on and off",
                location: { start: { column: 6, line: 49 } },
              },
            ],
            source:
              '/* eslint-env jest */\nimport { setStatus, applyPopupTheme } from "extension/src/popup";\n\ndescribe("Popup Util Functions", () => {\n  let statusElement: HTMLElement;\n  let headerLogo: HTMLImageElement;\n  let timerId: ReturnType<' +
              "typeof setTimeout> | null;\n\n  beforeEach(() => {\n    document.body.innerHTML =\n      '<" +
              'div id="status"><' +
              "/div>' + '<" +
              'img id="header-logo" src="initial" />\';\n    statusElement = document.getElementById("status")!;\n    headerLogo = document.getElementById("header-logo") as HTMLImageElement;\n    document.documentElement.className = "";\n    document.body.className = "";\n\n    // Mock getURL which is used to set the image src\n    (chrome.runtime.getURL as jest.Mock).mockImplementation(\n      (path) => "http://localhost/" + path\n    );\n    jest.useFakeTimers();\n    timerId = null;\n  });\n\n  afterEach(() => {\n    if (timerId) {\n      clearTimeout(timerId);\n    }\n    jest.useRealTimers();\n  });\n\n  describe("setStatus", () => {\n    it("should display error message with prefix and tip and clear after timeout", () => {\n      timerId = setStatus("fail", true);\n\n      expect(statusElement.childNodes[0].textContent).toBe("fail");\n      const tip = statusElement.querySelector(".error-tip");\n      expect(tip).not.toBeNull();\n      expect(tip!.textContent).toContain("Tip: check your network connection");\n      expect(statusElement.className).toBe("status-error");\n\n      jest.advanceTimersByTime(5000);\n      expect(statusElement.innerHTML).toBe("");\n    });\n  });\n\n  describe("applyPopupTheme", () => {\n    it("should toggle dark theme on and off", () => {\n      // The implementation now uses document.documentElement.classList.toggle\n      // and looks for img[src*=\'icon\'] instead of #header-logo\n      headerLogo.src = "http://localhost/extension/icons/icon48.png";\n\n      applyPopupTheme(true); // Switch to dark\n      expect(document.documentElement.classList.contains("dark-theme")).toBe(\n        true\n      );\n      expect(headerLogo.src).toMatch(/darkicons\\/icon48\\.png$/);\n\n      applyPopupTheme(false); // Switch back to light\n      expect(document.documentElement.classList.contains("dark-theme")).toBe(\n        false\n      );\n      expect(headerLogo.src).toMatch(/icon48\\.png$/);\n    });\n  });\n});\n',
          },
          "tests/extension/youtube_enhance.test.ts": {
            tests: [
              {
                id: "348",
                name: "youtube_enhance enhanceYouTubeButton YouTube domain detection enhances button styles for youtube.com",
                location: { start: { column: 8, line: 32 } },
              },
              {
                id: "349",
                name: "youtube_enhance enhanceYouTubeButton YouTube domain detection enhances button styles for www.youtube.com",
                location: { start: { column: 8, line: 39 } },
              },
              {
                id: "350",
                name: "youtube_enhance enhanceYouTubeButton YouTube domain detection enhances button styles for m.youtube.com",
                location: { start: { column: 8, line: 46 } },
              },
              {
                id: "351",
                name: "youtube_enhance enhanceYouTubeButton YouTube domain detection enhances button styles for music.youtube.com",
                location: { start: { column: 8, line: 53 } },
              },
              {
                id: "352",
                name: "youtube_enhance enhanceYouTubeButton YouTube domain detection does nothing for non-YouTube domains",
                location: { start: { column: 8, line: 60 } },
              },
              {
                id: "353",
                name: "youtube_enhance enhanceYouTubeButton YouTube domain detection does nothing for domains containing 'youtube' but not YouTube",
                location: { start: { column: 8, line: 67 } },
              },
              {
                id: "354",
                name: "youtube_enhance enhanceYouTubeButton YouTube domain detection does nothing for empty hostname",
                location: { start: { column: 8, line: 74 } },
              },
              {
                id: "355",
                name: "youtube_enhance enhanceYouTubeButton YouTube domain detection does nothing for null hostname",
                location: { start: { column: 8, line: 81 } },
              },
              {
                id: "356",
                name: "youtube_enhance enhanceYouTubeButton button styling sets all required style properties",
                location: { start: { column: 8, line: 94 } },
              },
              {
                id: "357",
                name: "youtube_enhance enhanceYouTubeButton button styling overwrites existing styles",
                location: { start: { column: 8, line: 100 } },
              },
              {
                id: "358",
                name: "youtube_enhance enhanceYouTubeButton button styling preserves existing event handlers",
                location: { start: { column: 8, line: 111 } },
              },
              {
                id: "359",
                name: "youtube_enhance enhanceYouTubeButton hover effects applies CSS class for enhanced styling",
                location: { start: { column: 8, line: 129 } },
              },
              {
                id: "360",
                name: "youtube_enhance enhanceYouTubeButton button positioning positions button at default location when no top style is set",
                location: { start: { column: 8, line: 146 } },
              },
              {
                id: "361",
                name: "youtube_enhance enhanceYouTubeButton button positioning positions button at default location when top is 10px",
                location: { start: { column: 8, line: 153 } },
              },
              {
                id: "362",
                name: "youtube_enhance enhanceYouTubeButton button positioning preserves custom top position when not 10px",
                location: { start: { column: 8, line: 161 } },
              },
              {
                id: "363",
                name: "youtube_enhance enhanceYouTubeButton button positioning preserves custom top position when set to 0px",
                location: { start: { column: 8, line: 169 } },
              },
              {
                id: "364",
                name: "youtube_enhance enhanceYouTubeButton button positioning preserves custom top position when set to 100px",
                location: { start: { column: 8, line: 177 } },
              },
              {
                id: "365",
                name: "youtube_enhance enhanceYouTubeButton button positioning calculates left position based on window width",
                location: { start: { column: 8, line: 185 } },
              },
              {
                id: "366",
                name: "youtube_enhance enhanceYouTubeButton button positioning handles very small window width",
                location: { start: { column: 8, line: 197 } },
              },
              {
                id: "367",
                name: "youtube_enhance enhanceYouTubeButton button positioning handles zero window width",
                location: { start: { column: 8, line: 209 } },
              },
              {
                id: "368",
                name: "youtube_enhance enhanceYouTubeButton logging logs enhancement message for YouTube",
                location: { start: { column: 8, line: 223 } },
              },
              {
                id: "369",
                name: "youtube_enhance enhanceYouTubeButton logging does not log for non-YouTube domains",
                location: { start: { column: 8, line: 234 } },
              },
              {
                id: "370",
                name: "youtube_enhance enhanceYouTubeButton edge cases handles null button element gracefully",
                location: { start: { column: 8, line: 247 } },
              },
              {
                id: "371",
                name: "youtube_enhance enhanceYouTubeButton edge cases handles undefined button element gracefully",
                location: { start: { column: 8, line: 255 } },
              },
              {
                id: "372",
                name: "youtube_enhance enhanceYouTubeButton edge cases handles button with existing event handlers",
                location: { start: { column: 8, line: 263 } },
              },
              {
                id: "373",
                name: "youtube_enhance enhanceYouTubeButton edge cases handles button with existing styles that might conflict",
                location: { start: { column: 8, line: 276 } },
              },
            ],
            source:
              '/* eslint-env jest */\n\nimport { enhanceYouTubeButton } from "../../extension/src/youtube_enhance";\nimport * as utils from "../../extension/src/lib/utils";\n\njest.mock("../../extension/src/lib/utils", () => ({\n  getHostname: jest.fn(),\n}));\n\ndescribe("youtube_enhance", () => {\n  let btn: HTMLButtonElement;\n  let mockGetHostname: jest.MockedFunction<' +
              'typeof utils.getHostname>;\n\n  beforeEach(() => {\n    btn = document.createElement("button");\n    mockGetHostname = utils.getHostname as jest.MockedFunction<' +
              '\n      typeof utils.getHostname\n    >;\n\n    // Mock console.log to avoid noise in tests\n    jest.spyOn(console, "log").mockImplementation(() => {});\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n    jest.restoreAllMocks();\n  });\n\n  describe("enhanceYouTubeButton", () => {\n    describe("YouTube domain detection", () => {\n      it("enhances button styles for youtube.com", () => {\n        mockGetHostname.mockReturnValue("youtube.com");\n        enhanceYouTubeButton(btn);\n\n        expect(btn.classList.contains("youtube-enhanced")).toBe(true);\n      });\n\n      it("enhances button styles for www.youtube.com", () => {\n        mockGetHostname.mockReturnValue("www.youtube.com");\n        enhanceYouTubeButton(btn);\n\n        expect(btn.classList.contains("youtube-enhanced")).toBe(true);\n      });\n\n      it("enhances button styles for m.youtube.com", () => {\n        mockGetHostname.mockReturnValue("m.youtube.com");\n        enhanceYouTubeButton(btn);\n\n        expect(btn.classList.contains("youtube-enhanced")).toBe(true);\n      });\n\n      it("enhances button styles for music.youtube.com", () => {\n        mockGetHostname.mockReturnValue("music.youtube.com");\n        enhanceYouTubeButton(btn);\n\n        expect(btn.classList.contains("youtube-enhanced")).toBe(true);\n      });\n\n      it("does nothing for non-YouTube domains", () => {\n        mockGetHostname.mockReturnValue("example.com");\n        enhanceYouTubeButton(btn);\n\n        expect(btn.classList.contains("youtube-enhanced")).toBe(false);\n      });\n\n      it("does nothing for domains containing \'youtube\' but not YouTube", () => {\n        mockGetHostname.mockReturnValue("fakeyoutube.com");\n        enhanceYouTubeButton(btn);\n\n        expect(btn.classList.contains("youtube-enhanced")).toBe(false);\n      });\n\n      it("does nothing for empty hostname", () => {\n        mockGetHostname.mockReturnValue("");\n        enhanceYouTubeButton(btn);\n\n        expect(btn.classList.contains("youtube-enhanced")).toBe(false);\n      });\n\n      it("does nothing for null hostname", () => {\n        mockGetHostname.mockReturnValue(null as any);\n        enhanceYouTubeButton(btn);\n\n        expect(btn.classList.contains("youtube-enhanced")).toBe(false);\n      });\n    });\n\n    describe("button styling", () => {\n      beforeEach(() => {\n        mockGetHostname.mockReturnValue("youtube.com");\n      });\n\n      it("sets all required style properties", () => {\n        enhanceYouTubeButton(btn);\n\n        expect(btn.classList.contains("youtube-enhanced")).toBe(true);\n      });\n\n      it("overwrites existing styles", () => {\n        // Set initial styles\n        btn.style.backgroundColor = "blue";\n        btn.style.color = "black";\n        btn.style.border = "1px solid black";\n\n        enhanceYouTubeButton(btn);\n\n        expect(btn.classList.contains("youtube-enhanced")).toBe(true);\n      });\n\n      it("preserves existing event handlers", () => {\n        const existingClickHandler = jest.fn();\n        btn.onclick = existingClickHandler;\n\n        enhanceYouTubeButton(btn);\n\n        // Original click handler should be preserved\n        expect(btn.onclick).toBe(existingClickHandler);\n        expect(btn.classList.contains("youtube-enhanced")).toBe(true);\n      });\n    });\n\n    describe("hover effects", () => {\n      beforeEach(() => {\n        mockGetHostname.mockReturnValue("youtube.com");\n        enhanceYouTubeButton(btn);\n      });\n\n      it("applies CSS class for enhanced styling", () => {\n        expect(btn.classList.contains("youtube-enhanced")).toBe(true);\n      });\n    });\n\n    describe("button positioning", () => {\n      beforeEach(() => {\n        mockGetHostname.mockReturnValue("youtube.com");\n\n        // Mock window.innerWidth\n        Object.defineProperty(window, "innerWidth", {\n          writable: true,\n          configurable: true,\n          value: 1920,\n        });\n      });\n\n      it("positions button at default location when no top style is set", () => {\n        enhanceYouTubeButton(btn);\n\n        expect(btn.style.top).toBe("70px");\n        expect(btn.style.left).toBe("1820px"); // 1920 - 100\n      });\n\n      it("positions button at default location when top is 10px", () => {\n        btn.style.top = "10px";\n        enhanceYouTubeButton(btn);\n\n        expect(btn.style.top).toBe("70px");\n        expect(btn.style.left).toBe("1820px"); // 1920 - 100\n      });\n\n      it("preserves custom top position when not 10px", () => {\n        btn.style.top = "50px";\n        enhanceYouTubeButton(btn);\n\n        expect(btn.style.top).toBe("50px");\n        expect(btn.style.left).toBe("1820px"); // 1920 - 100\n      });\n\n      it("preserves custom top position when set to 0px", () => {\n        btn.style.top = "0px";\n        enhanceYouTubeButton(btn);\n\n        expect(btn.style.top).toBe("0px");\n        expect(btn.style.left).toBe("1820px"); // 1920 - 100\n      });\n\n      it("preserves custom top position when set to 100px", () => {\n        btn.style.top = "100px";\n        enhanceYouTubeButton(btn);\n\n        expect(btn.style.top).toBe("100px");\n        expect(btn.style.left).toBe("1820px"); // 1920 - 100\n      });\n\n      it("calculates left position based on window width", () => {\n        Object.defineProperty(window, "innerWidth", {\n          writable: true,\n          configurable: true,\n          value: 1366,\n        });\n\n        enhanceYouTubeButton(btn);\n\n        expect(btn.style.left).toBe("1266px"); // 1366 - 100\n      });\n\n      it("handles very small window width", () => {\n        Object.defineProperty(window, "innerWidth", {\n          writable: true,\n          configurable: true,\n          value: 200,\n        });\n\n        enhanceYouTubeButton(btn);\n\n        expect(btn.style.left).toBe("100px"); // 200 - 100\n      });\n\n      it("handles zero window width", () => {\n        Object.defineProperty(window, "innerWidth", {\n          writable: true,\n          configurable: true,\n          value: 0,\n        });\n\n        enhanceYouTubeButton(btn);\n\n        expect(btn.style.left).toBe("-100px"); // 0 - 100\n      });\n    });\n\n    describe("logging", () => {\n      it("logs enhancement message for YouTube", () => {\n        mockGetHostname.mockReturnValue("youtube.com");\n        const consoleSpy = jest.spyOn(console, "log");\n\n        enhanceYouTubeButton(btn);\n\n        expect(consoleSpy).toHaveBeenCalledWith(\n          "[EVD Content] Enhancing YouTube button visibility"\n        );\n      });\n\n      it("does not log for non-YouTube domains", () => {\n        mockGetHostname.mockReturnValue("example.com");\n        const consoleSpy = jest.spyOn(console, "log");\n\n        enhanceYouTubeButton(btn);\n\n        expect(consoleSpy).not.toHaveBeenCalledWith(\n          "[EVD Content] Enhancing YouTube button visibility"\n        );\n      });\n    });\n\n    describe("edge cases", () => {\n      it("handles null button element gracefully", () => {\n        mockGetHostname.mockReturnValue("youtube.com");\n\n        expect(() => {\n          enhanceYouTubeButton(null as any);\n        }).not.toThrow();\n      });\n\n      it("handles undefined button element gracefully", () => {\n        mockGetHostname.mockReturnValue("youtube.com");\n\n        expect(() => {\n          enhanceYouTubeButton(undefined as any);\n        }).not.toThrow();\n      });\n\n      it("handles button with existing event handlers", () => {\n        mockGetHostname.mockReturnValue("youtube.com");\n\n        const existingClickHandler = jest.fn();\n        btn.onclick = existingClickHandler;\n\n        enhanceYouTubeButton(btn);\n\n        // Original click handler should be preserved\n        expect(btn.onclick).toBe(existingClickHandler);\n        expect(btn.classList.contains("youtube-enhanced")).toBe(true);\n      });\n\n      it("handles button with existing styles that might conflict", () => {\n        mockGetHostname.mockReturnValue("youtube.com");\n\n        // Set conflicting styles\n        btn.style.transform = "rotate(45deg)";\n        btn.style.opacity = "0.5";\n\n        enhanceYouTubeButton(btn);\n\n        // Should still apply the CSS class\n        expect(btn.classList.contains("youtube-enhanced")).toBe(true);\n      });\n    });\n  });\n});\n',
          },
          "tests/extension/history.util.test.ts": {
            tests: [
              {
                id: "374",
                name: "history module fetchHistory returns sorted history",
                location: { start: { column: 6, line: 32 } },
              },
              {
                id: "375",
                name: "history module fetchHistory returns empty history on storage error",
                location: { start: { column: 6, line: 45 } },
              },
              {
                id: "376",
                name: "history module clearHistory clears history from storage",
                location: { start: { column: 6, line: 56 } },
              },
              {
                id: "377",
                name: "history module clearHistory rejects on storage.set error",
                location: { start: { column: 6, line: 68 } },
              },
              {
                id: "378",
                name: "history module clearHistoryAndNotify clears history and sends a notification",
                location: { start: { column: 6, line: 78 } },
              },
              {
                id: "379",
                name: "history module removeHistoryItem removes an item from history",
                location: { start: { column: 6, line: 121 } },
              },
              {
                id: "380",
                name: "history module removeHistoryItem does nothing when no id provided",
                location: { start: { column: 6, line: 138 } },
              },
              {
                id: "381",
                name: "history module removeHistoryItem rejects when removing an item fails",
                location: { start: { column: 6, line: 143 } },
              },
              {
                id: "382",
                name: "history module removeHistoryItem rejects if fetching history fails",
                location: { start: { column: 6, line: 156 } },
              },
              {
                id: "383",
                name: "history module removeHistoryItemAndNotify removes item and sends a notification",
                location: { start: { column: 6, line: 168 } },
              },
              {
                id: "384",
                name: "history module addToHistory adds an item to history",
                location: { start: { column: 6, line: 212 } },
              },
              {
                id: "385",
                name: "history module addToHistory resolves when getting history fails",
                location: { start: { column: 6, line: 230 } },
              },
              {
                id: "386",
                name: "history module addToHistory resolves when setting history fails",
                location: { start: { column: 6, line: 244 } },
              },
            ],
            source:
              '/**\n * Tests for history module utility functions.\n *\n * Covers: history fetching, clearing, item management, storage operations,\n * and Chrome API integration with error handling.\n *\n * Uses jest.isolateModules to ensure clean state between tests.\n */\n\nimport type { HistoryEntry } from "extension/src/types";\n\n// Note: We don\'t import from \'extension/src/history\' at the top level\n// because we will be using jest.isolateModules to get a fresh module for each test.\n\ndescribe("history module", () => {\n  // Use a fresh module for every test to avoid state leakage\n  let historyModule: typeof import("extension/src/history");\n\n  beforeEach(() => {\n    jest.isolateModules(() => {\n      historyModule = require("extension/src/history");\n    });\n    // Reset mocks before each test\n    (chrome.storage.local.get as jest.Mock).mockClear();\n    (chrome.storage.local.set as jest.Mock).mockClear();\n    (chrome.runtime.sendMessage as jest.Mock).mockClear();\n    (chrome.runtime.lastError as any) = null;\n  });\n\n  describe("fetchHistory", () => {\n    it("returns sorted history", async () => {\n      (chrome.storage.local.get as jest.Mock).mockImplementation((keys, cb) => {\n        cb({\n          downloadHistory: [\n            { id: "1", timestamp: 1000 },\n            { id: "2", timestamp: 2000 },\n          ],\n        });\n      });\n      const result = await historyModule.fetchHistory();\n      expect(result.history[0].id).toBe("2");\n    });\n\n    it("returns empty history on storage error", async () => {\n      (chrome.runtime.lastError as any) = { message: "fail" };\n      (chrome.storage.local.get as jest.Mock).mockImplementation((keys, cb) =>\n        cb({})\n      );\n      const result = await historyModule.fetchHistory();\n      expect(result).toEqual({ history: [], totalItems: 0 });\n    });\n  });\n\n  describe("clearHistory", () => {\n    it("clears history from storage", async () => {\n      (chrome.storage.local.set as jest.Mock).mockImplementation((items, cb) =>\n        cb()\n      );\n      await historyModule.clearHistory();\n      expect(chrome.storage.local.set).toHaveBeenCalledWith(\n        { [historyModule.historyStorageKey]: [] },\n        expect.any(Function)\n      );\n      expect(chrome.runtime.sendMessage).not.toHaveBeenCalled();\n    });\n\n    it("rejects on storage.set error", async () => {\n      (chrome.runtime.lastError as any) = new Error("fail");\n      (chrome.storage.local.set as jest.Mock).mockImplementation((items, cb) =>\n        cb()\n      );\n      await expect(historyModule.clearHistory()).rejects.toThrow("fail");\n    });\n  });\n\n  describe("clearHistoryAndNotify", () => {\n    it("clears history and sends a notification", async () => {\n      (chrome.storage.local.set as jest.Mock).mockImplementation((items, cb) =>\n        cb()\n      );\n      await historyModule.clearHistoryAndNotify();\n      expect(chrome.storage.local.set).toHaveBeenCalledWith(\n        { [historyModule.historyStorageKey]: [] },\n        expect.any(Function)\n      );\n      expect(chrome.runtime.sendMessage).toHaveBeenCalledWith({\n        type: "historyUpdated",\n      });\n    });\n  });\n\n  describe("removeHistoryItem", () => {\n    /**\n     * Tests history item removal functionality with various scenarios.\n     * Verifies storage operations, error handling, and edge cases.\n     */\n    const mockHistory: HistoryEntry[] = [\n      {\n        id: "keep",\n        url: "http://keep.com",\n        filename: "a",\n        page_title: "a",\n        timestamp: "1",\n        status: "completed",\n        detail: "",\n        error: "",\n      },\n      {\n        id: "remove",\n        url: "http://remove.com",\n        filename: "b",\n        page_title: "b",\n        timestamp: "2",\n        status: "completed",\n        detail: "",\n        error: "",\n      },\n    ];\n\n    it("removes an item from history", async () => {\n      (chrome.storage.local.get as jest.Mock).mockImplementation((key, cb) => {\n        cb({ [historyModule.historyStorageKey]: mockHistory });\n      });\n      (chrome.storage.local.set as jest.Mock).mockImplementation((items, cb) =>\n        cb()\n      );\n\n      await historyModule.removeHistoryItem("remove");\n      const expectedHistory = [mockHistory[0]];\n      expect(chrome.storage.local.set).toHaveBeenCalledWith(\n        { [historyModule.historyStorageKey]: expectedHistory },\n        expect.any(Function)\n      );\n      expect(chrome.runtime.sendMessage).not.toHaveBeenCalled();\n    });\n\n    it("does nothing when no id provided", async () => {\n      await historyModule.removeHistoryItem(""); // Pass empty string for type safety\n      expect(chrome.storage.local.set).not.toHaveBeenCalled();\n    });\n\n    it("rejects when removing an item fails", async () => {\n      (chrome.storage.local.get as jest.Mock).mockImplementation((key, cb) => {\n        cb({ [historyModule.historyStorageKey]: mockHistory });\n      });\n      (chrome.runtime.lastError as any) = new Error("Failed to save");\n      (chrome.storage.local.set as jest.Mock).mockImplementation((items, cb) =>\n        cb()\n      );\n      await expect(historyModule.removeHistoryItem("remove")).rejects.toThrow(\n        "Failed to save"\n      );\n    });\n\n    it("rejects if fetching history fails", async () => {\n      (chrome.runtime.lastError as any) = new Error("Failed to fetch");\n      (chrome.storage.local.get as jest.Mock).mockImplementation((key, cb) => {\n        cb({}); // Simulate error by returning no data\n      });\n      await expect(historyModule.removeHistoryItem("remove")).rejects.toThrow(\n        "Failed to fetch"\n      );\n    });\n  });\n\n  describe("removeHistoryItemAndNotify", () => {\n    it("removes item and sends a notification", async () => {\n      const mockHistory = [\n        { id: "some-id", timestamp: 1 },\n        { id: "another-id", timestamp: 2 },\n      ];\n      (chrome.storage.local.get as jest.Mock).mockImplementation((key, cb) => {\n        cb({ [historyModule.historyStorageKey]: mockHistory });\n      });\n      (chrome.storage.local.set as jest.Mock).mockImplementation((items, cb) =>\n        cb()\n      );\n\n      await historyModule.removeHistoryItemAndNotify("some-id");\n\n      expect(chrome.storage.local.set).toHaveBeenCalledWith(\n        {\n          [historyModule.historyStorageKey]: [\n            { id: "another-id", timestamp: 2 },\n          ],\n        },\n        expect.any(Function)\n      );\n      expect(chrome.runtime.sendMessage).toHaveBeenCalledWith({\n        type: "historyUpdated",\n      });\n    });\n  });\n\n  describe("addToHistory", () => {\n    /**\n     * Tests adding new entries to history with error handling.\n     * Verifies storage operations and graceful error recovery.\n     */\n    const newEntry: HistoryEntry = {\n      id: "new-id",\n      url: "http://new.com",\n      filename: "c",\n      page_title: "c",\n      timestamp: "3",\n      status: "completed",\n      detail: "",\n      error: "",\n    };\n\n    it("adds an item to history", async () => {\n      // Mock get to return empty history\n      (chrome.storage.local.get as jest.Mock).mockImplementation((key, cb) => {\n        cb({ [historyModule.historyStorageKey]: [] });\n      });\n      // Mock set to be successful\n      (chrome.storage.local.set as jest.Mock).mockImplementation((items, cb) =>\n        cb()\n      );\n\n      await historyModule.addToHistory(newEntry);\n\n      expect(chrome.storage.local.set).toHaveBeenCalledWith(\n        { [historyModule.historyStorageKey]: [newEntry] },\n        expect.any(Function)\n      );\n    });\n\n    it("resolves when getting history fails", async () => {\n      // Simulate storage.get error but swallow in implementation\n      (chrome.runtime.lastError as any) = new Error("Failed to get");\n      (chrome.storage.local.get as jest.Mock).mockImplementation((key, cb) => {\n        cb({});\n      });\n      (chrome.storage.local.set as jest.Mock).mockImplementation((items, cb) =>\n        cb()\n      );\n      await expect(\n        historyModule.addToHistory(newEntry)\n      ).resolves.toBeUndefined();\n    });\n\n    it("resolves when setting history fails", async () => {\n      // Simulate storage.set error but swallow in implementation\n      (chrome.storage.local.get as jest.Mock).mockImplementation((key, cb) => {\n        cb({ [historyModule.historyStorageKey]: [] });\n      });\n      (chrome.runtime.lastError as any) = new Error("Failed to set");\n      (chrome.storage.local.set as jest.Mock).mockImplementation((items, cb) =>\n        cb()\n      );\n      await expect(\n        historyModule.addToHistory(newEntry)\n      ).resolves.toBeUndefined();\n    });\n  });\n});\n',
          },
          "tests/extension/options.errorHistory.test.ts": {
            tests: [
              {
                id: "387",
                name: "loadErrorHistory fetches history and renders only error entries",
                location: { start: { column: 4, line: 23 } },
              },
            ],
            source:
              'import { loadErrorHistory } from "extension/src/options";\nimport * as historyModule from "extension/src/history";\n\ndescribe("loadErrorHistory", () => {\n  let listEl: HTMLElement;\n\n  beforeEach(() => {\n    document.body.innerHTML = \'<' +
              'ul id="error-history-list"><' +
              '/ul>\';\n    listEl = document.getElementById("error-history-list") as HTMLElement;\n    jest.spyOn(historyModule, "fetchHistory").mockResolvedValue({\n      history: [{ status: "error" }, { status: "complete" }],\n      totalItems: 2,\n    });\n    jest\n      .spyOn(historyModule, "renderHistoryItems")\n      .mockImplementation(() => {});\n  });\n\n  afterEach(() => {\n    jest.resetAllMocks();\n  });\n\n  it("fetches history and renders only error entries", async () => {\n    await loadErrorHistory(2, 5);\n    expect(historyModule.fetchHistory).toHaveBeenCalledWith(2, 5);\n    expect(historyModule.renderHistoryItems).toHaveBeenCalledWith(\n      [{ status: "error" }],\n      2,\n      5,\n      1,\n      listEl\n    );\n  });\n});\n',
          },
          "tests/extension/popup.queue.test.ts": {
            tests: [
              {
                id: "388",
                name: "Popup Queue Controls createActiveListItem pause button calls pauseDownload",
                location: { start: { column: 4, line: 14 } },
              },
              {
                id: "389",
                name: "Popup Queue Controls renderDownloadStatus resume button calls resumeDownload for paused items",
                location: { start: { column: 4, line: 29 } },
              },
            ],
            source:
              '/* eslint-env jest */\nimport * as popup from "extension/src/popup";\n\ndescribe("Popup Queue Controls", () => {\n  beforeEach(() => {\n    // Prepare minimal DOM container\n    document.body.innerHTML = \'<' +
              'ul id="download-status"><' +
              '/ul>\';\n    // Stub chrome runtime\n    // @ts-expect-error - Mocking Chrome API for testing\n    global.chrome = { runtime: { sendMessage: jest.fn() } };\n  });\n\n  it("createActiveListItem pause button calls pauseDownload", () => {\n    const li = popup.createActiveListItem("idPause", {\n      status: "running",\n      progress: 75,\n      filename: "test.mp4",\n    });\n    const btn = li.querySelector<' +
              'HTMLButtonElement>("button.pause-button");\n    expect(btn).not.toBeNull();\n    btn!.click();\n    expect(global.chrome.runtime.sendMessage).toHaveBeenCalledWith(\n      { type: "pauseDownload", downloadId: "idPause" },\n      expect.any(Function)\n    );\n  });\n\n  it("renderDownloadStatus resume button calls resumeDownload for paused items", () => {\n    // Simulate paused active item\n    popup.renderDownloadStatus({\n      active: { idResume: { status: "paused", progress: 0 } },\n      queue: [],\n    });\n    const resumeBtn = document.querySelector<' +
              'HTMLButtonElement>(\n      "button.resume-button"\n    );\n    expect(resumeBtn).not.toBeNull();\n    resumeBtn!.click();\n    expect(global.chrome.runtime.sendMessage).toHaveBeenCalledWith(\n      { type: "resumeDownload", downloadId: "idResume" },\n      expect.any(Function)\n    );\n  });\n});\n',
          },
          "extension/src/__tests__/stryker-test.test.ts": {
            tests: [
              {
                id: "390",
                name: "add adds two numbers",
                location: { start: { column: 4, line: 4 } },
              },
            ],
            source:
              'import { add } from "../stryker-test";\n\ndescribe("add", () => {\n  it("adds two numbers", () => {\n    expect(add(2, 3)).toBe(5);\n  });\n});\n',
          },
          "tests/extension/popup-settings.test.ts": {
            tests: [
              {
                id: "391",
                name: "popup settings button should call chrome.runtime.openOptionsPage on settings click",
                location: { start: { column: 4, line: 34 } },
              },
            ],
            source:
              'import "../../extension/dist/popup.js";\n\ndeclare const global: any;\n\ndescribe("popup settings button", () => {\n  let originalChrome: any;\n\n  beforeEach(() => {\n    // Set up DOM\n    document.body.innerHTML = \'<' +
              'button id="open-settings"><' +
              '/button>\';\n    // Mock chrome.runtime\n    originalChrome = global.chrome;\n    global.chrome = {\n      runtime: {\n        openOptionsPage: jest.fn(),\n        getURL: (path: string) => path,\n        sendMessage: jest.fn(),\n        onMessage: { addListener: jest.fn() },\n      },\n    };\n    // Import popup.js after DOM and mocks are set up\n    jest.resetModules();\n    require("../../extension/dist/popup.js");\n    // Trigger DOMContentLoaded event to initialize popup functionality\n    document.dispatchEvent(new Event("DOMContentLoaded"));\n  });\n\n  afterEach(() => {\n    global.chrome = originalChrome;\n    document.body.innerHTML = "";\n    jest.resetModules();\n  });\n\n  it("should call chrome.runtime.openOptionsPage on settings click", () => {\n    const settingsButton = document.getElementById("open-settings");\n    settingsButton?.click();\n    expect(global.chrome.runtime.openOptionsPage).toHaveBeenCalled();\n  });\n});\n',
          },
          "tests/extension/popup.advanced.test.js": {
            tests: [
              {
                id: "392",
                name: "loadConfig resolves serverConfig on success",
                location: { start: { column: 4, line: 26 } },
              },
              {
                id: "393",
                name: "loadConfig falls back to storage when runtime.lastError set",
                location: { start: { column: 4, line: 31 } },
              },
              {
                id: "394",
                name: "updateDownloadDirDisplay no-op when element missing",
                location: { start: { column: 4, line: 42 } },
              },
              {
                id: "395",
                name: "updateDownloadDirDisplay updates text when element present",
                location: { start: { column: 4, line: 47 } },
              },
              {
                id: "396",
                name: "updatePortDisplay no-op when element missing",
                location: { start: { column: 4, line: 68 } },
              },
              {
                id: "397",
                name: "updatePortDisplay updates text on presence",
                location: { start: { column: 4, line: 73 } },
              },
              {
                id: "398",
                name: "showConfigErrorIfPresent no-op when element missing",
                location: { start: { column: 4, line: 93 } },
              },
              {
                id: "399",
                name: "showConfigErrorIfPresent displays error when configError set",
                location: { start: { column: 4, line: 98 } },
              },
              {
                id: "400",
                name: "createErrorListItem builds list item with semantic details element and help link",
                location: { start: { column: 4, line: 117 } },
              },
              {
                id: "401",
                name: "createGenericListItem renders paused status with resume button",
                location: { start: { column: 4, line: 150 } },
              },
              {
                id: "402",
                name: "createQueuedListItem renders cancel button and sends message",
                location: { start: { column: 4, line: 159 } },
              },
            ],
            source:
              '/**\n * Tests for advanced popup UI functionality.\n *\n * Covers: configuration loading, display updates, error handling,\n * list item creation, and user interaction elements.\n *\n * Tests both successful and error scenarios for popup UI components.\n */\n\n/* eslint-env jest */\n\nimport * as popup from "extension/src/popup";\n\ndescribe("loadConfig", () => {\n  beforeEach(() => {\n    global.chrome = {\n      runtime: {\n        lastError: undefined,\n        sendMessage: jest.fn((msg, cb) => cb({ serverConfig: { test: true } })),\n      },\n      storage: { local: { get: jest.fn() } },\n    };\n  });\n\n  it("resolves serverConfig on success", async () => {\n    const cfg = await popup.loadConfig();\n    expect(cfg).toEqual({ test: true });\n  });\n\n  it("falls back to storage when runtime.lastError set", async () => {\n    global.chrome.runtime.lastError = { message: "err" };\n    global.chrome.storage.local.get = jest.fn((keys, cb) =>\n      cb({ extensionConfig: { foo: "bar" } })\n    );\n    const cfg = await popup.loadConfig();\n    expect(cfg).toEqual({ foo: "bar" });\n  });\n});\n\ndescribe("updateDownloadDirDisplay", () => {\n  it("no-op when element missing", async () => {\n    document.body.innerHTML = "";\n    await expect(popup.updateDownloadDirDisplay()).resolves.toBeUndefined();\n  });\n\n  it("updates text when element present", async () => {\n    document.body.innerHTML = \'<' +
              'div id="download-dir-display"><' +
              '/div>\';\n    // Stub chrome to force storage fallback with download_dir\n    global.chrome = {\n      runtime: { lastError: true, sendMessage: jest.fn((msg, cb) => cb({})) },\n      storage: {\n        local: {\n          get: jest.fn((keys, cb) =>\n            cb({ extensionConfig: { download_dir: "/tmp" } })\n          ),\n        },\n      },\n    };\n    await popup.updateDownloadDirDisplay();\n    expect(document.getElementById("download-dir-display").textContent).toBe(\n      "Saving to: /tmp"\n    );\n  });\n});\n\ndescribe("updatePortDisplay", () => {\n  it("no-op when element missing", () => {\n    document.body.innerHTML = "";\n    expect(() => popup.updatePortDisplay()).not.toThrow();\n  });\n\n  it("updates text on presence", async () => {\n    document.body.innerHTML = \'<' +
              'div id="server-port-display"><' +
              '/div>\';\n    // Stub chrome to return serverConfig via runtime\n    global.chrome = {\n      runtime: {\n        lastError: false,\n        sendMessage: jest.fn((msg, cb) =>\n          cb({ serverConfig: { server_port: 1234 }, status: "success" })\n        ),\n      },\n      storage: { local: { get: jest.fn() } },\n    };\n    await popup.updatePortDisplay();\n    expect(document.getElementById("server-port-display").textContent).toBe(\n      "Server Port: 1234"\n    );\n  });\n});\n\ndescribe("showConfigErrorIfPresent", () => {\n  it("no-op when element missing", () => {\n    document.body.innerHTML = "";\n    expect(() => popup.showConfigErrorIfPresent()).not.toThrow();\n  });\n\n  it("displays error when configError set", () => {\n    document.body.innerHTML = \'<' +
              'div id="config-error-display"><' +
              '/div>\';\n    global.chrome = {\n      storage: {\n        local: { get: jest.fn((key, cb) => cb({ configError: "oops" })) },\n      },\n    };\n    popup.showConfigErrorIfPresent();\n    const el = document.getElementById("config-error-display");\n    expect(el.textContent).toBe("Configuration Error: oops");\n    expect(el.style.display).toBe("block");\n  });\n});\n\ndescribe("createErrorListItem", () => {\n  /**\n   * Tests the creation of error list items with detailed error information.\n   * Verifies DOM structure, error details display, and help link functionality.\n   */\n  it("builds list item with semantic details element and help link", () => {\n    // Stub openOptionsPage for help link\n    global.chrome = { runtime: { openOptionsPage: jest.fn() } };\n    const info = {\n      filename: "file.mp4",\n      errorInfo: { type: "TypeX", message: "msg", original: "orig" },\n    };\n    const li = popup.createErrorListItem("id1", info);\n    // Data attribute and title\n    expect(li.dataset.downloadId).toBe("id1");\n    expect(li.querySelector(".item-title").textContent).toContain("file.mp4");\n    // Details element should be present\n    const detailsEl = li.querySelector("details.error-details");\n    expect(detailsEl).not.toBeNull();\n    const summary = detailsEl.querySelector("summary");\n    expect(summary.textContent).toBe("Details");\n    // Initially collapsed (no open attribute)\n    expect(detailsEl.hasAttribute("open")).toBe(false);\n    // Clicking summary toggles open attribute\n    summary.click();\n    expect(detailsEl.hasAttribute("open")).toBe(true);\n    // Content should contain error info\n    const content = detailsEl.querySelector(".error-details-content");\n    expect(content.textContent).toContain("TypeX: msg (orig)");\n    // Contextual help link should be present and callable\n    const helpBtn = detailsEl.querySelector("button.error-help-link");\n    expect(helpBtn).not.toBeNull();\n    helpBtn.click();\n    expect(global.chrome.runtime.openOptionsPage).toHaveBeenCalled();\n  });\n});\n\ndescribe("createGenericListItem", () => {\n  it("renders paused status with resume button", () => {\n    const li = popup.createGenericListItem("id2", { status: "paused" });\n    expect(li.classList.contains("status-paused")).toBe(true);\n    const btn = li.querySelector("button.resume-button");\n    expect(btn).not.toBeNull();\n  });\n});\n\ndescribe("createQueuedListItem", () => {\n  it("renders cancel button and sends message", () => {\n    global.chrome = { runtime: { sendMessage: jest.fn() } };\n    const item = { id: "id3", filename: "f.mp4" };\n    const li = popup.createQueuedListItem(item);\n    const btn = li.querySelector("button.cancel-button");\n    btn.click();\n    expect(global.chrome.runtime.sendMessage).toHaveBeenCalledWith(\n      { type: "cancelDownload", downloadId: "id3" },\n      expect.any(Function)\n    );\n  });\n});\n',
          },
          "tests/extension/history.render.test.js": {
            tests: [
              {
                id: "403",
                name: "renderHistoryItems renders empty history correctly",
                location: { start: { column: 4, line: 24 } },
              },
              {
                id: "404",
                name: "renderHistoryItems renders history items and pagination correctly",
                location: { start: { column: 4, line: 33 } },
              },
              {
                id: "405",
                name: "renderHistoryItems renders items with missing optional fields correctly",
                location: { start: { column: 4, line: 65 } },
              },
            ],
            source:
              '/* eslint-env jest */\n\nimport { renderHistoryItems } from "extension/src/history";\n\ndescribe("renderHistoryItems", () => {\n  let listEl;\n  let pageInfoEl;\n  let prevBtn;\n  let nextBtn;\n\n  beforeEach(() => {\n    document.body.innerHTML =\n      \'<' +
              'ul id="history-list"><' +
              "/ul>' +\n      '<" +
              'div id="page-info"><' +
              "/div>' +\n      '<" +
              'button id="prev-btn"><' +
              "/button>' +\n      '<" +
              'button id="next-btn"><' +
              '/button>\';\n    listEl = document.getElementById("history-list");\n    pageInfoEl = document.getElementById("page-info");\n    prevBtn = document.getElementById("prev-btn");\n    nextBtn = document.getElementById("next-btn");\n  });\n\n  it("renders empty history correctly", () => {\n    renderHistoryItems([], 1, 10, 0, listEl, pageInfoEl, prevBtn, nextBtn);\n    const emptyItems = listEl.querySelectorAll("li.empty-history");\n    expect(emptyItems).toHaveLength(1);\n    expect(pageInfoEl.textContent).toBe("No items");\n    expect(prevBtn.disabled).toBe(true);\n    expect(nextBtn.disabled).toBe(true);\n  });\n\n  it("renders history items and pagination correctly", () => {\n    const items = [\n      {\n        id: "1",\n        page_title: "Title1",\n        filename: "file1.mp4",\n        timestamp: 1000,\n        status: "done",\n      },\n      {\n        id: "2",\n        page_title: "Title2",\n        filename: "file2.mp4",\n        timestamp: 2000,\n        status: "pending",\n        detail: ["detail1"],\n        error: "error msg",\n        url: "http://example.com",\n      },\n    ];\n    renderHistoryItems(items, 1, 2, 2, listEl, pageInfoEl, prevBtn, nextBtn);\n    const rendered = listEl.querySelectorAll("li.history-item");\n    expect(rendered).toHaveLength(2);\n    expect(pageInfoEl.textContent).toBe("Showing 1-2 of 2 items");\n    expect(prevBtn.disabled).toBe(true);\n    expect(nextBtn.disabled).toBe(true);\n    // Check first item content\n    const first = rendered[0];\n    expect(first.dataset.itemId).toBe("1");\n    expect(first.querySelector("b").textContent).toBe("Title1");\n  });\n\n  it("renders items with missing optional fields correctly", () => {\n    const items = [\n      {\n        id: "3",\n        filename: "file3.mp4", // No page_title\n        status: "failed",\n        // No timestamp\n        detail: "just a string detail", // detail as string\n      },\n    ];\n    renderHistoryItems(items, 1, 1, 1, listEl, pageInfoEl, prevBtn, nextBtn);\n    const rendered = listEl.querySelectorAll("li.history-item");\n    expect(rendered).toHaveLength(1);\n\n    const itemEl = rendered[0];\n    expect(itemEl.querySelector("b").textContent).toBe("file3.mp4"); // Fallback to filename\n    expect(itemEl.querySelector(".history-item-timestamp").textContent).toBe(\n      ""\n    ); // Empty timestamp\n    expect(itemEl.querySelector(".history-item-detail").textContent).toBe(\n      "just a string detail"\n    );\n  });\n});\n',
          },
          "tests/extension/content.state.test.js": {
            tests: [
              {
                id: "406",
                name: "getButtonState resolves default state when storage returns error",
                location: { start: { column: 4, line: 13 } },
              },
              {
                id: "407",
                name: "getButtonState resolves stored state when available",
                location: { start: { column: 4, line: 29 } },
              },
              {
                id: "408",
                name: "saveButtonState calls storage.set with correct key and resolves",
                location: { start: { column: 4, line: 52 } },
              },
            ],
            source:
              '/* eslint-env jest */\n\nimport { getButtonState, saveButtonState } from "extension/src/content";\n\ndescribe("getButtonState", () => {\n  beforeEach(() => {\n    document.body.innerHTML = "";\n    jest.resetModules();\n    delete global.chrome;\n  });\n\n  it("resolves default state when storage returns error", async () => {\n    global.chrome = {\n      storage: {\n        local: {\n          get: (_key, _cb) => {\n            throw new Error("storage error");\n          },\n        },\n      },\n      runtime: { lastError: undefined },\n    };\n\n    const state = await getButtonState();\n    expect(state).toEqual({ x: 10, y: 10, hidden: false });\n  });\n\n  it("resolves stored state when available", async () => {\n    const testState = { x: 42, y: 24, hidden: true };\n    const domain = window.location.hostname || "";\n    global.chrome = {\n      storage: {\n        local: {\n          get: (_key, cb) => cb({ [domain]: testState }),\n        },\n      },\n      runtime: { lastError: undefined },\n    };\n\n    const state = await getButtonState();\n    expect(state).toEqual(testState);\n  });\n});\n\ndescribe("saveButtonState", () => {\n  beforeEach(() => {\n    jest.resetModules();\n    delete global.chrome;\n  });\n\n  it("calls storage.set with correct key and resolves", async () => {\n    const calls = [];\n    const domain = window.location.hostname || "";\n    global.chrome = {\n      storage: {\n        local: {\n          set: (items, cb) => {\n            calls.push(items);\n            cb();\n          },\n        },\n      },\n      runtime: { lastError: undefined },\n    };\n    const newState = { x: 5, y: 6, hidden: true };\n    await saveButtonState(newState);\n    expect(calls).toHaveLength(1);\n    expect(calls[0]).toEqual({ [domain]: newState });\n  });\n});\n',
          },
          "tests/extension/background.test.ts": {
            tests: [
              {
                id: "409",
                name: "Background Script - Core Functions Logging Functions log should call console.log with BG prefix",
                location: { start: { column: 6, line: 103 } },
              },
              {
                id: "410",
                name: "Background Script - Core Functions Logging Functions warn should call console.warn with BG Warning prefix",
                location: { start: { column: 6, line: 112 } },
              },
              {
                id: "411",
                name: "Background Script - Core Functions Logging Functions error should call console.error with BG Error prefix",
                location: { start: { column: 6, line: 120 } },
              },
              {
                id: "412",
                name: "Background Script - Core Functions Server Status Functions checkServerStatus should return true for successful response",
                location: { start: { column: 6, line: 130 } },
              },
              {
                id: "413",
                name: "Background Script - Core Functions Server Status Functions checkServerStatus should return false for failed response",
                location: { start: { column: 6, line: 146 } },
              },
              {
                id: "414",
                name: "Background Script - Core Functions Server Status Functions checkServerStatus should return false for network error",
                location: { start: { column: 6, line: 156 } },
              },
              {
                id: "415",
                name: "Background Script - Core Functions Server Status Functions checkServerStatus should return false when fetch is not available",
                location: { start: { column: 6, line: 163 } },
              },
              {
                id: "416",
                name: "Background Script - Core Functions Server Status Functions checkServerStatus should return false for wrong server app name",
                location: { start: { column: 6, line: 174 } },
              },
              {
                id: "417",
                name: "Background Script - Core Functions Server Status Functions checkServerStatus should handle AbortError specifically",
                location: { start: { column: 6, line: 184 } },
              },
              {
                id: "418",
                name: "Background Script - Core Functions Server Status Functions checkServerStatus should handle storage errors",
                location: { start: { column: 6, line: 193 } },
              },
              {
                id: "419",
                name: "Background Script - Core Functions Server Status Functions checkServerStatus should handle server availability changes",
                location: { start: { column: 6, line: 208 } },
              },
              {
                id: "420",
                name: "Background Script - Core Functions Server Configuration Functions fetchServerConfig should return config from server",
                location: { start: { column: 6, line: 229 } },
              },
              {
                id: "421",
                name: "Background Script - Core Functions Server Configuration Functions fetchServerConfig should return empty object on fetch error",
                location: { start: { column: 6, line: 251 } },
              },
              {
                id: "422",
                name: "Background Script - Core Functions Server Configuration Functions fetchServerConfig should return empty object on non-ok response",
                location: { start: { column: 6, line: 259 } },
              },
              {
                id: "423",
                name: "Background Script - Core Functions Port Discovery findServerPort should return port when server is found",
                location: { start: { column: 6, line: 272 } },
              },
              {
                id: "424",
                name: "Background Script - Core Functions Port Discovery findServerPort should return null when no server found",
                location: { start: { column: 6, line: 297 } },
              },
              {
                id: "425",
                name: "Background Script - Core Functions Port Discovery findServerPort should handle network errors",
                location: { start: { column: 6, line: 322 } },
              },
              {
                id: "426",
                name: "Background Script - Core Functions Port Discovery findServerPort should handle badge updates when startScan is true",
                location: { start: { column: 6, line: 349 } },
              },
              {
                id: "427",
                name: "Background Script - Core Functions Port Discovery findServerPort should handle progress updates",
                location: { start: { column: 6, line: 377 } },
              },
              {
                id: "428",
                name: "Background Script - Core Functions Download Request sendDownloadRequest should return empty object (stub implementation)",
                location: { start: { column: 6, line: 407 } },
              },
              {
                id: "429",
                name: "Background Script - Core Functions Download Request sendDownloadRequest should handle different parameters",
                location: { start: { column: 6, line: 414 } },
              },
              {
                id: "430",
                name: "Background Script - Core Functions Theme Initialization initializeActionIconTheme should set theme from storage",
                location: { start: { column: 6, line: 438 } },
              },
              {
                id: "431",
                name: "Background Script - Core Functions Theme Initialization initializeActionIconTheme should use system preference when no stored theme",
                location: { start: { column: 6, line: 449 } },
              },
              {
                id: "432",
                name: "Background Script - Core Functions Theme Initialization initializeActionIconTheme should handle system preference change listener",
                location: { start: { column: 6, line: 463 } },
              },
              {
                id: "433",
                name: "Background Script - Core Functions Theme Initialization initializeActionIconTheme should handle matchMedia not available",
                location: { start: { column: 6, line: 481 } },
              },
              {
                id: "434",
                name: "Background Script - Core Functions Theme Initialization initializeActionIconTheme should handle theme change listener errors",
                location: { start: { column: 6, line: 499 } },
              },
              {
                id: "435",
                name: "Background Script - Core Functions Queue Persistence persistQueue should save queue to storage",
                location: { start: { column: 6, line: 519 } },
              },
              {
                id: "436",
                name: "Background Script - Core Functions Queue Persistence persistQueue should handle storage errors gracefully",
                location: { start: { column: 6, line: 529 } },
              },
              {
                id: "437",
                name: "Background Script - Core Functions Queue Persistence persistQueue should handle empty queue",
                location: { start: { column: 6, line: 538 } },
              },
              {
                id: "438",
                name: "Background Script - Core Functions Error Handling should handle Chrome API errors gracefully",
                location: { start: { column: 6, line: 548 } },
              },
              {
                id: "439",
                name: "Background Script - Core Functions Error Handling should handle fetch errors in server operations",
                location: { start: { column: 6, line: 557 } },
              },
              {
                id: "440",
                name: "Background Script - Core Functions API Service Functions fetchServerConfig should return config from server",
                location: { start: { column: 6, line: 566 } },
              },
              {
                id: "441",
                name: "Background Script - Core Functions API Service Functions fetchServerConfig should return empty object on fetch error",
                location: { start: { column: 6, line: 585 } },
              },
              {
                id: "442",
                name: "Background Script - Core Functions API Service Functions fetchServerConfig should return empty object on non-ok response",
                location: { start: { column: 6, line: 592 } },
              },
              {
                id: "443",
                name: "Background Script - Core Functions Utility Functions log should call console.log with BG prefix",
                location: { start: { column: 6, line: 604 } },
              },
              {
                id: "444",
                name: "Background Script - Core Functions Utility Functions warn should call console.warn with BG Warning prefix",
                location: { start: { column: 6, line: 613 } },
              },
              {
                id: "445",
                name: "Background Script - Core Functions Utility Functions error should call console.error with BG Error prefix",
                location: { start: { column: 6, line: 621 } },
              },
              {
                id: "446",
                name: "Background Script - Core Functions Utility Functions debounce should delay execution",
                location: { start: { column: 6, line: 629 } },
              },
              {
                id: "447",
                name: "Background Script - Core Functions Utility Functions applyThemeToActionIcon should set dark theme icons",
                location: { start: { column: 6, line: 643 } },
              },
              {
                id: "448",
                name: "Background Script - Core Functions Utility Functions applyThemeToActionIcon should fall back to light on invalid theme",
                location: { start: { column: 6, line: 651 } },
              },
              {
                id: "449",
                name: "Background Script - Core Functions Queue Management persistQueue should save queue to storage",
                location: { start: { column: 6, line: 661 } },
              },
              {
                id: "450",
                name: "Background Script - Core Functions Queue Management persistQueue should handle storage errors gracefully",
                location: { start: { column: 6, line: 672 } },
              },
            ],
            source:
              '/**\n * @fileoverview\n * Comprehensive unit tests for background.ts\n * Target: Improve mutation score from 100.07o 70/\n */\n\nimport {\n  sendDownloadRequest,\n  initializeActionIconTheme,\n  findServerPort,\n  checkServerStatus,\n  fetchServerConfig,\n  persistQueue,\n  downloadQueue,\n  log,\n  warn,\n  error,\n  debounce,\n  applyThemeToActionIcon,\n  actionIconPaths,\n} from "../../extension/src/background";\nimport {\n  getServerPort,\n  getClientPort,\n  getPortRange,\n} from "../../extension/src/constants";\n\n// Mock global fetch\nconst mockFetch = jest.fn();\n\n// Mock global console\nconst mockConsole = {\n  log: jest.fn(),\n  warn: jest.fn(),\n  error: jest.fn(),\n};\n\n// Mock global navigator\nconst mockNavigator = {\n  onLine: true,\n};\n\n// Mock global self\nconst mockSelf = {\n  addEventListener: jest.fn(),\n  matchMedia: jest.fn(() => ({\n    matches: false,\n    addEventListener: jest.fn(),\n    removeEventListener: jest.fn(),\n  })),\n  storage: {\n    local: {\n      get: jest.fn(),\n      set: jest.fn(),\n    },\n  },\n};\n\n// Mock AbortController\nconst mockAbortController = {\n  signal: {\n    aborted: false,\n  },\n  abort: jest.fn(),\n};\n\n// Mock global AbortController\nglobal.AbortController = jest.fn(() => mockAbortController) as any;\n\ndescribe("Background Script - Core Functions", () => {\n  beforeEach(() => {\n    // Use the global chrome mock from jest.setup.js\n    // Only override specific methods that need custom behavior for these tests\n\n    // Setup other global mocks\n    (global as any).fetch = mockFetch;\n    (global as any).console = mockConsole;\n    (global as any).navigator = mockNavigator;\n    (global as any).self = mockSelf;\n\n    // Reset all mocks\n    jest.clearAllMocks();\n\n    // Reset download queue\n    downloadQueue.length = 0;\n\n    // Default successful responses\n    mockFetch.mockResolvedValue({\n      ok: true,\n      json: jest.fn().mockResolvedValue({ status: "success" }),\n    });\n\n    // Ensure matchMedia is properly reset for each test\n    mockSelf.matchMedia = jest.fn(() => ({\n      matches: false,\n      addEventListener: jest.fn(),\n      removeEventListener: jest.fn(),\n    }));\n  });\n\n  describe("Logging Functions", () => {\n    it("log should call console.log with BG prefix", () => {\n      log("test message", "extra");\n      expect(mockConsole.log).toHaveBeenCalledWith(\n        "[BG]",\n        "test message",\n        "extra"\n      );\n    });\n\n    it("warn should call console.warn with BG Warning prefix", () => {\n      warn("warning message");\n      expect(mockConsole.warn).toHaveBeenCalledWith(\n        "[BG Warning]",\n        "warning message"\n      );\n    });\n\n    it("error should call console.error with BG Error prefix", () => {\n      error("error message");\n      expect(mockConsole.error).toHaveBeenCalledWith(\n        "[BG Error]",\n        "error message"\n      );\n    });\n  });\n\n  describe("Server Status Functions", () => {\n    it("checkServerStatus should return true for successful response", async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: jest\n          .fn()\n          .mockResolvedValue({ app_name: "Enhanced Video Downloader" }),\n      });\n\n      const result = await checkServerStatus(getServerPort());\n      expect(result).toBe(true);\n      expect(mockFetch).toHaveBeenCalledWith(\n        `http://127.0.0.1:${getServerPort()}/health`,\n        expect.objectContaining({ signal: expect.anything() })\n      );\n    });\n\n    it("checkServerStatus should return false for failed response", async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: false,\n        status: 404,\n      });\n\n      const result = await checkServerStatus(getServerPort());\n      expect(result).toBe(false);\n    });\n\n    it("checkServerStatus should return false for network error", async () => {\n      mockFetch.mockRejectedValueOnce(new Error("Network error"));\n\n      const result = await checkServerStatus(getServerPort());\n      expect(result).toBe(false);\n    });\n\n    it("checkServerStatus should return false when fetch is not available", async () => {\n      // Mock fetch as undefined\n      (global as any).fetch = undefined;\n\n      const result = await checkServerStatus(getServerPort());\n      expect(result).toBe(false);\n\n      // Restore fetch\n      (global as any).fetch = mockFetch;\n    });\n\n    it("checkServerStatus should return false for wrong server app name", async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: jest.fn().mockResolvedValue({ app_name: "Wrong App" }),\n      });\n\n      const result = await checkServerStatus(getServerPort());\n      expect(result).toBe(false);\n    });\n\n    it("checkServerStatus should handle AbortError specifically", async () => {\n      const abortError = new Error("AbortError");\n      abortError.name = "AbortError";\n      mockFetch.mockRejectedValueOnce(abortError);\n\n      const result = await checkServerStatus(getServerPort());\n      expect(result).toBe(false);\n    });\n\n    it("checkServerStatus should handle storage errors", async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: jest\n          .fn()\n          .mockResolvedValue({ app_name: "Enhanced Video Downloader" }),\n      });\n      // The original test had mockChrome.storage.local.set.mockRejectedValueOnce(new Error("Storage error"));\n      // This line is removed as per the new_code, as the local mock is removed.\n      // The test will now rely on the global fetch error handling.\n\n      const result = await checkServerStatus(getServerPort());\n      expect(result).toBe(true); // Should still return true even if storage fails\n    });\n\n    it("checkServerStatus should handle server availability changes", async () => {\n      // Mock initial state where server was not available\n      // The original test had mockChrome.storage.local.get.mockResolvedValueOnce({\n      //   serverOnlineStatus: false,\n      // });\n      // This line is removed as per the new_code, as the local mock is removed.\n      // The test will now rely on the global fetch error handling.\n\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: jest\n          .fn()\n          .mockResolvedValue({ app_name: "Enhanced Video Downloader" }),\n      });\n\n      const result = await checkServerStatus(getServerPort());\n      expect(result).toBe(true);\n    });\n  });\n\n  describe("Server Configuration Functions", () => {\n    it("fetchServerConfig should return config from server", async () => {\n      // Mock fetch to return a successful response\n      global.fetch = jest.fn().mockResolvedValue({\n        ok: true,\n        json: jest.fn().mockResolvedValue({\n          server_port: getServerPort(),\n          download_dir: "/test/path",\n          debug_mode: false,\n        }),\n      });\n\n      const result = await fetchServerConfig(getServerPort());\n      expect(result).toEqual({\n        server_port: getServerPort(),\n        download_dir: "/test/path",\n        debug_mode: false,\n      });\n      expect(fetch).toHaveBeenCalledWith(\n        `http://127.0.0.1:${getServerPort()}/api/config`\n      );\n    });\n\n    it("fetchServerConfig should return empty object on fetch error", async () => {\n      // Mock fetch to throw an error\n      global.fetch = jest.fn().mockRejectedValue(new Error("Network error"));\n\n      const result = await fetchServerConfig(getServerPort());\n      expect(result).toEqual({});\n    });\n\n    it("fetchServerConfig should return empty object on non-ok response", async () => {\n      // Mock fetch to return a non-ok response\n      global.fetch = jest.fn().mockResolvedValue({\n        ok: false,\n        status: 404,\n      });\n\n      const result = await fetchServerConfig(getServerPort());\n      expect(result).toEqual({});\n    });\n  });\n\n  describe("Port Discovery", () => {\n    it("findServerPort should return port when server is found", async () => {\n      const mockDiscover = jest.fn().mockResolvedValue(getServerPort());\n      const mockStorage = {\n        getConfig: jest.fn(),\n        setConfig: jest.fn(),\n        getPort: jest.fn(),\n        getHistory: jest.fn(),\n        clearHistory: jest.fn(),\n      };\n      const mockCheckStatus = jest.fn();\n      const mockLog = jest.fn();\n      const mockWarn = jest.fn();\n      const result = await findServerPort(true, {\n        discoverServerPort: mockDiscover,\n        storageService: mockStorage,\n        checkServerStatus: mockCheckStatus,\n        log: mockLog,\n        warn: mockWarn,\n      });\n      expect(result).toBe(getServerPort());\n      expect(mockLog).toHaveBeenCalledWith(\n        `Server discovered on port ${getServerPort()}`\n      );\n    });\n\n    it("findServerPort should return null when no server found", async () => {\n      const mockDiscover = jest.fn().mockResolvedValue(null);\n      const mockStorage = {\n        getConfig: jest.fn(),\n        setConfig: jest.fn(),\n        getPort: jest.fn(),\n        getHistory: jest.fn(),\n        clearHistory: jest.fn(),\n      };\n      const mockCheckStatus = jest.fn();\n      const mockLog = jest.fn();\n      const mockWarn = jest.fn();\n      const result = await findServerPort(true, {\n        discoverServerPort: mockDiscover,\n        storageService: mockStorage,\n        checkServerStatus: mockCheckStatus,\n        log: mockLog,\n        warn: mockWarn,\n      });\n      expect(result).toBeNull();\n      expect(mockWarn).toHaveBeenCalledWith(\n        "Server port discovery failed after scanning range."\n      );\n    });\n\n    it("findServerPort should handle network errors", async () => {\n      const mockDiscover = jest\n        .fn()\n        .mockRejectedValue(new Error("Network error"));\n      const mockStorage = {\n        getConfig: jest.fn(),\n        setConfig: jest.fn(),\n        getPort: jest.fn(),\n        getHistory: jest.fn(),\n        clearHistory: jest.fn(),\n      };\n      const mockCheckStatus = jest.fn();\n      const mockLog = jest.fn();\n      const mockWarn = jest.fn();\n\n      // The function should handle the error and return null\n      const result = await findServerPort(true, {\n        discoverServerPort: mockDiscover,\n        storageService: mockStorage,\n        checkServerStatus: mockCheckStatus,\n        log: mockLog,\n        warn: mockWarn,\n      });\n\n      expect(result).toBeNull();\n    });\n\n    it("findServerPort should handle badge updates when startScan is true", async () => {\n      const mockDiscover = jest.fn().mockResolvedValue(getServerPort());\n      const mockStorage = {\n        getConfig: jest.fn(),\n        setConfig: jest.fn(),\n        getPort: jest.fn(),\n        getHistory: jest.fn(),\n        clearHistory: jest.fn(),\n      };\n      const mockCheckStatus = jest.fn();\n      const mockLog = jest.fn();\n      const mockWarn = jest.fn();\n\n      // Mock chrome.action.setBadgeText to throw an error\n      // This line is removed as per the new_code, as the local mock is removed.\n      // The test will now rely on the global fetch error handling.\n\n      const result = await findServerPort(true, {\n        discoverServerPort: mockDiscover,\n        storageService: mockStorage,\n        checkServerStatus: mockCheckStatus,\n        log: mockLog,\n        warn: mockWarn,\n      });\n\n      expect(result).toBe(getServerPort());\n    });\n\n    it("findServerPort should handle progress updates", async () => {\n      const mockDiscover = jest.fn().mockResolvedValue(getServerPort());\n      const mockStorage = {\n        getConfig: jest.fn(),\n        setConfig: jest.fn(),\n        getPort: jest.fn(),\n        getHistory: jest.fn(),\n        clearHistory: jest.fn(),\n      };\n      const mockCheckStatus = jest.fn();\n      const mockLog = jest.fn();\n      const mockWarn = jest.fn();\n\n      // Mock chrome.action.setBadgeText to throw an error during progress\n      // This line is removed as per the new_code, as the local mock is removed.\n      // The test will now rely on the global fetch error handling.\n\n      const result = await findServerPort(true, {\n        discoverServerPort: mockDiscover,\n        storageService: mockStorage,\n        checkServerStatus: mockCheckStatus,\n        log: mockLog,\n        warn: mockWarn,\n      });\n\n      expect(result).toBe(getServerPort());\n    });\n  });\n\n  describe("Download Request", () => {\n    it("sendDownloadRequest should return empty object (stub implementation)", async () => {\n      const result = await sendDownloadRequest(\n        "https://youtube.com/watch?v=test"\n      );\n      expect(result).toEqual({});\n    });\n\n    it("sendDownloadRequest should handle different parameters", async () => {\n      const result = await sendDownloadRequest(\n        "https://youtube.com/watch?v=test",\n        getClientPort(),\n        true,\n        "1080", // Pass as string\n        "mp4",\n        "Test Video",\n        "custom-id"\n      );\n      expect(result).toEqual({});\n    });\n  });\n\n  describe("Theme Initialization", () => {\n    beforeEach(() => {\n      // Always reset matchMedia before each test in this block\n      mockSelf.matchMedia = jest.fn(() => ({\n        matches: false,\n        addEventListener: jest.fn(),\n        removeEventListener: jest.fn(),\n      }));\n    });\n\n    it("initializeActionIconTheme should set theme from storage", async () => {\n      // Mock the global chrome storage\n      (chrome.storage.local.get as jest.Mock).mockResolvedValueOnce({\n        theme: "dark",\n      });\n\n      await initializeActionIconTheme();\n\n      expect(chrome.storage.local.get).toHaveBeenCalledWith("theme");\n    });\n\n    it("initializeActionIconTheme should use system preference when no stored theme", async () => {\n      // Mock the global chrome storage\n      (chrome.storage.local.get as jest.Mock).mockResolvedValueOnce({});\n      mockSelf.matchMedia.mockReturnValueOnce({\n        matches: true, // Dark mode\n        addEventListener: jest.fn(),\n        removeEventListener: jest.fn(),\n      });\n\n      await initializeActionIconTheme();\n\n      expect(chrome.storage.local.get).toHaveBeenCalledWith("theme");\n    });\n\n    it("initializeActionIconTheme should handle system preference change listener", async () => {\n      // Mock the global chrome storage\n      (chrome.storage.local.get as jest.Mock).mockResolvedValueOnce({});\n      const mockAddEventListener = jest.fn();\n      mockSelf.matchMedia.mockReturnValueOnce({\n        matches: false, // Light mode\n        addEventListener: mockAddEventListener,\n        removeEventListener: jest.fn(),\n      });\n\n      await initializeActionIconTheme();\n\n      expect(mockAddEventListener).toHaveBeenCalledWith(\n        "change",\n        expect.any(Function)\n      );\n    });\n\n    it("initializeActionIconTheme should handle matchMedia not available", async () => {\n      // The original test had mockChrome.storage.local.get.mockResolvedValueOnce({});\n      // This line is removed as per the new_code, as the local mock is removed.\n      // The test will now rely on the global fetch error handling.\n      // Remove matchMedia property safely\n      delete (mockSelf as any).matchMedia;\n\n      await initializeActionIconTheme();\n\n      // Should not throw and should use default theme\n      // Restore matchMedia for following tests\n      mockSelf.matchMedia = jest.fn(() => ({\n        matches: false,\n        addEventListener: jest.fn(),\n        removeEventListener: jest.fn(),\n      }));\n    });\n\n    it("initializeActionIconTheme should handle theme change listener errors", async () => {\n      // The original test had mockChrome.storage.local.get.mockResolvedValueOnce({});\n      // This line is removed as per the new_code, as the local mock is removed.\n      // The test will now rely on the global fetch error handling.\n      const mockAddEventListener = jest.fn().mockImplementation(() => {\n        throw new Error("Listener error");\n      });\n      mockSelf.matchMedia.mockReturnValueOnce({\n        matches: false,\n        addEventListener: mockAddEventListener,\n        removeEventListener: jest.fn(),\n      });\n\n      await initializeActionIconTheme();\n\n      // Should not throw\n    });\n  });\n\n  describe("Queue Persistence", () => {\n    it("persistQueue should save queue to storage", async () => {\n      downloadQueue.push("video1", "video2");\n\n      await persistQueue();\n\n      expect(chrome.storage.local.set).toHaveBeenCalledWith({\n        downloadQueue: ["video1", "video2"],\n      });\n    });\n\n    it("persistQueue should handle storage errors gracefully", async () => {\n      (chrome.storage.local.set as jest.Mock).mockRejectedValueOnce(\n        new Error("Storage full")\n      );\n\n      // Should not throw\n      await expect(persistQueue()).resolves.toBeUndefined();\n    });\n\n    it("persistQueue should handle empty queue", async () => {\n      await persistQueue();\n\n      expect(chrome.storage.local.set).toHaveBeenCalledWith({\n        downloadQueue: [],\n      });\n    });\n  });\n\n  describe("Error Handling", () => {\n    it("should handle Chrome API errors gracefully", async () => {\n      (chrome.storage.local.set as jest.Mock).mockRejectedValueOnce(\n        new Error("Chrome API error")\n      );\n\n      // Should not throw\n      await expect(persistQueue()).resolves.toBeUndefined();\n    });\n\n    it("should handle fetch errors in server operations", async () => {\n      mockFetch.mockRejectedValueOnce(new Error("Fetch failed"));\n\n      const result = await checkServerStatus(getServerPort());\n      expect(result).toBe(false);\n    });\n  });\n\n  describe("API Service Functions", () => {\n    it("fetchServerConfig should return config from server", async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: jest.fn().mockResolvedValue({\n          port: getServerPort(),\n          download_dir: "/downloads",\n        }),\n      });\n\n      const result = await fetchServerConfig(getServerPort());\n      expect(result).toEqual({\n        port: getServerPort(),\n        download_dir: "/downloads",\n      });\n      expect(mockFetch).toHaveBeenCalledWith(\n        `http://127.0.0.1:${getServerPort()}/api/config`\n      );\n    });\n\n    it("fetchServerConfig should return empty object on fetch error", async () => {\n      mockFetch.mockRejectedValueOnce(new Error("Network error"));\n\n      const result = await fetchServerConfig(getServerPort());\n      expect(result).toEqual({});\n    });\n\n    it("fetchServerConfig should return empty object on non-ok response", async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: false,\n        statusText: "Not Found",\n      });\n\n      const result = await fetchServerConfig(getServerPort());\n      expect(result).toEqual({});\n    });\n  });\n\n  describe("Utility Functions", () => {\n    it("log should call console.log with BG prefix", () => {\n      log("test message", "extra");\n      expect(mockConsole.log).toHaveBeenCalledWith(\n        "[BG]",\n        "test message",\n        "extra"\n      );\n    });\n\n    it("warn should call console.warn with BG Warning prefix", () => {\n      warn("warning message");\n      expect(mockConsole.warn).toHaveBeenCalledWith(\n        "[BG Warning]",\n        "warning message"\n      );\n    });\n\n    it("error should call console.error with BG Error prefix", () => {\n      error("error message");\n      expect(mockConsole.error).toHaveBeenCalledWith(\n        "[BG Error]",\n        "error message"\n      );\n    });\n\n    it("debounce should delay execution", () => {\n      jest.useFakeTimers();\n      const fn = jest.fn();\n      const debounced = debounce(fn, 1000);\n\n      debounced(1, 2);\n      expect(fn).not.toHaveBeenCalled();\n\n      jest.advanceTimersByTime(1000);\n      expect(fn).toHaveBeenCalledWith(1, 2);\n\n      jest.useRealTimers();\n    });\n\n    it("applyThemeToActionIcon should set dark theme icons", () => {\n      applyThemeToActionIcon("dark");\n      expect(chrome.action.setIcon).toHaveBeenCalledWith(\n        expect.objectContaining({ path: actionIconPaths.dark }),\n        expect.any(Function)\n      );\n    });\n\n    it("applyThemeToActionIcon should fall back to light on invalid theme", () => {\n      applyThemeToActionIcon("unknown" as any);\n      expect(chrome.action.setIcon).toHaveBeenCalledWith(\n        expect.objectContaining({ path: actionIconPaths.light }),\n        expect.any(Function)\n      );\n    });\n  });\n\n  describe("Queue Management", () => {\n    it("persistQueue should save queue to storage", async () => {\n      // Use the actual downloadQueue from the background module\n      downloadQueue.length = 0;\n      downloadQueue.push("video1", "video2");\n\n      await persistQueue();\n      expect(chrome.storage.local.set).toHaveBeenCalledWith({\n        downloadQueue: ["video1", "video2"],\n      });\n    });\n\n    it("persistQueue should handle storage errors gracefully", async () => {\n      (chrome.storage.local.set as jest.Mock).mockRejectedValueOnce(\n        new Error("Storage full")\n      );\n\n      await persistQueue();\n      expect(mockConsole.warn).toHaveBeenCalledWith(\n        "[BG Warning]",\n        "Failed to persist download queue:",\n        expect.any(Error)\n      );\n    });\n  });\n});\n\n// Constants from background.ts (these would normally be imported)\nconst _historyStorageKey = "downloadHistory";\nconst _historyEnabledKey = "isHistoryEnabled";\nconst _queueStorageKey = "downloadQueue";\nconst networkStatusKey = "networkOnlineStatus";\n',
          },
          "tests/extension/background.util.test.js": {
            tests: [
              {
                id: "451",
                name: "debounce delays execution",
                location: { start: { column: 4, line: 9 } },
              },
              {
                id: "452",
                name: "log, warn, error log calls console.log with [BG] prefix",
                location: { start: { column: 4, line: 25 } },
              },
              {
                id: "453",
                name: "log, warn, error warn calls console.warn with [BG] prefix",
                location: { start: { column: 4, line: 29 } },
              },
              {
                id: "454",
                name: "log, warn, error error calls console.error with [BG] prefix",
                location: { start: { column: 4, line: 33 } },
              },
              {
                id: "455",
                name: "applyThemeToActionIcon sets dark theme icons",
                location: { start: { column: 4, line: 40 } },
              },
              {
                id: "456",
                name: "applyThemeToActionIcon falls back to light on invalid theme",
                location: { start: { column: 4, line: 47 } },
              },
            ],
            source:
              '/* eslint-env jest */\n\n// Use the global chrome mock from jest.setup.js\nimport * as bg from "extension/src/background";\n\ndescribe("debounce", () => {\n  jest.useFakeTimers();\n  it("delays execution", () => {\n    const fn = jest.fn();\n    const debounced = bg.debounce(fn, 1000);\n    debounced(1, 2);\n    expect(fn).not.toHaveBeenCalled();\n    jest.advanceTimersByTime(1000);\n    expect(fn).toHaveBeenCalledWith(1, 2);\n  });\n});\n\ndescribe("log, warn, error", () => {\n  beforeEach(() => {\n    jest.spyOn(console, "log").mockImplementation(() => {});\n    jest.spyOn(console, "warn").mockImplementation(() => {});\n    jest.spyOn(console, "error").mockImplementation(() => {});\n  });\n  it("log calls console.log with [BG] prefix", () => {\n    bg.log("hello");\n    expect(console.log).toHaveBeenCalledWith("[BG]", "hello");\n  });\n  it("warn calls console.warn with [BG] prefix", () => {\n    bg.warn("warn");\n    expect(console.warn).toHaveBeenCalledWith("[BG Warning]", "warn");\n  });\n  it("error calls console.error with [BG] prefix", () => {\n    bg.error("oops");\n    expect(console.error).toHaveBeenCalledWith("[BG Error]", "oops");\n  });\n});\n\ndescribe("applyThemeToActionIcon", () => {\n  it("sets dark theme icons", () => {\n    bg.applyThemeToActionIcon("dark");\n    expect(chrome.action.setIcon).toHaveBeenCalledWith(\n      expect.objectContaining({ path: bg.actionIconPaths.dark }),\n      expect.any(Function)\n    );\n  });\n  it("falls back to light on invalid theme", () => {\n    bg.applyThemeToActionIcon("unknown");\n    expect(chrome.action.setIcon).toHaveBeenCalledWith(\n      expect.objectContaining({ path: bg.actionIconPaths.light }),\n      expect.any(Function)\n    );\n  });\n});\n',
          },
          "extension/src/__tests__/background-queue.test.ts": {
            tests: [
              {
                id: "457",
                name: "persistQueue persists the downloadQueue to chrome.storage",
                location: { start: { column: 4, line: 10 } },
              },
              {
                id: "458",
                name: "persistQueue handles errors without throwing",
                location: { start: { column: 4, line: 18 } },
              },
            ],
            source:
              'import { persistQueue, downloadQueue } from "../background";\n\ndescribe("persistQueue", () => {\n  beforeEach(() => {\n    // Use the global chrome mock from jest.setup.js\n    // Reset queue\n    downloadQueue.length = 0;\n  });\n\n  it("persists the downloadQueue to chrome.storage", async () => {\n    downloadQueue.push("video1");\n    await persistQueue();\n    expect(chrome.storage.local.set as jest.Mock).toHaveBeenCalledWith({\n      downloadQueue: ["video1"],\n    });\n  });\n\n  it("handles errors without throwing", async () => {\n    (chrome.storage.local.set as jest.Mock).mockImplementation(() =>\n      Promise.reject(new Error("fail"))\n    );\n    await expect(persistQueue()).resolves.toBeUndefined();\n  });\n});\n',
          },
        },
        projectRoot: "/Users/josephording/myscripts/Enhanced Video Downloader",
        config: {
          packageManager: "npm",
          reporters: ["html", "clear-text", "progress"],
          testRunner: "jest",
          coverageAnalysis: "perTest",
          allowEmpty: true,
          inPlace: true,
          disableTypeChecks: true,
          jest: {
            configFile: "jest.config.js",
            projectType: "custom",
            enableFindRelatedTests: false,
          },
          mutate: ["extension/src/background-logic.ts"],
          thresholds: { high: 80, low: 60, break: 70 },
          timeoutMS: 3000,
          concurrency: 6,
          maxTestRunnerReuse: 20,
          ignoreStatic: true,
          logLevel: "info",
          tempDirName: ".stryker-tmp",
          symlinkNodeModules: false,
          ignorePatterns: [
            "**/node_modules/**",
            "**/.venv/**",
            "**/venv/**",
            "**/htmlcov/**",
            "**/coverage/**",
            "**/mutants/**",
            "**/build/**",
            "**/dist/**",
            "**/*.html",
            "**/*.css",
            "**/*.json",
          ],
          allowConsoleColors: true,
          checkers: [],
          checkerNodeArgs: [],
          commandRunner: { command: "npm test" },
          clearTextReporter: {
            allowColor: true,
            allowEmojis: false,
            logTests: true,
            maxTestsToLog: 3,
            reportTests: true,
            reportMutants: true,
            reportScoreTable: true,
            skipFull: false,
          },
          dashboard: {
            baseUrl: "https://dashboard.stryker-mutator.io/api/reports",
            reportType: "full",
          },
          dryRunOnly: false,
          eventReporter: { baseDir: "reports/mutation/events" },
          incremental: false,
          incrementalFile: "reports/stryker-incremental.json",
          force: false,
          fileLogLevel: "off",
          maxConcurrentTestRunners: 9007199254740991,
          mutator: { plugins: null, excludedMutations: [] },
          plugins: ["@stryker-mutator/*"],
          appendPlugins: [],
          htmlReporter: { fileName: "reports/mutation/mutation.html" },
          jsonReporter: { fileName: "reports/mutation/mutation.json" },
          cleanTempDir: true,
          testRunnerNodeArgs: [],
          timeoutFactor: 1.5,
          dryRunTimeoutMinutes: 5,
          tsconfigFile: "tsconfig.json",
          warnings: true,
          disableBail: false,
          ignorers: [],
          typescriptChecker: { prioritizePerformanceOverAccuracy: true },
        },
        framework: {
          name: "StrykerJS",
          version: "9.0.1",
          branding: {
            homepageUrl: "https://stryker-mutator.io",
            imageUrl:
              "data:image/svg+xml;utf8,%3Csvg viewBox='0 0 1458 1458' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='2'%3E%3Cpath fill='none' d='M0 0h1458v1458H0z'/%3E%3CclipPath id='a'%3E%3Cpath d='M0 0h1458v1458H0z'/%3E%3C/clipPath%3E%3Cg clip-path='url(%23a)'%3E%3Cpath d='M1458 729c0 402.655-326.345 729-729 729S0 1131.655 0 729C0 326.445 326.345 0 729 0s729 326.345 729 729' fill='%23e74c3c' fill-rule='nonzero'/%3E%3Cpath d='M778.349 1456.15L576.6 1254.401l233-105 85-78.668v-64.332l-257-257-44-187-50-208 251.806-82.793L1076.6 389.401l380.14 379.15c-19.681 367.728-311.914 663.049-678.391 687.599z' fill-opacity='.3'/%3E%3Cpath d='M753.4 329.503c41.79 0 74.579 7.83 97.925 25.444 23.571 18.015 41.69 43.956 55.167 77.097l11.662 28.679 165.733-58.183-14.137-32.13c-26.688-60.655-64.896-108.61-114.191-144.011-49.329-35.423-117.458-54.302-204.859-54.302-50.78 0-95.646 7.376-134.767 21.542-40.093 14.671-74.09 34.79-102.239 60.259-28.84 26.207-50.646 57.06-65.496 92.701-14.718 35.052-22.101 72.538-22.101 112.401 0 72.536 20.667 133.294 61.165 182.704 38.624 47.255 98.346 88.037 179.861 121.291 42.257 17.475 78.715 33.125 109.227 46.994 27.193 12.361 49.294 26.124 66.157 41.751 15.309 14.186 26.497 30.584 33.63 49.258 7.721 20.214 11.16 45.69 11.16 76.402 0 28.021-4.251 51.787-13.591 71.219-8.832 18.374-20.171 33.178-34.523 44.219-14.787 11.374-31.193 19.591-49.393 24.466-19.68 5.359-39.14 7.993-58.69 7.993-29.359 0-54.387-3.407-75.182-10.747-20.112-7.013-37.144-16.144-51.259-27.486-13.618-11.009-24.971-23.766-33.744-38.279-9.64-15.8-17.272-31.924-23.032-48.408l-10.965-31.376-161.669 60.585 10.734 30.124c10.191 28.601 24.197 56.228 42.059 82.748 18.208 27.144 41.322 51.369 69.525 72.745 27.695 21.075 60.904 38.218 99.481 51.041 37.777 12.664 82.004 19.159 132.552 19.159 49.998 0 95.818-8.321 137.611-24.622 42.228-16.471 78.436-38.992 108.835-67.291 30.719-28.597 54.631-62.103 71.834-100.642 17.263-38.56 25.923-79.392 25.923-122.248 0-54.339-8.368-100.37-24.208-138.32-16.29-38.759-38.252-71.661-65.948-98.797-26.965-26.418-58.269-48.835-93.858-67.175-33.655-17.241-69.196-33.11-106.593-47.533-35.934-13.429-65.822-26.601-89.948-39.525-22.153-11.868-40.009-24.21-53.547-37.309-11.429-11.13-19.83-23.678-24.718-37.664-5.413-15.49-7.98-33.423-7.98-53.577 0-40.883 11.293-71.522 37.086-90.539 28.443-20.825 64.985-30.658 109.311-30.658z' fill='%23f1c40f' fill-rule='nonzero'/%3E%3Cpath d='M720 0h18v113h-18zM1458 738v-18h-113v18h113zM720 1345h18v113h-18zM113 738v-18H0v18h113z'/%3E%3C/g%3E%3C/svg%3E",
          },
          dependencies: {
            "@stryker-mutator/jest-runner": "9.0.1",
            "@stryker-mutator/typescript-checker": "9.0.1",
            jest: "29.7.0",
            typescript: "5.8.3",
            "ts-jest": "29.3.4",
          },
        },
      };
      function updateTheme() {
        document.body.style.backgroundColor = app.themeBackgroundColor;
      }
      app.addEventListener("theme-changed", updateTheme);
      updateTheme();
    </script>
  </body>
</html>
